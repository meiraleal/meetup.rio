const FILE_BUNDLE={"/admin/bundler":{content:`<!DOCTYPE html>
<html lang="en">
<head>
	<script src="/$app/base/bootstrapp.js" type="module"><\/script>
  <meta charset="utf-8" />
  <title>meetup.rio</title>
  <base href="/" />
  <meta name="viewport"
    content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
  <meta name="description" content="Discover Rio de Janeiro - Places, Events, and Things to Do" />
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#181818" />
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f3f3f3" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-title" content="meetup.rio" />
  <meta name="mobile-web-app-status-bar-style" content="black" />
  <link id="favicon" rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLW1hcC1waW4iPjxwYXRoIGQ9Ik0yMCAxMGMwIDQuOTkzLTUuNTM5IDEwLjE5My03LjM5OSAxMS43OTlhMSAxIDAgMCAxLTEuMjAyIDBDOS41MzkgMjAuMTkzIDQgMTQuOTkzIDQgMTBhOCA4IDAgMCAxIDE2IDAiLz48Y2lyY2xlIGN4PSIxMiIgY3k9IjEwIiByPSIzIi8+PC9zdmc+"/>
  <link rel="manifest" href="manifest.json" />
</head>
<body style="--text-color: #333;">
  <app-container class="w-full bg-yellow-50 min-h-screen"></view-container>
</body>
</html>
`,mimeType:"text/html"},"/admin/models/users":{content:`<!DOCTYPE html>
<html lang="en">
<head>
	<script src="/$app/base/bootstrapp.js" type="module"><\/script>
  <meta charset="utf-8" />
  <title>meetup.rio</title>
  <base href="/" />
  <meta name="viewport"
    content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
  <meta name="description" content="Discover Rio de Janeiro - Places, Events, and Things to Do" />
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#181818" />
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f3f3f3" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-title" content="meetup.rio" />
  <meta name="mobile-web-app-status-bar-style" content="black" />
  <link id="favicon" rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLW1hcC1waW4iPjxwYXRoIGQ9Ik0yMCAxMGMwIDQuOTkzLTUuNTM5IDEwLjE5My03LjM5OSAxMS43OTlhMSAxIDAgMCAxLTEuMjAyIDBDOS41MzkgMjAuMTkzIDQgMTQuOTkzIDQgMTBhOCA4IDAgMCAxIDE2IDAiLz48Y2lyY2xlIGN4PSIxMiIgY3k9IjEwIiByPSIzIi8+PC9zdmc+"/>
  <link rel="manifest" href="manifest.json" />
</head>
<body style="--text-color: #333;">
  <app-container class="w-full bg-yellow-50 min-h-screen"></view-container>
</body>
</html>
`,mimeType:"text/html"},"/admin/theme":{content:`<!DOCTYPE html>
<html lang="en">
<head>
	<script src="/$app/base/bootstrapp.js" type="module"><\/script>
  <meta charset="utf-8" />
  <title>meetup.rio</title>
  <base href="/" />
  <meta name="viewport"
    content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
  <meta name="description" content="Discover Rio de Janeiro - Places, Events, and Things to Do" />
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#181818" />
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f3f3f3" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-title" content="meetup.rio" />
  <meta name="mobile-web-app-status-bar-style" content="black" />
  <link id="favicon" rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLW1hcC1waW4iPjxwYXRoIGQ9Ik0yMCAxMGMwIDQuOTkzLTUuNTM5IDEwLjE5My03LjM5OSAxMS43OTlhMSAxIDAgMCAxLTEuMjAyIDBDOS41MzkgMjAuMTkzIDQgMTQuOTkzIDQgMTBhOCA4IDAgMCAxIDE2IDAiLz48Y2lyY2xlIGN4PSIxMiIgY3k9IjEwIiByPSIzIi8+PC9zdmc+"/>
  <link rel="manifest" href="manifest.json" />
</head>
<body style="--text-color: #333;">
  <app-container class="w-full bg-yellow-50 min-h-screen"></view-container>
</body>
</html>
`,mimeType:"text/html"},"/$app/uix/docs/showcase.js":{content:`/**
 * UIX Component Showcase
 * Interactive component library viewer with lazy loading
 */

import Theme from "/$app/theme/index.js";
import T from "/$app/types/index.js";
import View from "/$app/view/index.js";
import { html, nothing } from "/npm/lit-html";
import { unsafeHTML } from "/npm/lit-html/directives/unsafe-html.js";
import { html as staticHTML, unsafeStatic } from "/npm/lit-html/static.js";
import {
  getComponentList,
  getDefaultValues,
  loadComponent,
} from "../utils/component-registry.js";
import "./showcase-sidebar.js";
import "./showcase-property-editor.js";
import "./showcase-code-viewer.js";
import "./theme-generator.js";

const ShowcaseDefinition = {
  tag: "uix-showcase",
  style: true,
  properties: {
    selectedCategory: T.string({ sync: "querystring" }),
    selectedComponentName: T.string({ sync: "querystring" }),
    selectedResourcePage: T.string({ sync: "querystring" }),
    currentTheme: T.string("gruvbox-dark"),
    componentList: T.object(),
    selectedComponent: T.string(),
    loading: T.boolean(),
    error: T.string(),
    liveProps: T.object(),
  },
  connected() {
    this.componentList = getComponentList();
    if (this.selectedComponentName)
      this._handleComponentSelect({
        detail: {
          type: "component",
          category: this.selectedCategory,
          name: this.selectedComponentName,
        },
      });
  },

  async _handleComponentSelect({ detail }) {
    const { type, category, name, page } = detail;

    // Handle resource page selection
    if (type === "resource") {
      this.selectedResourcePage = page;
      this.selectedCategory = null;
      this.selectedComponentName = null;
      this.selectedComponent = null;
      return;
    }

    // Handle component selection
    if (
      this.selectedCategory === category &&
      this.selectedComponentName === name &&
      this.selectedComponent
    ) {
      return;
    }

    this.selectedResourcePage = null;
    this.selectedCategory = category;
    this.selectedComponentName = name;
    this.selectedComponent = null;
    this.loading = true;
    this.error = null;

    try {
      // Lazy load the component
      const metadata = await loadComponent(category, name);

      this.selectedComponent = {
        name,
        category,
        ...metadata,
      };

      // Initialize live props with defaults
      this.liveProps = getDefaultValues(metadata.properties);
    } catch (err) {
      console.error("Failed to load component:", err);
      this.error = err.message;
    } finally {
      this.loading = false;
    }
  },

  _handlePropertyChange({ detail }) {
    const { key, value } = detail;
    this.liveProps = {
      ...this.liveProps,
      [key]: value,
    };
  },

  _handleReset() {
    if (this.selectedComponent) {
      this.liveProps = getDefaultValues(this.selectedComponent.properties);
    }
  },

  _handleThemeChange(themeName) {
    Theme.loadTheme(themeName);
  },

  renderLiveComponent() {
    if (!this.selectedComponent) return nothing;

    const { tag } = this.selectedComponent;
    const props = this.liveProps;

    // Build attributes string
    const attributes = Object.entries(props)
      .map(([key, value]) => {
        if (value === undefined || value === null) return "";
        if (typeof value === "boolean") {
          return value ? key : "";
        }
        if (typeof value === "string" || typeof value === "number") {
          return \`\${key}="\${value}"\`;
        }
        return "";
      })
      .filter(Boolean)
      .join(" ");

    // Render component dynamically
    try {
      return staticHTML\`
        <\${unsafeStatic(tag)} \${unsafeStatic(attributes)}>
          \${this.renderComponentSlotContent(tag)}
        </\${unsafeStatic(tag)}>
      \`;
    } catch (err) {
      return html\`<div class="preview-error">Failed to render component</div>\`;
    }
  },

  renderComponentSlotContent(tag) {
    // Provide default slot content based on component type
    if (tag.includes("button")) {
      return "Click me";
    }
    if (tag.includes("input")) {
      return nothing;
    }
    if (tag.includes("badge")) {
      return "Badge";
    }
    if (tag.includes("modal")) {
      return html\`
        <div slot="header">Modal Header</div>
        <p>Modal content goes here...</p>
        <div slot="footer">
          <uix-button>Cancel</uix-button>
          <uix-button variant="primary">OK</uix-button>
        </div>
      \`;
    }
    return "Component content";
  },

  renderComponentInfo() {
    if (!this.selectedComponent) return nothing;

    const { hasShadow, parts = [], slots = [] } = this.selectedComponent;
    const hasInfo =
      hasShadow !== undefined || parts.length > 0 || slots.length > 0;

    if (!hasInfo) return nothing;

    return html\`
      <uix-card variant="elevated" padding="lg">
        <h3 slot="header">Component Information</h3>
        <uix-grid cols="repeat(auto-fit,minmax(300px,1fr))" gap="md">
          \${
            hasShadow !== undefined
              ? html\`
            <uix-card variant="filled" padding="md">
              <uix-flex direction="column" gap="sm">
                <uix-text size="sm" weight="semibold">Shadow DOM</uix-text>
                <div>
                  \${
                    hasShadow
                      ? html\`<uix-badge variant="success" size="sm">Enabled</uix-badge>\`
                      : html\`<uix-badge variant="default" size="sm">Disabled</uix-badge>\`
                  }
                </div>
              </uix-flex>
            </uix-card>
          \`
              : nothing
          }

          \${
            slots.length > 0
              ? html\`
            <uix-card variant="filled" padding="md">
              <uix-flex direction="column" gap="sm">
                <uix-text size="sm" weight="semibold">Slots</uix-text>
                <div>
                  <uix-list variant="unstyled" spacing="sm">
                    \${slots.map(
                      (slot) => html\`
                      <uix-list-item>
                        <uix-flex align="baseline" gap="xs">
                          <uix-text size="xs" weight="semibold" mono style="background: var(--color-surface-darker); padding: 2px 6px; border-radius: 3px;">\${slot.name}</uix-text>
                          \${slot.description ? html\`<uix-text size="xs">- \${slot.description}</uix-text>\` : nothing}
                        </uix-flex>
                      </uix-list-item>
                    \`,
                    )}
                  </uix-list>
                </div>
              </uix-flex>
            </uix-card>
          \`
              : nothing
          }

          \${
            parts.length > 0
              ? html\`
            <uix-card variant="filled" padding="md">
              <uix-flex direction="column" gap="sm">
                <uix-text size="sm" weight="semibold">CSS Parts</uix-text>
                <div>
                  <uix-list variant="unstyled" spacing="sm">
                    \${parts.map(
                      (part) => html\`
                      <uix-list-item>
                        <uix-flex align="baseline" gap="xs">
                          <uix-text size="xs" weight="semibold" mono style="background: var(--color-surface-darker); padding: 2px 6px; border-radius: 3px;">\${part.name}</uix-text>
                          \${part.description ? html\`<uix-text size="xs">- \${part.description}</uix-text>\` : nothing}
                        </uix-flex>
                      </uix-list-item>
                    \`,
                    )}
                  </uix-list>
                </div>
              </uix-flex>
            </uix-card>
          \`
              : nothing
          }
        </uix-grid>
      </uix-card>
    \`;
  },

  executeJavaScript(code) {
    try {
      // Create context with Lit imports
      const context = { html, unsafeHTML, nothing };

      // Execute code with controlled scope
      const fn = new Function(...Object.keys(context), \`return (\${code})\`);
      const result = fn(...Object.values(context));

      return { success: true, result };
    } catch (error) {
      return { success: false, error: error.message };
    }
  },

  renderExamples() {
    if (!this.selectedComponent?.examples?.length) return nothing;

    return html\`
      <uix-card variant="outlined" padding="lg" style="margin-bottom: 24px;">
        <uix-heading level="3" size="lg">Examples</uix-heading>
        <uix-flex direction="column" gap="lg">
          \${this.selectedComponent.examples.map(
            (example, idx) => html\`
            <uix-card variant="elevated" padding="lg">
              <uix-heading level="4" size="base" slot="header">\${example.title}</uix-heading>
              \${
                example.description
                  ? html\`
                <uix-text size="sm" style="line-height: 1.6;">\${example.description}</uix-text>
              \`
                  : nothing
              }
              <uix-flex direction="column" gap="sm">
                \${example.codeBlocks.map((block) => {
                  const isJavaScript =
                    block.language === "js" || block.language === "javascript";
                  if (isJavaScript) {
                    const execution = this.executeJavaScript(block.code);

                    return html\`
                      <uix-flex>
                        <div flex-1 style="padding: 16px;">
                          \${
                            execution.success
                              ? execution.result
                              : html\`<uix-text text="danger">Error: \${execution.error}</uix-text>\`
                          }
                        </div>
                        <uix-code style="max-height: 600px;" flex-1 language=\${block.language} .content=\${block.code} readonly></uix-code>
                      </uix-flex>
                    \`;
                  }

                  return html\`
                    <uix-flex>
                      <div flex-1 style="padding: 16px;">\${unsafeHTML(block.code)}</div>
                      <uix-code style="max-height: 600px;" flex-1 language=\${block.language} .content=\${block.code} readonly></uix-code>
                    </uix-flex>
                  \`;
                })}
              </uix-flex>
            </uix-card>
          \`,
          )}
        </uix-flex>
      </uix-card>
    \`;
  },

  renderResourcePage() {
    if (this.selectedResourcePage === "theme-generator")
      return html\`<uix-theme-generator></uix-theme-generator>\`;

    return html\`
      <div style="max-width: 800px; margin: 0 auto;">
        <uix-heading level="1" size="3xl" style="margin-bottom: 24px; text-transform: capitalize;">\${this.selectedResourcePage}</uix-heading>
        <uix-card variant="filled" padding="lg">
          <p>
            Documentation for <strong>\${this.selectedResourcePage}</strong> coming soon...
          </p>
        </uix-card>
      </div>
    \`;
  },

  renderMainContent() {
    // Resource page view
    if (this.selectedResourcePage) {
      return this.renderResourcePage();
    }

    // Empty state
    if (!this.selectedCategory && !this.selectedComponentName) {
      return html\`
        <uix-flex direction="column" align="center" justify="center" gap="md" style="min-height: 400px; text-align: center;">
          <uix-icon name="package" style="width: 64px; height: 64px; opacity: 0.3;"></uix-icon>
          <uix-heading level="2" size="2xl">Select a component</uix-heading>
          <p>Choose a component from the sidebar to view its details and properties</p>
        </uix-flex>
      \`;
    }

    // Loading state
    if (this.loading) {
      return html\`
        <uix-flex direction="column" align="center" justify="center" gap="md" style="min-height: 400px; text-align: center;">
          <uix-spinner size="lg"></uix-spinner>
          <p>Loading \${this.selectedComponentName}...</p>
        </uix-flex>
      \`;
    }

    // Error state
    if (this.error) {
      return html\`
        <uix-flex direction="column" align="center" justify="center" gap="md" style="min-height: 400px; text-align: center;">
          <uix-icon name="alert-circle" color="danger" style="width: 48px; height: 48px;"></uix-icon>
          <uix-heading level="3" size="xl">Failed to load component</uix-heading>
          <p>\${this.error}</p>
        </uix-flex>
      \`;
    }

    // Component loaded
    if (!this.selectedComponent) return nothing;

    const { tag, properties } = this.selectedComponent;

    return html\`
      <uix-flex direction="column" gap="lg" style="max-width: 1200px; margin: 0 auto; padding: 24px;">
        <div>
          <uix-flex align="center" gap="md">
            <uix-heading level="1" size="2xl">&lt;\${tag}&gt;</uix-heading>
            <uix-badge variant="info" size="sm">\${this.selectedCategory}</uix-badge>
          </uix-flex>
        </div>

        \${this.renderComponentInfo()}

        <uix-card variant="elevated" padding="lg">
          <uix-showcase-property-editor
            .properties=\${properties}
            .values=\${this.liveProps}
            @property-change=\${this._handlePropertyChange}
            @reset=\${this._handleReset}
          ></uix-showcase-property-editor>
        </uix-card>

        \${this.renderExamples()}

        <uix-card variant="elevated" padding="lg">
          <h3 slot="header">Generated Code</h3>
          <uix-showcase-code-viewer
            .tag=\${tag}
            .props=\${this.liveProps}
            .category=\${this.selectedCategory}
            .name=\${this.selectedComponentName}
          ></uix-showcase-code-viewer>
        </uix-card>
      </uix-flex>
    \`;
  },

  render() {
    const availableThemes = Theme.availableThemes || {};

    return html\`
      <uix-split-pane direction="vertical"  initialSize="50px" minSize="50px" style="height: 100vh;">
        <uix-flex w-full slot="primary" justify="space-between" align="center" style="padding: 12px 16px;">
          <uix-flex align="center" gap="sm">
            <uix-icon name="package"></uix-icon>
            <uix-heading level="1" size="xl">UIX Components</uix-heading>
          </uix-flex>
          <uix-flex align="center" gap="sm">
            <uix-text size="sm">Theme</uix-text>
            <uix-select
              value=\${this.currentTheme}
              .options=\${Object.keys(availableThemes)}
              @change=\${(e) => !this._handleThemeChange(e.target.value)}
            ></uix-select>
          </uix-flex>
        </uix-flex>
        <uix-split-pane slot="secondary" initialSize="280px" minSize="280px">
          <uix-showcase-sidebar slot="primary"
            .componentList=\${this.componentList}
            @select=\${this._handleComponentSelect}
            flex-1
          ></uix-showcase-sidebar>
          <div slot="secondary" flex-1>
            \${this.renderMainContent()}
          </div>
        </uix-split-pane>
      </uix-split-pane>
    \`;
  },
};

View.define("uix-showcase", ShowcaseDefinition);

export default ShowcaseDefinition;
`,mimeType:"text/javascript"},"/$app/uix/utils/component-registry.js":{content:`/**
 * UIX Component Registry
 * Provides component list and lazy-loads component modules on-demand
 */

import UIX from "/$app/uix/index.js";
import {
  extractDescription,
  extractExamplesFromComments,
  extractMetadataTags,
  extractParts,
  extractSlots,
} from "./example-parser.js";

// Cache for loaded component modules
const componentCache = new Map();

/**
 * Get lightweight component list from uix module
 * Returns component names organized by category
 */
export function getComponentList() {
  if (!UIX?.components) {
    console.warn("UIX module not loaded or no components found");
    return {};
  }

  return UIX.components;
}

/**
 * Lazy load a specific component module
 * @param {string} category - Component category (display, form, overlay, etc.)
 * @param {string} name - Component name (button, input, modal, etc.)
 * @returns {Promise<Object>} Component metadata
 */
export async function loadComponent(category, name) {
  const cacheKey = \`\${category}:\${name}\`;

  // Return cached component if already loaded
  if (componentCache.has(cacheKey)) {
    return componentCache.get(cacheKey);
  }

  try {
    // Dynamically import the component module
    const module = await import(
      \`/$app/uix/\${category}/\${name}.js\`
    );

    // Fetch source code for parsing comments
    const sourceUrl = \`/$app/uix/\${category}/\${name}.js\`;
    const response = await fetch(sourceUrl);
    const sourceCode = await response.text();

    // Extract metadata from component definition
    const metadata = extractMetadata(module.default, name);

    // Parse examples and description from JSDoc comments
    const examples = extractExamplesFromComments(sourceCode);
    const description = extractDescription(sourceCode);
    const docMetadata = extractMetadataTags(sourceCode);
    const parts = extractParts(sourceCode);
    const slots = extractSlots(sourceCode);

    // Combine all metadata
    const result = {
      ...metadata,
      examples,
      description,
      parts,
      slots,
      ...docMetadata,
    };

    // Cache the result
    componentCache.set(cacheKey, result);

    return result;
  } catch (error) {
    console.error(\`Failed to load component \${category}/\${name}:\`, error);
    throw new Error(\`Component not found or failed to load: \${name}\`);
  }
}

/**
 * Extract metadata from component definition
 * @param {Object} componentDef - Component definition object
 * @param {string} name - Component name
 * @returns {Object} Extracted metadata
 */
function extractMetadata(componentDef, name) {
  if (!componentDef) {
    throw new Error("Invalid component definition");
  }

  const properties = {};

  // Extract property definitions
  if (componentDef.properties) {
    for (const [key, typeDef] of Object.entries(componentDef.properties)) {
      properties[key] = extractPropertyMetadata(typeDef);
    }
  }

  return {
    tag: componentDef.tag || \`uix-\${name}\`,
    properties,
    hasStyle: componentDef.style === true,
    hasShadow: componentDef.shadow === true,
    i18n: componentDef.i18n || {},
    module: componentDef,
  };
}

/**
 * Extract metadata from a property type definition
 * @param {Object} typeDef - Type definition from T.*
 * @returns {Object} Property metadata
 */
function extractPropertyMetadata(typeDef) {
  // Handle simple default values (T.string("default"))
  if (
    typeof typeDef === "string" ||
    typeof typeDef === "number" ||
    typeof typeDef === "boolean"
  ) {
    return {
      type: typeof typeDef,
      defaultValue: typeDef,
    };
  }

  // Handle object-based type definitions
  if (typeDef && typeof typeDef === "object") {
    return {
      type: typeDef._type || "unknown",
      defaultValue: typeDef._defaultValue ?? typeDef.defaultValue,
      enum: typeDef._enum || typeDef.enum,
      required: typeDef._required || typeDef.required || false,
      attribute: typeDef._attribute ?? typeDef.attribute ?? true,
    };
  }

  return {
    type: "unknown",
    defaultValue: undefined,
  };
}

/**
 * Get default values for all properties
 * @param {Object} properties - Properties metadata
 * @returns {Object} Default values
 */
export function getDefaultValues(properties) {
  const defaults = {};

  for (const [key, metadata] of Object.entries(properties)) {
    if (metadata.defaultValue !== undefined) {
      defaults[key] = metadata.defaultValue;
    }
  }

  return defaults;
}

/**
 * Clear the component cache
 */
export function clearCache() {
  componentCache.clear();
}
`,mimeType:"text/javascript"},"/$app/uix/docs/showcase-sidebar.js":{content:`/**
 * UIX Showcase Sidebar
 * Navigation for component categories and components using UIX components
 */

import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";
import View from "/$app/view/index.js";

const resources = [
  { id: "installation", label: "Installation", icon: "download" },
  { id: "usage", label: "Usage", icon: "book-open" },
  { id: "themes", label: "Themes", icon: "droplet" },
  { id: "theme-generator", label: "Theme Generator", icon: "sliders-vertical" },
];
const categoryIcons = {
  display: "eye",
  form: "list-checks",
  overlay: "layers",
  layout: "layout-grid",
  navigation: "compass",
  feedback: "loader",
  utility: "pen-tool",
};

const ShowcaseSidebarDefinition = {
  tag: "uix-showcase-sidebar",
  properties: {
    componentList: T.object(), // Component categories and names
    selectedCategory: T.string({ sync: "querystring" }), // Currently selected category
    selectedComponent: T.string({ sync: "querystring" }), // Currently selected component
    selectedResourcePage: T.string({ sync: "querystring" }), // Currently selected resource page
    searchQuery: T.string(""), // Search filter
  },
  selectComponent(category, name) {
    this.emit("select", { type: "component", category, name });
  },
  selectResource(page) {
    this.emit("select", { type: "resource", page });
  },
  filterComponents(components, query) {
    if (!query) return components;
    const lowerQuery = query.toLowerCase();
    return components.filter((name) => name.toLowerCase().includes(lowerQuery));
  },
  getCategoryIcon(category) {
    return categoryIcons[category] || "package";
  },
  render() {
    if (!this.componentList || Object.keys(this.componentList).length === 0) {
      return html\`
        <div part="container" class="sidebar-container">
          <div class="empty-state">
            <p>No components found</p>
          </div>
        </div>
      \`;
    }

    return html\`
      <div part="container" class="sidebar-container">
        <!-- Search Input -->
        <uix-container part="search" padding="md">
            <uix-input
              w-full
              type="search"
              placeholder="Search components..."
              class="search-input"
              .value=\${this.searchQuery}
              @input=\${(e) => {
                this.searchQuery = e.target.value;
              }}
            >
            <uix-icon name="search"></uix-icon>
          </uix-input>
        </uix-container>

        <uix-accordion>
          <uix-nav-item
            prevent-collapse
            open
            icon="book"
            label="Resources"
          >
          </uix-nav-item>
          <uix-menu>
            \${resources.map(
              (resource) => html\`
                <uix-nav-item
                  icon=\${resource.icon}
                  label=\${resource.label}
                  size="sm"
                  ?active=\${this.selectedResourcePage === resource.id}
                  ?activeBg=\${this.selectedResourcePage === resource.id}
                  @nav-item-click=\${() => this.selectResource(resource.id)}
                ></uix-nav-item>
              \`,
            )}
          </uix-menu>

          <!-- Component Categories -->
          \${Object.entries(this.componentList).map(([category, components]) => {
            const filteredComponents = this.filterComponents(
              components,
              this.searchQuery,
            );
            const componentCount = filteredComponents.length;

            // Hide category if no matches after filtering
            if (componentCount === 0 && this.searchQuery) return null;

            const hasSelection = this.selectedCategory === category;

            return html\`
              <uix-nav-item
                ?open=\${hasSelection}
                icon=\${this.getCategoryIcon(category)}
                label=\${category}
                badge=\${componentCount}
                header
              >
              </uix-nav-item>
              <uix-menu>
                \${filteredComponents.map((name) => {
                  const isSelected =
                    this.selectedCategory === category &&
                    this.selectedComponent === name;

                  return html\`
                    <uix-nav-item
                      label=\${name}
                      size="sm"
                      ?active=\${isSelected}
                      ?activeBg=\${isSelected}
                      @nav-item-click=\${() =>
                        this.selectComponent(category, name)}
                    ></uix-nav-item>
                  \`;
                })}
              </uix-menu>
            \`;
          })}
        </uix-accordion>
      </div>
    \`;
  },
};

View.define("uix-showcase-sidebar", ShowcaseSidebarDefinition);

export default ShowcaseSidebarDefinition;
`,mimeType:"text/javascript"},"/$app/uix/docs/showcase-property-editor.js":{content:`/**
 * UIX Showcase Property Editor
 * Interactive controls to modify component properties in real-time
 */

import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";
import View from "/$app/view/index.js";

const ShowcasePropertyEditorDefinition = {
  tag: "uix-showcase-property-editor",
  properties: {
    properties: T.object(), // Component property metadata
    values: T.object(), // Current property values
  },

  handleChange(key, value) {
    // Emit change event to parent
    this.emit("property-change", { key, value });
  },

  renderPropertyControl(key, metadata) {
    const currentValue = this.values?.[key] ?? metadata.defaultValue;
    const { type, enum: enumValues, defaultValue } = metadata;

    // Helper for default value text
    const renderDefault = () =>
      defaultValue !== undefined
        ? html\`<uix-text size="xs" muted style="font-style: italic">default: \${defaultValue}</uix-text>\`
        : null;

    // Boolean: Toggle switch
    if (type === "boolean") {
      return html\`
        <uix-card variant="filled" padding="sm">
          <uix-grid cols="200px 1fr auto" gap="md">
            <uix-flex direction="column" gap="xs">
              <uix-text size="sm" weight="semibold">\${key}</uix-text>
              <uix-text size="xs" muted mono>boolean</uix-text>
            </uix-flex>
            <uix-switch
              .checked=\${currentValue}
              @change=\${(e) => this.handleChange(key, e.detail.checked)}
            ></uix-switch>
            \${renderDefault()}
          </uix-grid>
        </uix-card>
      \`;
    }

    // String with enum: Dropdown
    if (type === "string" && enumValues && enumValues.length > 0) {
      return html\`
        <uix-card variant="filled" padding="sm">
          <uix-grid cols="200px 1fr auto" gap="md">
            <uix-flex direction="column" gap="xs">
              <uix-text size="sm" weight="semibold">\${key}</uix-text>
              <uix-text size="xs" muted mono>enum</uix-text>
            </uix-flex>
            <uix-select
              .value=\${currentValue}
              .options=\${enumValues}
              @change=\${(e) => this.handleChange(key, e.detail.value)}
            ></uix-select>
            \${renderDefault()}
          </uix-grid>
        </uix-card>
      \`;
    }

    // Number: Number input
    if (type === "number") {
      return html\`
        <uix-card variant="filled" padding="sm">
          <uix-grid cols="200px 1fr auto" gap="md">
            <uix-flex direction="column" gap="xs">
              <uix-text size="sm" weight="semibold">\${key}</uix-text>
              <uix-text size="xs" muted mono>number</uix-text>
            </uix-flex>
            <uix-input
              type="number"
              size="sm"
              .value=\${currentValue}
              @input=\${(e) => this.handleChange(key, parseFloat(e.target.value) || 0)}
            ></uix-input>
            \${renderDefault()}
          </uix-grid>
        </uix-card>
      \`;
    }

    // String (no enum): Text input
    if (type === "string") {
      return html\`
        <uix-card variant="filled" padding="sm">
          <uix-grid cols="200px 1fr auto" gap="md">
            <uix-flex direction="column" gap="xs">
              <uix-text size="sm" weight="semibold">\${key}</uix-text>
              <uix-text size="xs" muted mono>string</uix-text>
            </uix-flex>
            <uix-input
              type="text"
              size="sm"
              .value=\${currentValue || ""}
              @input=\${(e) => this.handleChange(key, e.target.value)}
            ></uix-input>
            \${renderDefault()}
          </uix-grid>
        </uix-card>
      \`;
    }

    // Array or Object: JSON editor
    if (type === "array" || type === "object") {
      const jsonValue = JSON.stringify(currentValue, null, 2);
      return html\`
        <uix-card variant="filled" padding="sm">
          <uix-grid cols="200px 1fr" gap="md">
            <uix-flex direction="column" gap="xs">
              <uix-text size="sm" weight="semibold">\${key}</uix-text>
              <uix-text size="xs" muted mono>\${type}</uix-text>
            </uix-flex>
            <uix-textarea
              size="sm"
              .value=\${jsonValue}
              style="min-height: 80px; font-family: monospace"
              @input=\${(e) => {
                try {
                  const parsed = JSON.parse(e.target.value);
                  this.handleChange(key, parsed);
                  e.target.removeAttribute("error");
                } catch (err) {
                  // Visual feedback for invalid JSON
                  e.target.setAttribute("error", "");
                }
              }}
            ></uix-textarea>
          </uix-grid>
        </uix-card>
      \`;
    }

    // Function: Display only
    if (type === "function") {
      return html\`
        <uix-card variant="filled" padding="sm" style="opacity: 0.6">
          <uix-grid cols="200px 1fr" gap="md">
            <uix-flex direction="column" gap="xs">
              <uix-text size="sm" weight="semibold">\${key}</uix-text>
              <uix-text size="xs" muted mono>function</uix-text>
            </uix-flex>
            <uix-text size="sm" muted style="font-style: italic">Event handler (immutable)</uix-text>
          </uix-grid>
        </uix-card>
      \`;
    }

    // Unknown type
    return html\`
      <uix-card variant="filled" padding="sm" style="opacity: 0.6">
        <uix-grid cols="200px 1fr" gap="md">
          <uix-flex direction="column" gap="xs">
            <uix-text size="sm" weight="semibold">\${key}</uix-text>
            <uix-text size="xs" muted mono>\${type || "unknown"}</uix-text>
          </uix-flex>
          <uix-text size="sm" muted>Not editable</uix-text>
        </uix-grid>
      </uix-card>
    \`;
  },

  render() {
    if (!this.properties || Object.keys(this.properties).length === 0) {
      return html\`
        <uix-card variant="filled" padding="md" style="text-align: center">
          <uix-text muted>No configurable properties</uix-text>
        </uix-card>
      \`;
    }

    return html\`
      <uix-flex direction="column" gap="md" style="font-family: var(--font-sans)">
        <uix-flex justify="space-between" align="center">
          <uix-heading level="3" size="lg">Properties</uix-heading>
          <uix-button
            outline
            size="xs"
            @click=\${() => this.emit("reset")}
            title="Reset to defaults"
          >
          <uix-icon name="rotate-ccw"></uix-icon>    
          Reset
          </uix-button>
        </uix-flex>
        <uix-flex direction="column" gap="sm">
          \${Object.entries(this.properties).map(([key, metadata]) =>
            this.renderPropertyControl(key, metadata),
          )}
        </uix-flex>
      </uix-flex>
    \`;
  },
};

View.define("uix-showcase-property-editor", ShowcasePropertyEditorDefinition);

export default ShowcasePropertyEditorDefinition;
`,mimeType:"text/javascript"},"/$app/uix/docs/showcase-code-viewer.js":{content:`/**
 * UIX Showcase Code Viewer
 * Displays code examples with syntax highlighting
 */

import T from "/$app/types/index.js";
import View from "/$app/view/index.js";
import { html } from "/npm/lit-html";

const ShowcaseCodeViewerDefinition = {
  tag: "uix-showcase-code-viewer",
  properties: {
    componentTag: T.string(), // Component tag name
    props: T.object(), // Current property values
    category: T.string(), // Component category
    name: T.string(), // Component file name
    copiedBasic: T.boolean(),
    copiedImport: T.boolean(),
  },
  generateBasicExample() {
    if (!this.componentTag) return "";

    const { tag, props } = this;
    const attributes = [];

    // Generate attributes from props
    for (const [key, value] of Object.entries(props || {})) {
      if (value === undefined || value === null) continue;

      if (typeof value === "boolean") {
        if (value) attributes.push(key);
      } else if (typeof value === "string") {
        attributes.push(\`\${key}="\${value}"\`);
      } else if (typeof value === "number") {
        attributes.push(\`\${key}="\${value}"\`);
      }
    }

    const attrsString = attributes.length > 0 ? " " + attributes.join(" ") : "";

    return \`<\${tag}\${attrsString}>
  <!-- Component Content -->
</\${tag}>\`;
  },

  generateImportCode() {
    if (!this.category || !this.name) return "";

    return \`import "/$app/uix/app.js";

// Component auto-loaded from:
// /$app/uix/\${this.category}/\${this.name}.js\`;
  },

  async copyToClipboard(text, type) {
    const triggerSuccess = () => {
      this[\`copied\${type}\`] = true;
      setTimeout(() => {
        this[\`copied\${type}\`] = false;
      }, 2000);
    };

    try {
      // 1. Try Modern API
      await navigator.clipboard.writeText(text);
      triggerSuccess();
    } catch (err) {
      // 2. Fallback (iframe/legacy)
      try {
        const textArea = document.createElement("textarea");
        textArea.value = text;

        // Ensure it's not visible but part of DOM
        textArea.style.position = "fixed";
        textArea.style.left = "-9999px";
        textArea.style.top = "0";
        document.body.appendChild(textArea);

        textArea.focus();
        textArea.select();

        const successful = document.execCommand("copy");
        document.body.removeChild(textArea);

        if (successful) triggerSuccess();
      } catch (fallbackErr) {
        console.error("Failed to copy:", fallbackErr);
      }
    }
  },

  render() {
    if (!this.componentTag) {
      return html\`
        <uix-card variant="outlined" padding="md">
          <uix-text size="sm" align="center" muted>No code example available</uix-text>
        </uix-card>
      \`;
    }

    const basicExample = this.generateBasicExample();
    const importCode = this.generateImportCode();

    return html\`
      <uix-flex direction="column" gap="md">
        <!-- Import Section -->
        <uix-flex direction="column" gap="sm" style="position: relative;">
          <uix-flex justify="space-between" align="center">
            <uix-text size="sm" weight="semibold" text="inverse" style="text-transform: uppercase; letter-spacing: 0.05em; opacity: 0.8;">Import</uix-text>
            <uix-button
              size="xs"
              ghost
              primary
              @click=\${() => this.copyToClipboard(importCode, "Import")}
              title="Copy import path"
            >
              <uix-icon name=\${this.copiedImport ? "check" : "copy"} size="14"></uix-icon>
              \${this.copiedImport ? "Copied" : "Copy"}
            </uix-button>
          </uix-flex>
          <uix-card variant="outlined" overflow="hidden">
            <uix-code language="javascript" .content=\${importCode} ?lineNumber=\${false} readonly></uix-code>
          </uix-card>
        </uix-flex>

        <!-- Basic Usage Section -->
        <uix-flex direction="column" gap="sm" style="position: relative;">
          <uix-flex justify="space-between" align="center">
            <uix-text size="sm" weight="semibold" text="inverse" style="text-transform: uppercase; letter-spacing: 0.05em; opacity: 0.8;">Usage</uix-text>
            <uix-button
              size="xs"
              ghost
              primary
              @click=\${() => this.copyToClipboard(basicExample, "Basic")}
              title="Copy code example"
            >
              <uix-icon name=\${this.copiedBasic ? "check" : "copy"} size="14"></uix-icon>
              \${this.copiedBasic ? "Copied" : "Copy"}
            </uix-button>
          </uix-flex>
          <uix-card variant="outlined" overflow="hidden">
            <uix-code language="html" .content=\${basicExample} readonly></uix-code>
          </uix-card>
        </uix-flex>
      </uix-flex>
    \`;
  },
};

View.define("uix-showcase-code-viewer", ShowcaseCodeViewerDefinition);

export default ShowcaseCodeViewerDefinition;
`,mimeType:"text/javascript"},"/$app/uix/docs/theme-generator.js":{content:`/**
 * UIX Theme Generator
 * Interactive tool for creating custom themes
 * Uses the new semantic shade format (lighter, light, DEFAULT, dark, darker)
 */
import Theme from "/$app/theme/index.js";
import T from "/$app/types/index.js";
import { html, nothing } from "/npm/lit-html";

// Color categories with their default values (Gruvbox-inspired)
const DEFAULT_COLORS = {
  primary: {
    DEFAULT: "#fabd2f",
    lighter: null,
    light: null,
    dark: null,
    darker: null,
  },
  secondary: {
    DEFAULT: "#83a598",
    lighter: null,
    light: null,
    dark: null,
    darker: null,
  },
  success: {
    DEFAULT: "#b8bb26",
    lighter: null,
    light: null,
    dark: null,
    darker: null,
  },
  danger: {
    DEFAULT: "#fb4934",
    lighter: null,
    light: null,
    dark: null,
    darker: null,
  },
  warning: {
    DEFAULT: "#fe8019",
    lighter: null,
    light: null,
    dark: null,
    darker: null,
  },
  info: {
    DEFAULT: "#83a598",
    lighter: null,
    light: null,
    dark: null,
    darker: null,
  },
  surface: {
    DEFAULT: "#504945",
    lighter: null,
    light: null,
    dark: null,
    darker: null,
  },
  inverse: {
    DEFAULT: "#282828",
    lighter: null,
    light: null,
    dark: null,
    darker: null,
  },
};

export default {
  properties: {
    themeName: T.string("custom-theme"),
    sectionTab: T.number(0),
    // Color palette - new semantic format
    colors: T.object({ defaultValue: structuredClone(DEFAULT_COLORS) }),
    // Track which colors have expanded shade editors
    expandedColors: T.object({ defaultValue: {} }),
    // Text color
    textColor: T.string("default"),
    // Spacing scale
    spacing: T.object({
      defaultValue: {
        xs: "0.25rem",
        sm: "0.5rem",
        md: "0.75rem",
        lg: "1rem",
        xl: "1.5rem",
        "2xl": "2rem",
        "3xl": "3rem",
      },
    }),
    // Border radius
    radius: T.object({
      defaultValue: {
        none: "0",
        sm: "0.25rem",
        md: "0.375rem",
        lg: "0.5rem",
        xl: "0.75rem",
        full: "9999px",
      },
    }),
    // Typography
    typography: T.object({
      defaultValue: {
        fontSize: {
          xs: "0.75rem",
          sm: "0.875rem",
          base: "1rem",
          lg: "1.125rem",
          xl: "1.25rem",
          "2xl": "1.5rem",
          "3xl": "1.875rem",
        },
        fontWeight: {
          normal: "400",
          medium: "500",
          semibold: "600",
          bold: "700",
        },
        lineHeight: {
          tight: "1.2",
          normal: "1.5",
          relaxed: "1.75",
        },
      },
    }),
  },

  _updateColor(category, shade, value) {
    this.colors = {
      ...this.colors,
      [category]: {
        ...this.colors[category],
        [shade]: value,
      },
    };
    this._applyPreview();
  },

  _applyPreview() {
    const theme = this.generateThemeObject();
    Theme.applyTheme(theme);
  },

  _toggleExpanded(category) {
    this.expandedColors = {
      ...this.expandedColors,
      [category]: !this.expandedColors[category],
    };
  },

  _toggleAutoShade(category, shade) {
    const currentValue = this.colors[category][shade];
    if (currentValue === null) {
      // Set to a default value (copy from DEFAULT)
      this._updateColor(category, shade, this.colors[category].DEFAULT);
    } else {
      // Set back to auto
      this._updateColor(category, shade, null);
    }
  },

  generateThemeObject() {
    // Generate theme object matching gruvbox-dark.js format
    const colorOutput = {};

    for (const [category, shades] of Object.entries(this.colors)) {
      // Check if any shades are customized (non-null)
      const hasCustomShades = Object.entries(shades).some(
        ([key, val]) => key !== "DEFAULT" && val !== null,
      );

      if (hasCustomShades) {
        // Output as object with only non-null values
        const colorObj = { DEFAULT: shades.DEFAULT };
        for (const [shade, value] of Object.entries(shades)) {
          if (shade !== "DEFAULT" && value !== null) {
            colorObj[shade] = value;
          }
        }
        colorOutput[category] = colorObj;
      } else {
        // Output as simple string
        colorOutput[category] = shades.DEFAULT;
      }
    }

    return {
      name: this.themeName,
      link: { color: "var(--color-primary)" },
      text: { color: this.textColor },
      color: colorOutput,
      spacing: this.spacing,
      typography: this.typography,
      radius: this.radius,
    };
  },

  exportTheme() {
    const theme = this.generateThemeObject();
    const themeCode = \`/**
 * \${theme.name} Theme
 * Generated with UIX Theme Generator
 */

export default \${JSON.stringify(theme, null, 2)};
\`;

    const blob = new Blob([themeCode], { type: "application/javascript" });
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = \`\${this.themeName}.js\`;
    a.click();
    URL.revokeObjectURL(url);
  },

  renderColorPaletteSection() {
    const categories = Object.keys(this.colors);
    const shadeNames = ["lighter", "light", "dark", "darker"];

    return html\`
      <uix-container padding="md">
        <uix-heading level="3" size="lg" style="margin-bottom: var(--spacing-md)">Color Palette</uix-heading>

        <!-- Text Color -->
        <uix-container variant="filled" padding="sm" style="margin-bottom: var(--spacing-lg)">
          <uix-flex direction="row" align="center" justify="space-between" style="margin-bottom: var(--spacing-xs)">
            <uix-text size="sm" weight="medium">Text Color</uix-text>
            <uix-input
              type="text"
              .value=\${this.textColor}
              @input=\${(e) => {
                this.textColor = e.target.value;
                this._applyPreview();
              }}
              size="xs"
              mono
              style="width: 6rem"
            ></uix-input>
          </uix-flex>
          <input
            type="color"
            .value=\${this.textColor}
            @input=\${(e) => {
              this.textColor = e.target.value;
              this._applyPreview();
            }}
            w-full
            cursor-pointer
          />
        </uix-container>

        <!-- Color Categories -->
        <uix-flex direction="column" gap="md">
          \${categories.map((category) => {
            const colorData = this.colors[category];
            const isExpanded = this.expandedColors[category];

            return html\`
              <uix-container variant="filled" padding="sm">
                <!-- Main color row -->
                <uix-flex direction="row" align="center" gap="sm" style="margin-bottom: var(--spacing-xs)">
                  <input
                    type="color"
                    .value=\${colorData.DEFAULT}
                    @input=\${(e) => this._updateColor(category, "DEFAULT", e.target.value)}
                    style="width: 3rem; height: 3rem; flex-shrink: 0; border-radius: var(--radius-md); cursor: pointer"
                  />
                  <uix-flex direction="column" gap="xs" style="flex: 1">
                    <uix-text size="sm" weight="medium" transform="capitalize">\${category}</uix-text>
                    <uix-input
                      type="text"
                      .value=\${colorData.DEFAULT}
                      @input=\${(e) => this._updateColor(category, "DEFAULT", e.target.value)}
                      size="xs"
                      mono
                      w-full
                    ></uix-input>
                  </uix-flex>
                  <uix-button
                    @click=\${() => this._toggleExpanded(category)}
                    ghost
                    size="sm"
                    title="Customize shades"
                  >
                    <uix-icon name=\${isExpanded ? "chevron-up" : "chevron-down"} size="sm"></uix-icon>
                  </uix-button>
                </uix-flex>

                <!-- Expanded shade editors -->
                \${
                  isExpanded
                    ? html\`
                  <uix-grid cols="2" gap="sm" style="margin-top: var(--spacing-sm); padding-top: var(--spacing-sm); border-top: 1px solid var(--color-surface)">
                    \${shadeNames.map((shade) => {
                      const shadeValue = colorData[shade];
                      const isAuto = shadeValue === null;

                      return html\`
                        <uix-flex direction="row" align="center" gap="sm">
                          <input
                            type="color"
                            .value=\${isAuto ? colorData.DEFAULT : shadeValue}
                            ?disabled=\${isAuto}
                            @input=\${(e) => this._updateColor(category, shade, e.target.value)}
                            style="width: 2rem; height: 2rem; border-radius: var(--radius-md); cursor: pointer"
                            class="\${isAuto ? "opacity-50" : ""}"
                          />
                          <uix-flex direction="column" style="flex: 1; min-width: 0">
                            <uix-flex direction="row" align="center" gap="xs">
                              <uix-text size="xs" weight="medium" transform="capitalize">\${shade}</uix-text>
                              <label style="margin-left: auto; display: flex; align-items: center; gap: 0.25rem; font-size: 0.75rem; opacity: 0.7">
                                <input
                                  type="checkbox"
                                  ?checked=\${isAuto}
                                  @change=\${() => this._toggleAutoShade(category, shade)}
                                  style="width: 0.75rem; height: 0.75rem"
                                />
                                Auto
                              </label>
                            </uix-flex>
                          </uix-flex>
                        </uix-flex>
                      \`;
                    })}
                  </uix-grid>
                \`
                    : nothing
                }
              </uix-container>
            \`;
          })}
        </uix-flex>
      </uix-container>
    \`;
  },

  renderSpacingSection() {
    return html\`
      <uix-container padding="md">
        <uix-heading level="3" size="lg" style="margin-bottom: var(--spacing-sm)">Spacing</uix-heading>
        <uix-grid cols="2" gap="sm">
          \${Object.entries(this.spacing).map(
            ([key, value]) => html\`
              <uix-flex direction="column">
                <uix-text size="sm" weight="medium" style="margin-bottom: var(--spacing-xs)">\${key}</uix-text>
                <uix-input
                  type="text"
                  .value=\${value}
                  @input=\${(e) => {
                    this.spacing = { ...this.spacing, [key]: e.target.value };
                  }}
                  size="sm"
                  mono
                  w-full
                ></uix-input>
              </uix-flex>
            \`,
          )}
        </uix-grid>
      </uix-container>
    \`;
  },

  renderEdgesSection() {
    return html\`
      <uix-container padding="md">
        <uix-heading level="3" size="lg" style="margin-bottom: var(--spacing-sm)">Border Radius</uix-heading>
        <uix-grid cols="2" gap="sm">
          \${Object.entries(this.radius).map(
            ([key, value]) => html\`
              <uix-flex direction="column">
                <uix-text size="sm" weight="medium" style="margin-bottom: var(--spacing-xs)">\${key}</uix-text>
                <uix-input
                  type="text"
                  .value=\${value}
                  @input=\${(e) => {
                    this.radius = { ...this.radius, [key]: e.target.value };
                  }}
                  size="sm"
                  mono
                  w-full
                ></uix-input>
              </uix-flex>
            \`,
          )}
        </uix-grid>
      </uix-container>
    \`;
  },

  renderTypographySection() {
    return html\`
      <uix-container padding="md">
        <uix-heading level="3" size="lg" style="margin-bottom: var(--spacing-sm)">Typography</uix-heading>

        <uix-heading level="4" size="sm" style="margin-bottom: var(--spacing-xs)">Font Sizes</uix-heading>
        <uix-grid cols="2" gap="sm" style="margin-bottom: var(--spacing-md)">
          \${Object.entries(this.typography.fontSize).map(
            ([key, value]) => html\`
              <uix-flex direction="column">
                <uix-text size="sm" weight="medium" style="margin-bottom: var(--spacing-xs)">\${key}</uix-text>
                <uix-input
                  type="text"
                  .value=\${value}
                  @input=\${(e) => {
                    this.typography = {
                      ...this.typography,
                      fontSize: {
                        ...this.typography.fontSize,
                        [key]: e.target.value,
                      },
                    };
                  }}
                  size="sm"
                  mono
                  w-full
                ></uix-input>
              </uix-flex>
            \`,
          )}
        </uix-grid>

        <uix-heading level="4" size="sm" style="margin-bottom: var(--spacing-xs)">Font Weights</uix-heading>
        <uix-grid cols="2" gap="sm">
          \${Object.entries(this.typography.fontWeight).map(
            ([key, value]) => html\`
              <uix-flex direction="column">
                <uix-text size="sm" weight="medium" style="margin-bottom: var(--spacing-xs)">\${key}</uix-text>
                <uix-input
                  type="text"
                  .value=\${value}
                  @input=\${(e) => {
                    this.typography = {
                      ...this.typography,
                      fontWeight: {
                        ...this.typography.fontWeight,
                        [key]: e.target.value,
                      },
                    };
                  }}
                  size="sm"
                  mono
                  w-full
                ></uix-input>
              </uix-flex>
            \`,
          )}
        </uix-grid>
      </uix-container>
    \`;
  },

  renderControlsPanel() {
    const sections = [
      {
        id: "colors",
        label: "Colors",
        render: this.renderColorPaletteSection.bind(this),
      },
      {
        id: "spacing",
        label: "Spacing",
        render: this.renderSpacingSection.bind(this),
      },
      {
        id: "edges",
        label: "Edges",
        render: this.renderEdgesSection.bind(this),
      },
      {
        id: "typography",
        label: "Type",
        render: this.renderTypographySection.bind(this),
      },
    ];

    return html\`
      <uix-flex direction="column" style="height: 100%;overflow-x: hidden;">
        <uix-tabs @tab-change=\${(e) => (this.sectionTab = e.detail)} style="flex: 1; display: flex; flex-direction: column; min-height: 0">
          \${sections.map((section) => html\`<button slot="tab">\${section.label}</button>\`)}
          <div slot="panel" style="flex: 1">
            \${sections[this.sectionTab] ? sections[this.sectionTab].render() : nothing}
          </div>
        </uix-tabs>

        <uix-container padding="md" style="border-top: 1px solid var(--color-surface)">
          <uix-input
            type="text"
            .value=\${this.themeName}
            @input=\${(e) => {
              this.themeName = e.target.value;
            }}
            placeholder="Theme name..."
            size="sm"
            w-full
            style="margin-bottom: var(--spacing-sm)"
          ></uix-input>
          <uix-button variant="primary" w-full @click=\${() => this.exportTheme()}>
            <uix-icon name="download"></uix-icon>
            Export Theme
          </uix-button>
        </uix-container>
      </uix-flex>
    \`;
  },

  renderPreviewPanel() {
    return html\`
      <uix-flex direction="column" style="flex: 1; overflow-y: auto; padding: var(--spacing-lg); background: var(--color-surface)">
        <uix-heading level="2" size="2xl" style="margin-bottom: var(--spacing-lg)">Preview</uix-heading>

        <uix-flex direction="column" gap="xl" style="max-width: 800px">
          <!-- Buttons -->
          <section>
            <uix-heading level="3" size="lg" style="margin-bottom: var(--spacing-sm)">Buttons</uix-heading>
            <uix-flex direction="row" gap="sm" style="flex-wrap: wrap">
              <uix-button>Default</uix-button>
              <uix-button variant="primary">Primary</uix-button>
              <uix-button variant="secondary">Secondary</uix-button>
              <uix-button variant="success">Success</uix-button>
              <uix-button variant="danger">Danger</uix-button>
              <uix-button variant="warning">Warning</uix-button>
            </uix-flex>
            <uix-flex direction="row" gap="sm" style="flex-wrap: wrap; margin-top: var(--spacing-sm)">
              <uix-button ghost>Ghost</uix-button>
              <uix-button ghost variant="primary">Ghost Primary</uix-button>
              <uix-button outline variant="primary">Outline</uix-button>
              <uix-button bordered variant="primary">Bordered</uix-button>
            </uix-flex>
          </section>

          <!-- Stats -->
          <section>
            <uix-heading level="3" size="lg" style="margin-bottom: var(--spacing-sm)">Stats</uix-heading>
            <uix-join>
              <uix-stat title="Downloads" value="31K">Jan 1st - Feb 1st</uix-stat>
              <uix-stat title="New Users" value="4,200" variant="success">+400 (22%)</uix-stat>
              <uix-stat title="Errors" value="12" variant="danger">-5 (14%)</uix-stat>
            </uix-join>
          </section>

          <!-- Badges -->
          <section>
            <uix-heading level="3" size="lg" style="margin-bottom: var(--spacing-sm)">Badges</uix-heading>
            <uix-flex direction="row" gap="sm" style="flex-wrap: wrap">
              <uix-badge>Default</uix-badge>
              <uix-badge variant="success">Success</uix-badge>
              <uix-badge variant="danger">Danger</uix-badge>
              <uix-badge variant="warning">Warning</uix-badge>
              <uix-badge variant="info">Info</uix-badge>
            </uix-flex>
          </section>

          <!-- Form Controls -->
          <section>
            <uix-heading level="3" size="lg" style="margin-bottom: var(--spacing-sm)">Form Controls</uix-heading>
            <uix-flex direction="column" gap="md">
              <uix-grid cols="2" gap="sm">
                <uix-input placeholder="Text input"></uix-input>
                <uix-input type="email" placeholder="Email input"></uix-input>
              </uix-grid>
              <uix-flex direction="row" gap="md" style="flex-wrap: wrap">
                <uix-checkbox checked>Checkbox</uix-checkbox>
                <uix-switch checked>Switch</uix-switch>
              </uix-flex>
              <uix-slider min="0" max="100" value="50"></uix-slider>
            </uix-flex>
          </section>

          <!-- Navigation -->
          <section>
            <uix-heading level="3" size="lg" style="margin-bottom: var(--spacing-sm)">Navigation</uix-heading>
            <uix-tabs>
              <button slot="tab">Tab 1</button>
              <button slot="tab">Tab 2</button>
              <button slot="tab">Tab 3</button>
              <div slot="panel">Tab 1 content</div>
              <div slot="panel">Tab 2 content</div>
              <div slot="panel">Tab 3 content</div>
            </uix-tabs>
          </section>

          <!-- Feedback -->
          <section>
            <uix-heading level="3" size="lg" style="margin-bottom: var(--spacing-sm)">Feedback</uix-heading>
            <uix-flex direction="column" gap="sm">
              <uix-progress-bar value="65" max="100"></uix-progress-bar>
              <uix-progress-bar value="30" max="100" variant="success"></uix-progress-bar>
              <uix-flex direction="row" gap="sm" align="center">
                <uix-spinner size="sm"></uix-spinner>
                <uix-spinner size="md"></uix-spinner>
                <uix-spinner size="lg"></uix-spinner>
              </uix-flex>
            </uix-flex>
          </section>

          <!-- Card -->
          <section>
            <uix-heading level="3" size="lg" style="margin-bottom: var(--spacing-sm)">Card</uix-heading>
            <uix-card variant="elevated" padding="lg">
              <h4 slot="header">Card Header</h4>
              <p>Card content with theme colors applied.</p>
              <div slot="footer">
                <uix-button size="sm">Action</uix-button>
              </div>
            </uix-card>
          </section>
        </uix-flex>
      </uix-flex>
    \`;
  },

  render() {
    return html\`
      <uix-flex direction="row" style="height: 100%; min-height: 0">
        \${this.renderPreviewPanel()}
        <div style="width: 400px; flex-shrink: 0; height: 100%; min-height: 0">
          \${this.renderControlsPanel()}
        </div>
      </uix-flex>
    \`;
  },
};
`,mimeType:"text/javascript"},"/$app/uix/utils/example-parser.js":{content:`export function extractExamplesFromComments(sourceCode) {
  const matches = sourceCode.match(/\\/\\*\\*([\\s\\S]*?)\\*\\//g);
  if (!matches || matches.length === 0) return [];

  const lastComment = matches[matches.length - 1];
  const docstring = lastComment.replace(/^\\/\\*\\*/, "").replace(/\\*\\/$/, "");
  const examples = [];
  const exampleRegex = /@example\\s+([^\\n]*)\\n([\\s\\S]*?)(?=\\n\\s*\\*\\s*@(?:example|component|category|tag|param|returns|prop|slot|part|event)\\b|$)/g;
  let match;

  while ((match = exampleRegex.exec(docstring)) !== null) {
    const title = match[1].replace(/^\\s*\\*\\s?/, '').trim();
    const content = match[2]
      .split("\\n")
      .map((line) => line.replace(/^\\s*\\*\\s?/, ""))
      .join("\\n")
      .trim();

    const codeBlocks = [];
    const codeRegex = /\`\`\`(\\w+)?\\n([\\s\\S]*?)\`\`\`/g;
    let codeMatch;

    while ((codeMatch = codeRegex.exec(content)) !== null) {
      codeBlocks.push({
        language: codeMatch[1] || "html",
        code: codeMatch[2].trim(),
      });
    }

    const description = content.split("\`\`\`")[0].trim();

    if (codeBlocks.length > 0) {
      examples.push({
        title: title || \`Example \${examples.length + 1}\`,
        description: description || null,
        codeBlocks,
      });
    }
  }

  return examples;
}

export function extractDescription(sourceCode) {
  const matches = sourceCode.match(/\\/\\*\\*([\\s\\S]*?)\\*\\//g);
  if (!matches || matches.length === 0) return "";

  const lastComment = matches[matches.length - 1];
  const docstring = lastComment.replace(/^\\/\\*\\*/, "").replace(/\\*\\/$/, "");

  const lines = docstring.split("\\n");
  const descLines = [];

  for (const line of lines) {
    const cleaned = line.replace(/^\\s*\\*\\s?/, "").trim();

    if (cleaned.startsWith("@")) break;

    if (descLines.length === 0 && !cleaned) continue;

    descLines.push(cleaned);
  }

  return descLines.join("\\n").trim();
}

export function extractMetadataTags(sourceCode) {
  const matches = sourceCode.match(/\\/\\*\\*([\\s\\S]*?)\\*\\//g);
  if (!matches || matches.length === 0) return {};

  const lastComment = matches[matches.length - 1];
  const docstring = lastComment.replace(/^\\/\\*\\*/, "").replace(/\\*\\/$/, "");
  const metadata = {};

  const tagMatch = docstring.match(/@tag\\s+(\\S+)/);
  if (tagMatch) metadata.tag = tagMatch[1];

  const categoryMatch = docstring.match(/@category\\s+(\\S+)/);
  if (categoryMatch) metadata.category = categoryMatch[1];

  metadata.isComponent = /@component/.test(docstring);

  return metadata;
}

export function extractParts(sourceCode) {
  const matches = sourceCode.match(/\\/\\*\\*([\\s\\S]*?)\\*\\//g);
  if (!matches || matches.length === 0) return [];

  const lastComment = matches[matches.length - 1];
  const docstring = lastComment.replace(/^\\/\\*\\*/, "").replace(/\\*\\/$/, "");
  const parts = [];
  const partRegex = /@part\\s+(\\S+)\\s+-\\s+(.+?)(?=\\n\\s*[@*]|$)/gm;
  let match;

  while ((match = partRegex.exec(docstring)) !== null) {
    parts.push({
      name: match[1].trim(),
      description: match[2].trim(),
    });
  }

  return parts;
}

export function extractSlots(sourceCode) {
  const matches = sourceCode.match(/\\/\\*\\*([\\s\\S]*?)\\*\\//g);
  if (!matches || matches.length === 0) return [];

  const lastComment = matches[matches.length - 1];
  const docstring = lastComment.replace(/^\\/\\*\\*/, "").replace(/\\*\\/$/, "");
  const slots = [];
  const slotRegex = /@slot\\s+([^\\s-]*)\\s*-?\\s*(.*)$/gm;
  let match;

  while ((match = slotRegex.exec(docstring)) !== null) {
    const name = match[1].trim();
    const description = match[2].trim();

    slots.push({
      name: name || "default",
      description: description || "Default slot",
    });
  }

  return slots;
}
`,mimeType:"text/javascript"},"/$app/uix/display/heading.js":{content:`/**
 * UIX Heading Component
 * Semantic headings (h1-h6) with consistent styling
 */

import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

export default {
  properties: {
    level: T.number({ defaultValue: 2, min: 1, max: 6 }),
    size: T.string({
      enum: ["xs", "sm", "base", "lg", "xl", "2xl", "3xl", "4xl", "5xl"],
    }), // Optional size override
  },

  render() {
    const HeadingTag = \`h\${this.level}\`;
    return html\`<\${HeadingTag}><slot></slot></\${HeadingTag}>\`;
  },
};
`,mimeType:"text/javascript"},"/$app/uix/display/text.js":{content:`/**
 * UIX Text Component
 * Styled text with size, weight, and variant options
 */

import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

export default {
  style: true,
  properties: {
    size: T.string({
      defaultValue: "base",
      enum: ["xs", "sm", "base", "lg", "xl", "2xl", "3xl"],
    }),
    weight: T.string({
      defaultValue: "normal",
      enum: ["normal", "medium", "semibold", "bold"],
    }),
    color: T.string({
      enum: [
        "primary",
        "secondary",
        "success",
        "danger",
        "warning",
        "info",
        "muted",
        "inverse",
      ],
    }),
    muted: T.boolean(false),
    mono: T.boolean(false),
    align: T.string({
      defaultValue: "left",
      enum: ["left", "center", "right"],
    }),
    transform: T.string({
      enum: ["capitalize", "uppercase", "lowercase", "none"],
    }),
    as: T.string({ defaultValue: "span", enum: ["span", "p", "div"] }),
  },
};
`,mimeType:"text/javascript"},"/$app/uix/layout/flex.js":{content:`/**
 * UIX Flex Component
 * Flexible container for flexbox layouts
 * No shadow DOM - host element is the flex container
 */

import T from "/$app/types/index.js";

export default {
  style: true,
  properties: {
    direction: T.string({
      defaultValue: "row",
      enum: ["row", "column", "row-reverse", "column-reverse"],
    }),
    gap: T.string({
      enum: ["none", "xs", "sm", "md", "lg", "xl", "2xl", "3xl"],
    }),
    align: T.string({
      defaultValue: "stretch",
      enum: ["start", "center", "end", "stretch", "baseline"],
    }),
    justify: T.string({
      defaultValue: "start",
      enum: [
        "start",
        "center",
        "end",
        "space-between",
        "space-around",
        "space-evenly",
      ],
    }),
    wrap: T.string({
      defaultValue: "nowrap",
      enum: ["wrap", "nowrap", "wrap-reverse"],
    }),
  },
};

/**
 * UIX Flex Component
 *
 * @component
 * @category layout
 * @tag uix-flex
 *
 * A flexible container component for creating flexbox layouts.
 * No shadow DOM - the host element itself becomes the flex container.
 *
 * ## Flex Item Attributes
 *
 * Direct children can use these attributes for individual flex behavior:
 * - \`flex-1\` - Grow and shrink equally (flex: 1 1 0%)
 * - \`flex-auto\` - Grow and shrink with auto basis (flex: 1 1 auto)
 * - \`flex-initial\` - Don't grow, can shrink (flex: 0 1 auto)
 * - \`flex-none\` - Don't grow or shrink (flex: none)
 * - \`flex-grow\` - Allow growing (flex-grow: 1)
 * - \`flex-shrink="0"\` - Prevent shrinking
 * - \`align-self="center|start|end|stretch"\` - Individual alignment
 *
 * @example
 * // Basic row layout
 * \`\`\`html
 * <uix-flex gap="md">
 *   <div>Item 1</div>
 *   <div>Item 2</div>
 *   <div>Item 3</div>
 * </uix-flex>
 * \`\`\`
 *
 * @example
 * // Column layout with gap
 * \`\`\`html
 * <uix-flex direction="column" gap="lg">
 *   <div>Top</div>
 *   <div>Middle</div>
 *   <div>Bottom</div>
 * </uix-flex>
 * \`\`\`
 *
 * @example
 * // Centered content
 * \`\`\`html
 * <uix-flex align="center" justify="center" style="min-height: 200px;">
 *   <div>Centered Content</div>
 * </uix-flex>
 * \`\`\`
 *
 * @example
 * // Sidebar layout with flex-1
 * \`\`\`html
 * <uix-flex gap="md">
 *   <aside style="width: 250px;">
 *     Sidebar (fixed width)
 *   </aside>
 *   <main flex-1>
 *     Main content (takes remaining space)
 *   </main>
 * </uix-flex>
 * \`\`\`
 *
 * @example
 * // Toolbar with flexible search
 * \`\`\`html
 * <uix-flex align="center" gap="sm">
 *   <uix-button flex-none>New</uix-button>
 *   <uix-button flex-none>Save</uix-button>
 *   <uix-input flex-1 placeholder="Search..."></uix-input>
 *   <uix-button flex-none variant="primary">Submit</uix-button>
 * </uix-flex>
 * \`\`\`
 *
 * @example
 * // Card with flexible body
 * \`\`\`html
 * <uix-flex direction="column" gap="none" style="height: 400px;">
 *   <div flex-none style="padding: 1rem; border-bottom: 1px solid #ddd;">
 *     Header
 *   </div>
 *   <div flex-1 style="padding: 1rem; overflow-y: auto;">
 *     Body content that grows to fill available space
 *   </div>
 *   <div flex-none style="padding: 1rem; border-top: 1px solid #ddd;">
 *     Footer
 *   </div>
 * </uix-flex>
 * \`\`\`
 *
 * @example
 * // Space between items
 * \`\`\`html
 * <uix-flex justify="space-between" align="center">
 *   <h2>Page Title</h2>
 *   <uix-button variant="primary">Action</uix-button>
 * </uix-flex>
 * \`\`\`
 *
 * @example
 * // Individual item alignment
 * \`\`\`html
 * <uix-flex gap="md" style="height: 150px;">
 *   <div align-self="start">Aligned to start</div>
 *   <div align-self="center">Centered</div>
 *   <div align-self="end">Aligned to end</div>
 *   <div align-self="stretch">Stretched</div>
 * </uix-flex>
 * \`\`\`
 *
 * @example
 * // Wrap items
 * \`\`\`html
 * <uix-flex wrap="wrap" gap="sm">
 *   <uix-badge>Tag 1</uix-badge>
 *   <uix-badge>Tag 2</uix-badge>
 *   <uix-badge>Tag 3</uix-badge>
 *   <uix-badge>Tag 4</uix-badge>
 *   <uix-badge>Tag 5</uix-badge>
 * </uix-flex>
 * \`\`\`
 *
 * @example
 * // Dashboard layout
 * \`\`\`html
 * <uix-flex direction="column" gap="lg" style="height: 100vh;">
 *   <header flex-none>
 *     <uix-navbar>Navigation</uix-navbar>
 *   </header>
 *
 *   <uix-flex flex-1 gap="md">
 *     <aside flex-none style="width: 300px;">
 *       <uix-sidebar>Sidebar</uix-sidebar>
 *     </aside>
 *
 *     <main flex-1>
 *       <div style="padding: 2rem;">
 *         Main content area
 *       </div>
 *     </main>
 *   </uix-flex>
 *
 *   <footer flex-none>
 *     Footer content
 *   </footer>
 * </uix-flex>
 * \`\`\`
 *
 * @example
 * // Form row with labels
 * \`\`\`html
 * <uix-flex direction="column" gap="md">
 *   <uix-flex align="center" gap="sm">
 *     <label flex-none style="width: 120px;">Name:</label>
 *     <uix-input flex-1></uix-input>
 *   </uix-flex>
 *
 *   <uix-flex align="center" gap="sm">
 *     <label flex-none style="width: 120px;">Email:</label>
 *     <uix-input flex-1 type="email"></uix-input>
 *   </uix-flex>
 * </uix-flex>
 * \`\`\`
 */
`,mimeType:"text/javascript"},"/$app/uix/layout/split-pane.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

let throttleTimeout = null;
let lastEvent = null;

export default {
  tag: "uix-split-pane",
  i18n: {},
  properties: {
    direction: T.string("horizontal"),
    initialSize: T.string("50%"), // Supports "200px" or "30%"
    minSize: T.string(), // Minimum size constraint e.g., "200px" or "10%"
    maxSize: T.string(), // Maximum size constraint e.g., "500px" or "90%"
    primarySize: T.string(), // Current size (with units)
    dividerSize: T.number(2),
    storageKey: T.string(),
    resizable: T.boolean(false), // Whether divider can be dragged
  },
  extends: "uix-flex",
  style: true,
  shadow: true,
  connected() {
    this.isDragging = false;
    this.loadSize();
    this.boundHandlePointerMove = this._handlePointerMove.bind(this);
    this.boundHandlePointerUp = this._handlePointerUp.bind(this);
  },
  firstUpdated() {
    this.primaryPanel = this.shadowRoot.querySelector('[part="primary"]');
    this.secondaryPanel = this.shadowRoot.querySelector('[part="secondary"]');
  },

  // Parse size string to { value, unit }
  _parseSize(size) {
    if (!size) return null;
    const match = String(size).match(/^([\\d.]+)(px|%)?$/);
    if (!match) return null;
    return {
      value: parseFloat(match[1]),
      unit: match[2] || "%",
    };
  },

  // Convert size to pixels based on container
  _toPixels(size, containerSize) {
    const parsed = this._parseSize(size);
    if (!parsed) return null;
    if (parsed.unit === "px") return parsed.value;
    return (parsed.value / 100) * containerSize;
  },

  loadSize() {
    if (this.storageKey) {
      const saved = localStorage.getItem(\`uix-split-pane:\${this.storageKey}\`);
      if (saved) {
        this.primarySize = saved;
        return;
      }
    }
    this.primarySize = this.initialSize;
  },

  saveSize() {
    if (this.storageKey && this.primarySize) {
      localStorage.setItem(
        \`uix-split-pane:\${this.storageKey}\`,
        this.primarySize,
      );
    }
  },

  _handleDividerPointerDown(e) {
    if (!this.resizable) return;
    e.preventDefault();
    this.isDragging = true;
    this.startPos = this.direction === "horizontal" ? e.clientX : e.clientY;

    const rect = this.getBoundingClientRect();
    this.containerSize =
      this.direction === "horizontal" ? rect.width : rect.height;
    this.startPrimaryPx = this._toPixels(this.primarySize, this.containerSize);

    this.shadowRoot.addEventListener(
      "pointermove",
      this.boundHandlePointerMove,
    );
    this.setAttribute("dragging", "");
  },

  _handlePointerMove(e) {
    if (!this.isDragging) return;
    lastEvent = e;
    if (throttleTimeout) return;
    throttleTimeout = setTimeout(() => {
      throttleTimeout = null;
      this._calculateNewSize(lastEvent);
    }, 15);
  },

  _calculateNewSize(e) {
    const currentPos = this.direction === "horizontal" ? e.clientX : e.clientY;
    const delta = currentPos - this.startPos;
    let newPrimaryPx = this.startPrimaryPx + delta;

    // Apply min/max constraints
    const minPx = this._toPixels(this.minSize, this.containerSize);
    const maxPx = this._toPixels(this.maxSize, this.containerSize);

    if (minPx !== null) newPrimaryPx = Math.max(minPx, newPrimaryPx);
    if (maxPx !== null) newPrimaryPx = Math.min(maxPx, newPrimaryPx);

    // Ensure secondary panel has space
    const minSecondary = 50; // minimum 50px for secondary
    newPrimaryPx = Math.min(newPrimaryPx, this.containerSize - minSecondary);

    if (this.primaryPanel && this.secondaryPanel) {
      this.primaryPanel.style.flexBasis = \`\${newPrimaryPx}px\`;
      this.secondaryPanel.style.flexBasis = \`\${this.containerSize - newPrimaryPx}px\`;
    }
    this.primarySize = \`\${newPrimaryPx}px\`;
  },

  _handlePointerUp() {
    if (!this.isDragging) return;
    this.isDragging = false;
    this.removeAttribute("dragging");
    this.shadowRoot.removeEventListener(
      "pointermove",
      this.boundHandlePointerMove,
    );
    this.saveSize();
  },

  render() {
    const parsed = this._parseSize(this.primarySize);
    const primaryStyle = parsed
      ? \`flex-basis: \${parsed.value}\${parsed.unit}\`
      : "flex-basis: 50%";

    return html\`<slot name="primary" part="primary" style="\${primaryStyle}"></slot>
      <div
        part="divider"
        @pointerdown=\${this._handleDividerPointerDown.bind(this)}
        @pointerup=\${this._handlePointerUp.bind(this)}
        style="--divider-size: \${this.dividerSize}px"
      ></div>
      <slot part="secondary" name="secondary"></slot>\`;
  },
};

/**
 * Copyright (c) Alan Carlos Meira Leal
 *
 * Split Pane Component
 *
 * @component
 * @category layout
 * @tag uix-split-pane
 *
 * A split pane layout for dividing space between two panels.
 * By default, the divider is non-resizable (just a visual separator).
 * Add the \`resizable\` attribute to enable drag-to-resize functionality.
 * Supports both pixel and percentage-based sizing.
 *
 * @slot primary - Primary (left/top) panel content
 * @slot secondary - Secondary (right/bottom) panel content
 * @part primary - Primary panel container
 * @part divider - Divider between panels
 * @part secondary - Secondary panel container
 *
 * @example Fixed Sidebar (Non-resizable)
 * \`\`\`html
 * <uix-split-pane initialSize="200px" minSize="200px">
 *   <div slot="primary">Fixed 200px sidebar</div>
 *   <div slot="secondary">Main content</div>
 * </uix-split-pane>
 * \`\`\`
 *
 * @example Resizable Split
 * \`\`\`html
 * <uix-split-pane initialSize="30%" resizable>
 *   <div slot="primary">Resizable panel</div>
 *   <div slot="secondary">Main content</div>
 * </uix-split-pane>
 * \`\`\`
 *
 * @example With Constraints
 * \`\`\`html
 * <uix-split-pane
 *   initialSize="250px"
 *   minSize="150px"
 *   maxSize="400px"
 *   resizable
 *   storageKey="editor-sidebar"
 * >
 *   <div slot="primary">Sidebar</div>
 *   <div slot="secondary">Editor</div>
 * </uix-split-pane>
 * \`\`\`
 */
`,mimeType:"text/javascript"},"/$app/uix/navigation/accordion.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

export default {
  tag: "uix-accordion",
  properties: {
    variant: T.string({
      defaultValue: "default",
      enum: ["default", "bordered", "filled", "flush", "separated"],
    }),
    single: T.boolean(false),
    rounded: T.boolean(true),
    openItems: T.array([]),
  },
  style: true,
  shadow: true,
  connected() {
    this.openItems = [];
  },
  firstUpdated() {
    const slot = this.shadowRoot.querySelector("slot");
    if (slot) {
      slot.addEventListener("slotchange", () => {
        this.initializeItems();
      });
      this.initializeItems();
    }
  },
  initializeItems() {
    const slot = this.shadowRoot.querySelector("slot");
    if (!slot) return;
    const items = slot.assignedElements();
    items.forEach((item, index) => {
      if (
        index % 2 === 0 &&
        (item.hasAttribute("open") || item.hasAttribute("prevent-collapse"))
      ) {
        const panelIndex = Math.floor(index / 2);
        if (!this.openItems.includes(panelIndex)) {
          this.openItems.push(panelIndex);
        }
      }
    });

    this.updatePanels();
  },

  updatePanels() {
    const slot = this.shadowRoot.querySelector("slot");
    if (!slot) return;

    const items = slot.assignedElements();

    items.forEach((item, index) => {
      const isHeader = index % 2 === 0;
      const panelIndex = Math.floor(index / 2);

      if (isHeader) {
        // Header element (even index)
        if (this.openItems.includes(panelIndex)) {
          item.setAttribute("active", "");
        } else {
          item.removeAttribute("active");
        }
      } else {
        // Panel element (odd index)
        if (this.openItems.includes(panelIndex)) {
          item.removeAttribute("hide");
        } else {
          item.setAttribute("hide", "");
        }
      }
    });
  },
  handleClick(e) {
    // Find the closest element with the 'header' attribute
    const headerElement = e.target.closest("[header]");

    if (!headerElement) return;
    if (headerElement.hasAttribute("prevent-collapse")) return;

    // Get all direct children of the accordion element
    const items = Array.from(this.children);
    const clickedIndex = items.indexOf(headerElement);

    // Calculate which panel was clicked (every header+content pair)
    const panelIndex = Math.floor(clickedIndex / 2);

    if (this.single) {
      // Single mode: only one item open at a time
      if (this.openItems.includes(panelIndex)) {
        this.openItems = [];
      } else {
        this.openItems = [panelIndex];
      }
    } else {
      // Multiple mode: toggle individual items
      if (this.openItems.includes(panelIndex)) {
        this.openItems = this.openItems.filter((i) => i !== panelIndex);
      } else {
        this.openItems = [...this.openItems, panelIndex];
      }
    }

    this.updatePanels();
    this.emit("accordion-toggle", {
      index: panelIndex,
      open: this.openItems.includes(panelIndex),
    });
  },
  render() {
    return html\`
      <div part="container" class="accordion-container">
        <slot @click=\${this.handleClick.bind(this)}></slot>
      </div>
    \`;
  },
};

/**
 * Accordion Component
 *
 * @component
 * @category layout
 * @tag uix-accordion
 *
 * Collapsible container with alternating header/content pairs. Click even-indexed elements to toggle odd-indexed elements.
 *
 * @example
 * // Basic accordion - alternating headers and content
 * \`\`\`html
 * <uix-accordion>
 *   <button>Section 1</button>
 *   <div>Content for section 1</div>
 *   <button>Section 2</button>
 *   <div>Content for section 2</div>
 *   <button>Section 3</button>
 *   <div>Content for section 3</div>
 * </uix-accordion>
 * \`\`\`
 *
 * @example
 * // FAQ style accordion
 * \`\`\`html
 * <uix-accordion variant="bordered">
 *   <div>What is UIX?</div>
 *   <div><p>UIX is a component library built with Lit and web components.</p></div>
 *   <div>How do I install it?</div>
 *   <div><p>Follow the installation guide in the documentation.</p></div>
 *   <div>Is it free?</div>
 *   <div><p>Yes, UIX is completely free and open source.</p></div>
 * </uix-accordion>
 * \`\`\`
 *
 * @example
 * // Single mode - only one item open at a time
 * \`\`\`html
 * <uix-accordion single>
 *   <button>Profile</button>
 *   <div>Profile settings content...</div>
 *   <button>Settings</button>
 *   <div>General settings content...</div>
 *   <button>Privacy</button>
 *   <div>Privacy settings content...</div>
 * </uix-accordion>
 * \`\`\`
 *
 * @example
 * // With initial open state
 * \`\`\`html
 * <uix-accordion>
 *   <button open>Already Open</button>
 *   <div>This panel starts open</div>
 *   <button>Closed</button>
 *   <div>This panel starts closed</div>
 *   <button open>Also Open</button>
 *   <div>This panel starts open too</div>
 * </uix-accordion>
 * \`\`\`
 *
 * @example
 * // With variants
 * \`\`\`html
 * <uix-accordion variant="filled">
 *   <div>Header 1</div>
 *   <div>Panel 1 content</div>
 *   <div>Header 2</div>
 *   <div>Panel 2 content</div>
 * </uix-accordion>
 * \`\`\`
 *
 * @example
 * // With event handler
 * \`\`\`js
 * html\`<uix-accordion
 *   @accordion-toggle=\${(e) => console.log('Item', e.detail.index, 'is now', e.detail.open ? 'open' : 'closed')}
 * >
 *   <button>Item 1</button>
 *   <div>Content 1</div>
 *   <button>Item 2</button>
 *   <div>Content 2</div>
 * </uix-accordion>\`
 * \`\`\`
 */
`,mimeType:"text/javascript"},"/$app/uix/navigation/nav-item.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

/**
 * @component uix-nav-item
 * @description A navigation item component with icon, label, badge, and active state support
 *
 * @property {string} icon - Icon name (uses uix-icon)
 * @property {string} label - Label text for the navigation item
 * @property {string} badge - Optional badge text/number to display
 * @property {boolean} active - Whether the item is currently active/selected
 * @property {string} href - Optional link URL (renders as anchor)
 * @property {boolean} disabled - Whether the item is disabled
 * @property {string} size - Size variant (sm, md, lg)
 *
 * @event nav-item-click - Emitted when the item is clicked {href?, active, disabled}
 *
 *
 * @part container - The main container element (button or anchor)
 * @part icon - The icon wrapper
 * @part label - The label wrapper
 * @part badge - The badge wrapper
 *
 * @example
 * <uix-nav-item icon="house" label="Home" active></uix-nav-item>
 * <uix-nav-item icon="settings" label="Settings" badge="3"></uix-nav-item>
 * <uix-nav-item href="/docs" label="Documentation"></uix-nav-item>
 */
export default {
  tag: "uix-nav-item",
  properties: {
    icon: T.string({ defaultValue: "" }),
    label: T.string({ defaultValue: "" }),
    badge: T.string({ defaultValue: "" }),
    active: T.boolean(false),
    href: T.string({ defaultValue: "" }),
    disabled: T.boolean(false),
    activeBg: T.boolean(),
    iconOnly: T.boolean(false),
    indicatorPosition: T.string({
      defaultValue: "none",
      enum: ["none", "left", "right", "top", "bottom"],
    }),
    size: T.string({
      defaultValue: "md",
      enum: ["sm", "md", "lg"],
    }),
  },
  style: true,
  _handleClick(e) {
    if (this.disabled) {
      e.preventDefault();
      return;
    }

    this.emit("nav-item-click", {
      href: this.href,
      active: this.active,
      disabled: this.disabled,
    });
  },

  render() {
    const content = this.iconOnly
      ? html\`
          \${
            this.icon
              ? html\`
                <span part="icon" class="nav-item-icon">
                  <uix-icon name=\${this.icon} size=\${this.size}></uix-icon>
                </span>
              \`
              : null
          }
        \`
      : html\`
          <span part="label" class="nav-item-label label">
          \${
            this.icon
              ? html\`
                <span part="icon" class="nav-item-icon">
                  <uix-icon name=\${this.icon} size=\${this.size}></uix-icon>
                </span>
              \`
              : null
          }
            \${this.label}
          </span>
          \${
            this.badge
              ? html\`
                <span part="badge" class="nav-item-badge badge">\${this.badge}</span>
              \`
              : null
          }
        \`;

    const title = this.iconOnly ? this.label : "";

    if (this.href && !this.disabled) {
      return html\`
        <a
          part="container"
          class="nav-item"
          href=\${this.href}
          title=\${title}
          @click=\${this._handleClick.bind(this)}
        >
          \${content}
        </a>
      \`;
    }

    return html\`
      <button
        part="container"
        class="nav-item"
        title=\${title}
        ?disabled=\${this.disabled}
        @click=\${this._handleClick.bind(this)}
      >
        \${content}
      </button>
    \`;
  },
};
`,mimeType:"text/javascript"},"/$app/uix/docs/showcase.css":{content:`:where(.uix-showcase){display:flex;width:100%}
`,mimeType:"text/css"},"/$app/icon-lucide/lucide/panel-left-close.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M9 3v18m7-6l-3-3l3-3"/></g></svg>',mimeType:"image/svg+xml"},"/$app/uix/display/text.css":{content:`:where(.uix-text,uix-text){span,p,div{margin:0;color:var(--text-color);font-family:inherit}&[size=xs]{span,p,div{font-size:var(--text-xs, .75rem)}}&[size=sm]{span,p,div{font-size:var(--text-sm, .875rem)}}&[size=base]{span,p,div{font-size:var(--text-base, 1rem)}}&[size=lg]{span,p,div{font-size:var(--text-lg, 1.125rem)}}&[size=xl]{span,p,div{font-size:var(--text-xl, 1.25rem)}}&[size="2xl"]{span,p,div{font-size:var(--text-2xl, 1.5rem)}}&[size="3xl"]{span,p,div{font-size:var(--text-3xl, 1.875rem)}}&[weight=normal]{span,p,div{font-weight:var(--font-normal, 400)}}&[weight=medium]{span,p,div{font-weight:var(--font-medium, 500)}}&[weight=semibold]{span,p,div{font-weight:var(--font-semibold, 600)}}&[weight=bold]{span,p,div{font-weight:var(--font-bold, 700)}}&[muted]{span,p,div{opacity:.6}}&[mono]{span,p,div{font-family:monospace}}&[align=left]{span,p,div{text-align:left}}&[align=center]{span,p,div{text-align:center}}&[align=right]{span,p,div{text-align:right}}&[color=primary]{span,p,div{color:var(--color-primary)}}&[color=secondary]{span,p,div{color:var(--color-secondary)}}&[color=success]{span,p,div{color:var(--color-success)}}&[color=danger]{span,p,div{color:var(--color-danger)}}&[color=warning]{span,p,div{color:var(--color-warning)}}&[color=info]{span,p,div{color:var(--color-info)}}&[color=muted]{span,p,div{opacity:.6}}&[color=inverse]{span,p,div{color:var(--color-inverse)}}&[transform=capitalize]{span,p,div{text-transform:capitalize}}&[transform=uppercase]{span,p,div{text-transform:uppercase}}&[transform=lowercase]{span,p,div{text-transform:lowercase}}&[transform=none]{span,p,div{text-transform:none}}}
`,mimeType:"text/css"},"/$app/uix/layout/flex.css":{content:`:where(.uix-flex,uix-flex){display:flex;flex-direction:var(--flex-direction, row);gap:var(--flex-gap);align-items:var(--flex-align, stretch);justify-content:var(--flex-justify, flex-start);flex-wrap:var(--flex-wrap, nowrap);box-sizing:border-box;&[direction=row]{--flex-direction: row}&[direction=column]{--flex-direction: column}&[direction=row-reverse]{--flex-direction: row-reverse}&[direction=column-reverse]{--flex-direction: column-reverse}&[gap=none]{--flex-gap: 0}&[gap=xs]{--flex-gap: var(--spacing-xs, .25rem)}&[gap=sm]{--flex-gap: var(--spacing-sm, .5rem)}&[gap=md]{--flex-gap: var(--spacing-md, .75rem)}&[gap=lg]{--flex-gap: var(--spacing-lg, 1rem)}&[gap=xl]{--flex-gap: var(--spacing-xl, 1.5rem)}&[gap="2xl"]{--flex-gap: var(--spacing-2xl, 2rem)}&[gap="3xl"]{--flex-gap: var(--spacing-3xl, 3rem)}&[align=start]{--flex-align: flex-start}&[align=center]{--flex-align: center}&[align=end]{--flex-align: flex-end}&[align=stretch]{--flex-align: stretch}&[align=baseline]{--flex-align: baseline}&[justify=start]{--flex-justify: flex-start}&[justify=center]{--flex-justify: center}&[justify=end]{--flex-justify: flex-end}&[justify=space-between]{--flex-justify: space-between}&[justify=space-around]{--flex-justify: space-around}&[justify=space-evenly]{--flex-justify: space-evenly}&[wrap=wrap]{--flex-wrap: wrap}&[wrap=nowrap]{--flex-wrap: nowrap}&[wrap=wrap-reverse]{--flex-wrap: wrap-reverse}>[flex-1]{flex:1 1 0%}>[flex-auto]{flex:1 1 auto}>[flex-initial]{flex:0 1 auto}>[flex-none]{flex:none}>[flex-grow]{flex-grow:1}>[flex-grow="0"]{flex-grow:0}>[flex-shrink]{flex-shrink:1}>[flex-shrink="0"]{flex-shrink:0}>[flex-basis=auto]{flex-basis:auto}>[flex-basis="0"]{flex-basis:0}>[align-self=start]{align-self:flex-start}>[align-self=center]{align-self:center}>[align-self=end]{align-self:flex-end}>[align-self=stretch]{align-self:stretch}>[w-full]{width:100%}}
`,mimeType:"text/css"},"/$app/uix/navigation/accordion.css":{content:`:where(.uix-accordion,uix-accordion){display:flex;width:100%;--accordion-border-radius: var(--radius-md, .375rem);--accordion-padding: .25rem .5rem;--accordion-gap: 0;--accordion-background: transparent;--accordion-border-color: transparent;--accordion-header-background: transparent;--accordion-header-color: var(--color-surface-lighter);--header-border-top: var(--color-surface-dark);--accordion-header-background-hover: var(--color-surface-dark);--accordion-header-color-hover: var(--color-inverse);--accordion-header-background-active: var(--color-surface-darker);--accordion-header-color-active: var(--color-inverse);--accordion-panel-background: transparent;--accordion-panel-color: var(--color-surface-lighter);--accordion-transition: background-color .2s ease, color .2s ease, border-color .2s ease;&::part(container){display:flex;flex-direction:column;width:100%;gap:var(--accordion-gap);background:var(--accordion-background);border:1px solid var(--accordion-border-color);border-radius:var(--accordion-border-radius);overflow:hidden}>*:nth-child(odd){display:flex;width:100%;text-align:left;cursor:pointer;user-select:none;padding:var(--accordion-padding);font-size:var(--text-base, 1rem);font-weight:var(--font-medium, 500);background:var(--accordion-header-background);border:none;border-top:1px solid var(--header-border-top);transition:var(--accordion-transition);&:hover{background:var(--accordion-header-background-hover)}&[active][activeBg]{background:var(--accordion-header-background-active)}}>*:nth-child(1){border-top:none}>*:nth-child(2n){background:var(--accordion-panel-background);color:var(--accordion-panel-color);font-size:var(--text-sm, .875rem);line-height:var(--leading-relaxed, 1.6);transition:var(--accordion-transition);>*{padding-left:40px;padding-block:.5rem}&[hide]{display:none}}&[variant=bordered]{--accordion-border-color: var(--color-surface-dark);--header-border-top: var(--color-surface-dark);--accordion-header-background-hover: var(--color-surface-dark);--accordion-header-background-active: var(--color-surface-darker);&::part(container){border-width:2px}>*:nth-child(odd){border-top-width:1px}}&[variant=filled]{--accordion-background: var(--color-surface-lighter);--accordion-border-color: transparent;--header-border-top: var(--color-surface-light);--accordion-header-background-active: var(--color-surface);--accordion-panel-background: var(--color-surface);--accordion-header-background-hover: var(--color-surface);>*:nth-child(odd)[active]{box-shadow:0 1px 2px #0003}}&[variant=flush]{--accordion-background: transparent;--accordion-border-color: transparent;--accordion-padding: 0;--header-border-top: transparent;--accordion-header-background: transparent;--accordion-header-background-hover: var(--color-surface-light);--accordion-header-background-active: var(--color-surface);--accordion-panel-background: transparent;&::part(container){border:none;padding:0}>*:nth-child(odd){border-top:none}}&[variant=separated]{--accordion-gap: var(--spacing-sm, .5rem);--accordion-border-color: transparent;--header-border-top: transparent;&::part(container){border:none;padding:var(--spacing-sm, .5rem)}>*:nth-child(odd){border:1px solid var(--color-surface-dark);border-radius:var(--accordion-border-radius)}>*:nth-child(2n){border:1px solid var(--color-surface-dark);border-top:none;border-radius:0 0 var(--accordion-border-radius) var(--accordion-border-radius)}}&:not([rounded]){--accordion-border-radius: 0;&::part(container){border-radius:0}}}
`,mimeType:"text/css"},"/$app/uix/navigation/nav-item.css":{content:`:where(.uix-nav-item,uix-nav-item){--nav-item-padding-y: .5rem;--nav-item-padding-x: .75rem;--nav-item-gap: .75rem;--nav-item-font-size: var(--text-sm, .875rem);--nav-item-line-height: var(--leading-tight, 1.25rem);--nav-item-border-radius: 0;--nav-item-color: var(--text-color, inherit);--nav-item-background: transparent;--nav-item-hover-background: var(--color-surface-dark, rgba(0, 0, 0, .05));--nav-item-hover-color: var(--text-color, inherit);--nav-item-active-background: var(--color-primary, rgba(0, 0, 0, .1));--nav-item-active-color: var(--color-surface-darker, inherit);--nav-item-disabled-opacity: .5;--nav-item-indicator-width: 2px;--nav-item-indicator-color: var(--color-primary, currentColor);--nav-item-indicator-length: 50%;--nav-item-badge-background: var(--color-surface-darker);--nav-item-badge-color: var(--text-color, #fff);--nav-item-badge-padding: .2rem .4rem;--nav-item-badge-font-size: var(--text-xs, .6rem);--nav-item-badge-border-radius: var(--radius-md);all:unset;display:flex;align-items:center;gap:var(--nav-item-gap);padding:var(--nav-item-padding-y) var(--nav-item-padding-x);font-size:var(--nav-item-font-size);line-height:var(--nav-item-line-height);color:var(--nav-item-color);background-color:var(--nav-item-background);border-radius:var(--nav-item-border-radius);cursor:pointer;transition:background-color .15s ease-in-out;width:100%;text-decoration:none;box-sizing:border-box;button{display:flex;justify-content:space-between;width:100%}&[rounded]{--nav-item-border-radius: var(--radius-md, .375rem)}&:not([prevent-collapse]){&:hover:not(:disabled){background-color:var(--nav-item-hover-background)}button{cursor:pointer}}&[size=sm]{--nav-item-padding-y: .375rem;--nav-item-padding-x: .5rem;--nav-item-gap: .5rem;--nav-item-font-size: var(--text-sm, .8125rem);--nav-item-line-height: var(--leading-tight, 1.125rem)}&[size=lg]{--nav-item-padding-y: .625rem;--nav-item-padding-x: 1rem;--nav-item-gap: 1rem;--nav-item-font-size: var(--text-base, 1rem);--nav-item-line-height: var(--leading-normal, 1.5rem)}&[active][activeBg]{background-color:var(--nav-item-active-background);color:var(--nav-item-active-color);font-weight:var(--font-semibold, 600)}&[active]:not([activeBg]){background-color:transparent;color:var(--link-active-color);font-weight:var(--font-semibold, 600)}&:disabled{opacity:var(--nav-item-disabled-opacity);cursor:not-allowed}.uix-icon{display:flex;align-items:center;justify-content:center;flex-shrink:0}.label{flex:1;display:flex;flex-direction:row;gap:5px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.badge{display:inline-flex;align-items:center;justify-content:center;padding:var(--nav-item-badge-padding);font-size:var(--nav-item-badge-font-size);font-weight:var(--font-semibold, 600);line-height:1;color:var(--nav-item-badge-color);background-color:var(--nav-item-badge-background);border-radius:var(--nav-item-badge-border-radius);flex-shrink:0}&[header] button{position:relative;&:before{content:"";display:inline-block;width:.5em;height:.5em;margin-top:5px;margin-left:.5rem;margin-right:1rem;border-right:2px solid currentColor;border-bottom:2px solid currentColor;transform:rotate(-45deg);transition:transform .2s ease;flex-shrink:0;vertical-align:middle}}&[header][active] button:before{transform:rotate(45deg);margin-top:3px}&[iconOnly]{justify-content:center;padding:var(--nav-item-padding-y);.nav-item-icon{margin:0}}&[indicatorPosition]:not([indicatorPosition=none])[active]{background-color:transparent}&[indicatorPosition=left]{position:relative;&[active]:before{content:"";position:absolute;left:0;top:50%;transform:translateY(-50%);width:var(--nav-item-indicator-width);height:var(--nav-item-indicator-length);background-color:var(--nav-item-indicator-color);border-radius:0 var(--radius-md, 4px) var(--radius-md, 4px) 0}}&[indicatorPosition=right]{position:relative;&[active]:before{content:"";position:absolute;right:0;top:50%;transform:translateY(-50%);width:var(--nav-item-indicator-width);height:var(--nav-item-indicator-length);background-color:var(--nav-item-indicator-color);border-radius:var(--radius-md, 4px) 0 0 var(--radius-md, 4px)}}&[indicatorPosition=top]{position:relative;&[active]:before{content:"";position:absolute;top:0;left:50%;transform:translate(-50%);height:var(--nav-item-indicator-width);width:var(--nav-item-indicator-length);background-color:var(--nav-item-indicator-color);border-radius:0 0 var(--radius-md, 4px) var(--radius-md, 4px)}}&[indicatorPosition=bottom]{position:relative;&[active]:before{content:"";position:absolute;bottom:0;left:50%;transform:translate(-50%);height:var(--nav-item-indicator-width);width:var(--nav-item-indicator-length);background-color:var(--nav-item-indicator-color);border-radius:var(--radius-md, 4px) var(--radius-md, 4px) 0 0}}&:not([prevent-collapse]):hover:not(:disabled):not([active]){color:var(--nav-item-hover-color)}}
`,mimeType:"text/css"},"/$app/icon-lucide/lucide/rotate-ccw.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M3 12a9 9 0 1 0 9-9a9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></g></svg>',mimeType:"image/svg+xml"},"/$app/uix/display/badge.js":{content:`/**
 * Badge Component
 *
 * @component
 * @category display
 * @tag uix-badge
 *
 * Small status indicator or label for displaying metadata, counts, or status.
 * Supports multiple variants for different semantic meanings.
 *
 * @slot - Badge text content
 *
 * @example Basic Badge
 * \`\`\`html
 * <uix-badge>Default</uix-badge>
 * \`\`\`
 *
 * @example Badge Variants
 * Different colors for various statuses
 * \`\`\`html
 * <uix-badge variant="default">Default</uix-badge>
 * <uix-badge variant="success">Active</uix-badge>
 * <uix-badge variant="danger">Error</uix-badge>
 * <uix-badge variant="warning">Warning</uix-badge>
 * <uix-badge variant="info">Info</uix-badge>
 * \`\`\`
 *
 * @example Badge Sizes
 * \`\`\`html
 * <uix-badge size="sm">Small</uix-badge>
 * <uix-badge size="md">Medium</uix-badge>
 * <uix-badge size="lg">Large</uix-badge>
 * \`\`\`
 *
 * @example With Count
 * \`\`\`html
 * <uix-badge variant="danger">5</uix-badge>
 * <uix-badge variant="success">New</uix-badge>
 * \`\`\`
 *
 * @example Badge Outline
 * \`\`\`html
 * <uix-badge variant="success" outline>Approved</uix-badge>
 * \`\`\`
 *
 * @example In Context
 * \`\`\`javascript
 * import { html } from "/npm/lit-html";
 *
 * export default {
 *   tag: "user-profile",
 *
 *   render() {
 *     return html\`
 *       <h2>
 *         John Doe
 *         <uix-badge variant="success" size="sm">Pro</uix-badge>
 *       </h2>
 *     \`;
 *   }
 * };
 * \`\`\`
 */

import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

export default {
  i18n: {},
  properties: {
    variant: T.string("default"), // default, success, danger, warning, info
    size: T.string("md"), // sm, md, lg
    outline: T.boolean(),
  },
  style: true,
  shadow: true,
  render() {
    return html\`
        <slot></slot>
    \`;
  },
};
`,mimeType:"text/javascript"},"/$app/uix/form/code.js":{content:`import {
  defaultKeymap,
  history,
  historyKeymap,
  indentWithTab,
} from "https://esm.sh/@codemirror/commands";
import { css } from "https://esm.sh/@codemirror/lang-css";
import { html } from "https://esm.sh/@codemirror/lang-html";
import { javascript } from "https://esm.sh/@codemirror/lang-javascript";
import { indentUnit } from "https://esm.sh/@codemirror/language";
import { SearchCursor, SearchQuery } from "https://esm.sh/@codemirror/search";
import {
  EditorState,
  StateEffect,
  StateField,
} from "https://esm.sh/@codemirror/state";
import {
  Decoration,
  EditorView,
  highlightSpecialChars,
  keymap,
  lineNumbers,
} from "https://esm.sh/@codemirror/view";
import { gruvboxDark } from "https://esm.sh/@fsegurai/codemirror-theme-gruvbox-dark";

// Language map for synchronous loading
const langMap = {
  javascript,
  css,
  html,
};

// Assuming T is imported correctly in your environment
// For demonstration, let's create a mock T
const T = {
  string: () => ({ type: "string" }),
  function: () => ({ type: "function" }),
  number: (options) => ({ type: "number", ...options }),
  boolean: (defaultValue) => ({ type: "boolean", default: defaultValue }),
  array: (defaultValue) => ({ type: "array", default: defaultValue }),
};
// import T from "/$app/types/index.js";

export default {
  tag: "textarea",
  class: "flex flex-grow",
  style: true,
  properties: {
    content: T.string(),
    language: T.string(),
    onUpdate: T.function(),
    path: T.string(),
    cursor: T.number({ sync: "local", scope: "path" }),
    readonly: T.boolean(false),
    lineNumber: T.boolean(true),
    findMatches: T.array([]),
    currentFindIndex: T.number(-1),
    findDecorations: T.array([]),
  },
  isUpdatingFromOutside: false,

  setCursorPosition(position) {
    if (this.view && position != null) {
      const docLength = this.view.state.doc.length;
      const validPosition = Math.min(Math.max(0, position), docLength);
      this.view.dispatch({
        selection: { anchor: validPosition },
        scrollIntoView: true,
      });
    }
  },

  goToLine(lineNumber) {
    if (!this.view) return;
    try {
      // Get the starting position of the requested line
      const line = this.view.state.doc.line(lineNumber);
      this.view.dispatch({
        selection: { anchor: line.from },
        effects: EditorView.scrollIntoView(line.from, { y: "center" }),
      });
      this.view.focus();
    } catch (e) {
      console.warn(\`Could not go to line \${lineNumber}\`, e);
    }
  },

  /**
   * Inserts text at the current cursor position or replaces the current selection.
   * @param {string} text The text to insert into the editor.
   */
  insertTextAtCursor(text) {
    if (!this.view) {
      console.warn("Editor view not available. Cannot insert text.");
      return;
    }

    this.view.dispatch({
      changes: {
        from: this.view.state.selection.main.from,
        to: this.view.state.selection.main.to,
        insert: text,
      },
      selection: {
        anchor: this.view.state.selection.main.from + text.length,
      },
    });
    this.view.focus();
  },

  /**
   * Creates a search query object for CodeMirror
   */
  createSearchQuery(query, options = {}) {
    if (!query) return null;
    if (!this.SearchQuery) {
      this.SearchQuery = SearchQuery; // Ensure it's set if connected hasn't run
    }

    try {
      return new this.SearchQuery({
        search: query,
        caseSensitive: options.matchCase || false,
        regexp: options.useRegex || false,
        wholeWord: options.wholeWord || false,
      });
    } catch (e) {
      console.error("Invalid search query:", e);
      return null;
    }
  },

  /**
   * Find all matches in the document
   */
  find(query, options = {}) {
    if (!this.view || !query) return { currentMatch: 0, totalMatches: 0 };

    if (!this.SearchCursor) {
      this.SearchCursor = SearchCursor; // Ensure it's set
    }

    const searchQuery = this.createSearchQuery(query, options);
    console.log({ searchQuery });
    if (!searchQuery) {
      return { currentMatch: 0, totalMatches: 0 };
    }

    // Clear previous decorations
    this.clearFindDecorations();

    const doc = this.view.state.doc;
    const matches = [];

    // Use SearchCursor to find all matches
    const cursor = new this.SearchCursor(doc, query, 0, doc.length);

    // Find all matches
    while (!cursor.done) {
      const next = cursor.next();
      if (!next.done) {
        matches.push({
          from: next.value.from,
          to: next.value.to,
        });
      }
    }

    this.findMatches = matches;
    if (matches.length === 0) {
      this.currentFindIndex = -1;
      return { currentMatch: 0, totalMatches: 0 };
    }

    // Find the match closest to current cursor position
    const cursorPos = this.view.state.selection.main.head;
    let closestIndex = 0;
    let minDistance = Number.POSITIVE_INFINITY;

    matches.forEach((match, index) => {
      const distance = Math.abs(match.from - cursorPos);
      if (distance < minDistance) {
        minDistance = distance;
        closestIndex = index;
      }
    });

    this.currentFindIndex = closestIndex;

    // Add decorations
    this.addFindDecorations();

    // Scroll to current match
    if (matches[this.currentFindIndex]) {
      const match = matches[this.currentFindIndex];
      this.view.dispatch({
        selection: { anchor: match.from, head: match.to },
        effects: EditorView.scrollIntoView(match.from, { y: "center" }),
      });
    }

    return {
      currentMatch: this.currentFindIndex + 1,
      totalMatches: matches.length,
    };
  },

  /**
   * Add decorations for all matches
   */
  addFindDecorations() {
    if (!this.view) return;

    if (!this.Decoration) this.Decoration = Decoration;
    if (!this.StateEffect) this.StateEffect = StateEffect;

    const decorations = this.findMatches.map((match, index) => {
      const isCurrent = index === this.currentFindIndex;
      return this.Decoration.mark({
        class: isCurrent ? "cm-searchMatch-current" : "cm-searchMatch",
      }).range(match.from, match.to);
    });

    if (decorations.length > 0) {
      this.view.dispatch({
        effects: this.addDecorations.of(decorations),
      });
    }
  },

  /**
   * Go to next match
   */
  findNext(query, options = {}) {
    if (!this.view || this.findMatches.length === 0) {
      return this.find(query, options);
    }

    this.currentFindIndex =
      (this.currentFindIndex + 1) % this.findMatches.length;

    // Scroll to match
    const match = this.findMatches[this.currentFindIndex];
    this.view.dispatch({
      selection: { anchor: match.from, head: match.to },
      effects: EditorView.scrollIntoView(match.from, { y: "center" }),
    });

    return {
      currentMatch: this.currentFindIndex + 1,
      totalMatches: this.findMatches.length,
    };
  },

  /**
   * Go to previous match
   */
  findPrevious(query, options = {}) {
    if (!this.view || this.findMatches.length === 0) {
      return this.find(query, options);
    }

    this.currentFindIndex = this.currentFindIndex - 1;
    if (this.currentFindIndex < 0) {
      this.currentFindIndex = this.findMatches.length - 1;
    }

    // Scroll to match
    const match = this.findMatches[this.currentFindIndex];
    this.view.dispatch({
      selection: { anchor: match.from, head: match.to },
      effects: EditorView.scrollIntoView(match.from, { y: "center" }),
    });

    return {
      currentMatch: this.currentFindIndex + 1,
      totalMatches: this.findMatches.length,
    };
  },

  /**
   * Replace the current match
   */
  replaceNext(findQuery, replaceQuery, options = {}) {
    if (
      !this.view ||
      this.findMatches.length === 0 ||
      this.currentFindIndex < 0
    ) {
      return this.find(findQuery, options);
    }

    const currentMatch = this.findMatches[this.currentFindIndex];

    // Replace current match
    this.view.dispatch({
      changes: {
        from: currentMatch.from,
        to: currentMatch.to,
        insert: replaceQuery,
      },
    });

    // Re-run find to update matches
    const result = this.find(findQuery, options);

    // If there are still matches, move to next one
    if (result.totalMatches > 0) {
      return this.findNext(findQuery, options);
    }

    return result;
  },

  /**
   * Replace all matches
   */
  replaceAll(findQuery, replaceQuery, options = {}) {
    if (!this.view) return 0;

    // First, find all matches
    this.find(findQuery, options);

    if (this.findMatches.length === 0) return 0;

    const count = this.findMatches.length;

    // Create changes for all matches (in reverse order to maintain positions)
    const changes = [...this.findMatches].reverse().map((match) => ({
      from: match.from,
      to: match.to,
      insert: replaceQuery,
    }));

    // Apply all replacements at once
    this.view.dispatch({ changes });

    // Clear find state
    this.clearFindDecorations();

    return count;
  },

  /**
   * Clear all find decorations
   */
  clearFindDecorations() {
    if (this.view && this.clearDecorations) {
      this.view.dispatch({
        effects: this.clearDecorations.of(null),
      });
    }
    this.findMatches = [];
    this.currentFindIndex = -1;
  },

  getLanguageFromPath(path) {
    if (!path) return null;
    const ext = path.split(".").pop()?.toLowerCase();
    const extMap = {
      js: "javascript",
      jsx: "javascript",
      mjs: "javascript",
      cjs: "javascript",
      css: "css",
      html: "html",
      htm: "html",
      json: "javascript",
    };
    return extMap[ext] || null;
  },

  connected() {
    const parent = this;
    if (!parent || this.view) return;

    // Modules are imported at the top, so we assign them to \`this\`
    // for use in other methods.
    this.EditorView = EditorView;
    this.EditorState = EditorState;
    this.Decoration = Decoration;
    this.StateEffect = StateEffect;
    this.SearchQuery = SearchQuery;
    this.SearchCursor = SearchCursor;

    this.addDecorations = StateEffect.define();
    this.clearDecorations = StateEffect.define();

    const decorationField = StateField.define({
      create() {
        return Decoration.none;
      },
      update(decorations, tr) {
        for (const effect of tr.effects) {
          if (effect.is(this.addDecorations)) {
            decorations = Decoration.set(effect.value);
          }
          if (effect.is(this.clearDecorations)) {
            decorations = Decoration.none;
          }
        }
        return decorations;
      },
      provide: (f) => EditorView.decorations.from(f),
    });

    const detectedLanguage =
      this.language || this.getLanguageFromPath(this.path);

    // Use the sync langMap
    const langExtension = [];
    if (detectedLanguage && langMap[detectedLanguage]) {
      const langFunc = langMap[detectedLanguage];
      if (typeof langFunc === "function") {
        langExtension.push(langFunc());
      } else {
        console.warn(
          \`CodeMirror language function for "\${detectedLanguage}" not found.\`,
        );
      }
    }

    const updateListener = EditorView.updateListener.of((update) => {
      if (update.docChanged && this.onUpdate) {
        const newContent = update.state.doc.toString();
        this.isUpdatingFromOutside = true;
        this.onUpdate(newContent);
        queueMicrotask(() => {
          this.isUpdatingFromOutside = false;
        });
      }

      if (update.selectionSet) {
        const newCursor = update.state.selection.main.head;
        if (newCursor !== this.cursor) {
          this.cursor = newCursor;
        }
      }
    });

    const customFontSize = EditorView.theme({
      ".cm-editor": {
        fontSize: "12px",
      },
    });

    const findTheme = EditorView.theme({
      ".cm-searchMatch": {
        backgroundColor: "rgba(234, 92, 0, 0.3)",
      },
      ".cm-searchMatch-current": {
        backgroundColor: "rgba(250, 189, 47, 0.5)",
        outline: "1px solid rgba(250, 189, 47, 0.8)",
      },
    });

    const extensions = [
      ...(this.lineNumber ? [lineNumbers()] : []),
      highlightSpecialChars(),
      history(),
      keymap.of([...defaultKeymap, ...historyKeymap, indentWithTab]),
      gruvboxDark,
      customFontSize,
      findTheme,
      EditorView.lineWrapping,
      ...langExtension,
      updateListener,
      decorationField,
      indentUnit.of("  "),
      EditorState.tabSize.of(2),
      EditorState.readOnly.of(this.readonly),
    ];

    const state = EditorState.create({
      doc: this.content || "",
      extensions: extensions,
    });
    const opts = { state, parent, root: this.getRootNode() };
    this.view = new EditorView(opts);
    if (!this.readonly) this.view.focus();

    this.setCursorPosition(this.cursor);
  },

  updated({ changedProps }) {
    if (
      this.view &&
      changedProps.has("content") &&
      !this.isUpdatingFromOutside
    ) {
      const currentDoc = this.view.state.doc.toString();
      if (currentDoc !== this.content) {
        const cursorPos = this.view.state.selection.main.head;

        this.view.dispatch({
          changes: {
            from: 0,
            to: currentDoc.length,
            insert: this.content || "",
          },
          selection: {
            anchor: Math.min(cursorPos, (this.content || "").length),
          },
        });
      }
    }

    if (
      this.view &&
      changedProps.has("cursor") &&
      !this.isUpdatingFromOutside
    ) {
      const currentCursor = this.view.state.selection.main.head;
      if (this.cursor != null && this.cursor !== currentCursor) {
        this.setCursorPosition(this.cursor);
      }
    }
  },

  disconnected() {
    if (this.view) {
      this.view.destroy();
      this.view = null;
    }

    // Clear the stored instances
    this.EditorView = null;
    this.EditorState = null;
    this.Decoration = null;
    this.StateEffect = null;
    this.SearchQuery = null;
    this.SearchCursor = null;
    this.addDecorations = null;
    this.clearDecorations = null;
  },
};
`,mimeType:"text/javascript"},"/$app/uix/layout/grid.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

export default {
  tag: "uix-grid",
  properties: {
    columns: T.string({ defaultValue: "auto-fit" }),
    minColumnWidth: T.string({ defaultValue: "250px" }),
    cols: T.string(),
    rows: T.string(),
    gap: T.string({
      defaultValue: "md",
      enum: ["none", "xs", "sm", "md", "lg", "xl", "2xl", "3xl"],
    }),
    align: T.string({
      defaultValue: "stretch",
      enum: ["start", "center", "end", "stretch"],
    }),
    justify: T.string({
      defaultValue: "start",
      enum: ["start", "center", "end", "stretch"],
    }),
  },
  style: true,
  shadow: true,

  render() {
    const customStyles = [];
    if (this.cols) customStyles.push(\`--grid-cols: \${this.cols}\`);
    if (this.rows) customStyles.push(\`--grid-rows: \${this.rows}\`);
    if (this.minColumnWidth)
      customStyles.push(\`--grid-min-column-width: \${this.minColumnWidth}\`);
    const styleAttr = customStyles.length > 0 ? customStyles.join("; ") : "";

    return html\`
      <div part="container" class="grid" style=\${styleAttr}>
        <slot></slot>
      </div>
    \`;
  },
};

/**
 * Grid Component
 *
 * @component
 * @category layout
 * @tag uix-grid
 *
 * A CSS Grid layout component for creating responsive grid layouts.
 *
 * @example
 * // Basic auto-fit grid
 * \`\`\`html
 * <uix-grid>
 *   <uix-panel variant="bordered">Item 1</uix-panel>
 *   <uix-panel variant="bordered">Item 2</uix-panel>
 *   <uix-panel variant="bordered">Item 3</uix-panel>
 *   <uix-panel variant="bordered">Item 4</uix-panel>
 * </uix-grid>
 * \`\`\`
 *
 * @example
 * // Fixed number of columns
 * \`\`\`html
 * <uix-grid columns="3">
 *   <uix-panel variant="bordered">Item 1</uix-panel>
 *   <uix-panel variant="bordered">Item 2</uix-panel>
 *   <uix-panel variant="bordered">Item 3</uix-panel>
 *   <uix-panel variant="bordered">Item 4</uix-panel>
 *   <uix-panel variant="bordered">Item 5</uix-panel>
 *   <uix-panel variant="bordered">Item 6</uix-panel>
 * </uix-grid>
 * \`\`\`
 *
 * @example
 * // Custom minimum column width
 * \`\`\`html
 * <uix-grid min-column-width="150px">
 *   <uix-panel variant="bordered">Small 1</uix-panel>
 *   <uix-panel variant="bordered">Small 2</uix-panel>
 *   <uix-panel variant="bordered">Small 3</uix-panel>
 *   <uix-panel variant="bordered">Small 4</uix-panel>
 *   <uix-panel variant="bordered">Small 5</uix-panel>
 *   <uix-panel variant="bordered">Small 6</uix-panel>
 * </uix-grid>
 * \`\`\`
 *
 * @example
 * // Gap variants
 * \`\`\`html
 * <div style="display: flex; flex-direction: column; gap: 2rem;">
 *   <div>
 *     <p>Small gap:</p>
 *     <uix-grid columns="3" gap="sm">
 *       <div style="background: #ddd; padding: 1rem;">Item 1</div>
 *       <div style="background: #ddd; padding: 1rem;">Item 2</div>
 *       <div style="background: #ddd; padding: 1rem;">Item 3</div>
 *     </uix-grid>
 *   </div>
 *
 *   <div>
 *     <p>Large gap:</p>
 *     <uix-grid columns="3" gap="lg">
 *       <div style="background: #ddd; padding: 1rem;">Item 1</div>
 *       <div style="background: #ddd; padding: 1rem;">Item 2</div>
 *       <div style="background: #ddd; padding: 1rem;">Item 3</div>
 *     </uix-grid>
 *   </div>
 * </div>
 * \`\`\`
 *
 * @example
 * // Product grid
 * \`\`\`html
 * <uix-grid min-column-width="200px" gap="lg">
 *   \${products.map(product => html\`
 *     <uix-panel variant="elevated">
 *       <img src=\${product.image} alt=\${product.name} style="width: 100%; height: 200px; object-fit: cover;">
 *       <div style="padding: 1rem;">
 *         <h3>\${product.name}</h3>
 *         <p>\${product.price}</p>
 *         <uix-button variant="primary" style="width: 100%;">Add to Cart</uix-button>
 *       </div>
 *     </uix-panel>
 *   \`)}
 * </uix-grid>
 * \`\`\`
 *
 * @example
 * // Dashboard grid
 * \`\`\`html
 * <uix-grid columns="4" gap="md">
 *   <uix-panel variant="elevated">
 *     <h4>Total Users</h4>
 *     <p style="font-size: 2rem; font-weight: bold;">1,234</p>
 *   </uix-panel>
 *   <uix-panel variant="elevated">
 *     <h4>Revenue</h4>
 *     <p style="font-size: 2rem; font-weight: bold;">$45K</p>
 *   </uix-panel>
 *   <uix-panel variant="elevated">
 *     <h4>Orders</h4>
 *     <p style="font-size: 2rem; font-weight: bold;">567</p>
 *   </uix-panel>
 *   <uix-panel variant="elevated">
 *     <h4>Sessions</h4>
 *     <p style="font-size: 2rem; font-weight: bold;">890</p>
 *   </uix-panel>
 * </uix-grid>
 * \`\`\`
 *
 * @example
 * // Image gallery
 * \`\`\`html
 * <uix-grid min-column-width="150px" gap="xs">
 *   <img src="/image1.jpg" alt="Image 1" style="width: 100%; height: 150px; object-fit: cover;">
 *   <img src="/image2.jpg" alt="Image 2" style="width: 100%; height: 150px; object-fit: cover;">
 *   <img src="/image3.jpg" alt="Image 3" style="width: 100%; height: 150px; object-fit: cover;">
 *   <img src="/image4.jpg" alt="Image 4" style="width: 100%; height: 150px; object-fit: cover;">
 *   <img src="/image5.jpg" alt="Image 5" style="width: 100%; height: 150px; object-fit: cover;">
 *   <img src="/image6.jpg" alt="Image 6" style="width: 100%; height: 150px; object-fit: cover;">
 * </uix-grid>
 * \`\`\`
 *
 * @example
 * // Feature cards
 * \`\`\`html
 * <uix-grid columns="3" gap="xl">
 *   <uix-panel variant="bordered" style="text-align: center;">
 *     <uix-icon name="zap" size="xl" style="color: var(--color-primary);"></uix-icon>
 *     <h3>Fast</h3>
 *     <p>Lightning fast performance for all your needs.</p>
 *   </uix-panel>
 *
 *   <uix-panel variant="bordered" style="text-align: center;">
 *     <uix-icon name="shield" size="xl" style="color: var(--color-success);"></uix-icon>
 *     <h3>Secure</h3>
 *     <p>Enterprise-grade security you can trust.</p>
 *   </uix-panel>
 *
 *   <uix-panel variant="bordered" style="text-align: center;">
 *     <uix-icon name="trending-up" size="xl" style="color: var(--color-info);"></uix-icon>
 *     <h3>Scalable</h3>
 *     <p>Grows seamlessly with your business.</p>
 *   </uix-panel>
 * </uix-grid>
 * \`\`\`
 *
 * @example
 * // Responsive columns (using CSS custom property)
 * \`\`\`html
 * <uix-grid style="--grid-columns: 1;" gap="md">
 *   <uix-panel variant="bordered">Mobile: 1 column</uix-panel>
 *   <uix-panel variant="bordered">Mobile: 1 column</uix-panel>
 * </uix-grid>
 *
 * <style>
 *   @media (min-width: 768px) {
 *     uix-grid {
 *       --grid-columns: 2;
 *     }
 *   }
 *   @media (min-width: 1024px) {
 *     uix-grid {
 *       --grid-columns: 3;
 *     }
 *   }
 * </style>
 * \`\`\`
 *
 * @example
 * // Team member grid
 * \`\`\`html
 * <uix-grid min-column-width="200px" gap="lg">
 *   \${teamMembers.map(member => html\`
 *     <uix-panel variant="elevated" style="text-align: center;">
 *       <uix-avatar size="xl" src=\${member.photo}></uix-avatar>
 *       <h3>\${member.name}</h3>
 *       <p>\${member.role}</p>
 *       <uix-flex direction="horizontal" justify="center" spacing="sm">
 *         <uix-link href=\${member.twitter}><uix-icon name="twitter"></uix-icon></uix-link>
 *         <uix-link href=\${member.linkedin}><uix-icon name="linkedin"></uix-icon></uix-link>
 *       </uix-flex>
 *     </uix-panel>
 *   \`)}
 * </uix-grid>
 * \`\`\`
 */
`,mimeType:"text/javascript"},"/$app/uix/layout/split-pane.css":{content:`:where(.uix-split-pane,uix-split-pane){display:flex;width:100%;height:100%;overflow:hidden;>[slot]{width:100%}&::part(primary),&::part(secondary){width:100%;display:flex;overflow:auto;background:var( --split-pane-panel-bg, var(--color-surface-darker, #282828) );flex-shrink:0;flex-grow:0}&::part(primary){min-width:0;min-height:0}&::part(secondary){flex:1;min-width:0;min-height:0}&::part(divider){display:flex;align-items:center;justify-content:center;background:var( --split-pane-divider-bg, var(--color-surface, #504945) );flex-shrink:0;position:relative;z-index:10;transition:background .15s ease}&[direction=horizontal],&:not([direction]){flex-direction:row;&::part(divider){width:var(--divider-size, 4px);cursor:default;&:before{width:var(--divider-size, 4px);height:48px}}}&[direction=vertical]{flex-direction:column;&::part(divider){height:var(--divider-size, 4px);cursor:default;&:before{width:48px;height:var(--divider-size, 4px)}}}&[resizable]{&::part(divider):hover{background:var( --split-pane-divider-hover-bg, var(--color-primary, #fabd2f) )}&::part(divider):active{background:var( --split-pane-divider-active-bg, var(--color-primary, #fabd2f) )}&::part(divider):before{content:"";position:absolute;background:var(--color-surface-light, #3c3836);border-radius:var(--radius-full, 9999px);opacity:0;transition:opacity .2s ease}&::part(divider):hover:before{opacity:1}&[direction=horizontal]::part(divider),&:not([direction])::part(divider){cursor:col-resize}&[direction=vertical]::part(divider){cursor:row-resize}}&[dragging]{user-select:none;&[direction=horizontal],&:not([direction]){cursor:col-resize;*{cursor:col-resize!important}}&[direction=vertical]{cursor:row-resize;*{cursor:row-resize!important}}}}@media (pointer: coarse){:where(.uix-split-pane,uix-split-pane){&[direction=horizontal]::part(divider),&:not([direction])::part(divider){width:calc(var(--divider-size, 4px) * 2);margin-left:calc(var(--divider-size, 4px) * -.5);margin-right:calc(var(--divider-size, 4px) * -.5)}&[direction=vertical]::part(divider){height:calc(var(--divider-size, 4px) * 2);margin-top:calc(var(--divider-size, 4px) * -.5);margin-bottom:calc(var(--divider-size, 4px) * -.5)}}}
`,mimeType:"text/css"},"/$app/icon-lucide/lucide/book.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"/></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/book-open.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2zm20 0h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/droplet.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5S5 13 5 15a7 7 0 0 0 7 7"/></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/sliders-vertical.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 21v-7m0-4V3m8 18v-9m0-4V3m8 18v-5m0-4V3M2 14h4m4-6h4m4 8h4"/></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/compass.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="m16.24 7.76l-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z"/><circle cx="12" cy="12" r="10"/></g></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/layers.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83ZM22 17.65l-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65m20-5l-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65"/></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/eye.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M2.062 12.348a1 1 0 0 1 0-.696a10.75 10.75 0 0 1 19.876 0a1 1 0 0 1 0 .696a10.75 10.75 0 0 1-19.876 0"/><circle cx="12" cy="12" r="3"/></g></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/layout-grid.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><rect width="7" height="7" x="3" y="3" rx="1"/><rect width="7" height="7" x="14" y="3" rx="1"/><rect width="7" height="7" x="14" y="14" rx="1"/><rect width="7" height="7" x="3" y="14" rx="1"/></g></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/loader.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 2v4m4.2 1.8l2.9-2.9M18 12h4m-5.8 4.2l2.9 2.9M12 18v4m-7.1-2.9l2.9-2.9M2 12h4M4.9 4.9l2.9 2.9"/></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/pen-tool.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z"/><path d="m18 13l-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18M2.3 2.3l7.286 7.286"/><circle cx="11" cy="11" r="2"/></g></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/list-checks.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m3 17l2 2l4-4M3 7l2 2l4-4m4 1h8m-8 6h8m-8 6h8"/></svg>',mimeType:"image/svg+xml"},"/$app/uix/display/badge.css":{content:`:where(.uix-badge,uix-badge){display:inline-flex;align-items:center;justify-content:center;white-space:nowrap;width:fit-content;box-sizing:border-box;font-weight:var(--badge-font-weight, var(--font-semibold, 600));font-size:var(--badge-font-size, var(--text-xs, .75rem));line-height:var(--badge-line-height, 1rem);padding:var(--badge-padding-y, .15rem) var(--badge-padding-x, .5rem);border-radius:var(--badge-border-radius, var(--radius-md, .375rem));border:var(--badge-border-size, 0) solid var(--badge-border-color, transparent);background-color:var(--badge-background);color:var(--badge-color);&[variant=default]{--badge-background: var(--color-surface-dark);--badge-color: var(--color-surface-lighter);--badge-border-color: var(--color-surface-dark)}&[variant=success]{--badge-background: var(--color-success);--badge-color: var(--color-inverse);--badge-border-color: var(--color-success-light)}&[variant=danger]{--badge-background: var(--color-danger);--badge-color: var(--color-inverse);--badge-border-color: var(--color-danger-light)}&[variant=warning]{--badge-background: var(--color-warning);--badge-color: var(--color-inverse);--badge-border-color: var(--color-warning-light)}&[variant=info]{--badge-background: var(--color-info);--badge-color: var(--color-inverse);--badge-border-color: var(--color-info-light)}&[outline]{background-color:transparent;&[variant=default]{--badge-border-color: var(--color-surface-dark);--badge-color: var(--color-surface-darker)}&[variant=success]{--badge-border-color: var(--color-success-dark);--badge-color: var(--color-success-dark)}&[variant=danger]{--badge-border-color: var(--color-danger-dark);--badge-color: var(--color-danger-dark)}&[variant=warning]{--badge-border-color: var(--color-warning-dark);--badge-color: var(--color-warning-dark)}&[variant=info]{--badge-border-color: var(--color-info-dark);--badge-color: var(--color-info-dark)}}&[soft]{border:1px solid transparent;&[variant=success]{background-color:color-mix(in srgb,var(--color-success),transparent 85%);color:var(--color-success-darker)}&[variant=danger]{background-color:color-mix(in srgb,var(--color-danger),transparent 85%);color:var(--color-danger-darker)}&[variant=warning]{background-color:color-mix(in srgb,var(--color-warning),transparent 85%);color:var(--color-warning-darker)}&[variant=info]{background-color:color-mix(in srgb,var(--color-info),transparent 85%);color:var(--color-info-darker)}}&[size=xs]{--badge-padding-y: .0625rem;--badge-padding-x: .25rem;--badge-font-size: var(--text-xs, .65rem)}&[size=sm]{--badge-padding-y: .1rem;--badge-padding-x: .375rem;--badge-font-size: var(--text-xs, .7rem)}&[size=md]{--badge-padding-y: .15rem;--badge-padding-x: .5rem;--badge-font-size: var(--text-xs, .75rem)}&[size=lg]{--badge-padding-y: .25rem;--badge-padding-x: .75rem;--badge-font-size: var(--text-sm, .875rem)}}
`,mimeType:"text/css"},"/$app/uix/layout/grid.css":{content:`:where(.uix-grid,uix-grid){display:block;&::part(container){display:grid;gap:var(--grid-gap, var(--spacing-md, .75rem));grid-template-columns:var( --grid-cols, var( --grid-columns, repeat(auto-fit, minmax(var(--grid-min-column-width, 250px), 1fr)) ) );grid-template-rows:var(--grid-rows, auto);align-items:var(--grid-align, stretch);justify-items:var(--grid-justify, start)}&[gap=none]::part(container){gap:0}&[gap=xs]::part(container){gap:var(--spacing-xs, .25rem)}&[gap=sm]::part(container){gap:var(--spacing-sm, .5rem)}&[gap=md]::part(container){gap:var(--spacing-md, .75rem)}&[gap=lg]::part(container){gap:var(--spacing-lg, 1rem)}&[gap=xl]::part(container){gap:var(--spacing-xl, 1.5rem)}&[gap="2xl"]::part(container){gap:var(--spacing-2xl, 2rem)}&[gap="3xl"]::part(container){gap:var(--spacing-3xl, 3rem)}&[align=start]::part(container){align-items:start}&[align=center]::part(container){align-items:center}&[align=end]::part(container){align-items:end}&[align=stretch]::part(container){align-items:stretch}&[justify=start]::part(container){justify-items:start}&[justify=center]::part(container){justify-items:center}&[justify=end]::part(container){justify-items:end}&[justify=stretch]::part(container){justify-items:stretch}&[columns="1"]::part(container){grid-template-columns:repeat(1,1fr)}&[columns="2"]::part(container){grid-template-columns:repeat(2,1fr)}&[columns="3"]::part(container){grid-template-columns:repeat(3,1fr)}&[columns="4"]::part(container){grid-template-columns:repeat(4,1fr)}&[columns="5"]::part(container){grid-template-columns:repeat(5,1fr)}&[columns="6"]::part(container){grid-template-columns:repeat(6,1fr)}&[columns=auto-fill]::part(container){grid-template-columns:repeat(auto-fill,minmax(var(--grid-min-column-width, 250px),1fr))}}
`,mimeType:"text/css"},"/$app/uix/form/code.css":{content:`.cm-scroller{overflow:auto!important}.cm-editor{width:100%}
`,mimeType:"text/css"},"/admin":{content:`<!DOCTYPE html>
<html lang="en">
<head>
	<script src="/$app/base/bootstrapp.js" type="module"><\/script>
  <meta charset="utf-8" />
  <title>meetup.rio</title>
  <base href="/" />
  <meta name="viewport"
    content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
  <meta name="description" content="Discover Rio de Janeiro - Places, Events, and Things to Do" />
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#181818" />
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f3f3f3" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-title" content="meetup.rio" />
  <meta name="mobile-web-app-status-bar-style" content="black" />
  <link id="favicon" rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLW1hcC1waW4iPjxwYXRoIGQ9Ik0yMCAxMGMwIDQuOTkzLTUuNTM5IDEwLjE5My03LjM5OSAxMS43OTlhMSAxIDAgMCAxLTEuMjAyIDBDOS41MzkgMjAuMTkzIDQgMTQuOTkzIDQgMTBhOCA4IDAgMCAxIDE2IDAiLz48Y2lyY2xlIGN4PSIxMiIgY3k9IjEwIiByPSIzIi8+PC9zdmc+"/>
  <link rel="manifest" href="manifest.json" />
</head>
<body style="--text-color: #333;">
  <app-container class="w-full bg-yellow-50 min-h-screen"></view-container>
</body>
</html>
`,mimeType:"text/html"},"/$app/admin/views/dashboard.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";
import $APP from "/$app.js";
import { getModelNames, capitalize } from "../utils/model-utils.js";

export default {
  tag: "admin-dashboard",
  style: true,
  properties: {
    modelStats: T.object({ defaultValue: {} }),
    loading: T.boolean({ defaultValue: true }),
  },

  async connected() {
    await this.loadStats();
  },

  async loadStats() {
    this.loading = true;
    const stats = {};
    const models = getModelNames();

    for (const model of models) {
      try {
        const records = await $APP.Model[model].getAll();
        stats[model] = Array.isArray(records) ? records.length : 0;
      } catch (error) {
        console.error(\`Error loading stats for \${model}:\`, error);
        stats[model] = 0;
      }
    }

    this.modelStats = stats;
    this.loading = false;
  },

  navigate(path) {
    $APP.Router.go(path);
  },

  render() {
    if (this.loading) {
      return html\`
        <div class="admin-dashboard-loading">
          <uix-spinner size="lg"></uix-spinner>
        </div>
      \`;
    }

    const models = Object.entries(this.modelStats);
    const totalRecords = Object.values(this.modelStats).reduce((a, b) => a + b, 0);

    return html\`
      <div class="admin-dashboard">
        <!-- Header -->
        <div class="admin-dashboard-header">
          <h1 class="admin-dashboard-title">Dashboard</h1>
          <p class="admin-dashboard-subtitle">Manage your application data and settings</p>
        </div>

        <!-- Summary Card -->
        <uix-card class="admin-dashboard-summary">
          <div class="admin-dashboard-summary-content">
            <div>
              <p class="admin-dashboard-stat-label">Total Records</p>
              <p class="admin-dashboard-stat-value">\${totalRecords}</p>
            </div>
            <div class="admin-dashboard-stat-right">
              <p class="admin-dashboard-stat-label">Models</p>
              <p class="admin-dashboard-stat-value">\${models.length}</p>
            </div>
          </div>
        </uix-card>

        <!-- Model Stats Grid -->
        <section class="admin-dashboard-section">
          <h2 class="admin-dashboard-section-title">Models</h2>
          <div class="admin-dashboard-grid">
            \${models.map(
              ([model, count]) => html\`
                <uix-card
                  hover
                  class="admin-dashboard-model-card"
                  @click=\${() => this.navigate(\`/admin/models/\${model}\`)}
                >
                  <div class="admin-dashboard-model-header">
                    <uix-icon name="database" size="24"></uix-icon>
                    <span class="admin-dashboard-model-count">\${count}</span>
                  </div>
                  <p class="admin-dashboard-model-name">\${model}</p>
                  <p class="admin-dashboard-model-label">
                    \${count === 1 ? "record" : "records"}
                  </p>
                </uix-card>
              \`,
            )}
          </div>
        </section>

        <!-- Quick Actions -->
        <section class="admin-dashboard-section">
          <h2 class="admin-dashboard-section-title">Quick Actions</h2>
          <div class="admin-dashboard-actions">
            <uix-button
              class="admin-action-deploy"
              @click=\${() => this.navigate("/admin/deploy")}
            >
              <uix-icon name="rocket" size="24"></uix-icon>
              Deploy
            </uix-button>

            <uix-button
              class="admin-action-theme"
              @click=\${() => this.navigate("/admin/theme")}
            >
              <uix-icon name="palette" size="24"></uix-icon>
              Theme
            </uix-button>

            <uix-button
              class="admin-action-refresh"
              @click=\${() => this.loadStats()}
            >
              <uix-icon name="refresh-cw" size="24"></uix-icon>
              Refresh
            </uix-button>
          </div>
        </section>
      </div>
    \`;
  },
};
`,mimeType:"text/javascript"},"/$app/admin/views/dashboard.css":{content:`.admin-dashboard{padding:var(--admin-dashboard-padding, 2rem)}.admin-dashboard-loading{display:flex;align-items:center;justify-content:center;height:100%}.admin-dashboard-header{margin-bottom:var(--admin-dashboard-header-margin, 2rem)}.admin-dashboard-title{font-size:var(--admin-dashboard-title-size, 1.875rem);font-weight:900;text-transform:uppercase;margin:0 0 .5rem}.admin-dashboard-subtitle{color:var(--admin-dashboard-subtitle-color, #6b7280);margin:0}.admin-dashboard-summary{margin-bottom:var(--admin-dashboard-section-margin, 2rem);background:var(--admin-dashboard-summary-bg, #000)!important;color:var(--admin-dashboard-summary-color, #fff)}.admin-dashboard-summary-content{display:flex;align-items:center;justify-content:space-between}.admin-dashboard-stat-right{text-align:right}.admin-dashboard-stat-label{font-size:.75rem;font-weight:700;text-transform:uppercase;color:var(--admin-dashboard-stat-label-color, #9ca3af);margin:0}.admin-dashboard-stat-value{font-size:var(--admin-dashboard-stat-size, 2.25rem);font-weight:900;margin:0}.admin-dashboard-section{margin-bottom:var(--admin-dashboard-section-margin, 2rem)}.admin-dashboard-section-title{font-size:var(--admin-dashboard-section-title-size, 1.25rem);font-weight:900;text-transform:uppercase;margin:0 0 1rem}.admin-dashboard-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:var(--admin-dashboard-grid-gap, 1rem)}.admin-dashboard-model-card{cursor:pointer}.admin-dashboard-model-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:.5rem}.admin-dashboard-model-header uix-icon{color:var(--admin-dashboard-model-icon-color, #9ca3af)}.admin-dashboard-model-count{font-size:var(--admin-dashboard-model-count-size, 1.875rem);font-weight:900}.admin-dashboard-model-name{font-weight:700;font-size:1.125rem;text-transform:capitalize;margin:0}.admin-dashboard-model-label{font-size:.875rem;color:var(--admin-dashboard-model-label-color, #6b7280);margin:0}.admin-dashboard-actions{display:flex;flex-wrap:wrap;gap:var(--admin-dashboard-actions-gap, 1rem)}.admin-action-deploy{--button-background-color: var(--admin-action-deploy-bg, #fde047);--button-color: var(--admin-action-deploy-color, #000)}.admin-action-theme{--button-background-color: var(--admin-action-theme-bg, #f9a8d4);--button-color: var(--admin-action-theme-color, #000)}.admin-action-refresh{--button-background-color: var(--admin-action-refresh-bg, #86efac);--button-color: var(--admin-action-refresh-color, #000)}
`,mimeType:"text/css"},"/$app/admin/views/model-form.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";
import { getFormFields, loadRelationshipOptions } from "../utils/form-generator.js";

export default {
  tag: "admin-model-form",
  style: true,
  properties: {
    model: T.string(),
    row: T.object(),
    enrichedFields: T.array({ defaultValue: [] }),
    loading: T.boolean({ defaultValue: false }),
  },

  async connected() {
    await this.loadFields();
  },

  async loadFields() {
    const isEdit = !!this.row?.id;
    const fields = getFormFields(this.model, isEdit);

    // Enrich fields with relationship options
    const enriched = await Promise.all(
      fields.map(async (field) => {
        if (field.relationship && field.targetModel) {
          const options = await loadRelationshipOptions(field.targetModel);
          return { ...field, options };
        }
        return field;
      }),
    );

    this.enrichedFields = enriched;
  },

  submit() {
    const form = this.querySelector("uix-form");
    if (form) form.submit();
  },

  handleFormSubmit(e) {
    const data = e.detail;
    if (this.row?.id) {
      data.id = this.row.id;
    }
    this.emit("form-submit", data);
  },

  render() {
    return html\`
      <uix-form
        .fields=\${this.enrichedFields}
        .data=\${this.row || {}}
        @form-submit=\${this.handleFormSubmit}
      ></uix-form>
    \`;
  },
};
`,mimeType:"text/javascript"},"/$app/icon-lucide/lucide/save.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"/><path d="M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7M7 3v4a1 1 0 0 0 1 1h7"/></g></svg>',mimeType:"image/svg+xml"},"/$app/admin/utils/form-generator.js":{content:`import $APP from "/$app.js";
import { getModelSchema, getPrimaryDisplayField } from "./model-utils.js";

/**
 * Map field definition to input type
 * @param {object} fieldDef - Field definition from schema
 * @returns {string} Input type for uix-input
 */
export const typeToInputType = (fieldDef) => {
  // Enum fields become select
  if (fieldDef.enum) return "select";

  // Relationship fields become select
  if (fieldDef.relationship === "belongs") return "select";
  if (fieldDef.relationship === "belongs_many") return "multi-select";

  const typeName = fieldDef.type?.toLowerCase();

  switch (typeName) {
    case "boolean":
      return "switch";

    case "number":
      return "number";

    case "array":
    case "object":
      return "textarea"; // JSON editor

    case "string":
    default:
      // Infer from field name
      const name = fieldDef.name?.toLowerCase() || "";

      if (name.includes("password")) return "password";
      if (name.includes("email")) return "email";
      if (name.includes("url") || name.includes("link")) return "url";
      if (name.includes("phone") || name.includes("tel")) return "tel";

      // Date/time fields
      if (name === "date" || name.endsWith("date") || name.endsWith("_at"))
        return "date";
      if (name === "time" || name.endsWith("time")) return "time";
      if (name.includes("datetime")) return "datetime-local";

      // Long text fields
      if (
        name.includes("description") ||
        name.includes("content") ||
        name.includes("bio") ||
        name.includes("body") ||
        name.includes("text") ||
        fieldDef.rows > 1
      ) {
        return "textarea";
      }

      // Image/file fields
      if (
        name.includes("image") ||
        name.includes("avatar") ||
        name.includes("photo") ||
        name.includes("picture")
      ) {
        return "url"; // For now, just URL input. Could be file upload later.
      }

      return "text";
  }
};

/**
 * Get form fields configuration for a model
 * @param {string} modelName - Name of the model
 * @param {boolean} isEdit - Whether this is for editing (vs creating)
 * @returns {Array} Array of field configurations for the form
 */
export const getFormFields = (modelName, isEdit = false) => {
  const schema = getModelSchema(modelName);

  return schema
    .filter((field) => {
      // Skip internal fields
      if (field.name === "id") return false;
      if (field.name === "createdAt" && !isEdit) return false;
      if (field.name === "updatedAt") return false;

      // Skip immutable fields on edit
      if (isEdit && field.immutable) return false;

      // Skip fields marked as non-attribute (internal only)
      if (field.attribute === false) return false;

      return true;
    })
    .map((field) => ({
      name: field.name,
      label: field.label || formatLabel(field.name),
      type: typeToInputType(field),
      required: field.required || false,
      placeholder: field.placeholder || "",
      defaultValue: field.defaultValue,
      options: field.enum || null,
      relationship: field.relationship,
      targetModel: field.targetModel,
      rows: field.rows || (typeToInputType(field) === "textarea" ? 3 : undefined),
    }));
};

/**
 * Format field name to human-readable label
 * @param {string} fieldName - Field name (e.g., "createdAt", "user_name")
 * @returns {string} Human-readable label (e.g., "Created At", "User Name")
 */
export const formatLabel = (fieldName) => {
  if (!fieldName) return "";

  return fieldName
    // Split camelCase
    .replace(/([a-z])([A-Z])/g, "$1 $2")
    // Split snake_case
    .replace(/_/g, " ")
    // Capitalize each word
    .replace(/\\b\\w/g, (char) => char.toUpperCase());
};

/**
 * Load options for relationship select fields
 * @param {string} targetModel - The related model name
 * @returns {Promise<Array>} Array of {value, label} options
 */
export const loadRelationshipOptions = async (targetModel) => {
  try {
    const records = await $APP.Model[targetModel].getAll();
    const displayField = getPrimaryDisplayField(targetModel);

    return records.map((record) => ({
      value: record.id,
      label: record[displayField] || record.id,
    }));
  } catch (error) {
    console.error(\`Failed to load options for \${targetModel}:\`, error);
    return [];
  }
};

/**
 * Serialize form data, handling special types
 * @param {object} formData - Raw form data
 * @param {Array} fields - Field configurations
 * @returns {object} Serialized data ready for API
 */
export const serializeFormData = (formData, fields) => {
  const result = { ...formData };

  for (const field of fields) {
    const value = result[field.name];

    if (value === undefined || value === null) {
      continue;
    }

    // Parse JSON for array/object fields
    if (field.type === "textarea" && (field.name.includes("json") || typeof field.defaultValue === "object")) {
      try {
        result[field.name] = JSON.parse(value);
      } catch {
        // Keep as string if not valid JSON
      }
    }

    // Convert number strings
    if (field.type === "number" && typeof value === "string") {
      result[field.name] = parseFloat(value) || 0;
    }

    // Convert boolean strings
    if (field.type === "switch" && typeof value === "string") {
      result[field.name] = value === "true" || value === "1";
    }
  }

  return result;
};

/**
 * Deserialize record data for form display
 * @param {object} record - Record from database
 * @param {Array} fields - Field configurations
 * @returns {object} Data ready for form inputs
 */
export const deserializeForForm = (record, fields) => {
  const result = { ...record };

  for (const field of fields) {
    const value = result[field.name];

    // Stringify objects/arrays for textarea display
    if (
      field.type === "textarea" &&
      (Array.isArray(value) || (typeof value === "object" && value !== null))
    ) {
      result[field.name] = JSON.stringify(value, null, 2);
    }

    // Format dates for input
    if (field.type === "date" && value) {
      result[field.name] = new Date(value).toISOString().split("T")[0];
    }

    if (field.type === "datetime-local" && value) {
      result[field.name] = new Date(value).toISOString().slice(0, 16);
    }
  }

  return result;
};
`,mimeType:"text/javascript"},"/$app/admin/views/model-form.css":{content:`.admin-form{display:grid;grid-template-columns:1fr;gap:var(--admin-form-gap, 1.25rem)}@media (min-width: 640px){.admin-form{grid-template-columns:repeat(2,1fr)}.admin-form-field:has(uix-textarea){grid-column:1 / -1}}.admin-form-field{display:flex;flex-direction:column;gap:var(--admin-form-field-gap, .5rem)}.admin-form-label{display:flex;align-items:center;gap:.5rem;font-weight:700;font-size:.875rem}.admin-form-required{color:var(--admin-form-required-color, #ef4444)}.admin-form-actions{display:flex;align-items:center;justify-content:space-between;padding-top:var(--admin-form-actions-padding, 1.5rem);border-top:2px solid var(--admin-form-actions-border, #e5e7eb)}
`,mimeType:"text/css"},"/$app/uix/form/form.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

export default {
  tag: "uix-form",
  style: true,

  properties: {
    fields: T.array({ defaultValue: [] }),
    data: T.object({ defaultValue: {} }),
    loading: T.boolean({ defaultValue: false }),
    typeHandlers: T.object({ attribute: false }),
    errors: T.object({ defaultValue: {} }),
  },

  setErrors(errorData) {
    if (!errorData?.data) {
      this.errors = {};
      return;
    }

    const errors = {};
    for (const [field, err] of Object.entries(errorData.data)) {
      errors[field] = typeof err === "object" ? err.message : err;
    }
    this.errors = errors;
  },

  clearErrors() {
    this.errors = {};
  },

  submit() {
    const form = this.querySelector("form");
    if (form) form.requestSubmit();
  },

  getFormControls() {
    return this.querySelectorAll(
      "uix-input, uix-select, uix-textarea, uix-checkbox, uix-switch, input, select, textarea",
    );
  },

  // Get field config by name to determine expected type
  getFieldConfig(name) {
    return this.fields?.find((f) => f.name === name) || {};
  },

  collectFormData() {
    const controls = this.getFormControls();
    const data = {};

    controls.forEach((el) => {
      const name = el.getAttribute("name") || el.name;
      if (!name) return;

      const tagName = el.tagName.toLowerCase();
      const fieldConfig = this.getFieldConfig(name);

      // Handle checkboxes/switches
      if (
        tagName === "uix-checkbox" ||
        tagName === "uix-switch" ||
        el.type === "checkbox"
      ) {
        data[name] = el.checked === true;
        return;
      }

      // Handle number inputs
      if (el.type === "number" || el.getAttribute("type") === "number") {
        const val = el.value;
        data[name] =
          val !== "" && val !== null && val !== undefined
            ? parseFloat(val)
            : null;
        return;
      }

      // Handle multi-select (by attribute or field config)
      const isMultiple =
        el.multiple ||
        el.hasAttribute("multiple") ||
        fieldConfig.type === "multi-select";

      if (isMultiple) {
        const value = el.value;
        if (Array.isArray(value)) {
          data[name] = value;
        } else if (value && value !== "") {
          // Single value in a multi-select, wrap in array
          data[name] = [value];
        } else {
          data[name] = [];
        }
        return;
      }

      // Default: string values, convert empty string to null
      const value = el.value;
      data[name] = value === "" || value === undefined ? null : value;
    });

    return data;
  },

  serialize(formData) {
    const result = { ...formData };

    for (const field of this.fields || []) {
      const value = result[field.name];
      if (value === undefined || value === null) continue;

      // Custom type handlers
      if (this.typeHandlers?.[field.type]) {
        result[field.name] =
          this.typeHandlers[field.type].serialize?.(value, field) ?? value;
        continue;
      }

      // Built-in type handlers
      switch (field.type) {
        case "textarea":
          if (
            field.name.includes("json") ||
            typeof field.defaultValue === "object"
          ) {
            try {
              result[field.name] = JSON.parse(value);
            } catch {
              // Keep as string
            }
          }
          break;
        case "number":
          if (typeof value === "string") {
            result[field.name] = value === "" ? null : parseFloat(value) || 0;
          }
          break;
        case "switch":
        case "checkbox":
          if (typeof value === "string") {
            result[field.name] = value === "true" || value === "1";
          }
          break;
      }
    }

    return result;
  },

  deserialize(record) {
    const result = { ...record };

    for (const field of this.fields || []) {
      const value = result[field.name];
      if (value === undefined) continue;

      // Custom type handlers
      if (this.typeHandlers?.[field.type]) {
        result[field.name] =
          this.typeHandlers[field.type].deserialize?.(value, field) ?? value;
        continue;
      }

      // Built-in type handlers
      switch (field.type) {
        case "textarea":
          if (
            Array.isArray(value) ||
            (typeof value === "object" && value !== null)
          ) {
            result[field.name] = JSON.stringify(value, null, 2);
          }
          break;
        case "date":
          if (value) {
            result[field.name] = new Date(value).toISOString().split("T")[0];
          }
          break;
        case "datetime-local":
          if (value) {
            result[field.name] = new Date(value).toISOString().slice(0, 16);
          }
          break;
      }
    }

    return result;
  },

  _handleSubmit(e) {
    e.preventDefault();
    e.stopPropagation();

    this.errors = {}; // Clear previous errors

    const rawData = this.collectFormData();
    const serialized = this.serialize(rawData);
    this.emit("form-submit", serialized);
  },

  renderField(field, value) {
    const renderers = {
      textarea: () => html\`
        <uix-textarea
          name=\${field.name}
          label=\${field.label}
          value=\${value || ""}
          ?required=\${field.required}
          placeholder=\${field.placeholder || ""}
          rows=\${field.rows || 3}
        ></uix-textarea>
      \`,

      select: () => {
        const rawOptions = field.options || [];
        const normalizedOptions = Array.isArray(rawOptions)
          ? rawOptions.map((opt) => ({
              value: typeof opt === "object" ? opt.value : opt,
              label: typeof opt === "object" ? opt.label : opt,
            }))
          : [];
        return html\`
          <uix-select
            name=\${field.name}
            label=\${field.label}
            ?required=\${field.required}
            value=\${value || ""}
            placeholder="Select..."
            .options=\${normalizedOptions}
          ></uix-select>
        \`;
      },

      "multi-select": () => {
        const multiOptions = field.options || [];
        const normalizedOptions = Array.isArray(multiOptions)
          ? multiOptions.map((opt) => ({
              value: typeof opt === "object" ? opt.value : opt,
              label: typeof opt === "object" ? opt.label : opt,
            }))
          : [];
        return html\`
          <uix-select
            name=\${field.name}
            label=\${field.label}
            multiple
            ?required=\${field.required}
            value=\${Array.isArray(value) ? value : []}
            .options=\${normalizedOptions}
          ></uix-select>
        \`;
      },

      switch: () => html\`
        <uix-checkbox
          name=\${field.name}
          ?checked=\${value === true}
          label=\${field.checkboxLabel || \`Enable \${field.label}\`}
        ></uix-checkbox>
      \`,

      checkbox: () => html\`
        <uix-checkbox
          name=\${field.name}
          ?checked=\${value === true}
          label=\${field.checkboxLabel || \`Enable \${field.label}\`}
        ></uix-checkbox>
      \`,

      number: () => html\`
        <uix-input
          type="number"
          name=\${field.name}
          label=\${field.label}
          value=\${value ?? ""}
          ?required=\${field.required}
          placeholder=\${field.placeholder || ""}
          step="any"
        ></uix-input>
      \`,

      date: () => html\`
        <uix-input
          type="date"
          name=\${field.name}
          label=\${field.label}
          value=\${value || ""}
          ?required=\${field.required}
        ></uix-input>
      \`,

      "datetime-local": () => html\`
        <uix-input
          type="datetime-local"
          name=\${field.name}
          label=\${field.label}
          value=\${value || ""}
          ?required=\${field.required}
        ></uix-input>
      \`,

      time: () => html\`
        <uix-input
          type="time"
          name=\${field.name}
          label=\${field.label}
          value=\${value || ""}
          ?required=\${field.required}
        ></uix-input>
      \`,

      email: () => html\`
        <uix-input
          type="email"
          name=\${field.name}
          label=\${field.label}
          value=\${value || ""}
          ?required=\${field.required}
          placeholder=\${field.placeholder || "email@example.com"}
        ></uix-input>
      \`,

      url: () => html\`
        <uix-input
          type="url"
          name=\${field.name}
          label=\${field.label}
          value=\${value || ""}
          ?required=\${field.required}
          placeholder=\${field.placeholder || "https://"}
        ></uix-input>
      \`,

      password: () => html\`
        <uix-input
          type="password"
          name=\${field.name}
          label=\${field.label}
          value=\${value || ""}
          ?required=\${field.required}
          placeholder=\${field.placeholder || ""}
        ></uix-input>
      \`,

      tel: () => html\`
        <uix-input
          type="tel"
          name=\${field.name}
          label=\${field.label}
          value=\${value || ""}
          ?required=\${field.required}
          placeholder=\${field.placeholder || ""}
        ></uix-input>
      \`,
    };

    const defaultRenderer = () => html\`
      <uix-input
        type="text"
        name=\${field.name}
        label=\${field.label}
        value=\${value || ""}
        ?required=\${field.required}
        placeholder=\${field.placeholder || ""}
      ></uix-input>
    \`;

    return (renderers[field.type] || defaultRenderer)();
  },

  render() {
    const formData = this.deserialize(this.data || {});

    return html\`
      <form @submit=\${this._handleSubmit}>
        \${this.fields.map((field) => {
          const error = this.errors?.[field.name];
          return html\`
            <div class="form-field \${error ? "has-error" : ""}">
              \${this.renderField(field, formData[field.name])}
              \${error ? html\`<span class="form-error">\${error}</span>\` : ""}
            </div>
          \`;
        })}
      </form>
    \`;
  },
};
`,mimeType:"text/javascript"},"/$app/uix/form/form.css":{content:`uix-form form{display:grid;grid-template-columns:1fr;gap:var(--form-gap, 1.25rem)}@media (min-width: 640px){uix-form form{grid-template-columns:repeat(2,1fr)}uix-form .form-field:has(uix-textarea){grid-column:1 / -1}}.form-field{display:flex;flex-direction:column;gap:var(--form-field-gap, .5rem)}.form-label{display:flex;align-items:center;gap:.5rem;font-weight:700;font-size:.875rem}.form-required{color:var(--form-required-color, #ef4444)}.form-error{color:var(--form-error-color, #ef4444);font-size:.75rem;margin-top:.25rem}.form-field.has-error uix-input,.form-field.has-error uix-select,.form-field.has-error uix-textarea{--input-border-color: var(--form-error-color, #ef4444)}
`,mimeType:"text/css"},"/$app/icon-lucide/lucide/moon.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3a6 6 0 0 0 9 9a9 9 0 1 1-9-9"/></svg>',mimeType:"image/svg+xml"},"/groups":{content:`<!DOCTYPE html>
<html lang="en">
<head>
	<script src="/$app/base/bootstrapp.js" type="module"><\/script>
  <meta charset="utf-8" />
  <title>meetup.rio</title>
  <base href="/" />
  <meta name="viewport"
    content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
  <meta name="description" content="Discover Rio de Janeiro - Places, Events, and Things to Do" />
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#181818" />
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f3f3f3" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-title" content="meetup.rio" />
  <meta name="mobile-web-app-status-bar-style" content="black" />
  <link id="favicon" rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLW1hcC1waW4iPjxwYXRoIGQ9Ik0yMCAxMGMwIDQuOTkzLTUuNTM5IDEwLjE5My03LjM5OSAxMS43OTlhMSAxIDAgMCAxLTEuMjAyIDBDOS41MzkgMjAuMTkzIDQgMTQuOTkzIDQgMTBhOCA4IDAgMCAxIDE2IDAiLz48Y2lyY2xlIGN4PSIxMiIgY3k9IjEwIiByPSIzIi8+PC9zdmc+"/>
  <link rel="manifest" href="manifest.json" />
</head>
<body style="--text-color: #333;">
  <app-container class="w-full bg-yellow-50 min-h-screen"></view-container>
</body>
</html>
`,mimeType:"text/html"},"/admin/models/groups":{content:`<!DOCTYPE html>
<html lang="en">
<head>
	<script src="/$app/base/bootstrapp.js" type="module"><\/script>
  <meta charset="utf-8" />
  <title>meetup.rio</title>
  <base href="/" />
  <meta name="viewport"
    content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
  <meta name="description" content="Discover Rio de Janeiro - Places, Events, and Things to Do" />
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#181818" />
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f3f3f3" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-title" content="meetup.rio" />
  <meta name="mobile-web-app-status-bar-style" content="black" />
  <link id="favicon" rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLW1hcC1waW4iPjxwYXRoIGQ9Ik0yMCAxMGMwIDQuOTkzLTUuNTM5IDEwLjE5My03LjM5OSAxMS43OTlhMSAxIDAgMCAxLTEuMjAyIDBDOS41MzkgMjAuMTkzIDQgMTQuOTkzIDQgMTBhOCA4IDAgMCAxIDE2IDAiLz48Y2lyY2xlIGN4PSIxMiIgY3k9IjEwIiByPSIzIi8+PC9zdmc+"/>
  <link rel="manifest" href="manifest.json" />
</head>
<body style="--text-color: #333;">
  <app-container class="w-full bg-yellow-50 min-h-screen"></view-container>
</body>
</html>
`,mimeType:"text/html"},"/views/templates/app.js":{content:`import Router from "/$app/router/index.js";
import T from "/$app/types/index.js";
import $APP from "/$app.js";
import { html } from "/npm/lit-html";
export default {
  class: "h-screen w-full bg-purple-50 flex flex-col font-sans",
  properties: {
    currentRoute: T.object({ sync: Router }),
    currentLang: T.string("en"),
    modalItem: T.object(null),
    modalOpen: T.boolean(false),
    userId: T.number({ sync: "local" }),
  },
  getActiveTabFromRoute() {
    const rN = this.currentRoute?.name;
    return ["profile", "meetups", "groups"].includes(rN) ? rN : "discover";
  },
  render() {
    const tabs = [
      { id: "discover", route: "/discover", icon: "house" },
      { id: "groups", route: "/groups", icon: "users" },
      { id: "meetups", route: "/meetups", icon: "map-pin" },
      { id: "profile", route: "/profile", icon: "user" },
    ];
    const aT = this.getActiveTabFromRoute();

    return html\`
        <div class="flex-1 overflow-y-auto no-scrollbar">\${this.currentRoute.component}</div>
        <uix-bottom-nav
          class="flex-shrink-0 bg-white border-t-3 border-black p-2 z-30 flex justify-around items-center pt-4 mx-auto w-full"
          style="--direction: column"
        >
          \${tabs.map(
            (tab) => html\`
              <uix-link href=\${tab.route} vertical class="flex flex-col items-center p-2 rounded-xl transition-all duration-200 \${aT === tab.id ? "bg-green-300 border-2 border-black shadow-[3px_3px_0px_0px_rgba(0,0,0,1)] transform -translate-y-2" : "hover:bg-gray-100"}">
                <uix-icon size="lg" class="text-3xl mb-1 mx-auto" name=\${tab.icon}></uix-icon>
                \${aT === tab.id ? html\`<div class="text-xs font-black uppercase">\${$APP.i18n.t(\`tabs.\${tab.id}\`)}</div>\` : null}
              </uix-link>
            \`,
          )}
        </uix-bottom-nav>
        <view-item-modal .item=\${this.modalItem} .isOpen=\${this.modalOpen} @close=\${() => {
          this.modalOpen = false;
          this.modalItem = null;
        }}></view-item-modal>
      \`;
  },
};
`,mimeType:"text/javascript"},"/views/groups-view.js":{content:`import T from "/$app/types/index.js";
import $APP from "/$app.js";
import { html } from "/npm/lit-html";
import { NBS } from "./utils.js";

export default {
  dataQuery: true,
  properties: {
    groups: T.array(),
  },
  goToGroup(group) {
    $APP.Router.go("group-detail", { slug: group.slug });
  },
  render() {
    if (!this.groups) return NBS.SPINNER;

    const featured = this.groups.filter((g) => g.featured);
    const regular = this.groups.filter((g) => !g.featured);

    return html\`
      <div class="p-4 sm:p-6 space-y-8 pb-24">
        <!-- Header -->
        <div class="flex items-center justify-between">
          <h1 class="text-3xl sm:text-4xl font-black uppercase text-black tracking-tight">
            Communities
          </h1>
          <div class="bg-pink-300 border-3 border-black rounded-full w-12 h-12 flex items-center justify-center shadow-[3px_3px_0px_0px_rgba(0,0,0,1)]">
            <span class="text-xl">\u{1F4AC}</span>
          </div>
        </div>

        <!-- Featured Section -->
        \${featured.length > 0 ? html\`
          <div class="space-y-4">
            <div class="flex items-center gap-2">
              <span class="px-3 py-1 bg-yellow-300 border-2 border-black rounded-lg font-black text-sm uppercase shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] transform -rotate-1">
                \u2B50 Featured
              </span>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              \${featured.map((g) => html\`
                <view-group
                  .group=\${g}
                  .featured=\${true}
                  .onClick=\${(group) => this.goToGroup(group)}
                ></view-group>
              \`)}
            </div>
          </div>
        \` : null}

        <!-- All Groups Section -->
        \${regular.length > 0 ? html\`
          <div class="space-y-4">
            <h2 class="text-xl font-black uppercase text-black">All Communities</h2>
            <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4">
              \${regular.map((g) => html\`
                <view-group
                  .group=\${g}
                  .onClick=\${(group) => this.goToGroup(group)}
                ></view-group>
              \`)}
            </div>
          </div>
        \` : null}

        <!-- Empty State -->
        \${this.groups.length === 0 ? html\`
          <div class="bg-white border-3 border-black rounded-2xl p-8 shadow-[6px_6px_0px_0px_rgba(0,0,0,1)] text-center">
            <div class="text-5xl mb-4">\u{1F997}</div>
            <h3 class="text-xl font-black uppercase mb-2">No Communities Yet</h3>
            <p class="text-gray-600 font-medium">Be the first to start a community!</p>
          </div>
        \` : null}
      </div>
    \`;
  },
};
`,mimeType:"text/javascript"},"/$app/uix/app/bottom-nav.js":{content:`import T from "/$app/types/index.js";

export default {
  tag: "uix-bottom-nav",
  properties: {
    variant: T.string({
      defaultValue: "default",
      enum: ["default", "floating", "filled"],
    }),
    fixed: T.boolean(),
  },
  style: true,
  role: "navigation",
};

/**
 * Bottom Navigation Component
 *
 * @component
 * @category navigation
 * @tag uix-bottom-nav
 *
 * A mobile-optimized bottom navigation bar with icon and label items.
 * Commonly used in mobile apps for primary navigation.
 *
 * @slot default - Navigation items
 *
 * @part nav - The navigation container
 *
 * @example Basic Navigation
 * \`\`\`html
 * <uix-bottom-nav>
 *   <a href="/">
 *     <uix-icon name="house"></uix-icon>
 *     <span>Home</span>
 *   </a>
 *   <a href="/search">
 *     <uix-icon name="search"></uix-icon>
 *     <span>Search</span>
 *   </a>
 *   <a href="/favorites">
 *     <uix-icon name="heart"></uix-icon>
 *     <span>Favorites</span>
 *   </a>
 *   <a href="/profile">
 *     <uix-icon name="user"></uix-icon>
 *     <span>Profile</span>
 *   </a>
 * </uix-bottom-nav>
 * \`\`\`
 *
 * @example With Badges
 * \`\`\`html
 * <uix-bottom-nav>
 *   <a href="/">
 *     <uix-icon name="house"></uix-icon>
 *     <span>Home</span>
 *   </a>
 *   <a href="/notifications">
 *     <uix-badge>3</uix-badge>
 *     <uix-icon name="bell"></uix-icon>
 *     <span>Notifications</span>
 *   </a>
 *   <a href="/messages">
 *     <uix-badge>12</uix-badge>
 *     <uix-icon name="message-circle"></uix-icon>
 *     <span>Messages</span>
 *   </a>
 *   <a href="/profile">
 *     <uix-icon name="user"></uix-icon>
 *     <span>Profile</span>
 *   </a>
 * </uix-bottom-nav>
 * \`\`\`
 *
 * @example Floating Variant
 * \`\`\`html
 * <uix-bottom-nav variant="floating">
 *   <a href="/">
 *     <uix-icon name="house"></uix-icon>
 *     <span>Home</span>
 *   </a>
 *   <a href="/explore">
 *     <uix-icon name="search"></uix-icon>
 *     <span>Explore</span>
 *   </a>
 *   <a href="/create">
 *     <uix-icon name="plus"></uix-icon>
 *     <span>Create</span>
 *   </a>
 *   <a href="/profile">
 *     <uix-icon name="user"></uix-icon>
 *     <span>Profile</span>
 *   </a>
 * </uix-bottom-nav>
 * \`\`\`
 *
 * @example Icons Only (No Labels)
 * \`\`\`html
 * <uix-bottom-nav>
 *   <a href="/" aria-label="Home">
 *     <uix-icon name="house"></uix-icon>
 *   </a>
 *   <a href="/search" aria-label="Search">
 *     <uix-icon name="search"></uix-icon>
 *   </a>
 *   <a href="/saved" aria-label="Saved">
 *     <uix-icon name="bookmark"></uix-icon>
 *   </a>
 *   <a href="/settings" aria-label="Settings">
 *     <uix-icon name="settings"></uix-icon>
 *   </a>
 * </uix-bottom-nav>
 * \`\`\`
 *
 * @example Filled Variant
 * \`\`\`html
 * <uix-bottom-nav variant="filled">
 *   <a href="/">
 *     <uix-icon name="grid"></uix-icon>
 *     <span>Dashboard</span>
 *   </a>
 *   <a href="/shop">
 *     <uix-icon name="shopping-cart"></uix-icon>
 *     <span>Shop</span>
 *   </a>
 *   <a href="/wishlist">
 *     <uix-icon name="heart"></uix-icon>
 *     <span>Wishlist</span>
 *   </a>
 *   <a href="/account">
 *     <uix-icon name="user"></uix-icon>
 *     <span>Account</span>
 *   </a>
 * </uix-bottom-nav>
 * \`\`\`
 *
 * @example Non-Fixed Position
 * \`\`\`html
 * <uix-bottom-nav fixed="false">
 *   <a href="/"><uix-icon name="house"></uix-icon><span>Home</span></a>
 *   <a href="/search"><uix-icon name="search"></uix-icon><span>Search</span></a>
 *   <a href="/profile"><uix-icon name="user"></uix-icon><span>Profile</span></a>
 * </uix-bottom-nav>
 * \`\`\`
 */
`,mimeType:"text/javascript"},"/views/item-modal.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";
import $APP from "/$app.js";

export default {
  style: true,
  properties: {
    item: T.object({ attribute: false }),
    isOpen: T.boolean({ defaultValue: false }),
  },
  handleClose() {
    this.isOpen = false;
    this.item = null;
    this.dispatchEvent(
      new CustomEvent("close", { bubbles: true, composed: true }),
    );
  },
  render() {
    if (!this.item) return null;

    return html\`
      <uix-modal
        .open=\${this.isOpen}
        @modal-close=\${this.handleClose.bind(this)}
        @modal-cancel=\${this.handleClose.bind(this)}
      >
        <view-content-card .content=\${this.item}></view-content-card>
        <div slot="footer" class="pt-4">
          <button
            data-close
            class="w-full bg-danger border-3 border-black text-white rounded-xl font-black py-3 uppercase text-sm shadow-[6px_6px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[2px] hover:translate-y-[2px] hover:shadow-[3px_3px_0px_0px_rgba(0,0,0,1)] transition-all"
          >
            \u2715 \${$APP.i18n.t("actions.close")}
          </button>
        </div>
      </uix-modal>
    \`;
  },
};
`,mimeType:"text/javascript"},"/views/utils.js":{content:`import { html } from "/npm/lit-html";

// Category definitions
export const CATEGORIES = {
  all: { id: "all", color: "gray-200", icon: "\u{1F4CD}" },
  beaches: { id: "beaches", color: "blue-300", icon: "\u{1F3D6}\uFE0F" },
  nightlife: { id: "nightlife", color: "purple-300", icon: "\u{1F389}" },
  food: { id: "food", color: "orange-300", icon: "\u{1F37D}\uFE0F" },
  attractions: { id: "attractions", color: "emerald-300", icon: "\u2728" },
  groups: { id: "groups", color: "pink-300", icon: "\u{1F4AC}" },
};

// Neubrutalist Shadow styles
export const NBS = {
  S: "border-3 border-black rounded-xl shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[2px] hover:translate-y-[2px] hover:shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] transition-all",
  M: "border-3 border-black rounded-2xl shadow-[6px_6px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[2px] hover:translate-y-[2px] hover:shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] transition-all",
  L: "border-3 border-black rounded-3xl shadow-[8px_8px_0px_0px_rgba(0,0,0,1)]",
  ACTIVE_SM:
    "active:shadow-none active:translate-x-[2px] active:translate-y-[2px]",
  ACTIVE_LG:
    "active:shadow-none active:translate-x-[4px] active:translate-y-[4px]",
  SPINNER: html\`<div class="flex items-center justify-center min-h-screen"><uix-spinner></uix-spinner></div>\`,
};

// Helper functions
export const getCategoryColor = (category) =>
  CATEGORIES[category]?.color
    ? \`bg-\${CATEGORIES[category].color}\`
    : "bg-gray-200";

export const getUser = () => $APP.Auth?.user || null;

export const isGuest = () => $APP.Auth?.isGuest ?? true;

export const styleTag = (css) => html\`<style>\${css}</style>\`;
`,mimeType:"text/javascript"},"/$app/uix/app/bottom-nav.css":{content:`:where(.uix-bottom-nav,uix-bottom-nav){--icon-size: 36px;display:flex;flex-direction:row;width:100%;align-items:center;justify-content:space-around;gap:var(--bottom-nav-gap, var(--spacing-xs, .5rem));min-height:var(--bottom-nav-height, 56px);padding:var(--bottom-nav-padding-y, var(--spacing-xs, .5rem)) var(--bottom-nav-padding-x, var(--spacing-sm, .75rem));background:var(--bottom-nav-background, var(--color-surface, white));padding-bottom:calc(var(--bottom-nav-padding-y, var(--spacing-xs, .5rem)) + env(safe-area-inset-bottom));padding-left:calc(var(--bottom-nav-padding-x, var(--spacing-sm, .75rem)) + env(safe-area-inset-left));padding-right:calc(var(--bottom-nav-padding-x, var(--spacing-sm, .75rem)) + env(safe-area-inset-right));&[fixed]{position:fixed;bottom:0;left:0;right:0;z-index:100}&[variant=floating]{--bottom-nav-background: var(--color-surface);--bottom-nav-border-radius: var(--radius-xl);margin:var(--bottom-nav-margin, var(--spacing-md));margin-bottom:calc(var(--bottom-nav-margin, var(--spacing-md)) + env(safe-area-inset-bottom));border-radius:var(--bottom-nav-border-radius)}&[variant=filled]{--bottom-nav-item-active-background: var(--color-primary);--bottom-nav-item-active-color: white}}:where(.uix-bottom-nav,uix-bottom-nav)>*{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;--justify-content: center;gap:var(--bottom-nav-item-gap, var(--spacing-xs, .25rem));padding:var( --bottom-nav-item-padding, var(--spacing-xs, .5rem) var(--spacing-sm, .75rem) );flex:1;min-width:0;color:var(--bottom-nav-item-color, var(--color-text-muted));text-decoration:none;border-radius:var(--bottom-nav-item-radius, var(--radius-sm, .25rem));transition:var(--bottom-nav-item-transition, all .2s ease);cursor:pointer;&:hover{background:var(--bottom-nav-item-hover-background, var(--color-primary-lighter));color:var(--bottom-nav-item-hover-color, var(--color-text))}&.active,&[aria-current]{color:var(--bottom-nav-item-active-color, var(--color-primary))}}:where(.uix-bottom-nav[variant=filled],uix-bottom-nav[variant=filled])>*.active,:where(.uix-bottom-nav[variant=filled],uix-bottom-nav[variant=filled])>*[aria-current]{background:var(--bottom-nav-item-active-background, var(--color-primary));color:var(--bottom-nav-item-active-color, white)}:where(.uix-bottom-nav,uix-bottom-nav) uix-icon,:where(.uix-bottom-nav,uix-bottom-nav) svg{width:var(--icon-size);height:var(--icon-size);flex-shrink:0}:where(.uix-bottom-nav,uix-bottom-nav) span{font-size:var(--bottom-nav-text-size, var(--text-xs, .75rem));font-weight:var(--bottom-nav-text-weight, var(--font-medium, 500));text-align:center}
`,mimeType:"text/css"},"/views/item-modal.css":{content:`app-item-modal .uix-modal::part(dialog){background:transparent;border:none;box-shadow:none;padding:1rem;max-width:42rem;width:100%;max-height:90vh;overflow:auto}app-item-modal .uix-modal::part(dialog)::backdrop{background:var(--modal-overlay, rgba(0,0,0,.6));backdrop-filter:blur(4px)}app-item-modal .uix-modal::part(header),app-item-modal .uix-modal::part(footer){display:none}app-item-modal .uix-modal::part(body){padding:0}
`,mimeType:"text/css"},"/$app/uix/feedback/spinner.js":{content:`/**
 * Spinner Component
 *
 * @component
 * @category feedback
 * @tag uix-spinner
 *
 * A loading spinner component with multiple animation variants and sizes.
 * Uses pure CSS animations for performance.
 *
 * @example Basic Spinner
 * \`\`\`html
 * <uix-spinner></uix-spinner>
 * \`\`\`
 *
 * @example Spinner Variants
 * Different animation styles
 * \`\`\`html
 * <div class="flex gap-4">
 *   <uix-spinner variant="circular"></uix-spinner>
 *   <uix-spinner variant="dots"></uix-spinner>
 *   <uix-spinner variant="bars"></uix-spinner>
 * </div>
 * \`\`\`
 *
 * @example Spinner Sizes
 * \`\`\`html
 * <div class="flex gap-4 items-center">
 *   <uix-spinner size="xs"></uix-spinner>
 *   <uix-spinner size="sm"></uix-spinner>
 *   <uix-spinner size="md"></uix-spinner>
 *   <uix-spinner size="lg"></uix-spinner>
 *   <uix-spinner size="xl"></uix-spinner>
 * </div>
 * \`\`\`
 *
 * @example Colored Spinner
 * \`\`\`html
 * <uix-spinner primary></uix-spinner>
 * <uix-spinner secondary></uix-spinner>
 * <uix-spinner success></uix-spinner>
 * <uix-spinner danger></uix-spinner>
 * \`\`\`
 *
 * @example Custom Color
 * \`\`\`html
 * <uix-spinner style="--spinner-color: #ff6b6b;"></uix-spinner>
 * \`\`\`
 */

import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

export default {
  tag: "uix-spinner",
  properties: {
    variant: T.string({
      defaultValue: "circular",
      enum: ["circular", "dots", "bars"],
    }),
    size: T.string({
      defaultValue: "md",
      enum: ["xs", "sm", "md", "lg", "xl"],
    }),
    primary: T.boolean(),
    secondary: T.boolean(),
    success: T.boolean(),
    danger: T.boolean(),
    warning: T.boolean(),
    info: T.boolean(),
  },
  style: true,
  render() {
    // Circular variant uses CSS ::before pseudo-element
    if (this.variant === "circular") {
      return html\`\`;
    }

    // Dots and bars variants need 3 elements
    if (this.variant === "dots") {
      return html\`
        <span class="dot"></span>
        <span class="dot"></span>
        <span class="dot"></span>
      \`;
    }

    if (this.variant === "bars") {
      return html\`
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      \`;
    }

    return html\`\`;
  },
};
`,mimeType:"text/javascript"},"/views/group.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

export default {
  properties: {
    group: T.object(),
    featured: T.boolean({ defaultValue: false }),
    onClick: T.function({ attribute: false }),
  },
  handleCardClick(e) {
    // Don't navigate if clicking the WhatsApp button
    if (e.target.closest(".whatsapp-btn")) return;
    if (this.onClick) this.onClick(this.group);
  },
  render() {
    if (!this.group) return null;
    const g = this.group;

    // Featured cards get a different, larger layout
    if (this.featured) {
      return html\`
        <div
          class="bg-white border-3 border-black rounded-2xl overflow-hidden shadow-[6px_6px_0px_0px_rgba(0,0,0,1)] hover:shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[2px] hover:translate-y-[2px] transition-all cursor-pointer"
          @click=\${(e) => this.handleCardClick(e)}
        >
          <div class="relative h-40 bg-gray-200">
            <img src="\${g.image}" class="w-full h-full object-cover" />
            <div class="absolute top-3 left-3">
              <span class="px-3 py-1 bg-yellow-300 border-2 border-black rounded-lg font-black text-xs uppercase shadow-[2px_2px_0px_0px_rgba(0,0,0,1)]">
                \u2B50 Featured
              </span>
            </div>
          </div>
          <div class="p-4 space-y-3">
            <uix-link href="/group/\${g.slug}" class="text-xl font-black uppercase leading-tight">\${g.name}</uix-link>
            <p class="text-sm font-medium text-gray-600 line-clamp-2">\${g.description}</p>
            <div class="flex items-center justify-between pt-2">
              <div class="flex items-center gap-2">
                <span class="px-3 py-1 bg-gray-100 border-2 border-black rounded-lg font-black text-xs">
                  \u{1F465} \${g.memberCount}
                </span>
              </div>
              <a
                href="\${g.whatsappLink}"
                target="_blank"
                class="whatsapp-btn px-4 py-2 bg-green-400 border-2 border-black rounded-xl font-black uppercase text-xs shadow-[3px_3px_0px_0px_rgba(0,0,0,1)] hover:shadow-[1px_1px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[2px] hover:translate-y-[2px] transition-all"
                @click=\${(e) => e.stopPropagation()}
              >
                \u{1F4AC} Join
              </a>
            </div>
          </div>
        </div>
      \`;
    }

    // Regular card - compact grid style
    return html\`
      <div
        class="bg-white border-3 border-black rounded-2xl overflow-hidden shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[2px] hover:translate-y-[2px] transition-all cursor-pointer flex flex-col h-full"
        @click=\${(e) => this.handleCardClick(e)}
      >
        <div class="relative h-32 bg-gray-200 flex-shrink-0">
          <img src="\${g.image}" class="w-full h-full object-cover" />
          <div class="absolute bottom-2 right-2">
            <span class="px-2 py-1 bg-white border-2 border-black rounded-lg font-black text-[10px]">
              \u{1F465} \${g.memberCount}
            </span>
          </div>
        </div>
        <div class="p-3 flex-1 flex flex-col">
          <uix-link href="/group/\${g.slug}" class="text-sm font-black uppercase leading-tight mb-1 line-clamp-2">\${g.name}</uix-link>
          <p class="text-xs font-medium text-gray-500 line-clamp-2 flex-1">\${g.description}</p>
          <a
            href="\${g.whatsappLink}"
            target="_blank"
            class="whatsapp-btn mt-3 block w-full text-center py-2 bg-green-400 border-2 border-black rounded-xl font-black uppercase text-xs shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] hover:shadow-none hover:translate-x-[2px] hover:translate-y-[2px] transition-all"
            @click=\${(e) => e.stopPropagation()}
          >
            \u{1F4AC} Join Chat
          </a>
        </div>
      </div>
    \`;
  },
};
`,mimeType:"text/javascript"},"/$app/uix/feedback/spinner.css":{content:`:where(.uix-spinner,uix-spinner){display:inline-flex;align-items:center;justify-content:center;--spinner-color: var(--color-primary);--spinner-size: 2rem;width:var(--spinner-size);height:var(--spinner-size);position:relative;&[primary]{--spinner-color: var(--color-primary)}&[secondary]{--spinner-color: var(--color-secondary)}&[success]{--spinner-color: var(--color-success)}&[danger]{--spinner-color: var(--color-danger)}&[warning]{--spinner-color: var(--color-warning)}&[info]{--spinner-color: var(--color-info)}&[size=xs]{--spinner-size: 1rem}&[size=sm]{--spinner-size: 1.5rem}&[size=md]{--spinner-size: 2rem}&[size=lg]{--spinner-size: 3rem}&[size=xl]{--spinner-size: 4rem}&[variant=circular]:before{content:"";display:block;width:100%;height:100%;border:calc(var(--spinner-size) / 8) solid var(--color-surface-darker);border-top-color:var(--spinner-color);border-radius:50%;animation:spinner-circular .8s linear infinite}&[variant=dots]{gap:calc(var(--spinner-size) / 6)}&[variant=dots] .dot{display:block;width:calc(var(--spinner-size) / 4);height:calc(var(--spinner-size) / 4);background-color:var(--spinner-color);border-radius:50%;animation:spinner-dots 1.4s ease-in-out infinite}&[variant=dots] .dot:nth-child(1){animation-delay:-.32s}&[variant=dots] .dot:nth-child(2){animation-delay:-.16s}&[variant=dots] .dot:nth-child(3){animation-delay:0s}&[variant=bars]{gap:calc(var(--spinner-size) / 8)}&[variant=bars] .bar{display:block;width:calc(var(--spinner-size) / 6);height:100%;background-color:var(--spinner-color);border-radius:calc(var(--spinner-size) / 12);animation:spinner-bars 1.2s ease-in-out infinite}&[variant=bars] .bar:nth-child(1){animation-delay:-.24s}&[variant=bars] .bar:nth-child(2){animation-delay:-.12s}&[variant=bars] .bar:nth-child(3){animation-delay:0s}}@keyframes spinner-circular{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes spinner-dots{0%,80%,to{opacity:.3;transform:scale(.8)}40%{opacity:1;transform:scale(1)}}@keyframes spinner-bars{0%,40%,to{transform:scaleY(.4);opacity:.5}20%{transform:scaleY(1);opacity:1}}
`,mimeType:"text/css"},"/$app/icon-lucide/lucide/house.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"/><path d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></g></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/users.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87m-3-12a4 4 0 0 1 0 7.75"/></g></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/user.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></g></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/map-pin.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"/><circle cx="12" cy="10" r="3"/></g></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/instagram.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8A4 4 0 0 1 16 11.37m1.5-4.87h.01"/></g></svg>',mimeType:"image/svg+xml"},"/$app/uix/navigation/pagination.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

export default {
  tag: "uix-pagination",
  properties: {
    current: T.number({ defaultValue: 1 }),
    total: T.number({ defaultValue: 1 }),
    siblings: T.number({ defaultValue: 1 }), // Number of pages to show on each side of current
    showFirst: T.boolean(true),
    showLast: T.boolean(true),
    showPrevNext: T.boolean(true),
    size: T.string({
      defaultValue: "md",
      enum: ["sm", "md", "lg"],
    }),
  },
  style: true,
  shadow: false,

  goToPage(page) {
    if (page < 1 || page > this.total || page === this.current) return;
    this.current = page;
    this.emit("change", { page: this.current });
  },

  next() {
    this.goToPage(this.current + 1);
  },

  prev() {
    this.goToPage(this.current - 1);
  },

  _getPageNumbers() {
    const pages = [];
    const leftSibling = Math.max(1, this.current - this.siblings);
    const rightSibling = Math.min(this.total, this.current + this.siblings);

    // Show first page
    if (this.showFirst && leftSibling > 1) {
      pages.push(1);
      if (leftSibling > 2) {
        pages.push("...");
      }
    }

    // Show sibling pages
    for (let i = leftSibling; i <= rightSibling; i++) {
      pages.push(i);
    }

    // Show last page
    if (this.showLast && rightSibling < this.total) {
      if (rightSibling < this.total - 1) {
        pages.push("...");
      }
      pages.push(this.total);
    }

    return pages;
  },

  render() {
    const pages = this._getPageNumbers();
    const hasPrev = this.current > 1;
    const hasNext = this.current < this.total;

    return html\`
      <nav class="pagination" role="navigation" aria-label="Pagination">
        <ul class="pagination-list">
          \${
            this.showPrevNext
              ? html\`
                <li>
                  <button
                    class="pagination-button prev"
                    ?disabled=\${!hasPrev}
                    @click=\${this.prev}
                    aria-label="Previous page"
                  >
                    <uix-icon name="chevron-left"></uix-icon>
                  </button>
                </li>
              \`
              : ""
          }

          \${pages.map((page) =>
            page === "..."
              ? html\`<li><span class="pagination-ellipsis">\u2026</span></li>\`
              : html\`
                  <li>
                    <button
                      class="pagination-button \${page === this.current ? "active" : ""}"
                      @click=\${() => this.goToPage(page)}
                      aria-label="Page \${page}"
                      aria-current=\${page === this.current ? "page" : "false"}
                    >
                      \${page}
                    </button>
                  </li>
                \`,
          )}

          \${
            this.showPrevNext
              ? html\`
                <li>
                  <button
                    class="pagination-button next"
                    ?disabled=\${!hasNext}
                    @click=\${this.next}
                    aria-label="Next page"
                  >
                    <uix-icon name="chevron-right"></uix-icon>
                  </button>
                </li>
              \`
              : ""
          }
        </ul>
      </nav>
    \`;
  },
};

/**
 * Pagination Component
 *
 * @component
 * @category navigation
 * @tag uix-pagination
 *
 * Pagination controls for navigating through pages of content.
 *
 * @example
 * // Basic pagination
 * \`\`\`html
 * <uix-pagination current="1" total="10"></uix-pagination>
 * \`\`\`
 *
 * @example
 * // Current page in middle
 * \`\`\`html
 * <uix-pagination current="5" total="10"></uix-pagination>
 * \`\`\`
 *
 * @example
 * // Many pages with ellipsis
 * \`\`\`html
 * <uix-pagination current="15" total="50"></uix-pagination>
 * \`\`\`
 *
 * @example
 * // More siblings (show more pages around current)
 * \`\`\`html
 * <uix-pagination current="10" total="20" siblings="2"></uix-pagination>
 * \`\`\`
 *
 * @example
 * // Without first/last
 * \`\`\`html
 * <uix-pagination
 *   current="5"
 *   total="10"
 *   show-first="false"
 *   show-last="false"
 * ></uix-pagination>
 * \`\`\`
 *
 * @example
 * // Without prev/next arrows
 * \`\`\`html
 * <uix-pagination
 *   current="5"
 *   total="10"
 *   show-prev-next="false"
 * ></uix-pagination>
 * \`\`\`
 *
 * @example
 * // Size variants
 * \`\`\`html
 * <div style="display: flex; flex-direction: column; gap: 1rem;">
 *   <uix-pagination size="sm" current="3" total="7"></uix-pagination>
 *   <uix-pagination size="md" current="3" total="7"></uix-pagination>
 *   <uix-pagination size="lg" current="3" total="7"></uix-pagination>
 * </div>
 * \`\`\`
 *
 * @example
 * // With event handling
 * \`\`\`js
 * html\`<uix-pagination
 *   current="1"
 *   total="20"
 *   @change=\${(e) => this.loadPage(e.detail.page)}
 * ></uix-pagination>\`
 * \`\`\`
 *
 * @example
 * // Complete pagination example with data
 * \`\`\`js
 * html\`
 *   <div>
 *     <div class="data-grid">
 *       \${this.currentPageData.map(item => html\`<div>\${item.name}</div>\`)}
 *     </div>
 *
 *     <uix-pagination
 *       .current=\${this.currentPage}
 *       .total=\${Math.ceil(this.totalItems / this.itemsPerPage)}
 *       @change=\${(e) => {
 *         this.currentPage = e.detail.page;
 *         this.loadData();
 *       }}
 *     ></uix-pagination>
 *
 *     <p>
 *       Showing \${(this.currentPage - 1) * this.itemsPerPage + 1} to
 *       \${Math.min(this.currentPage * this.itemsPerPage, this.totalItems)} of
 *       \${this.totalItems} items
 *     </p>
 *   </div>
 * \`
 * \`\`\`
 */
`,mimeType:"text/javascript"},"/$app/uix/navigation/pagination.css":{content:`:where(.uix-pagination,uix-pagination){display:block;.pagination{display:flex;justify-content:center;padding:var(--pagination-padding, .75rem 0)}.pagination-list{display:flex;align-items:center;gap:var(--pagination-gap, .25rem);list-style:none;margin:0;padding:0}.pagination-button{display:flex;align-items:center;justify-content:center;min-width:var(--pagination-button-size, 2.5rem);height:var(--pagination-button-size, 2.5rem);padding:var(--pagination-button-padding, .5rem);border:var(--pagination-border-width, 1px) solid var(--pagination-border-color, var(--color-primary, #fabd2f));border-radius:var(--pagination-border-radius, .5rem);background-color:var(--pagination-background, #ffffff);color:var(--pagination-color, var(--color-primary, #1a1a1a));font-size:var(--pagination-font-size, .875rem);font-weight:var(--pagination-font-weight, 500);box-shadow:var(--pagination-shadow, none);cursor:pointer;transition:all .15s ease;&:hover:not(:disabled):not(.active){background-color:var(--pagination-hover-background, #f5f5f5);border-color:var(--pagination-hover-border-color, var(--color-primary, #fabd2f));box-shadow:var(--pagination-hover-shadow, none);transform:var(--pagination-hover-transform, none)}&.active{background-color:var(--pagination-active-background, var(--color-primary, #fabd2f));border-color:var(--pagination-active-border-color, #000000);color:var(--pagination-active-color, #000000);box-shadow:var(--pagination-active-shadow, none)}&:disabled{opacity:.5;cursor:not-allowed}&.prev,&.next{font-weight:var(--pagination-nav-font-weight, 700)}}.pagination-ellipsis{display:flex;align-items:center;justify-content:center;min-width:var(--pagination-button-size, 2.5rem);height:var(--pagination-button-size, 2.5rem);color:var(--pagination-ellipsis-color, #6b7280);font-size:var(--pagination-font-size, .875rem)}&[size=sm]{--pagination-button-size: 2rem;--pagination-font-size: .75rem;--pagination-button-padding: .375rem;--pagination-gap: .125rem}&[size=lg]{--pagination-button-size: 3rem;--pagination-font-size: 1rem;--pagination-button-padding: .625rem;--pagination-gap: .375rem}}
`,mimeType:"text/css"},"/views/group-detail-view.js":{content:`import T from "/$app/types/index.js";
import $APP from "/$app.js";
import { html } from "/npm/lit-html";
import { getCategoryColor, NBS } from "./utils.js";

export default {
  dataQuery: true,
  properties: {
    group: T.object({ attribute: false }),
    userId: T.string({ defaultValue: "guest" }),
    currentUser: T.object({
      sync: $APP.Model.users,
      query: (inst) => ({
        id: inst.userId,
        includes: ["likedGroups"],
      }),
      dependsOn: ["userId"],
    }),
    showAuthPrompt: T.boolean({ defaultValue: false }),
    authPromptMessage: T.string({ defaultValue: "" }),
    showAuthModal: T.boolean({ defaultValue: false }),
  },
  connected() {
    this.userId = $APP.Auth.isAuthenticated ? $APP.Auth.currentUserId : "guest";
  },
  isLiked() {
    if (!this.currentUser || !this.group) return false;
    return (
      this.currentUser.likedGroups?.some((g) => g.id === this.group.id) || false
    );
  },
  async handleLikeToggle() {
    const g = this.group;
    if (!g || !this.currentUser) return;

    if (this.isLiked()) {
      // Remove from liked
      this.currentUser.likedGroups = this.currentUser.likedGroups.filter(
        (i) => i.id !== g.id,
      );
    } else {
      // Add to liked
      this.currentUser.likedGroups = [
        ...this.currentUser.likedGroups,
        { id: g.id },
      ];
    }
    await $APP.Model.users.edit(this.currentUser);
  },
  render() {
    const m = this.group;
    if (!m) return NBS.SPINNER;
    const isLiked = this.isLiked();
    return html\`
      <div class="bg-purple-50 min-h-screen pb-20">
        <view-auth-modal
          .isOpen=\${this.showAuthModal}
          .onClose=\${() => (this.showAuthModal = false)}
          .onSuccess=\${() => location.reload()}
        ></view-auth-modal>
        \${
          this.showAuthPrompt
            ? html\`
          <div class="fixed bottom-20 left-4 right-4 z-40">
            <view-auth-prompt
              .message=\${this.authPromptMessage}
              .onLogin=\${() => {
                this.showAuthPrompt = false;
                this.showAuthModal = true;
              }}
              .onDismiss=\${() => (this.showAuthPrompt = false)}
            ></view-auth-prompt>
          </div>
        \`
            : null
        }
        <div class="sticky top-0 z-20 bg-white border-b-3 border-black px-4 py-3 flex items-center justify-between shadow-sm">
          <button @click=\${() => window.history.back()} class="w-10 h-10 flex items-center justify-center border-2 border-black rounded-xl bg-white hover:bg-gray-100 transition-colors">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>
          </button>
          <div class="font-black uppercase tracking-tight truncate max-w-[200px]">GROUP DETAILS</div>
          <button class="w-10 h-10 flex items-center justify-center border-2 border-black rounded-xl bg-white hover:bg-gray-100 transition-colors">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" y1="2" x2="12" y2="15"/></svg>
          </button>
        </div>
        <div class="relative w-full h-64 sm:h-80 bg-gray-200 border-b-3 border-black overflow-hidden">
          <img src="\${m.image}" class="w-full h-full object-cover" />
          <div class="absolute bottom-4 left-4 flex gap-2">
            <div class="px-3 py-1 \${getCategoryColor(m.category)} border-2 border-black rounded-lg font-black text-xs uppercase shadow-[2px_2px_0px_0px_rgba(0,0,0,1)]">
              \${$APP.i18n.t(\`categories.\${m.category}\`)}
            </div>
            \${m.featured ? html\`<div class="px-3 py-1 bg-yellow-300 border-2 border-black rounded-lg font-black text-xs uppercase shadow-[2px_2px_0px_0px_rgba(0,0,0,1)]">\u2B50 Featured</div>\` : null}
          </div>
        </div>
        <div class="px-4 -mt-6 relative z-10 space-y-6">
          <div class="bg-white border-3 border-black rounded-2xl p-6 shadow-[6px_6px_0px_0px_rgba(0,0,0,1)]">
            <h1 class="text-3xl font-black uppercase leading-9 mb-2">\${m.name}</h1>
            \${m.groupName ? html\`<div class="flex items-center gap-2 text-sm font-bold text-gray-600 mb-2"><span>\u{1F4AC} \${m.groupName}</span></div>\` : null}
            \${m.memberCount ? html\`<div class="flex items-center gap-2 text-sm font-bold text-gray-600"><span>\u{1F465} \${m.memberCount} members</span></div>\` : null}
          </div>
          <div class="bg-white border-3 border-black rounded-2xl p-6 shadow-[6px_6px_0px_0px_rgba(0,0,0,1)]">
            <h3 class="text-lg font-black uppercase mb-3 flex items-center gap-2">\u{1F4DD} About</h3>
            <p class="text-base font-medium text-gray-800 leading-relaxed">\${m.description}</p>
            \${
              m.whatsappLink
                ? html\`
              <div class="mt-6 pt-6 border-t-2 border-dashed border-gray-300">
                <a href="\${m.whatsappLink}" target="_blank" class="block w-full text-center py-3 bg-green-400 border-3 border-black rounded-xl font-black uppercase text-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[2px] hover:translate-y-[2px] hover:shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] transition-all">
                  \u{1F4AC} Join WhatsApp Group
                </a>
              </div>
            \`
                : null
            }
            <div class="mt-6 pt-6 border-t-2 border-dashed border-gray-300">
              <button @click=\${() => this.handleLikeToggle()} class="w-full py-4 \${isLiked ? "bg-pink-400" : "bg-primary"} border-3 border-black rounded-xl font-black uppercase text-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[2px] hover:translate-y-[2px] hover:shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] transition-all">
                \${isLiked ? "\u2764\uFE0F Saved" : "\u{1F90D} Save Group"}
              </button>
            </div>
          </div>
          <div class="h-24"></div>
        </div>
      </div>
    \`;
  },
};
`,mimeType:"text/javascript"},"/views/auth-modal.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";
import $APP from "/$app.js";

export default {
  style: true,
  properties: {
    isOpen: T.boolean({ defaultValue: false }),
    onClose: T.function({ attribute: false }),
    onSuccess: T.function({ attribute: false }),
    loading: T.boolean({ defaultValue: false }),
    error: T.string({ defaultValue: "" }),
  },
  async handleAuthSubmit(e) {
    const { mode, name, email, password, passwordConfirm } = e.detail;
    const authForm = this.querySelector("uix-auth-form");
    this.loading = true;
    this.error = "";

    try {
      let result;
      if (mode === "register") {
        result = await $APP.Auth.register({
          name,
          email,
          password,
          passwordConfirm: passwordConfirm || password,
          username: \`@\${name.toLowerCase().replace(/\\s/g, "")}\`,
          stats: { interested: 0, saved: 0, attending: 0 },
          travelStatus: "visitor",
          vibeTime: "night",
          vibeSocial: "social",
          vibeDrink: "caipirinha",
          lookingFor: [],
        });
      } else {
        result = await $APP.Auth.login(email, password);
      }

      if (result.success) {
        if (this.onSuccess) this.onSuccess();
      } else {
        this.error = result.error || "Authentication failed";
        authForm?.setError(this.error);
      }
    } catch (error) {
      this.error = error.message || "An error occurred";
      authForm?.setError(this.error);
    } finally {
      this.loading = false;
    }
  },
  async handleOAuth(e) {
    const { provider } = e.detail;
    this.loading = true;
    this.error = "";

    try {
      const result = await $APP.Auth.loginWithOAuth(provider);
      if (result.error) {
        this.error = result.error;
        const authForm = this.querySelector("uix-auth-form");
        authForm?.setError(this.error);
      }
    } catch (error) {
      this.error = error.message || "OAuth failed";
      const authForm = this.querySelector("uix-auth-form");
      authForm?.setError(this.error);
    } finally {
      this.loading = false;
    }
  },
  handleGuest() {
    if (this.onClose) this.onClose();
  },
  render() {
    if (!this.isOpen) return null;

    return html\`
      <uix-modal
        .open=\${this.isOpen}
        @modal-close=\${() => this.onClose?.()}
        @modal-cancel=\${() => this.onClose?.()}
      >
        <div slot="header" class="flex justify-between items-center w-full">
          <h2 class="text-2xl font-black uppercase">Join MEETUP.RIO</h2>
        </div>
        <uix-auth-form
          .showTabs=\${true}
          .showOAuth=\${true}
          .showGuest=\${true}
          .loading=\${this.loading}
          registerTitle="Join MEETUP.RIO"
          @auth-submit=\${this.handleAuthSubmit}
          @auth-oauth=\${this.handleOAuth}
          @auth-guest=\${this.handleGuest}
        ></uix-auth-form>
      </uix-modal>
    \`;
  },
};
`,mimeType:"text/javascript"},"/views/auth-modal.css":{content:`uix-modal::part(dialog){border:4px solid black;border-radius:1.5rem;box-shadow:8px 8px #ffffff80;max-width:28rem;padding:0;overflow:hidden}uix-modal::part(header){background:var(--color-primary);color:#000;border-bottom:3px solid black;padding:1.5rem}uix-modal::part(body){padding:0}
`,mimeType:"text/css"},"/views/discover-view.js":{content:`import T from "/$app/types/index.js";
import $APP from "/$app.js";
import { html } from "/npm/lit-html";
import { NBS } from "./utils.js";

export default {
  style: true,

  properties: {
    userId: T.string({ defaultValue: "guest" }),
    currentUser: T.object({
      sync: $APP.Model.users,
      query: (inst) => ({
        id: inst.userId,
        includes: [
          "likedPlaces",
          "likedEvents",
          "likedMeetups",
          "likedGroups",
          "interestedEvents",
          "interestedMeetups",
        ],
      }),
      dependsOn: ["userId"],
    }),
    places: T.array({ sync: $APP.Model.places, query: {} }),
    events: T.array({ sync: $APP.Model.events, query: {} }),
    meetups: T.array({ sync: $APP.Model.meetups, query: {} }),
    groups: T.array({ sync: $APP.Model.groups, query: {} }),
    meetupAttendance: T.array({ defaultValue: [] }),
    searchQuery: T.string({ defaultValue: "" }),
  },
  async connected() {
    this.userId = $APP.Auth.isAuthenticated ? $APP.Auth.currentUserId : "guest";
    // Load meetup attendance for current user
    this.meetupAttendance = await $APP.Model.meetup_attendance.getAll({
      where: { user: this.userId },
    });
  },
  isLoading() {
    return (
      !this.currentUser ||
      !this.places ||
      !this.events ||
      !this.meetups ||
      !this.groups
    );
  },
  isJoined(meetupId) {
    return this.meetupAttendance?.some((a) => a.meetup === meetupId) || false;
  },
  getNextEvents() {
    return (this.events || []).sort(
      (a, b) => new Date(a.date) - new Date(b.date),
    );
  },
  getMyMeetups() {
    const joinedMeetupIds = new Set(
      (this.meetupAttendance || []).map((a) => a.meetup),
    );
    return (this.meetups || []).filter((m) => joinedMeetupIds.has(m.id));
  },
  render() {
    if (this.isLoading()) return NBS.SPINNER;

    const nE = this.events ?? [];
    const mMs = this.meetups ?? [];
    const nY = this.places ?? [];
    return html\`
      <div class="space-y-8 pb-8">
        <div class="flex items-center justify-between px-6 pt-6">
          <h1 class="text-4xl font-black text-black tracking-tight">Discover</h1>
          <button class="w-12 h-12 flex items-center justify-center bg-accent border-3 border-black rounded-xl shadow-[3px_3px_0px_0px_rgba(0,0,0,1)] active:translate-x-[2px] active:translate-y-[2px] active:shadow-none transition-all">
             <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
          </button>
        </div>
        <div class="px-6">
          <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-black uppercase text-black">Today in Rio</h2>
            <button @click=\${() => $APP.Router.go("calendar")} class="text-xs font-bold text-pink-500 uppercase hover:underline">View more</button>
          </div>
          <div class="flex gap-4 overflow-x-auto pb-4 -mx-6 px-6 scrollbar-hide">
            \${
              nE.length === 0
                ? html\`<div class="text-sm font-bold text-gray-500 italic">No upcoming events found.</div>\`
                : nE.map(
                    (event) => html\`
                <view-story-circle .content=\${event} .onClick=\${(e) => $APP.Router.go("event-detail", { slug: e.slug })}></view-story-circle>
              \`,
                  )
            }
          </div>
        </div>
        <div class="px-6">
          <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-black uppercase text-black">My Meetups</h2>
            <button class="text-xs font-bold text-pink-500 uppercase hover:underline">View more</button>
          </div>
          <div class="flex gap-4 overflow-x-auto pb-4 -mx-6 px-6 scrollbar-hide">
            \${
              mMs.length === 0
                ? html\`
              <div class="w-full bg-white border-3 border-dashed border-gray-300 rounded-2xl p-6 text-center">
                <p class="text-sm font-bold text-gray-400">You haven't joined any meetups yet.</p>
                <button class="mt-2 text-xs font-black text-black underline">Explore below</button>
              </div>
            \`
                : mMs.map(
                    (meetup) => html\`
                <view-meetup-card-horizontal .content=\${meetup} .onClick=\${(m) => $APP.Router.go("meetup-detail", { slug: m.slug })}></view-meetup-card-horizontal>
              \`,
                  )
            }
          </div>
        </div>
        <div class="px-6">
          <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-black uppercase text-black">Near You</h2>
            <button class="text-xs font-bold text-pink-500 uppercase hover:underline">Filter</button>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6 p-2 md:p-4 lg:p-8">
            \${nY.map(
              (place) => html\`
                <view-meetup-card-compact .content=\${place} type="place" .onClick=\${(p) => $APP.Router.go("place-detail", { slug: p.slug })}></view-meetup-card-compact>
              \`,
            )}
          </div>
        </div>
      </div>
    \`;
  },
};
`,mimeType:"text/javascript"},"/views/discover-view.css":{content:`.scrollbar-hide{-ms-overflow-style:none;scrollbar-width:none}.scrollbar-hide::-webkit-scrollbar{display:none}
`,mimeType:"text/css"},"/views/story-circle.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

export default {
  properties: {
    content: T.object({ attribute: false }),
    onClick: T.function({ attribute: false }),
  },
  render() {
    if (!this.content) return null;
    return html\`
      <div
        class="flex flex-col items-center gap-1 cursor-pointer group min-w-[72px]"
        @click=\${() => this.onClick && this.onClick(this.content)}
      >
        <div class="p-[3px] rounded-full bg-gradient-to-tr from-accent to-primary border-2 border-black shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] group-hover:translate-x-[1px] group-hover:translate-y-[1px] group-hover:shadow-none transition-all">
          <div class="w-16 h-16 rounded-full border-2 border-white bg-gray-200 overflow-hidden">
             <img src="\${this.content.image}" class="w-full h-full object-cover" />
          </div>
        </div>
        <uix-link href="/event/\${this.content.slug}" class="text-xs font-black uppercase text-center max-w-[80px] truncate leading-tight">
          \${this.content.name}
        </uix-link>
      </div>
    \`;
  },
};
`,mimeType:"text/javascript"},"/views/meetup-card-horizontal.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";
import { getCategoryColor, NBS } from "./utils.js";

export default {
  properties: {
    content: T.object({ attribute: false }),
    onClick: T.function({ attribute: false }),
  },
  render() {
    if (!this.content) return null;
    return html\`
      <div
        class="min-w-[160px] w-[160px] \${getCategoryColor(this.content.category)} border-3 border-black rounded-2xl p-3 \${NBS.S} cursor-pointer flex flex-col gap-2"
        @click=\${() => this.onClick && this.onClick(this.content)}
      >
        <div class="w-12 h-12 rounded-full border-2 border-black bg-white overflow-hidden mx-auto shadow-sm">
           <img src="\${this.content.image}" class="w-full h-full object-cover" />
        </div>
        <div class="text-center">
          <uix-link href="/meetup/\${this.content.slug}" class="font-black text-xs uppercase leading-tight line-clamp-2 mb-1">
            \${this.content.name}
          </uix-link>
          <div class="text-[10px] font-bold opacity-70">
            \u{1F4CD} \${this.content.address || this.content.venue || "Rio"}
          </div>
        </div>
      </div>
    \`;
  },
};
`,mimeType:"text/javascript"},"/views/meetup-card-compact.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";
import $APP from "/$app.js";
import { CATEGORIES, getCategoryColor } from "./utils.js";

export default {
  style: true,
  properties: {
    content: T.object({ attribute: false }),
    onClick: T.function({ attribute: false }),
    type: T.string({ defaultValue: "" }), // e.g., "place", "event", "meetup", "group"
  },
  getCategoryEmoji() {
    return CATEGORIES[this.content?.category]?.icon || "\u{1F4CD}";
  },
  handleCardClick(e) {
    if (e.target.closest(".join-button")) return;
    if (this.onClick) this.onClick(this.content);
  },
  handleJoinClick(e) {
    e.stopPropagation();
  },
  render() {
    if (!this.content) return null;
    const isJoined = this.content.joined;
    const btnCls = \`join-button w-full py-2 px-4 border-2 border-black rounded-lg font-black uppercase text-xs transition-all duration-200 shadow-[3px_3px_0px_0px_rgba(0,0,0,1)] hover:shadow-[1px_1px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[2px] hover:translate-y-[2px] \${isJoined ? "bg-primary text-black hover:bg-primary-dark" : "bg-accent text-black hover:bg-accent"}\`;

    return html\`
      <uix-card
        class="meetup-card-compact"
        shadow="md"
        hover
        borderWidth="3"
        padding="none"
        @click=\${(e) => this.handleCardClick(e)}
      >
        <div slot="header" class="w-full h-48 bg-gray-100"
          style="background-image: url(\${this.content.image}); background-size: cover; background-position: center;"
        ></div>
        <div class="p-3 space-y-2 flex-1 flex flex-col">
          <div>
            <div class="inline-flex items-center gap-1 px-2 py-1 \${getCategoryColor(this.content.category)} border-2 border-black rounded-lg font-black text-xs uppercase text-black shadow-[2px_2px_0px_0px_rgba(0,0,0,1)]">
              \${this.getCategoryEmoji()} \${$APP.i18n.t(\`categories.\${this.content.category}\`)}
            </div>
          </div>
          <uix-link href="/\${this.type || this.content._type || 'place'}/\${this.content.slug}" class="text-lg font-black leading-tight line-clamp-2 uppercase">\${this.content.name}</uix-link>
          <div class="flex-1"></div>
        </div>
        <div slot="footer" class="p-3 pt-0">
          <button class="\${btnCls}" @click=\${(e) => this.handleJoinClick(e)}>
            \${isJoined ? html\`\u2713 \${$APP.i18n.t("actions.joined")}\` : html\`\u2764\uFE0F \${$APP.i18n.t("actions.join")}\`}
          </button>
        </div>
      </uix-card>
    \`;
  },
};
`,mimeType:"text/javascript"},"/views/meetup-card-compact.css":{content:`.meetup-card-compact.uix-card{cursor:pointer;height:100%;background:#fff;border-color:var(--card-border-color, black);border-radius:1rem}.meetup-card-compact.uix-card>[slot=header]{border-bottom:3px solid var(--card-border-color, black);padding:0}.meetup-card-compact.uix-card>[slot=footer]{justify-content:stretch}.meetup-card-compact.uix-card>[slot=footer]>button{width:100%}
`,mimeType:"text/css"},"/views/place-detail-view.js":{content:`import T from "/$app/types/index.js";
import $APP from "/$app.js";
import { html } from "/npm/lit-html";
import { getCategoryColor, isGuest, NBS } from "./utils.js";

export default {
  dataQuery: true,
  properties: {
    place: T.object(),
    userId: T.string({ defaultValue: "guest" }),
    currentUser: T.object({
      sync: $APP.Model.users,
      query: (inst) => ({
        id: inst.userId,
        includes: ["likedPlaces"],
      }),
      dependsOn: ["userId"],
    }),
    showAuthPrompt: T.boolean({ defaultValue: false }),
    authPromptMessage: T.string({ defaultValue: "" }),
    showAuthModal: T.boolean({ defaultValue: false }),
  },
  connected() {
    this.userId = $APP.Auth.isAuthenticated ? $APP.Auth.currentUserId : "guest";
  },
  isLiked() {
    if (!this.currentUser || !this.place) return false;
    return this.currentUser.likedPlaces.some(
      (place) => place === this.place.id || place.id === this.place.id,
    );
  },
  getRelatedMeetups() {
    if (!this.place) return [];
    return (this.meetups || []).filter((m) => m.place === this.place.id);
  },
  async handleLikeToggle() {
    const p = this.place;
    if (!p || !this.currentUser) return;
    if (this.isLiked()) {
      this.currentUser.likedPlaces = this.currentUser.likedPlaces.filter(
        (id) => id !== p.id && id.id !== p.id,
      );
    } else {
      this.currentUser.likedPlaces.push(p.id);
    }
    await $APP.Model.users.edit(this.currentUser);
  },
  async createMeetup() {
    if (isGuest()) {
      this.showAuthPrompt = true;
      this.authPromptMessage = "Create an account to host meetups!";
      return;
    }
    const p = this.place;
    const n = {
      id: Number(\`\${Date.now()}00\`),
      name: \`Meetup at \${p.name}\`,
      description: "Join me! I'm looking for a group to go with.",
      category: p.category,
      place: p.id,
      image: p.image,
      date: new Date().toISOString().split("T")[0],
      time: "19:00",
      venue: p.address,
      attendees: [],
      createdAt: new Date().toISOString(),
      order: 0,
    };
    await $APP.Model.meetups.add(n);
    alert("Meetup Created! Others can now join you.");
  },
  render() {
    const m = this.place;
    if (!m) return NBS.SPINNER;

    const rM = this.getRelatedMeetups();
    const isLiked = this.isLiked();
    return html\`
      <div class="bg-purple-50 min-h-screen pb-20">
        <view-auth-modal
          .isOpen=\${this.showAuthModal}
          .onClose=\${() => (this.showAuthModal = false)}
          .onSuccess=\${() => location.reload()}
        ></view-auth-modal>
        \${
          this.showAuthPrompt
            ? html\`
          <div class="fixed bottom-20 left-4 right-4 z-40">
            <view-auth-prompt
              .message=\${this.authPromptMessage}
              .onLogin=\${() => {
                this.showAuthPrompt = false;
                this.showAuthModal = true;
              }}
              .onDismiss=\${() => (this.showAuthPrompt = false)}
            ></view-auth-prompt>
          </div>
        \`
            : null
        }
        <div class="sticky top-0 z-20 bg-white border-b-3 border-black px-4 py-3 flex items-center justify-between shadow-sm">
          <button @click=\${() => window.history.back()} class="w-10 h-10 flex items-center justify-center border-2 border-black rounded-xl bg-white hover:bg-gray-100 transition-colors">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>
          </button>
          <div class="font-black uppercase tracking-tight truncate max-w-[200px]">PLACE DETAILS</div>
          <button class="w-10 h-10 flex items-center justify-center border-2 border-black rounded-xl bg-white hover:bg-gray-100 transition-colors">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" y1="2" x2="12" y2="15"/></svg>
          </button>
        </div>
        <div class="relative w-full h-64 sm:h-80 bg-gray-200 border-b-3 border-black overflow-hidden">
          <img src="\${m.image}" class="w-full h-full object-cover" />
          <div class="absolute bottom-4 left-4 flex gap-2">
            <div class="px-3 py-1 \${getCategoryColor(m.category)} border-2 border-black rounded-lg font-black text-xs uppercase shadow-[2px_2px_0px_0px_rgba(0,0,0,1)]">
              \${$APP.i18n.t(\`categories.\${m.category}\`)}
            </div>
            \${m.featured ? html\`<div class="px-3 py-1 bg-yellow-300 border-2 border-black rounded-lg font-black text-xs uppercase shadow-[2px_2px_0px_0px_rgba(0,0,0,1)]">\u2B50 Featured</div>\` : null}
          </div>
        </div>
        <div class="px-4 -mt-6 relative z-10 space-y-6">
          <div class="bg-white border-3 border-black rounded-2xl p-6 shadow-[6px_6px_0px_0px_rgba(0,0,0,1)]">
            <h1 class="text-3xl font-black uppercase leading-9 mb-2">\${m.name}</h1>
            <div class="flex items-center gap-2 text-sm font-bold text-gray-600 mb-4"><span>\u{1F4CD} \${m.address || "Rio de Janeiro"}</span></div>
          </div>
          <div class="bg-white border-3 border-black rounded-2xl p-6 shadow-[6px_6px_0px_0px_rgba(0,0,0,1)]">
            <h3 class="text-lg font-black uppercase mb-3 flex items-center gap-2">\u{1F4DD} About</h3>
            <p class="text-base font-medium text-gray-800 leading-relaxed">\${m.description}</p>
            \${
              m.whatsappLink
                ? html\`
              <div class="mt-6 pt-6 border-t-2 border-dashed border-gray-300">
                <a href="\${m.whatsappLink}" target="_blank" class="block w-full text-center py-3 bg-green-400 border-3 border-black rounded-xl font-black uppercase text-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[2px] hover:translate-y-[2px] hover:shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] transition-all">
                  \u{1F4AC} WhatsApp
                </a>
              </div>
            \`
                : null
            }
            <div class="mt-6 pt-6 border-t-2 border-dashed border-gray-300">
              <button @click=\${() => this.handleLikeToggle()} class="w-full py-4 \${isLiked ? "bg-pink-400" : "bg-primary"} cursor-pointer border-3 border-black rounded-xl font-black uppercase text-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[2px] hover:translate-y-[2px] hover:shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] transition-all">
                \${isLiked ? "\u2764\uFE0F Saved" : "\u{1F90D} Save Place"}
              </button>
            </div>
          </div>
          <div>
            <div class="flex items-center justify-between mb-4">
              <h3 class="text-xl font-black uppercase">Community Meetups</h3>
              <span class="bg-black text-white text-xs font-bold px-2 py-1 rounded-md">\${rM.length}</span>
            </div>
            <div class="space-y-4">
              \${
                rM.length > 0
                  ? rM.map(
                      (meetup) => html\`
                  <div class="bg-white border-3 border-black rounded-xl p-4 flex gap-4 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] cursor-pointer hover:bg-gray-50" @click=\${() => $APP.Router.go("meetup-detail", { slug: meetup.slug })}>
                    <div class="w-16 h-16 bg-gray-200 border-2 border-black rounded-lg flex-shrink-0 bg-cover bg-center" style="background-image: url('\${meetup.image}')"></div>
                    <div class="flex-1 min-w-0">
                      <h4 class="font-black text-sm truncate uppercase">\${meetup.name}</h4>
                      <div class="text-xs font-bold text-gray-500 mb-2">\u{1F4C5} \${meetup.date} \u2022 \${meetup.time}</div>
                      <div class="flex items-center gap-2">
                        <div class="flex -space-x-2">
                          \${meetup.attendees.map(() => html\`<div class="w-6 h-6 rounded-full bg-gray-300 border border-black"></div>\`)}
                        </div>
                        <span class="text-xs font-black text-gray-400">\${meetup.attendees.length} going</span>
                      </div>
                    </div>
                  </div>
                \`,
                    )
                  : html\`
                  <div class="bg-yellow-50 border-3 border-black border-dashed rounded-xl p-6 text-center">
                    <div class="text-4xl mb-2">\u{1F997}</div>
                    <p class="font-bold text-sm text-gray-600 mb-3">No community meetups yet.</p>
                    <p class="text-xs text-gray-500">Be the first to create a meetup at this place!</p>
                  </div>
                \`
              }
              <button @click=\${() => this.createMeetup()} class="w-full py-4 bg-white border-3 border-black rounded-xl font-black uppercase flex items-center justify-center gap-2 hover:bg-gray-50 transition-colors shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] active:translate-x-[2px] active:translate-y-[2px] active:shadow-[2px_2px_0px_0px_rgba(0,0,0,1)]">
                <span class="text-xl">+</span> Create a Meetup
              </button>
            </div>
          </div>
          <div class="h-24"></div>
        </div>
      </div>
    \`;
  },
};
`,mimeType:"text/javascript"},"/views/meetup-detail-view.js":{content:`import T from "/$app/types/index.js";
import $APP from "/$app.js";
import { html } from "/npm/lit-html";
import { getCategoryColor, NBS } from "./utils.js";

export default {
  dataQuery: true,
  properties: {
    meetup: T.object(),
    userId: T.string({ defaultValue: "guest" }),
    currentUser: T.object(),
    meetupAttendance: T.array({ defaultValue: [] }),
    showAuthPrompt: T.boolean({ defaultValue: false }),
    authPromptMessage: T.string({ defaultValue: "" }),
    showAuthModal: T.boolean({ defaultValue: false }),
  },
  async connected() {
    this.userId = $APP.Auth.isAuthenticated ? $APP.Auth.currentUserId : "guest";
    // Load meetup attendance for current user
    this.meetupAttendance = await $APP.Model.meetup_attendance.getAll({
      where: { user: this.userId },
    });
  },
  isJoined() {
    if (!this.meetup) return false;
    return (
      this.meetupAttendance?.some((a) => a.meetup === this.meetup.id) || false
    );
  },
  getParentItem() {
    if (!this.meetup) return null;
    if (this.meetup.event) {
      return (this.events || []).find((e) => e.id === this.meetup.event);
    }
    if (this.meetup.place) {
      return (this.places || []).find((p) => p.id === this.meetup.place);
    }
    return null;
  },
  async handleJoinToggle() {
    const m = this.meetup;
    if (!m) return;

    if (this.isJoined()) {
      // Find and remove attendance record
      const attendance = this.meetupAttendance.find((a) => a.meetup === m.id);
      if (attendance) {
        await $APP.Model.meetup_attendance.remove(attendance.id);
        this.meetupAttendance = this.meetupAttendance.filter(
          (a) => a.meetup !== m.id,
        );
      }
    } else {
      // Create attendance record
      const newAttendance = {
        id: \`\${this.userId}_\${m.id}\`,
        user: this.userId,
        meetup: m.id,
        status: "going",
        joinedAt: new Date().toISOString(),
        createdAt: new Date().toISOString(),
      };
      await $APP.Model.meetup_attendance.add(newAttendance);
      this.meetupAttendance = [...this.meetupAttendance, newAttendance];

      // Also mark as interested if not already
      if (
        this.currentUser &&
        !this.currentUser.interestedMeetups?.some((i) => i.id === m.id)
      ) {
        this.currentUser.interestedMeetups = [
          ...(this.currentUser.interestedMeetups || []),
          { id: m.id },
        ];
        await $APP.Model.users.edit(this.currentUser);
      }
    }
  },
  render() {
    console.log(this.meetup);
    if (!this.meetup) return NBS.SPINNER;

    const m = this.meetup;
    if (!m) return NBS.SPINNER;

    const parent = this.getParentItem();
    const h = $APP.Auth.user;
    const isJoined = this.isJoined();
    return html\`
      <div class="bg-purple-50 min-h-screen pb-20">
        <view-auth-modal
          .isOpen=\${this.showAuthModal}
          .onClose=\${() => (this.showAuthModal = false)}
          .onSuccess=\${() => location.reload()}
        ></view-auth-modal>
        \${
          this.showAuthPrompt
            ? html\`
          <div class="fixed bottom-20 left-4 right-4 z-40">
            <view-auth-prompt
              .message=\${this.authPromptMessage}
              .onLogin=\${() => {
                this.showAuthPrompt = false;
                this.showAuthModal = true;
              }}
              .onDismiss=\${() => (this.showAuthPrompt = false)}
            ></view-auth-prompt>
          </div>
        \`
            : null
        }
        <div class="sticky top-0 z-20 bg-white border-b-3 border-black px-4 py-3 flex items-center justify-between shadow-sm">
          <button @click=\${() => window.history.back()} class="w-10 h-10 flex items-center justify-center border-2 border-black rounded-xl bg-white hover:bg-gray-100 transition-colors">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>
          </button>
          <div class="font-black uppercase tracking-tight truncate max-w-[200px]">MEETUP DETAILS</div>
          <button class="w-10 h-10 flex items-center justify-center border-2 border-black rounded-xl bg-white hover:bg-gray-100 transition-colors">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" y1="2" x2="12" y2="15"/></svg>
          </button>
        </div>
        <div class="relative w-full h-64 sm:h-80 bg-gray-200 border-b-3 border-black overflow-hidden">
          <img src="\${m.image}" class="w-full h-full object-cover" />
          <div class="absolute bottom-4 left-4 flex gap-2">
            <div class="px-3 py-1 \${getCategoryColor(m.category)} border-2 border-black rounded-lg font-black text-xs uppercase shadow-[2px_2px_0px_0px_rgba(0,0,0,1)]">
              \${$APP.i18n.t(\`categories.\${m.category}\`)}
            </div>
          </div>
        </div>
        <div class="px-4 -mt-6 relative z-10 space-y-6">
          <div class="bg-white border-3 border-black rounded-2xl p-6 shadow-[6px_6px_0px_0px_rgba(0,0,0,1)]">
            <h1 class="text-3xl font-black uppercase leading-9 mb-2">\${m.name}</h1>
            <div class="flex items-center gap-2 text-sm font-bold text-gray-600 mb-4"><span>\u{1F4CD} \${m.venue || "Rio de Janeiro"}</span></div>
            <div class="grid grid-cols-2 gap-0 border-3 border-black rounded-xl overflow-hidden bg-gray-50">
              <div class="p-3 text-center border-r-3 border-black bg-white">
                <div class="text-xs font-black text-gray-400 uppercase">DATE</div>
                <div class="text-sm font-black text-black">\${m.date ? new Date(m.date).toLocaleDateString("en-US", { month: "short", day: "numeric" }).toUpperCase() : "TBA"}</div>
              </div>
              <div class="p-3 text-center bg-white">
                <div class="text-xs font-black text-gray-400 uppercase">TIME</div>
                <div class="text-sm font-black text-black">\${m.time || "All Day"}</div>
              </div>
            </div>
          </div>
          \${
            h
              ? html\`
            <div class="flex items-center gap-3 bg-white border-3 border-black rounded-xl p-3 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]">
              <img src="\${h.avatar}" class="w-10 h-10 rounded-full border-2 border-black" />
              <div>
                <div class="text-[10px] font-bold text-gray-500 uppercase">Organized by</div>
                <div class="font-black text-sm">\${h.name}</div>
              </div>
              <button class="ml-auto px-3 py-1 bg-black text-white rounded-lg text-xs font-bold uppercase">Profile</button>
            </div>
          \`
              : null
          }
          <div class="bg-white border-3 border-black rounded-2xl p-6 shadow-[6px_6px_0px_0px_rgba(0,0,0,1)]">
            <h3 class="text-lg font-black uppercase mb-3 flex items-center gap-2">\u{1F4DD} About</h3>
            <p class="text-base font-medium text-gray-800 leading-relaxed">\${m.description}</p>
            <div class="mt-6 pt-6 border-t-2 border-dashed border-gray-300">
              <div class="flex items-center justify-between mb-3">
                <span class="text-sm font-bold text-gray-600">\${m.attendees?.length || 0} people joined</span>
              </div>
              <button @click=\${() => this.handleJoinToggle()} class="w-full py-4 \${isJoined ? "bg-green-400" : "bg-primary"} border-3 border-black rounded-xl font-black uppercase text-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[2px] hover:translate-y-[2px] hover:shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] transition-all">
                \${isJoined ? "\u2713 Joined" : "Join Meetup"}
              </button>
            </div>
          </div>
          \${
            parent
              ? html\`
          <div class="bg-white border-3 border-black rounded-2xl p-4 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]">
            <h3 class="text-sm font-black uppercase mb-3 text-gray-500">Related \${m.event ? "Event" : "Place"}</h3>
            <div class="flex gap-4 items-center cursor-pointer hover:bg-gray-50 p-2 rounded-lg -m-2" @click=\${() => {
              if (m.event) $APP.Router.go("event-detail", { slug: parent.slug });
              if (m.place) $APP.Router.go("place-detail", { slug: parent.slug });
            }}>
              <div class="w-16 h-16 bg-gray-200 border-2 border-black rounded-lg flex-shrink-0 bg-cover bg-center" style="background-image: url('\${parent.image}')"></div>
              <div class="flex-1">
                <h4 class="font-black text-sm uppercase">\${parent.name}</h4>
                <div class="text-xs font-bold text-gray-500">\${parent.venue || parent.address || ""}</div>
              </div>
            </div>
          </div>
          \`
              : null
          }
          <div class="h-24"></div>
        </div>
      </div>
    \`;
  },
};
`,mimeType:"text/javascript"},"/views/meetups-view.js":{content:`import T from "/$app/types/index.js";
import $APP from "/$app.js";
import { html } from "/npm/lit-html";
import { NBS } from "./utils.js";

export default {
  properties: {
    userId: T.string({ defaultValue: "guest" }),
    currentUser: T.object({
      sync: $APP.Model.users,
      query: (inst) => ({
        id: inst.userId,
        includes: [
          "likedMeetups",
          "interestedMeetups",
          "likedEvents",
          "interestedEvents",
        ],
      }),
      dependsOn: ["userId"],
    }),
    meetupAttendance: T.array({ defaultValue: [] }),
  },
  async connected() {
    this.userId = $APP.Auth.isAuthenticated ? $APP.Auth.currentUserId : "guest";
    this.meetupAttendance = await $APP.Model.meetup_attendance.getAll({
      where: { user: this.userId },
    });
  },
  isLoading() {
    return !this.currentUser;
  },
  getAttending() {
    if (!this.currentUser) return [];
    const u = this.currentUser;
    const joinedMeetupIds = new Set(
      (this.meetupAttendance || []).map((a) => a.meetup),
    );

    // Meetups user has joined + interested events
    const attendingMeetups = (u.likedMeetups || [])
      .filter((m) => joinedMeetupIds.has(m.id))
      .map((m) => ({ ...m, _type: "meetup" }));

    const interestedEvents = (u.interestedEvents || []).map((e) => ({
      ...e,
      _type: "event",
    }));

    return [...attendingMeetups, ...interestedEvents];
  },
  getSavedMeetups() {
    if (!this.currentUser) return [];
    const u = this.currentUser;
    const joinedMeetupIds = new Set(
      (this.meetupAttendance || []).map((a) => a.meetup),
    );
    const interestedEventIds = new Set(
      (u.interestedEvents || []).map((e) => e.id),
    );

    // Liked meetups (not joined) + liked events (not interested)
    const savedMeetups = (u.likedMeetups || [])
      .filter((m) => !joinedMeetupIds.has(m.id))
      .map((m) => ({ ...m, _type: "meetup" }));

    const savedEvents = (u.likedEvents || [])
      .filter((e) => !interestedEventIds.has(e.id))
      .map((e) => ({ ...e, _type: "event" }));

    return [...savedMeetups, ...savedEvents];
  },
  render() {
    if (this.isLoading()) return NBS.SPINNER;

    const a = this.getAttending();
    const sM = this.getSavedMeetups();

    const renderSection = (
      title,
      emoji,
      count,
      items,
      color,
      emptyEmoji,
      emptyText,
    ) => html\`
      <div class="space-y-4">
        <div class="flex items-center justify-between bg-white border-3 border-black rounded-2xl p-4 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]">
          <h2 class="text-2xl font-black text-black uppercase">\${emoji} \${title}</h2>
          <span class="px-4 py-1 \${color} border-2 border-black rounded-lg font-black text-sm text-black shadow-[2px_2px_0px_0px_rgba(0,0,0,1)]">
            \${count}
          </span>
        </div>
        \${
          items.length > 0
            ? html\`
          <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6">
            \${items.map((item) => html\`<view-meetup-card-compact .content=\${item} .onClick=\${(i) => $APP.Router.go(\`\${i._type}-detail\`, { slug: i.slug })}></view-meetup-card-compact>\`)}
          </div>
        \`
            : html\`
          <uix-card class="empty-state-card" shadow="md" borderWidth="3" padding="lg">
            <div class="text-center space-y-4">
              <div class="text-5xl mb-4">\${emptyEmoji}</div>
              <p class="text-lg font-bold text-gray-600">\${emptyText}</p>
            </div>
          </uix-card>
        \`
        }
      </div>
    \`;

    return html\`
      <div class="p-4 sm:p-6 space-y-8">
        \${renderSection("Attending", "\u{1F4C5}", a.length, a, "bg-primary", "\u{1F5D3}\uFE0F", "No upcoming meetups yet. Join some to get started!")}
        \${renderSection("Saved", "\u2764\uFE0F", sM.length, sM, "bg-secondary", "\u{1F495}", "No saved meetups yet. Like some to see them here!")}
      </div>
    \`;
  },
};
`,mimeType:"text/javascript"},"/views/profile-view.js":{content:`import T from "/$app/types/index.js";
import $APP from "/$app.js";
import { html } from "/npm/lit-html";
import { NBS } from "./utils.js";

export default {
  properties: {
    userId: T.string({ defaultValue: "guest" }),
    currentUser: T.object({
      sync: $APP.Model.users,
      query: (inst) => ({
        id: inst.userId,
        includes: [
          "likedPlaces",
          "likedEvents",
          "likedMeetups",
          "likedGroups",
          "interestedEvents",
          "interestedMeetups",
        ],
      }),
      dependsOn: ["userId"],
    }),
    meetupAttendance: T.array({ defaultValue: [] }),
    activeTab: T.string({ defaultValue: "attending" }),
    showOnboarding: T.boolean({ defaultValue: false }),
  },
  async connected() {
    this.userId = $APP.Auth.isAuthenticated ? $APP.Auth.currentUserId : "guest";
    this.meetupAttendance = await $APP.Model.meetup_attendance.getAll({
      where: { user: this.userId },
    });
  },
  getStats() {
    if (!this.currentUser) return { eventsJoined: 0, saved: 0, attending: 0 };
    const u = this.currentUser;
    const joinedIds = new Set(
      (this.meetupAttendance || []).map((a) => a.meetup),
    );

    return {
      attending: (u.likedMeetups || []).filter((m) => joinedIds.has(m.id))
        .length,
      saved:
        (u.likedPlaces?.length || 0) +
        (u.likedEvents?.length || 0) +
        (u.likedMeetups?.length || 0) +
        (u.likedGroups?.length || 0),
      eventsJoined: u.interestedEvents?.length || 0,
    };
  },
  async handleSaveProfile(fD) {
    const user = $APP.Auth.user;
    if (user) await $APP.Model.users.edit({ id: user.id, ...fD });
    this.showOnboarding = false;
  },
  getTabContent() {
    if (!this.currentUser) return [];
    const u = this.currentUser;
    const joinedIds = new Set(
      (this.meetupAttendance || []).map((a) => a.meetup),
    );

    switch (this.activeTab) {
      case "attending":
        // Meetups user has joined
        return (u.likedMeetups || [])
          .filter((m) => joinedIds.has(m.id))
          .map((m) => ({ ...m, _type: "meetup" }));

      case "saved":
        // All liked items
        return [
          ...(u.likedPlaces || []).map((p) => ({ ...p, _type: "place" })),
          ...(u.likedEvents || []).map((e) => ({ ...e, _type: "event" })),
          ...(u.likedMeetups || []).map((m) => ({ ...m, _type: "meetup" })),
          ...(u.likedGroups || []).map((g) => ({ ...g, _type: "group" })),
        ];

      case "history": {
        // All interactions (liked + interested) - deduplicated
        const all = new Map();
        (u.likedPlaces || []).forEach((p) =>
          all.set(\`place-\${p.id}\`, { ...p, _type: "place" }),
        );
        (u.likedEvents || []).forEach((e) =>
          all.set(\`event-\${e.id}\`, { ...e, _type: "event" }),
        );
        (u.likedMeetups || []).forEach((m) =>
          all.set(\`meetup-\${m.id}\`, { ...m, _type: "meetup" }),
        );
        (u.likedGroups || []).forEach((g) =>
          all.set(\`group-\${g.id}\`, { ...g, _type: "group" }),
        );
        (u.interestedEvents || []).forEach((e) =>
          all.set(\`event-\${e.id}\`, { ...e, _type: "event" }),
        );
        (u.interestedMeetups || []).forEach((m) =>
          all.set(\`meetup-\${m.id}\`, { ...m, _type: "meetup" }),
        );
        return Array.from(all.values());
      }

      default:
        return [];
    }
  },
  render() {
    const user = this.currentUser || $APP.Auth.user || {};
    if (!user || !this.currentUser) return NBS.SPINNER;
    const tC = this.getTabContent();
    const s = this.getStats();
    const dR =
      user.arrivalDate && user.departureDate
        ? \`\${new Date(user.arrivalDate).toLocaleDateString(undefined, { month: "short", day: "numeric" })} - \${new Date(user.departureDate).toLocaleDateString(undefined, { month: "short", day: "numeric" })}\`
        : "";
    const editBtnCls =
      "absolute top-6 right-6 bg-white p-2 rounded-xl border-2 border-black shadow-[3px_3px_0px_0px_rgba(0,0,0,1)] hover:shadow-none hover:translate-x-[2px] hover:translate-y-[2px] transition-all";
    const backBtnCls =
      "absolute top-6 left-6 bg-white p-2 rounded-xl border-2 border-black shadow-[3px_3px_0px_0px_rgba(0,0,0,1)] hover:shadow-none hover:translate-x-[2px] hover:translate-y-[2px] transition-all";
    const tabBtnCls = (t) =>
      \`flex-1 py-3 px-2 border-3 border-black rounded-xl font-black text-xs uppercase shadow-[3px_3px_0px_0px_rgba(0,0,0,1)] transition-all \${NBS.ACTIVE_SM} \${this.activeTab === t ? "bg-accent text-black" : "bg-white text-black"}\`;
    const emptyBtnCls =
      "mt-4 px-6 py-2 bg-accent border-3 border-black rounded-xl font-black uppercase text-sm shadow-[3px_3px_0px_0px_rgba(0,0,0,1)] hover:shadow-none hover:translate-x-[3px] hover:translate-y-[3px] transition-all";

    return html\`
      <div class="px-4 sm:px-8 mx-auto pb-20">
        <view-onboarding-wizard
          .isOpen=\${this.showOnboarding} .user=\${user}
          .onClose=\${() => (this.showOnboarding = false)} .onSave=\${this.handleSaveProfile.bind(this)}
        ></view-onboarding-wizard>
        <div class="relative bg-white border-b-3 border-black rounded-b-[2.5rem] p-8 pb-16 shadow-[0px_4px_0px_0px_rgba(0,0,0,1)]">
          <button @click=\${() => (this.showOnboarding = true)} class="\${editBtnCls}">\u270F\uFE0F Edit</button>
          <button @click=\${() => window.history.back()} class="\${backBtnCls}">\u2190</button>
          <div class="flex justify-center mb-4 mt-4">
            <div class="w-32 h-32 rounded-3xl border-3 border-black bg-cover bg-center shadow-[6px_6px_0px_0px_rgba(0,0,0,1)] bg-white"
              style="background-image: url(\${user.avatar})"
            ></div>
          </div>
          <div class="text-center space-y-2">
            <h1 class="text-3xl font-black flex items-center justify-center gap-2 text-black">
              \${user.name}
              <div class="bg-blue-400 text-white rounded-full p-1 border-2 border-black w-6 h-6 flex items-center justify-center text-[10px]">\u2713</div>
            </h1>
            <div class="flex flex-wrap justify-center gap-2 max-w-xs mx-auto">
              <div class="px-3 py-1 bg-white border-2 border-black rounded-lg font-bold text-xs shadow-sm flex items-center gap-1">
                \${user.travelStatus === "resident" ? "\u{1F3E0} Local" : "\u2708\uFE0F Visitor"}
              </div>
              \${
                dR
                  ? html\`
                <div class="px-3 py-1 bg-accent border-2 border-black rounded-lg font-bold text-xs shadow-sm flex items-center gap-1">
                  \u{1F5D3}\uFE0F \${dR}
                </div>
              \`
                  : null
              }
            </div>
            <div class="flex flex-wrap justify-center gap-2 pt-2">
              \${user.vibeTime ? html\`<span class="px-2 py-1 bg-secondary-lighter border border-black rounded-md text-[10px] font-bold uppercase">\${user.vibeTime}</span>\` : null}
              \${user.vibeDrink ? html\`<span class="px-2 py-1 bg-secondary-lighter border border-black rounded-md text-[10px] font-bold uppercase">\${user.vibeDrink}</span>\` : null}
              \${(user.lookingFor || []).slice(0, 2).map((t) => html\`<span class="px-2 py-1 bg-primary-lighter border border-black rounded-md text-[10px] font-bold uppercase">Looking for \${t}</span>\`)}
            </div>
            \${user.bio ? html\`<p class="text-center text-sm font-bold text-gray-700 mt-4 max-w-md mx-auto">\${user.bio}</p>\` : null}
          </div>
        </div>
        <div class="px-4 sm:px-6 -mt-10 relative z-10 mb-8">
          <div class="grid grid-cols-3 bg-white border-3 border-black rounded-2xl shadow-[6px_6px_0px_0px_rgba(0,0,0,1)] divide-x-2 divide-black p-2">
            <div class="text-center py-3"><div class="text-2xl font-black text-black">\${s.eventsJoined}</div><div class="text-[10px] font-bold uppercase text-gray-500 mt-1">Events Joined</div></div>
            <div class="text-center py-3"><div class="text-2xl font-black text-black">\${s.saved}</div><div class="text-[10px] font-bold uppercase text-gray-500 mt-1">Saved</div></div>
            <div class="text-center py-3"><div class="text-2xl font-black text-black">\${s.attending}</div><div class="text-[10px] font-bold uppercase text-gray-500 mt-1">Attending</div></div>
          </div>
        </div>
        <div class="flex gap-2 p-4 sm:p-6 mb-2">
          \${["attending", "saved", "history"].map(
            (
              t,
            ) => html\`<button @click=\${() => (this.activeTab = t)} class="\${tabBtnCls(t)}">
              \${t === "attending" ? "Attending" : t === "saved" ? "Saved" : "History"}
            </button>\`,
          )}
        </div>
        <div class="px-4 sm:px-6 mb-12">
          \${
            tC.length > 0
              ? html\`<div class="grid grid-cols-2 gap-4">
              \${tC.map((item) => html\`<view-meetup-card-compact .content=\${item} .onClick=\${(i) => $APP.Router.go(\`\${i._type}-detail\`, { slug: i.slug })}></view-meetup-card-compact>\`)}
            </div>\`
              : html\`<div class="bg-white border-3 border-black rounded-2xl p-8 shadow-[6px_6px_0px_0px_rgba(0,0,0,1)] text-center space-y-4">
              <div class="text-5xl mb-4">\${this.activeTab === "attending" ? "\u{1F4C5}" : this.activeTab === "saved" ? "\u{1F4BE}" : "\u{1F4DA}"}</div>
              <p class="text-lg font-bold text-gray-600">
                \${this.activeTab === "attending" ? "No events joined yet" : this.activeTab === "saved" ? "No saved places yet" : "No activity yet"}
              </p>
              <button @click=\${() => $APP.Router.go("discover")} class="\${emptyBtnCls}">Explore Events</button>
            </div>\`
          }
        </div>
      </div>
    \`;
  },
};
`,mimeType:"text/javascript"},"/views/onboarding-wizard.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

const NBS_S =
  "border-3 border-black rounded-xl shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[2px] hover:translate-y-[2px] hover:shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] transition-all";

export default {
  properties: {
    isOpen: T.boolean({ defaultValue: false }),
    user: T.object({ attribute: false }),
    onSave: T.function({ attribute: false }),
    onClose: T.function({ attribute: false }),
    formData: T.object({ defaultValue: {} }),
  },
  connected() {
    if (this.user) {
      this.formData = {
        travelStatus: this.user.travelStatus || "visitor",
        arrivalDate: this.user.arrivalDate || "",
        departureDate: this.user.departureDate || "",
        vibeTime: this.user.vibeTime || "morning",
        vibeSocial: this.user.vibeSocial || "social",
        vibeDrink: this.user.vibeDrink || "caipirinha",
        lookingFor: this.user.lookingFor || [],
      };
    }
  },
  updateField(f, v) {
    this.formData = { ...this.formData, [f]: v };
  },
  toggleLookingFor(v) {
    const c = this.formData.lookingFor || [];
    this.updateField(
      "lookingFor",
      c.includes(v) ? c.filter((i) => i !== v) : [...c, v],
    );
  },
  handleStepChange(e) {
    if (
      e.detail.step === 2 &&
      e.detail.direction === "forward" &&
      this.formData.travelStatus === "resident"
    ) {
      setTimeout(() => e.target.nextStep(), 0);
    }
  },
  handleFinish() {
    if (this.onSave) this.onSave(this.formData);
  },
  handleCancel() {
    if (this.onClose) this.onClose();
  },
  render() {
    if (!this.isOpen) return null;

    const stepBtnCls = (s) =>
      \`w-full p-4 border-3 border-black rounded-2xl font-black uppercase text-lg flex items-center justify-between \${NBS_S} \${this.formData.travelStatus === s ? "bg-accent" : "bg-white"}\`;
    const optBtnCls = (v, f, a) =>
      \`flex-1 py-3 border-2 border-black rounded-xl font-bold text-sm \${this.formData[f] === v ? a : "bg-white"}\`;
    const lookingForOptions = [
      { id: "friends", label: "New Friends \u{1F46F}" },
      { id: "dates", label: "Dates \u2764\uFE0F" },
      { id: "activities", label: "Activity Partners \u{1F3BE}" },
      { id: "tips", label: "Local Tips \u{1F5FA}\uFE0F" },
      { id: "party", label: "Parties \u{1F389}" },
    ];

    return html\`
      <uix-wizard
        modal
        .totalSteps=\${4}
        .showNavigation=\${false}
        finishLabel="Complete Profile \u2728"
        @step-change=\${this.handleStepChange}
        @wizard-finish=\${this.handleFinish}
        @wizard-cancel=\${this.handleCancel}
      >
        <!-- Step 1: Travel Status -->
        <div slot="step-1">
          <h2 class="text-2xl font-black uppercase text-center mb-6">
            Are you a Local or Visiting?
          </h2>
          <div class="space-y-4">
            \${["resident", "visitor", "nomad"].map(
              (s) => html\`
                <button
                  @click=\${(e) => {
                    this.updateField("travelStatus", s);
                    e.target.closest("uix-wizard").nextStep();
                  }}
                  class="\${stepBtnCls(s)}"
                >
                  <span>
                    \${
                      s === "resident"
                        ? "\u{1F3E0} I Live Here"
                        : s === "visitor"
                          ? "\u2708\uFE0F Just Visiting"
                          : "\u{1F4BB} Digital Nomad"
                    }
                  </span>
                  \${this.formData.travelStatus === s ? "\u2713" : "\u2192"}
                </button>
              \`,
            )}
          </div>
        </div>

        <!-- Step 2: Travel Dates (skipped for residents) -->
        <div slot="step-2">
          <h2 class="text-2xl font-black uppercase text-center mb-6">
            When are you here?
          </h2>
          <div class="space-y-6">
            <div>
              <label class="block font-bold text-sm uppercase mb-2">Arrival Date</label>
              <input
                type="date"
                class="w-full p-4 border-3 border-black rounded-xl font-bold bg-gray-50 focus:bg-yellow-100 outline-none"
                .value=\${this.formData.arrivalDate}
                @change=\${(e) => this.updateField("arrivalDate", e.target.value)}
              />
            </div>
            <div>
              <label class="block font-bold text-sm uppercase mb-2">Departure Date</label>
              <input
                type="date"
                class="w-full p-4 border-3 border-black rounded-xl font-bold bg-gray-50 focus:bg-yellow-100 outline-none"
                .value=\${this.formData.departureDate}
                @change=\${(e) => this.updateField("departureDate", e.target.value)}
              />
            </div>
            <button
              @click=\${(e) => e.target.closest("uix-wizard").nextStep()}
              class="w-full py-4 bg-black text-white rounded-xl font-black uppercase tracking-wider hover:bg-gray-800"
            >
              Next Step \u2192
            </button>
          </div>
        </div>

        <!-- Step 3: Vibe -->
        <div slot="step-3">
          <h2 class="text-2xl font-black uppercase text-center mb-6">
            What's your Vibe?
          </h2>
          <div class="space-y-6">
            <div>
              <label class="block font-bold text-xs uppercase mb-2 text-center text-gray-500">
                Morning or Night?
              </label>
              <div class="flex gap-2">
                <button
                  @click=\${() => this.updateField("vibeTime", "morning")}
                  class="\${optBtnCls("morning", "vibeTime", "bg-accent-light")}"
                >
                  \u2600\uFE0F Early Bird
                </button>
                <button
                  @click=\${() => this.updateField("vibeTime", "night")}
                  class="\${optBtnCls("night", "vibeTime", "bg-primary-dark")}"
                >
                  \u{1F319} Night Owl
                </button>
              </div>
            </div>
            <div>
              <label class="block font-bold text-xs uppercase mb-2 text-center text-gray-500">
                Pick your poison
              </label>
              <div class="flex gap-2">
                <button
                  @click=\${() => this.updateField("vibeDrink", "coconut")}
                  class="\${optBtnCls("coconut", "vibeDrink", "bg-green-300")}"
                >
                  \u{1F965} Coconut
                </button>
                <button
                  @click=\${() => this.updateField("vibeDrink", "caipirinha")}
                  class="\${optBtnCls("caipirinha", "vibeDrink", "bg-accent-light")}"
                >
                  \u{1F379} Caipi
                </button>
                <button
                  @click=\${() => this.updateField("vibeDrink", "beer")}
                  class="\${optBtnCls("beer", "vibeDrink", "bg-accent")}"
                >
                  \u{1F37A} Beer
                </button>
              </div>
            </div>
            <button
              @click=\${(e) => e.target.closest("uix-wizard").nextStep()}
              class="w-full py-4 bg-black text-white rounded-xl font-black uppercase tracking-wider hover:bg-gray-800"
            >
              Next Step \u2192
            </button>
          </div>
        </div>

        <!-- Step 4: Looking For -->
        <div slot="step-4">
          <h2 class="text-2xl font-black uppercase text-center mb-6">
            Looking for...
          </h2>
          <div class="space-y-3 mb-8">
            \${lookingForOptions.map(
              (opt) => html\`
                <button
                  @click=\${() => this.toggleLookingFor(opt.id)}
                  class="w-full py-3 px-4 border-2 border-black rounded-xl font-bold text-left flex justify-between items-center transition-all \${
                    (this.formData.lookingFor || []).includes(opt.id)
                      ? "bg-pink-300 shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] translate-x-[1px] translate-y-[1px]"
                      : "bg-white shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]"
                  }"
                >
                  <span>\${opt.label}</span>
                  \${(this.formData.lookingFor || []).includes(opt.id) ? "\u2713" : "+"}
                </button>
              \`,
            )}
          </div>
          <button
            @click=\${(e) => e.target.closest("uix-wizard").nextStep()}
            class="w-full py-4 bg-primary-dark border-3 border-black text-black rounded-xl font-black uppercase tracking-wider shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[2px] hover:translate-y-[2px] hover:shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] transition-all"
          >
            Complete Profile \u2728
          </button>
        </div>
      </uix-wizard>
    \`;
  },
};
`,mimeType:"text/javascript"},"/$app/uix/navigation/wizard.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

export default {
  tag: "uix-wizard",
  style: true,
  shadow: true,
  properties: {
    // State
    currentStep: T.number(1),
    totalSteps: T.number(1),

    // Config
    showProgress: T.boolean(true),
    showStepCounter: T.boolean(true),
    showNavigation: T.boolean(true),
    modal: T.boolean(false),

    // Labels (i18n support)
    backLabel: T.string("\u2190 Back"),
    nextLabel: T.string("Next \u2192"),
    cancelLabel: T.string("Cancel"),
    finishLabel: T.string("Finish"),
    stepLabel: T.string("Step"),

    // Callbacks
    canProceed: T.function(),
  },

  nextStep() {
    // Check if canProceed callback exists and returns false
    if (this.canProceed && !this.canProceed(this.currentStep)) {
      return false;
    }

    const previousStep = this.currentStep;
    if (this.currentStep < this.totalSteps) {
      this.currentStep++;
      this.emit("step-change", {
        step: this.currentStep,
        previousStep,
        direction: "forward",
      });
      return true;
    } else {
      this.emit("wizard-finish", {});
      return true;
    }
  },

  prevStep() {
    const previousStep = this.currentStep;
    if (this.currentStep > 1) {
      this.currentStep--;
      this.emit("step-change", {
        step: this.currentStep,
        previousStep,
        direction: "backward",
      });
      return true;
    } else {
      this.emit("wizard-cancel", {});
      return false;
    }
  },

  goToStep(step) {
    if (step >= 1 && step <= this.totalSteps) {
      const previousStep = this.currentStep;
      const direction = step > previousStep ? "forward" : "backward";
      this.currentStep = step;
      this.emit("step-change", {
        step: this.currentStep,
        previousStep,
        direction,
      });
      return true;
    }
    return false;
  },

  handleBackClick() {
    this.prevStep();
  },

  handleNextClick() {
    this.nextStep();
  },

  render() {
    const progress = (this.currentStep / this.totalSteps) * 100;
    const isFirstStep = this.currentStep === 1;
    const isLastStep = this.currentStep >= this.totalSteps;

    // Generate slot names for all steps
    const stepSlots = [];
    for (let i = 1; i <= this.totalSteps; i++) {
      stepSlots.push(html\`
        <div
          class="step-content \${i === this.currentStep ? "active" : ""}"
          style="display: \${i === this.currentStep ? "block" : "none"}"
        >
          <slot name="step-\${i}"></slot>
        </div>
      \`);
    }

    const content = html\`
      <style>
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        .wizard-overlay {
          animation: fadeIn 0.2s ease-out;
        }
      </style>

      <div class="wizard-container" part="container">
        <!-- Header -->
        <div class="wizard-header" part="header">
          <button
            @click=\${this.handleBackClick.bind(this)}
            class="btn-back"
            part="btn-back"
          >
            \${isFirstStep ? this.cancelLabel : this.backLabel}
          </button>
          \${this.showStepCounter
            ? html\`
                <div class="step-counter" part="step-counter">
                  \${this.stepLabel} \${this.currentStep}/\${this.totalSteps}
                </div>
              \`
            : null}
          <div class="header-spacer"></div>
        </div>

        <!-- Progress Bar -->
        \${this.showProgress
          ? html\`
              <div class="wizard-progress" part="progress">
                <div
                  class="wizard-progress-fill"
                  part="progress-fill"
                  style="width: \${progress}%"
                ></div>
              </div>
            \`
          : null}

        <!-- Step Content -->
        <div class="wizard-content" part="content">
          \${stepSlots}
        </div>

        <!-- Footer Navigation -->
        \${this.showNavigation
          ? html\`
              <div class="wizard-footer" part="footer">
                <slot name="footer">
                  <button
                    @click=\${this.handleNextClick.bind(this)}
                    class="btn-next"
                    part="btn-next"
                  >
                    \${isLastStep ? this.finishLabel : this.nextLabel}
                  </button>
                </slot>
              </div>
            \`
          : null}
      </div>
    \`;

    // Modal mode wraps content with overlay
    if (this.modal) {
      return html\`
        <div
          class="wizard-overlay"
          part="overlay"
          @click=\${(e) => {
            if (e.target === e.currentTarget) {
              this.emit("wizard-cancel", {});
            }
          }}
        >
          \${content}
        </div>
      \`;
    }

    return content;
  },
};

/**
 * Wizard Component
 *
 * @component
 * @category navigation
 * @tag uix-wizard
 *
 * A multi-step wizard/stepper component for guiding users through
 * sequential processes like onboarding, forms, or setup flows.
 *
 * @slot step-1 - Content for step 1
 * @slot step-2 - Content for step 2
 * @slot step-N - Content for step N (up to totalSteps)
 * @slot footer - Custom footer content (replaces default next button)
 *
 * @part overlay - Modal backdrop (when modal=true)
 * @part container - Main wizard container
 * @part header - Header with back button and step counter
 * @part btn-back - Back/cancel button
 * @part step-counter - Step X/Y indicator
 * @part progress - Progress bar container
 * @part progress-fill - Progress bar fill element
 * @part content - Step content area
 * @part footer - Footer with navigation button
 * @part btn-next - Next/finish button
 *
 * @fires step-change - When step changes. Detail: { step, previousStep, direction }
 * @fires wizard-finish - When wizard completes (next on last step)
 * @fires wizard-cancel - When wizard is cancelled (back on first step or overlay click)
 *
 * @example Basic Wizard
 * \`\`\`html
 * <uix-wizard .totalSteps=\${3}>
 *   <div slot="step-1">
 *     <h2>Welcome</h2>
 *     <p>Let's get started!</p>
 *   </div>
 *   <div slot="step-2">
 *     <h2>Your Details</h2>
 *     <input type="text" placeholder="Name" />
 *   </div>
 *   <div slot="step-3">
 *     <h2>Complete!</h2>
 *     <p>You're all set.</p>
 *   </div>
 * </uix-wizard>
 * \`\`\`
 *
 * @example Modal Wizard
 * \`\`\`html
 * <uix-wizard
 *   modal
 *   .totalSteps=\${4}
 *   nextLabel="Continue \u2192"
 *   finishLabel="Complete \u2728"
 *   @wizard-finish=\${handleComplete}
 *   @wizard-cancel=\${handleClose}
 * >
 *   <div slot="step-1">Step 1 content</div>
 *   <div slot="step-2">Step 2 content</div>
 *   <div slot="step-3">Step 3 content</div>
 *   <div slot="step-4">Step 4 content</div>
 * </uix-wizard>
 * \`\`\`
 *
 * @example Wizard with Validation
 * \`\`\`html
 * <uix-wizard
 *   .totalSteps=\${3}
 *   .canProceed=\${(step) => {
 *     if (step === 1) return !!this.name;
 *     if (step === 2) return !!this.email;
 *     return true;
 *   }}
 * >
 *   ...
 * </uix-wizard>
 * \`\`\`
 */
`,mimeType:"text/javascript"},"/$app/uix/navigation/wizard.css":{content:`:where(.uix-wizard,uix-wizard){display:block;--wizard-border-width: 3px;--wizard-border-color: black;--wizard-border-radius: 1.5rem;--wizard-progress-height: .5rem;--wizard-progress-bg: #e5e7eb;--wizard-progress-fill: var(--color-primary, #f472b6);--wizard-overlay-bg: rgba(0, 0, 0, .6);--wizard-shadow: 8px 8px 0px 0px rgba(255, 255, 255, .5);&::part(overlay){position:fixed;inset:0;z-index:50;background:var(--wizard-overlay-bg);display:flex;align-items:center;justify-content:center;padding:1rem;backdrop-filter:blur(4px)}&::part(container){background:#fff;border:4px solid var(--wizard-border-color);border-radius:var(--wizard-border-radius);width:100%;max-width:28rem;overflow:hidden;box-shadow:var(--wizard-shadow)}&:not([modal])::part(container){max-width:100%}&::part(header){background:#f3f4f6;border-bottom:var(--wizard-border-width) solid var(--wizard-border-color);padding:1rem;display:flex;justify-content:space-between;align-items:center}&::part(btn-back){font-weight:700;font-size:.875rem;text-decoration:underline;background:none;border:none;cursor:pointer;padding:.25rem .5rem;&:hover{opacity:.7}}&::part(step-counter){font-weight:900;text-transform:uppercase;font-size:.875rem}&::part(progress){width:100%;height:var(--wizard-progress-height);background:var(--wizard-progress-bg);border-bottom:var(--wizard-border-width) solid var(--wizard-border-color)}&::part(progress-fill){height:100%;background:var(--wizard-progress-fill);transition:width .3s ease}&::part(content){padding:1.5rem}&::part(footer){padding:0 1.5rem 1.5rem}&::part(btn-next){width:100%;padding:1rem 1.5rem;background:#000;color:#fff;border:none;border-radius:.75rem;font-weight:900;font-size:1rem;text-transform:uppercase;letter-spacing:.05em;cursor:pointer;transition:background .15s ease;&:hover{background:#374151}&:active{background:#1f2937}}&[primary-btn]::part(btn-next){background:var(--wizard-progress-fill);color:#000;border:var(--wizard-border-width) solid var(--wizard-border-color);box-shadow:4px 4px #000;&:hover{transform:translate(2px,2px);box-shadow:2px 2px #000}&:active{transform:translate(4px,4px);box-shadow:none}}}
`,mimeType:"text/css"},"/views/auth-prompt.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

export default {
  properties: {
    message: T.string({ defaultValue: "" }),
    onLogin: T.function({ attribute: false }),
    onDismiss: T.function({ attribute: false }),
  },
  render() {
    const btnCls =
      "flex-1 py-3 bg-black text-white border-3 border-black rounded-xl font-black uppercase text-sm shadow-[3px_3px_0px_0px_rgba(0,0,0,1)] hover:translate-x-[1px] hover:translate-y-[1px] hover:shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] transition-all";
    return html\`
      <uix-card class="bg-white border-3 border-black rounded-2xl p-6 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] space-y-4">
        <div class="flex items-start gap-3">
          <div class="text-4xl">\u{1F510}</div>
          <div class="flex-1">
            <h3 class="font-black uppercase text-lg mb-1">Login Required</h3>
            <p class="text-sm font-bold text-gray-700">\${this.message || "Create an account or login to continue"}</p>
          </div>
          <button @click=\${this.onDismiss} class="text-xl font-bold text-gray-500 hover:text-black">\xD7</button>
        </div>
        <div class="flex gap-3">
          <button @click=\${this.onLogin} class="\${btnCls}">Login / Register</button>
          <button @click=\${this.onDismiss} class="px-4 py-3 bg-white border-3 border-black rounded-xl font-bold text-sm hover:bg-gray-100 transition-colors">
            Maybe Later
          </button>
        </div>
      </uix-card>
    \`;
  },
};
`,mimeType:"text/javascript"},"/$app/uix/form/auth-form.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

export default {
  tag: "uix-auth-form",
  style: true,
  properties: {
    // Mode
    mode: T.string({ defaultValue: "register", enum: ["login", "register"] }),

    // Config
    showTabs: T.boolean(true),
    showOAuth: T.boolean(true),
    showGuest: T.boolean(true),

    // Labels (i18n support)
    loginLabel: T.string("Login"),
    registerLabel: T.string("Register"),
    loginTitle: T.string("Welcome Back"),
    registerTitle: T.string("Create Account"),
    nameLabel: T.string("Full Name"),
    namePlaceholder: T.string("John Doe"),
    emailLabel: T.string("Email"),
    emailPlaceholder: T.string("you@example.com"),
    submitLoginLabel: T.string("Login"),
    submitRegisterLabel: T.string("Create Account"),
    oauthDividerLabel: T.string("Or continue with"),
    googleLabel: T.string("Continue with Google"),
    appleLabel: T.string("Continue with Apple"),
    guestLabel: T.string("Continue as Guest"),

    // Password labels
    passwordLabel: T.string("Password"),
    passwordPlaceholder: T.string("Enter password"),
    confirmPasswordLabel: T.string("Confirm Password"),
    confirmPasswordPlaceholder: T.string("Re-enter password"),

    // State
    name: T.string(""),
    email: T.string(""),
    password: T.string(""),
    passwordConfirm: T.string(""),
    error: T.string(""),
    loading: T.boolean(false),
  },

  handleModeChange(newMode) {
    this.mode = newMode;
    this.error = "";
  },

  handleSubmit() {
    this.error = "";

    if (this.mode === "register" && !this.name.trim()) {
      this.error = "Please enter your name";
      this.emit("auth-error", { message: this.error });
      return;
    }

    if (!this.email.trim()) {
      this.error = "Please enter your email";
      this.emit("auth-error", { message: this.error });
      return;
    }

    // Basic email validation
    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;
    if (!emailRegex.test(this.email)) {
      this.error = "Please enter a valid email";
      this.emit("auth-error", { message: this.error });
      return;
    }

    // Password validation
    if (!this.password) {
      this.error = "Please enter a password";
      this.emit("auth-error", { message: this.error });
      return;
    }

    if (this.password.length < 8) {
      this.error = "Password must be at least 8 characters";
      this.emit("auth-error", { message: this.error });
      return;
    }

    this.emit("auth-submit", {
      mode: this.mode,
      name: this.name,
      email: this.email,
      password: this.password,
      passwordConfirm: this.password, // Use password as confirmation
    });
  },

  handleOAuth(provider) {
    this.emit("auth-oauth", { provider });
  },

  handleGuest() {
    this.emit("auth-guest", {});
  },

  handleKeyPress(e) {
    if (e.key === "Enter") {
      this.handleSubmit();
    }
  },

  setError(message) {
    this.error = message;
  },

  render() {
    const isRegister = this.mode === "register";

    return html\`
      <!-- Tabs -->
      \${this.showTabs ? this.renderTabs() : null}

      <!-- Form -->
      <div class="auth-form" part="form">
        <!-- Error Message -->
        \${
          this.error
            ? html\`
              <div class="error-message" part="error">
                \${this.error}
              </div>
            \`
            : null
        }

        <!-- Name Field (register only) -->
        \${
          isRegister
            ? html\`
              <div class="field" part="field">
                <label class="label" part="label">\${this.nameLabel}</label>
                <uix-input
                  name="name"
                  type="text"
                  placeholder="\${this.namePlaceholder}"
                  value=\${this.name}                  
                  @input=\${(e) => ((this.name = e.target.value))}
                  @keypress=\${this.handleKeyPress.bind(this)}
                  fullWidth
                ></uix-input>
              </div>
            \`
            : null
        }

        <!-- Email Field -->
        <div class="field" part="field">
          <label class="label" part="label">\${this.emailLabel}</label>
          <uix-input
            name="email"
            type="email"
            placeholder="\${this.emailPlaceholder}"
            value=\${this.email}
            @input=\${(e) => (this.email = e.target.value)}
            @keypress=\${this.handleKeyPress.bind(this)}
            fullWidth
          ></uix-input>
        </div>

        <!-- Password Field -->
        <div class="field" part="field">
          <label class="label" part="label">\${this.passwordLabel}</label>
          <uix-input
            type="password"
            placeholder="\${this.passwordPlaceholder}"
            .value=\${this.password}
            @input=\${(e) => (this.password = e.target.value)}
            @keypress=\${this.handleKeyPress.bind(this)}
            fullWidth
          ></uix-input>
        </div>

        <!-- Submit Button -->
        <uix-button
          class="submit-btn"
          ?disabled=\${this.loading}
          @click=\${this.handleSubmit.bind(this)}
          wFull
        >
          \${
            this.loading
              ? "..."
              : isRegister
                ? this.submitRegisterLabel
                : this.submitLoginLabel
          }
        </uix-button>
      </div>

      <!-- OAuth Section -->
      \${this.showOAuth ? this.renderOAuthButtons() : null}

      <!-- Guest Option -->
      \${this.showGuest ? this.renderGuestOption() : null}
    \`;
  },

  renderTabs() {
    return html\`
      <uix-tabs
        class="auth-tabs"
        part="tabs"
        .activeTab=\${this.mode === "login" ? 0 : 1}
        @tab-change=\${(e) => this.handleModeChange(e.detail === 0 ? "login" : "register")}
      >
        <button slot="tab" ?active=\${this.mode === "login"}>\${this.loginLabel}</button>
        <button slot="tab" ?active=\${this.mode === "register"}>\${this.registerLabel}</button>
      </uix-tabs>
    \`;
  },

  renderOAuthButtons() {
    return html\`
      <div class="oauth-section" part="oauth">
        <div class="divider" part="divider">
          <span>\${this.oauthDividerLabel}</span>
        </div>
        <div class="oauth-buttons" part="oauth-buttons">
          <uix-button
            class="oauth-btn google"
            @click=\${() => this.handleOAuth("google")}
            wFull
          >
            <svg width="20" height="20" viewBox="0 0 24 24">
              <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
              <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
              <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
              <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
            </svg>
            \${this.googleLabel}
          </uix-button>
          <uix-button
            class="oauth-btn apple"
            @click=\${() => this.handleOAuth("apple")}
            wFull
          >
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M17.05 20.28c-.98.95-2.05.88-3.08.4-1.09-.5-2.08-.48-3.24 0-1.44.62-2.2.44-3.06-.4C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09l.01-.01zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"/>
            </svg>
            \${this.appleLabel}
          </uix-button>
        </div>
      </div>
    \`;
  },

  renderGuestOption() {
    return html\`
      <div class="guest-section" part="guest">
        <uix-button
          class="guest-btn"
          w-full
          @click=\${this.handleGuest.bind(this)}
        >
          \${this.guestLabel}
        </uix-button>
      </div>
    \`;
  },
};

/**
 * Auth Form Component
 *
 * @component
 * @category form
 * @tag uix-auth-form
 *
 * A reusable authentication form component with login/register modes,
 * OAuth buttons, and guest option. Emits events for auth actions.
 *
 * @part tabs - Tab container for login/register toggle
 * @part tab - Individual tab button
 * @part tab-active - Active tab button
 * @part form - Main form container
 * @part field - Form field wrapper
 * @part label - Field label
 * @part input - Input field
 * @part error - Error message container
 * @part submit - Submit button
 * @part oauth - OAuth section container
 * @part divider - "Or continue with" divider
 * @part oauth-buttons - OAuth buttons wrapper
 * @part oauth-btn - OAuth button
 * @part oauth-btn-google - Google OAuth button
 * @part oauth-btn-apple - Apple OAuth button
 * @part guest - Guest section container
 * @part guest-btn - Guest option button
 *
 * @fires auth-submit - When form is submitted. Detail: { mode, name, email, password, passwordConfirm }
 * @fires auth-oauth - When OAuth button clicked. Detail: { provider: "google" | "apple" }
 * @fires auth-guest - When guest option clicked
 * @fires auth-error - When validation error occurs. Detail: { message }
 *
 * @example Basic Usage
 * \`\`\`html
 * <uix-auth-form
 *   @auth-submit=\${this.handleAuthSubmit}
 *   @auth-oauth=\${this.handleOAuth}
 *   @auth-guest=\${this.handleGuest}
 * ></uix-auth-form>
 * \`\`\`
 *
 * @example Login Only
 * \`\`\`html
 * <uix-auth-form
 *   mode="login"
 *   .showTabs=\${false}
 *   .showGuest=\${false}
 * ></uix-auth-form>
 * \`\`\`
 *
 * @example Custom Labels
 * \`\`\`html
 * <uix-auth-form
 *   loginTitle="Welcome!"
 *   registerTitle="Join Us"
 *   submitLoginLabel="Sign In"
 *   submitRegisterLabel="Sign Up"
 * ></uix-auth-form>
 * \`\`\`
 */
`,mimeType:"text/javascript"},"/$app/uix/form/auth-form.css":{content:`:where(.uix-auth-form,uix-auth-form){display:block;--auth-border-width: 0;--auth-border-color: transparent;--auth-border-radius: var(--radius-md, .5rem);--auth-shadow: none;--auth-error-background: #fef2f2;--auth-error-border: var(--color-danger, #fca5a5);--auth-error-text: var(--color-danger-dark, #dc2626);--auth-tab-background: var(--color-surface-dark, #f5f5f5);--auth-tab-active-background: var(--color-surface, white);--auth-font-weight: var(--button-font-weight, 700);--auth-text-transform: var(--button-text-transform, none);--auth-divider-color: var(--color-surface-darker, #e5e5e5);--auth-muted-text: var(--text-muted, #6b7280);border:var(--auth-border-width) solid var(--auth-border-color);border-radius:var(--auth-border-radius);box-shadow:var(--auth-shadow);overflow:hidden;background:var(--color-surface, white);.auth-tabs{--tabs-border-width: 0;--tabs-border-radius: 0;--tabs-shadow: none;--tabs-list-background: var(--auth-tab-background);--tabs-list-border-color: var(--color-inverse, black);--tab-active-background: var(--auth-tab-active-background);--tab-active-color: var(--color-inverse, black);--tab-font-weight: var(--auth-font-weight);--tab-text-transform: var(--auth-text-transform);--tab-indicator-color: var(--color-inverse, black);[slot=tab]{font-weight:var(--auth-font-weight);text-transform:var(--auth-text-transform);font-size:.875rem;background:var(--auth-tab-background);color:var(--auth-muted-text);border-bottom:3px solid transparent;&[active]{background:var(--auth-tab-active-background);color:var(--color-inverse, black);border-bottom-color:var(--color-inverse, black)}}}.auth-form{padding:1.5rem;display:flex;flex-direction:column;gap:1rem}.error-message{background:var(--auth-error-background);border:3px solid var(--auth-error-border);border-radius:var(--radius-md, .75rem);padding:.75rem;font-size:.875rem;font-weight:var(--auth-font-weight);color:var(--auth-error-text);box-shadow:var(--shadow-sm, 2px 2px 0px 0px rgba(0,0,0,1))}.field{display:flex;flex-direction:column;gap:.5rem}.label{font-weight:var(--auth-font-weight);font-size:.875rem;text-transform:var(--auth-text-transform);color:var(--color-secondary, #ec4899)}.submit-btn{margin-top:.5rem;width:100%}.oauth-section{padding:0 1.5rem}.divider{position:relative;padding:.5rem 0;text-align:center;&:before{content:"";position:absolute;top:50%;left:0;right:0;height:2px;background:var(--auth-divider-color)}span{position:relative;padding:0 .75rem;background:var(--color-surface, white);font-weight:var(--auth-font-weight);font-size:.75rem;text-transform:var(--auth-text-transform);color:var(--auth-muted-text)}}.oauth-buttons{display:flex;flex-direction:column;gap:.75rem;margin-top:1rem}.oauth-btn{width:100%}.guest-section{padding:1rem 1.5rem 1.5rem;text-align:center}.guest-btn{font-size:.875rem}}
`,mimeType:"text/css"},"/admin/models/bundler_credentials":{content:`<!DOCTYPE html>
<html lang="en">
<head>
	<script src="/$app/base/bootstrapp.js" type="module"><\/script>
  <meta charset="utf-8" />
  <title>meetup.rio</title>
  <base href="/" />
  <meta name="viewport"
    content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
  <meta name="description" content="Discover Rio de Janeiro - Places, Events, and Things to Do" />
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#181818" />
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f3f3f3" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-title" content="meetup.rio" />
  <meta name="mobile-web-app-status-bar-style" content="black" />
  <link id="favicon" rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLW1hcC1waW4iPjxwYXRoIGQ9Ik0yMCAxMGMwIDQuOTkzLTUuNTM5IDEwLjE5My03LjM5OSAxMS43OTlhMSAxIDAgMCAxLTEuMjAyIDBDOS41MzkgMjAuMTkzIDQgMTQuOTkzIDQgMTBhOCA4IDAgMCAxIDE2IDAiLz48Y2lyY2xlIGN4PSIxMiIgY3k9IjEwIiByPSIzIi8+PC9zdmc+"/>
  <link rel="manifest" href="manifest.json" />
</head>
<body style="--text-color: #333;">
  <app-container class="w-full bg-yellow-50 min-h-screen"></view-container>
</body>
</html>
`,mimeType:"text/html"},"/$app/base/bootstrapp.js":{content:`import $APP from "/$app.js";
import config from "/$app/base/config.js";

try {
  if (!("serviceWorker" in navigator))
    throw new Error("Platform not supported");
  await navigator.serviceWorker.register("/backend.js", {
    type: "module",
  });
  await Promise.race([
    new Promise((resolve) => {
      if (navigator.serviceWorker.controller) return resolve();
      navigator.serviceWorker.addEventListener("controllerchange", () =>
        resolve(),
      );
    }),
    new Promise((_, reject) =>
      setTimeout(
        () => reject(new Error("Service Worker timed out.")),
        config.serviceWorker.initTimeout,
      ),
    ),
  ]);
  sessionStorage.removeItem("_sw");
  await $APP.load();
} catch (error) {
  console.error("Service Worker initialization error:", error);
  const retryCount = Number.parseInt(sessionStorage.getItem("_sw") || "0", 10);
  if (retryCount < config.serviceWorker.maxRetries) {
    sessionStorage.setItem("_sw", String(retryCount + 1));
    console.warn(
      \`Retrying Service Worker initialization (attempt \${retryCount + 1}/\${config.serviceWorker.maxRetries})\`,
    );
    window.location.reload();
  } else {
    sessionStorage.removeItem("_sw");
    console.error(
      \`Could not start ServiceWorker after \${config.serviceWorker.maxRetries} attempts\`,
    );
  }
}
if ($APP.settings.dev) {
  try {
    const currentPort = window.location.port;
    const debugPort = config.devServer.getWsPort(currentPort);
    const wsUrl = \`\${window.location.protocol === "https:" ? "wss" : "ws"}://\${
      window.location.hostname
    }:\${debugPort}\`;
    const ws = new WebSocket(wsUrl);

    ws.addEventListener("message", (event) => {
      if (event.data === "APP:REFRESH") {
        console.log("Received refresh request from dev server");
        window.location.reload();
      }
    });
  } catch (e) {
    console.warn("WebSocket connection to dev server failed:", e);
  }
}
`,mimeType:"text/javascript"},"/$app/base/frontend.js":{content:`import $APP from "/$app.js";
import { html } from "/npm/lit-html";

import "/$app/base/apploader.js";
import Controller from "/$app/controller/index.js";
import { initSWFrontend } from "/$app/sw/frontend.js";
import T from "/$app/types/index.js";
import View, { settings } from "/$app/view/index.js";
import Loader from "/$app/view/loader.js";

// Initialize SW frontend with $APP injection
initSWFrontend($APP);

import Backend from "/$app/base/backend/frontend.js";
import initControllerApp, { registerModelType } from "/$app/controller/app.js";
import { initModelFrontend } from "/$app/model/frontend.js";
import { ModelType } from "/$app/model/index.js";
import initRouterApp from "/$app/router/app.js";
import Router from "/$app/router/index.js";
import "/$app/base/app/index.js";

// Initialize model frontend with $APP injection
initModelFrontend($APP);
import "/frontend.js";
settings.iconFontFamily = \`/$app/icon-\${$APP.theme.font.icon.family}/\${$APP.theme.font.icon.family}\`;
Controller.add("backend", Backend);
registerModelType(ModelType);
initControllerApp($APP, Controller, View);
initRouterApp($APP, Router, Controller);

$APP.events.on("APP:INIT", () => {
  if (!View.components.has("app-container"))
    $APP.define("app-container", {
      tag: "app-container",
      class: "flex flex-grow",
      extends: "router-ui",
      properties: {
        routes: T.object({ defaultValue: $APP.routes }),
        full: T.boolean(true),
      },
    });
});

$APP.addModule({ name: "template", path: "/views/templates" });
$APP.addModule({ name: "view", path: "/views" });

const getComponentPath = (tag) => {
  return View.components.get(tag)?.path || Loader.resolvePath(tag);
};

View.getComponentPath = getComponentPath;
settings.loadStyle = !$APP.settings.production;
View.reloadComponents = !!$APP.settings.preview;

View.plugins.push({
  name: "hydrate",
  willUpdate: ({ instance }) => {
    if (
      $APP.settings.production &&
      !instance.hasUpdated &&
      instance.hasAttribute("client:hydrate")
    ) {
      instance.innerHTML = "";
      instance.removeAttribute("client:hydrate");
    }
  },
});

if (!$APP.routes["/"])
  $APP.routes.set({
    "/": { name: "index", component: () => html\`<app-index></app-index>\` },
  });
`,mimeType:"text/javascript"},"/$app/controller/index.js":{content:`/**
 * @bootstrapp/controller
 * Main entry point
 */

import adaptersStorage from "./adapters/storage.js";
import adaptersUrl from "./adapters/url.js";
import { createController } from "./core.js";
import * as syncUtils from "./sync.js";
import { createSync } from "./sync-factory.js";

const adapters = { ...adaptersStorage, ...adaptersUrl };
const Controller = createController(adapters);
Controller.createSync = createSync;
Controller.registerSyncType = syncUtils.registerSyncType;
Controller.getSyncInfo = syncUtils.getSyncInfo;

/**
 * Initialize URL sync (popstate listener)
 * Call this once to enable automatic URL adapter synchronization on browser navigation
 */
Controller.initUrlSync = () => {
  if (Controller._urlSyncInitialized) return;
  Controller._urlSyncInitialized = true;

  window.addEventListener("popstate", () => {
    syncUtils.syncUrl(Controller.querystring);
    syncUtils.syncUrl(Controller.hash);
  });
};

/**
 * Install View plugin for sync properties
 * @param {Object} View - View instance
 * @param {Object} options - Plugin options
 * @param {Function} options.onBroadcast - Optional callback for cross-tab sync broadcasts
 * @param {Function} options.onAsyncLoad - Optional async loading handler for special sync types
 */
Controller.installViewPlugin = (View, options = {}) => {
  View.plugins.push({
    name: "syncProps",
    test: ({ component }) =>
      Object.values(component.properties || {}).some((p) => p.sync),
    events: {
      disconnected: ({ instance }) => {
        syncUtils.cleanupSyncBindings(instance, Controller);
      },
      connected: ({ instance, component }) => {
        Object.entries(component.properties)
          .filter(([, p]) => p.sync)
          .forEach(([key, prop]) => {
            const info = syncUtils.getSyncInfo(prop.sync);
            if (!info) {
              return console.error(\`Missing sync object for '\${key}'\`);
            }

            if (info.syncObj) {
              syncUtils.bindCustomSync({
                instance,
                key,
                prop,
                syncObj: info.syncObj,
                onAsyncLoad:
                  options.onAsyncLoad && syncUtils.needsAsyncLoad(info.syncObj)
                    ? options.onAsyncLoad
                    : null,
              });
            } else {
              syncUtils.bindAdapterSync({
                instance,
                key,
                prop,
                adapterName: info.adapter,
                Controller,
                onBroadcast: options.onBroadcast,
              });
            }
          });
      },
      willUpdate: ({ instance, component, changedProps }) => {
        syncUtils.checkDependsOn(instance, component, changedProps);
      },
    },
  });
};

export default Controller;

export { createController, createSync };

export {
  bindAdapterSync,
  bindCustomSync,
  checkDependsOn,
  cleanupSyncBindings,
  getScopedKey,
  getSyncInfo,
  needsAsyncLoad,
  registerSyncType,
  syncUrl,
  updateState,
} from "./sync.js";
`,mimeType:"text/javascript"},"/$app/base/apploader.js":{content:`/**
 * @file Component Loader Integration
 * @description Bridges the $APP framework events to the Core Loader.
 */

import Loader from "/$app/view/loader.js";
import $APP from "/$app.js";

/**
 * Initialize Loader with App settings and start DOM observation
 */
const init = () => {
  Loader.configure({
    basePath: $APP.settings.basePath || "/",
    modules: $APP.modules || {},
    dev: $APP.settings.dev || false,
  });
  Loader.initDOM();
};

$APP.events.on("APP:READY", init);

$APP.events.set({
  moduleAdded({ module }) {
    Loader.addModule(module);
  },
});

$APP.define = Loader.define;
`,mimeType:"text/javascript"},"/$app/sw/frontend.js":{content:`/**
 * @file Service Worker Frontend Module
 * @description Frontend communication with Service Worker
 */

let $APP;
const pendingSWRequests = {};
let nextRequestId = 1;

/**
 * Handle incoming messages from Service Worker
 * @param {MessageEvent} message - Message event from SW
 */
const handleSWMessage = async (message = {}) => {
  const { data } = message;
  const { eventId, type, payload } = data;

  // Handle response to pending request
  if (eventId && pendingSWRequests[eventId]) {
    try {
      pendingSWRequests[eventId].resolve(payload);
    } catch (error) {
      pendingSWRequests[eventId].reject(new Error(error));
    } finally {
      delete pendingSWRequests[eventId];
    }
    return;
  }

  // Handle incoming event
  const handler = $APP.swEvents.get(type);
  if (handler) await handler({ payload });
};

/**
 * Post a message to the Service Worker (fire and forget)
 * @param {string} type - Message type
 * @param {any} payload - Message payload
 */
const postMessageToSW = (type, payload) => {
  if (!navigator.serviceWorker?.controller) {
    console.warn("SW: No active service worker controller");
    return;
  }
  navigator.serviceWorker.controller.postMessage({ type, payload });
};

/**
 * Send a request to the Service Worker and wait for response
 * @param {string} type - Request type
 * @param {any} payload - Request payload
 * @param {number} timeout - Timeout in milliseconds (default: 30000)
 * @returns {Promise<any>} Response from SW
 */
const requestToSW = (type, payload, timeout = 30000) => {
  if (!navigator.serviceWorker?.controller) {
    return Promise.reject(new Error("No active service worker controller"));
  }

  const eventId = \`sw-request-\${nextRequestId++}\`;

  return new Promise((resolve, reject) => {
    pendingSWRequests[eventId] = { resolve, reject };

    const timeoutId = setTimeout(() => {
      if (pendingSWRequests[eventId]) {
        delete pendingSWRequests[eventId];
        reject(new Error(\`SW request timed out after \${timeout}ms: \${type}\`));
      }
    }, timeout);

    // Clear timeout on resolution
    const originalResolve = pendingSWRequests[eventId].resolve;
    pendingSWRequests[eventId].resolve = (value) => {
      clearTimeout(timeoutId);
      originalResolve(value);
    };

    navigator.serviceWorker.controller.postMessage({
      type,
      payload,
      eventId,
    });
  });
};

/**
 * Initialize Service Worker frontend module
 * @param {Object} app - $APP instance
 */
export function initSWFrontend(app) {
  $APP = app;

  // Setup message listener
  if (navigator.serviceWorker) {
    navigator.serviceWorker.onmessage = handleSWMessage;
  }

  // Register swEvents module for handling incoming SW events
  $APP.addModule({
    name: "swEvents",
    base: new Map([
      ["SW:SYNC_PROPS", ({ payload }) => {
        if (payload?.property && payload?.value !== undefined) {
          $APP.events.emit(\`SYNC:\${payload.property}\`, payload.value);
        }
      }],
      ["SW:QUERY_SYNC", ({ payload }) => {
        $APP.events.emit("SYNC:QUERY", payload);
      }],
    ]),
  });

  // Register SW module
  const SW = {
    postMessage: postMessageToSW,
    request: requestToSW,
  };

  $APP.addModule({
    name: "sw",
    alias: "SW",
    base: SW,
  });

  return SW;
}

export default { initSWFrontend };
`,mimeType:"text/javascript"},"/$app/view/index.js":{content:`/**
 * @file View System - Web Components with and without Shadow DOM
 * @description Core component system for building reactive UI components using Custom Elements API
 * with lit-html for templating.
 */

import T from "/$app/types/index.js";
import { render } from "/npm/lit-html";

const SANITIZE_KEYS = ["__proto__", "constructor", "prototype"];

export const settings = {};
/**
 * Base View class for all custom components
 * Extends HTMLElement to provide reactive properties, lifecycle hooks, and templating
 * @class View
 * @extends HTMLElement
 */
class View extends HTMLElement {
  /** @static {Object} Property definitions for the component */
  static properties = {};

  static components = new Map();
  /** @static {Object} Internal attribute cache */
  static _attrs = {};

  /** @static {Array} List of plugins to apply to components */
  static plugins = [];

  /** @static {WeakMap} Track which styles have been injected into which shadowRoots */
  static shadowStylesInjected = new WeakMap();

  /** @type {Object} Component state object */
  state = {};

  /** @public {boolean} Whether component has completed first update */
  hasUpdated = false;

  /** @private {boolean} Flag to prevent attribute change loops */
  _ignoreAttributeChange = false;

  /** @private {Map} Map of properties that changed in current update cycle */
  _changedProps = new Map();

  /** @private {Promise|null} The promise for the current update cycle */
  _updatePromise = null;

  /**
   * Packages a component definition object into a Web Component Class.
   * Contains the logic for Mixins, Properties, and Lifecycle binding.
   * @static
   * @param {string} tag - The tag name
   * @param {Object|Function} definition - The component definition
   * @param {Class} BaseClass - The class to extend (View or other component)
   * @returns {Class} The generated class
   */
  static createClass(tag, definition, BaseClass) {
    BaseClass ||= View;
    if (typeof definition === "function") {
      const renderFn = definition;
      const properties = renderFn.properties || {};
      definition = {
        properties,
        render() {
          return renderFn.call(this, this);
        },
      };
    }

    const {
      properties = {},
      icons,
      static: staticProps,
      formAssociated = false,
      dataQuery = false,
      style = false,
      css,
      connected,
      disconnected,
      shadow,
      willUpdate,
      firstUpdated,
      updated,
      class: klass,
      role,
      ...prototypeMethods // Catches all methods/properties not explicitly destructured
    } = definition;

    // SECURITY FIX 1: Filter prototypeMethods to prevent pollution
    for (const key of SANITIZE_KEYS) {
      if (Object.hasOwn(prototypeMethods, key)) {
        // In a real environment, you might log this attempt
        delete prototypeMethods[key];
      }
    }

    const methodKeysToBind = Object.keys(prototypeMethods);
    const mergedPlugins = new Map();
    [...View.plugins, ...BaseClass.plugins].forEach((plugin) => {
      mergedPlugins.set(plugin.name, plugin);
    });
    const finalPlugins = [...mergedPlugins.values()];

    const component = class extends BaseClass {
      static icons = icons;
      static style = style;
      static css = css;
      static dataQuery = dataQuery;
      static formAssociated = formAssociated;
      static shadow = shadow ?? BaseClass.shadow;
      static plugins = finalPlugins;
      static _classTags = (() => {
        const tags = [];
        let proto = BaseClass;
        while (proto?.tag) {
          tags.unshift(proto.tag);
          proto = Object.getPrototypeOf(proto);
        }
        tags.push(tag);
        return tags;
      })();

      constructor() {
        super();
        methodKeysToBind.forEach((key) => {
          // This relies on the keys in prototypeMethods being safe (fixed above)
          if (typeof this[key] === "function") this[key] = this[key].bind(this);
        });

        if (klass) this.classList.add(...klass.split(" "));
        if (role) this.setAttribute("role", role);
      }

      static get observedAttributes() {
        return Object.keys(component.properties).filter(
          (key) => component.properties[key].attribute !== false,
        );
      }

      static properties = (() => {
        const baseProperties = BaseClass.properties || {};
        const merged = { ...baseProperties };

        // SECURITY FIX 2: Filter properties keys to prevent pollution during merge
        for (const key of Object.keys(properties)) {
          if (SANITIZE_KEYS.includes(key)) {
            // Skip keys that can access the prototype chain
            continue;
          }

          const config = properties[key];
          if (config.type === "object" && config.properties)
            config.properties = merged[key]?.properties
              ? {
                  ...merged[key]?.properties,
                  ...config.properties,
                }
              : config.properties;
          merged[key] = merged[key]
            ? { ...merged[key], ...config }
            : { ...config };
        }
        return merged;
      })();
    };

    if (staticProps && typeof staticProps === "object") {
      Object.assign(component, staticProps);
    }

    Object.defineProperty(component, "name", { value: tag });

    for (const [key, prop] of Object.entries(component.properties)) {
      const { type, sync, attribute, setter, getter } = prop;
      if (sync) continue;

      if (Object.hasOwn(component.prototype, key)) continue;

      Object.defineProperty(component.prototype, key, {
        configurable: true,
        enumerable: true,
        get: getter
          ? function () {
              return getter.call(this);
            }
          : function () {
              return this.state[key];
            },
        set: setter
          ? function (value) {
              setter.call(this, value);
            }
          : function (value) {
              const oldValue = this.state[key];
              if (oldValue === value) return;
              this.state[key] = value;
              if (attribute) {
                this.updateAttribute({
                  key,
                  value,
                  skipPropUpdate: true,
                  type,
                });
              }
              this.requestUpdate(key, oldValue);
            },
      });
    }
    const filteredPrototypeMethods = Object.fromEntries(
      Object.entries(prototypeMethods).filter(
        // We already filtered dangerous keys from prototypeMethods above,
        // but we retain the filter against properties key collision
        ([key]) => !Object.hasOwn(component.properties, key),
      ),
    );
    // This Object.assign is now safe because prototypeMethods was sanitized (Fix 1)
    Object.assign(component.prototype, filteredPrototypeMethods);

    component.tag = tag;
    component._attrs = Object.fromEntries(
      Object.keys(component.properties).map((prop) => [
        prop.toLowerCase(),
        prop,
      ]),
    );

    component.plugins = [
      ...component.plugins.filter(
        (plugin) => !plugin.test || plugin.test({ component: component }),
      ),
    ];

    component.plugins.push({
      events: { connected, disconnected, willUpdate, firstUpdated, updated },
      name: "base",
    });

    return component;
  }

  static define(tag, definition) {
    if (tag === "app-template") console.error({ tag, definition });
    const component = View.createClass(tag, definition);
    if (!customElements.get(tag)) customElements.define(tag, component);
    return component;
  }
  /**
   * Adds an event listener to the component
   * Supports event delegation with selector#eventType syntax
   * @param {string} eventName - Event name or selector#eventType for delegation
   * @param {Function} listener - Event handler function
   * @returns {Function} The wrapper function (for removal)
   */
  on(eventName, listener) {
    if (typeof listener !== "function")
      return console.error(
        \`Error adding listener to \${eventName}: callback is not a function.\`,
      );

    if (eventName.includes("#")) {
      const [selector, eventType] = eventName.split("#");
      const delegatedListener = (event) => {
        const target = event.target.closest(selector);
        if (target && this.contains(target)) listener(event);
      };
      this.addEventListener(eventType, delegatedListener);
      return delegatedListener;
    }
    const wrapper = ({ detail }) => {
      listener(detail);
    };
    this.addEventListener(eventName, wrapper);
    return wrapper;
  }

  /**
   * Removes an event listener from the component
   * @param {string} eventName - Event name or selector#eventType for delegation
   * @param {Function} listener - The listener function to remove
   */
  off(eventName, listener) {
    if (eventName.includes("#")) {
      const [, eventType] = eventName.split("#");
      this.removeEventListener(eventType, listener);
    } else this.removeEventListener(eventName, listener);
  }

  /**
   * Emits a custom event from the component
   * @param {string} eventName - Name of the event to emit
   * @param {*} data - Data to pass in event.detail
   */
  emit(eventName, data) {
    const event = new CustomEvent(eventName, {
      detail: data,
    });
    this.dispatchEvent(event);
  }

  $ = (element) => this.querySelector(element);
  $$ = (element) => this.querySelectorAll(element);

  connectedCallback() {
    if (this.constructor.shadow) {
      const shadowRoot = this._ensureShadowRoot();
      if (this.constructor.css) {
        if (!shadowRoot.querySelector("style[data-component-style]")) {
          const style = document.createElement("style");
          style.setAttribute("data-component-style", "");
          style.textContent = this.constructor.css;
          shadowRoot.prepend(style);
        }
      }
    }
    if (this.constructor.properties) this.initProps();
    if (this.constructor._classTags.length > 0)
      this.classList.add(...this.constructor._classTags);

    for (const plugin of this.constructor.plugins) {
      const { events = {} } = plugin;
      Object.entries(events).map(
        ([event, fn]) => fn && this.on(event, fn.bind(this)),
      );
    }
    this.emit("connected", {
      instance: this,
      component: this.constructor,
      tag: this.constructor.tag,
    });

    this.requestUpdate();
  }

  disconnectedCallback() {
    this.emit("disconnected", {
      instance: this,
      component: this.constructor,
      tag: this.constructor.tag,
    });
  }

  initProps() {
    for (const attr of this.attributes) {
      const key = this.constructor._attrs[attr.name];
      const prop = this.constructor.properties[key];
      if (prop && prop.type !== "boolean" && attr.value === "") {
        this.removeAttribute(attr.name);
        continue;
      }
      if (key) {
        this.state[key] = prop
          ? T.parse(attr.value, { ...prop, attribute: true })
          : attr.value;
      }
    }

    for (const [key, prop] of Object.entries(this.constructor.properties)) {
      const { type, sync, defaultValue, attribute } = prop;
      if (sync) continue;
      if (Object.hasOwn(this, key)) {
        const value = this[key];
        delete this[key];
        this[key] = value;
        continue;
      }

      this.state[key] ??= defaultValue;

      const value = this.state[key];
      const isComplex = ["array", "object", "function"].includes(type);

      if (
        attribute &&
        value !== undefined &&
        !this.hasAttribute(key) &&
        !isComplex
      ) {
        this.updateAttribute({
          key,
          value,
          skipPropUpdate: true,
          type,
        });
      }

      this._changedProps.set(key, undefined);
    }
  }

  /**
   * Requests an update which will be processed in the next microtask.
   * Returns a promise that resolves when the update is complete.
   * @param {string} [key] - The property key that changed
   * @param {*} [oldValue] - The old value of the property
   * @returns {Promise}
   */
  requestUpdate(key, oldValue) {
    if (key) this._changedProps.set(key, oldValue);

    if (this._updatePromise) return this._updatePromise;

    this._updatePromise = this.enqueueUpdate();
    return this._updatePromise;
  }

  /**
   * Performs the update after awaiting a microtask
   * @private
   */
  async enqueueUpdate() {
    await Promise.resolve();
    const result = this.performUpdate(false);
    this._updatePromise = null;
    return result;
  }

  performUpdate(forceUpdate) {
    const changedProps = this._changedProps;

    if (this.hasUpdated && !forceUpdate && !this.shouldUpdate(changedProps))
      return;
    this.emit("willUpdate", {
      changedProps,
      instance: this,
      component: this.constructor,
    });
    this.update(changedProps);
    if (!this.hasUpdated) {
      this.hasUpdated = true;
      this.emit("firstUpdated", {
        changedProps,
        instance: this,
        component: this.constructor,
      });
    }
    this.emit("updated", {
      changedProps,
      instance: this,
      component: this.constructor,
    });
    this._changedProps = new Map();
  }

  shouldUpdate(_changedProps) {
    const changedProps = new Map(_changedProps);
    if (!this.hasUpdated) return true;
    for (const [key, oldValue] of changedProps) {
      const newValue = this[key];
      const prop = this.constructor.properties[key];
      const hasChanged = prop?.hasChanged
        ? prop.hasChanged(newValue, oldValue)
        : oldValue !== newValue;
      if (!hasChanged) changedProps.delete(key);
      else
        this.emit(\`\${key}Changed\`, {
          oldValue,
          value: newValue,
          instance: this,
          component: this.constructor,
        });
    }
    this._changedProps = new Map();
    return changedProps.size > 0;
  }

  /**
   * Ensure shadow root exists if component uses shadow DOM
   */
  _ensureShadowRoot() {
    if (!this.shadowRoot) {
      const opts = { mode: "open" };
      if (typeof this.constructor.shadow === "object")
        Object.assign(opts, this.constructor.shadow);
      this.attachShadow(opts);
    }
    return this.shadowRoot;
  }

  update() {
    const container = this.constructor.shadow ? this._ensureShadowRoot() : this;
    render(this.render(), container);
  }

  render() {
    return null;
  }

  attributeChangedCallback(key, oldValue, value) {
    if (oldValue === value) return;
    this.emit("attributeChangedCallback", {
      instance: this,
      component: this.constructor,
      key,
      value,
      oldValue,
    });
    if (this._ignoreAttributeChange) return;
    this.state[key] = T.parse(value, this.constructor.properties[key]);
    if (this.hasUpdated) this.requestUpdate(key, oldValue);
  }

  updateAttribute({ key, value, type, skipPropUpdate = false }) {
    this._ignoreAttributeChange = skipPropUpdate;
    const isReflectable = type && typeof value !== "function";
    if (isReflectable) {
      if (type === "boolean")
        value ? this.setAttribute(key, "") : this.removeAttribute(key);
      else if (["array", "object"].includes(type))
        this.setAttribute(key, JSON.stringify(value));
      else if (value === null) this.removeAttribute(key);
      else if (type === "string" && String(value).trim().length > 0)
        this.setAttribute(key, String(value));
    }
    if (!skipPropUpdate) this[key] = value;
    else this._ignoreAttributeChange = false;
  }
}

export default View;
`,mimeType:"text/javascript"},"/$app/controller/app.js":{content:`/**
 * @bootstrapp/controller - App Integration
 * Bridges Controller to $APP framework features (Service Worker integration)
 */

import { registerSyncType } from "./sync.js";

/**
 * Register ModelType as a sync type
 * @param {Function} ModelType - ModelType class constructor
 */
export function registerModelType(ModelType) {
  registerSyncType(
    (adapter) => adapter instanceof ModelType,
    (adapter) => ({ adapter: adapter.name, syncObj: adapter }),
  );
}

/**
 * Async loader for ModelType queries
 * @param {Object} options - Load options
 */
function loadModelTypeAsync({ instance, key, prop, syncObj, updateState }) {
  (async () => {
    let val = prop.defaultValue;
    try {
      const query =
        typeof prop.query === "function" ? prop.query(instance) : prop.query;
      val =
        prop.type === "array"
          ? await syncObj.getAll(query)
          : await (query.id
              ? syncObj.get(query.id, query)
              : syncObj.get(query));

      if (val) {
        val.subscribe((v) => {
          const copied = Array.isArray(v) ? [...v] : { ...v };
          updateState(instance, key, copied);
        });
      }
    } catch (e) {
      console.error(\`Sync error \${key}:\`, e);
    }

    const finalVal = val
      ? Array.isArray(val)
        ? [...val]
        : { ...val }
      : prop.defaultValue;
    updateState(instance, key, finalVal);
  })();
}

/**
 * Initialize controller with $APP integration
 * @param {Object} $APP - The $APP framework instance
 * @param {Object} Controller - The Controller instance
 * @param {Object} View - The View instance
 */
export function initControllerApp($APP, Controller, View) {
  $APP.swEvents.set(
    "SW:PROP_SYNC_UPDATE",
    ({ payload: { sync, key, value } }) => {
      const adapter = Controller[sync];
      if (adapter) {
        console.log(\`SYNC: Update \${sync}.\${key}\`, value);
        adapter.emit(key, value, { skipBroadcast: true });
      }
    },
  );

  Controller.installViewPlugin(View, {
    onBroadcast: (data) => $APP.SW.request("SW:BROADCAST_SYNCED_PROP", data),
    onAsyncLoad: loadModelTypeAsync,
  });

  Controller.initUrlSync();
}

export default initControllerApp;
`,mimeType:"text/javascript"},"/$app/base/backend/frontend.js":{content:`import T from "/$app/types/index.js";
import View from "/$app/view/index.js";
import $APP from "/$app.js";

let appWorker;
let wwPort;
const pendingRequests = {};

const handleWWMessage = async (message = {}) => {
  const { data } = message;
  const { eventId, type, payload, connection } = data;
  const response = payload;
  const respond =
    eventId &&
    ((responsePayload) =>
      wwPort.postMessage({
        eventId,
        payload: responsePayload,
        connection,
      }));
  await $APP.events.emit(type, { respond, payload, eventId });

  if (eventId && pendingRequests[eventId]) {
    try {
      pendingRequests[data.eventId].resolve(response);
    } catch (error) {
      pendingRequests[data.eventId].reject(new Error(error));
    } finally {
      delete pendingRequests[eventId];
    }
  }
  if (respond) return respond(response);
};

const initBackend = async () => {
  try {
    appWorker = new Worker(\`/backend.js\`, {
      type: "module",
    });
    const wwChannel = new MessageChannel();
    wwPort = wwChannel.port1;
    wwPort.onmessage = handleWWMessage;
    wwPort.onmessageerror = (e) => {
      console.error("Worker message error:", e);
    };
    appWorker.postMessage({ type: "APP:BACKEND:START" }, [wwChannel.port2]);
    //await navigator.storage.persist();
    $APP.events.on("APP:BACKEND:READY", async () => {
      await $APP.events.emit("APP:READY");
    });
  } catch (error) {
    console.error("Failed to initialize backend:", error);
    throw error;
  }
};

$APP.events.on("APP:INIT", initBackend);

const postMessageToPort = (port, params, retryFn) => {
  if (!port) {
    setTimeout(() => retryFn(params), 100);
    return;
  }
  port.postMessage(params);
};

const postMessageToWW = (params) =>
  postMessageToPort(wwPort, params, postMessageToWW);
const fetchDataQuery = async (instance) => {
  const query = instance["data-query"];
  if (!query) return;

  const {
    model,
    id,
    limit,
    offset = 0,
    order,
    where,
    includes,
    key,
    single,
  } = query;

  if (!model) return console.warn("data-query: 'model' is required");
  if (!key)
    return console.warn(
      "data-query: 'key' is required to know where to store data",
    );
  if (!$APP.Model || !$APP.Model[model])
    return console.error(\`data-query: Model "\${model}" does not exist\`);

  const isMany = query.many ?? (!id && !single);
  const opts = { limit: single ? 1 : limit, offset, includes, order, where };
  console.error({ isMany, opts });
  if (instance._dataQuerySub && instance._dataQuerySubHandler) {
    instance._dataQuerySub.unsubscribe(instance._dataQuerySubHandler);
    instance._dataQuerySub = null;
  }
  instance._paginationInfo = null;
  instance._dataQuerySubHandler = (data) => {
    const oldValue = instance.state[key];
    instance.state[key] = data;
    instance.requestUpdate(key, oldValue);
    instance.emit("dataLoaded", {
      instance,
      rows: isMany ? data : undefined,
      row: !isMany ? data : undefined,
      ...(instance._paginationInfo || {}),
      component: instance.constructor,
    });
  };

  try {
    if (isMany) {
      const result = await $APP.Model[model].getAll(opts);
      const oldValue = instance.state[key];
      instance.state[key] = result;
      instance._paginationInfo =
        result.limit !== undefined
          ? {
              total: result.total,
              limit: result.limit,
              offset: result.offset,
              count: result.count,
            }
          : null;
      instance.requestUpdate(key, oldValue);
      result.subscribe?.(instance._dataQuerySubHandler);
      instance._dataQuerySub = result;
    } else if (single && where) {
      const result = await $APP.Model[model].getAll(opts);

      const oldValue = instance.state[key];
      instance.state[key] = result[0] || null;
      instance.requestUpdate(key, oldValue);

      // Subscribe to array, extract first item on updates
      result.subscribe?.((data) => {
        instance._dataQuerySubHandler(data[0] || null);
      });
      instance._dataQuerySub = result;
    } else {
      // Single record via id
      const reactiveRow = await $APP.Model[model].get(id);
      const oldValue = instance.state[key];
      instance.state[key] = reactiveRow;
      instance.requestUpdate(key, oldValue);

      // Subscribe to updates - handle both array and single row formats
      reactiveRow.subscribe?.((data) => {
        const row = Array.isArray(data) ? data[0] : data;
        instance._dataQuerySubHandler(row);
      });
      instance._dataQuerySub = reactiveRow;
    }
    instance.emit("dataLoaded", {
      instance,
      rows: isMany ? instance.state[key] : undefined,
      row: !isMany ? instance.state[key] : undefined,
      ...(instance._paginationInfo || {}),
      component: instance.constructor,
    });
  } catch (error) {
    console.error(
      \`data-query: Failed to load data for model "\${model}":\`,
      error,
    );
    instance.emit("dataError", { instance, error, model, id });
  }

  instance.syncable = true;
};

View.plugins.push({
  name: "dataQuery",
  test: ({ component }) => !!component.dataQuery,
  init: ({ View }) => {
    View.properties["data-query"] = T.object({
      properties: {
        model: T.string(),
        id: T.string(),
        where: T.object(),
        includes: T.string(),
        order: T.string(),
        limit: T.number(),
        offset: T.number(),
        count: T.number(),
        key: T.string(),
        single: T.boolean(),
      },
    });
  },
  events: {
    connected: async ({ instance }) => {
      // Initial data fetch
      await fetchDataQuery(instance);

      // Listen for data-query prop changes to re-fetch
      instance._dataQueryChangeHandler = async () => {
        await fetchDataQuery(instance);
      };
      instance.on("data-queryChanged", instance._dataQueryChangeHandler);
    },
    disconnected: ({ instance }) => {
      // Clean up subscription
      if (instance._dataQuerySub && instance._dataQuerySubHandler)
        instance._dataQuerySub.unsubscribe(instance._dataQuerySubHandler);
      instance._dataQuerySub = null;
      instance._dataQuerySubHandler = null;
      if (instance._dataQueryChangeHandler) {
        instance.off("data-queryChanged", instance._dataQueryChangeHandler);
        instance._dataQueryChangeHandler = null;
      }
    },
  },
});

const backend = (type, payload = {}, connection = null, timeout = 10000) => {
  if (!type) {
    return Promise.reject(new Error("backend: type parameter is required"));
  }
  const eventId =
    Date.now().toString() + Math.random().toString(36).substr(2, 9);
  const params = { type, payload, eventId };
  return new Promise((resolve, reject) => {
    if (connection) params.connection = connection;
    const timeoutId = setTimeout(() => {
      if (pendingRequests[eventId]) {
        delete pendingRequests[eventId];
        reject(
          new Error(
            \`Backend request timeout after \${timeout}ms for type: \${type}\`,
          ),
        );
      }
    }, timeout);

    pendingRequests[eventId] = {
      resolve: (value) => {
        clearTimeout(timeoutId);
        resolve(value);
      },
      reject: (error) => {
        clearTimeout(timeoutId);
        reject(error);
      },
    };

    postMessageToWW(params);
  });
};
const Backend = { request: backend, init: initBackend };
$APP.addModule({ name: "Backend", base: Backend });
export default Backend;
`,mimeType:"text/javascript"},"/$app/view/loader.js":{content:`/**
 * @file Component Loader (Core)
 * @description Handles dynamic loading, caching, registration of components,
 * and DOM observation.
 */

import View from "./index.js";

const Loader = {
  settings: {
    basePath: "/",
    modules: {},
    dev: false,
  },

  // Tag prefix to ignore (Server Side Generated)
  ssgTag: "ce-",

  /**
   * Configure the loader with app settings
   * @param {Object} config
   */
  configure(config) {
    Object.assign(Loader.settings, config || {});
  },

  /**
   * Registers a module and its components into the View registry.
   * Maps module component definitions to file paths.
   * @param {Object} module - The module object containing definition and path
   */
  addModule(module) {
    Loader.settings.modules[module.name] = module;
    if (!module.components) return;

    Object.entries(module.components).forEach(([name, value]) => {
      if (Array.isArray(value)) {
        value.forEach((componentName) => {
          const tag = \`\${module.name}-\${componentName}\`;
          const entry = View.components.get(tag) || {};
          entry.path = [module.path, module.name, name, componentName]
            .filter(Boolean)
            .join("/");
          View.components.set(tag, entry);
        });
      } else {
        const tag = \`\${module.name}-\${name}\`;
        const entry = View.components.get(tag) || {};
        const rootPath = module.root ? module.root.replace(/\\/$/, "") : "";
        entry.path = [rootPath, module.path, module.name, name]
          .filter(Boolean)
          .join("/");
        View.components.set(tag, entry);
      }
    });
  },

  resolvePath(tagName) {
    const cached = View.components.get(tagName);
    if (cached?.path) return cached.path;
    const parts = tagName.split("-");
    const moduleName = parts[0];
    const module = Loader.settings.modules[moduleName];
    const componentName = parts.slice(1).join("-");
    return (
      module
        ? [module.path ?? moduleName, componentName]
        : [Loader.settings.basePath, tagName]
    )
      .filter(Boolean)
      .join("/");
  },

  /**
   * Loads the raw definition object from the file system
   */
  async loadDefinition(tag) {
    const cached = View.components.get(tag);
    if (cached?.definition) return cached.definition;

    const path = Loader.resolvePath(tag);
    if (tag === "app-template") console.trace();
    const { default: definition } = await import(\`\${path}.js\`);

    if (!definition)
      return console.warn(
        \`[Loader] No default export found for component \${tag} at \${path}.js\`,
      );

    const entry = View.components.get(tag) || {};
    entry.path = path;
    entry.definition = definition;
    View.components.set(tag, entry);
    return definition;
  },

  /**
   * Main orchestration method.
   * Loads definition, resolves parent (extends), builds class, and defines element.
   */
  async get(tag) {
    tag = tag.toLowerCase();
    if (customElements.get(tag)) {
      const cached = View.components.get(tag);
      if (!cached?._constructor) {
        const entry = View.components.get(tag) || {};
        entry._constructor = customElements.get(tag);
        View.components.set(tag, entry);
      }
      return View.components.get(tag)._constructor;
    }

    const cached = View.components.get(tag);
    if (cached?._constructor && !cached?.loadPromise)
      return cached._constructor;
    if (cached?.loadPromise) return cached.loadPromise;

    const loadPromise = (async () => {
      try {
        const definition = await Loader.loadDefinition(tag);
        if (!definition) throw new Error(\`Definition for \${tag} not found.\`);

        let BaseClass = View;
        let extendsTag =
          definition.extends ||
          (definition.prototype instanceof HTMLElement ? null : undefined);

        if (typeof definition === "function" && definition.extends)
          extendsTag = definition.extends;

        if (extendsTag) BaseClass = await Loader.get(extendsTag);

        const component = View.createClass(tag, definition, BaseClass);
        const entry = View.components.get(tag) || {};
        entry._constructor = component;
        View.components.set(tag, entry);
        if (BaseClass?.plugins)
          for (const { init } of BaseClass.plugins) {
            if (init && typeof init === "function")
              await init({ View, component, definition, tag });
          }

        if (!customElements.get(tag) || View.reloadComponents)
          customElements.define(tag, component);

        return component;
      } catch (error) {
        console.error(\`[Loader] Failed to define component \${tag}:\`, error);
        const entry = View.components.get(tag);
        if (entry) {
          delete entry.loadPromise;
          View.components.set(tag, entry);
        }
        return null;
      }
    })();

    const entry = View.components.get(tag) || {};
    entry.loadPromise = loadPromise;
    View.components.set(tag, entry);
    return loadPromise;
  },

  define(...args) {
    if (typeof args[0] === "string") {
      const tag = args[0].toLowerCase();
      const definition = args[1];
      const entry = View.components.get(tag) || {};
      entry.definition = definition;
      View.components.set(tag, entry);
      if (!Loader.settings.dev) {
        Loader.get(tag).catch((e) =>
          console.error(
            \`[Loader] Error during manual definition for \${tag}:\`,
            e,
          ),
        );
      }
    } else if (typeof args[0] === "object" && args[0] !== null) {
      Object.entries(args[0]).forEach(([tag, definition]) =>
        Loader.define(tag, definition),
      );
    }
  },

  /**
   * Scans a root element for undefined custom elements and loads them.
   */
  async traverseDOM(rootElement = document.body) {
    if (!rootElement || typeof rootElement.querySelectorAll !== "function")
      return;
    const undefinedElements = rootElement.querySelectorAll(":not(:defined)");
    const tagsToProcess = new Set();

    undefinedElements.forEach((element) => {
      const tagName = element.tagName.toLowerCase();
      if (tagName.includes("-") && !tagName.startsWith(Loader.ssgTag))
        tagsToProcess.add(tagName);
    });

    await Promise.allSettled(
      Array.from(tagsToProcess).map((tag) => Loader.get(tag)),
    );
  },

  /**
   * Sets up a MutationObserver to detect new elements added to the DOM.
   */
  observeDOMChanges() {
    const observer = new MutationObserver(async (mutationsList) => {
      const tagsToProcess = new Set();
      for (const mutation of mutationsList) {
        if (mutation.type !== "childList" || mutation.addedNodes.length === 0)
          continue;
        mutation.addedNodes.forEach((node) => {
          if (node.nodeType !== Node.ELEMENT_NODE) return;
          const processNode = (el) => {
            const tagName = el.tagName.toLowerCase();
            const cached = View.components.get(tagName);
            if (
              tagName.includes("-") &&
              !customElements.get(tagName) &&
              !cached?.loadPromise
            )
              tagsToProcess.add(tagName);
          };
          processNode(node);
          if (typeof node.querySelectorAll === "function")
            node.querySelectorAll(":not(:defined)").forEach(processNode);
        });
      }
      if (tagsToProcess.size > 0)
        await Promise.allSettled(
          Array.from(tagsToProcess).map((tag) => Loader.get(tag)),
        );
    });
    observer.observe(document.body, { childList: true, subtree: true });
  },

  /**
   * Convenience initializer for the DOM
   */
  initDOM() {
    Loader.traverseDOM(document.body);
    Loader.observeDOMChanges();
  },
};

const getComponentPath = (tag) => {
  return View.components.get(tag)?.path || Loader.resolvePath(tag);
};

View.getComponentPath = getComponentPath;

export default Loader;
`,mimeType:"text/javascript"},"/$app/model/frontend.js":{content:`/**
 * @file Frontend Model Module
 * @description Initializes Model system for frontend (browser) context
 */

import { createModel } from "./index.js";
import { SubscriptionManager } from "./subscription-manager.js";

/**
 * Initialize Model module on frontend
 * @param {object} $APP - App instance with Backend, events
 * @param {object} [options={}] - Initialization options
 * @returns {object} Model instance
 */
export function initModelFrontend($APP, options = {}) {
  const Model = createModel($APP);

  // Create request function that uses Backend
  const request = (action, modelName, params = {}) => {
    return $APP.Backend.request(action, {
      model: modelName,
      ...params,
    });
  };

  Model.request = request;
  $APP.addModule({ name: "Model", base: Model });

  // Initialize SubscriptionManager on frontend (without database - notifications come from backend)
  if (!$APP.SubscriptionManager) {
    $APP.SubscriptionManager = new SubscriptionManager(null);
  }

  // New query-level data sync
  $APP.events.on("QUERY_DATA_SYNC", ({ payload }) => {
    const { action, model, record } = payload;

    // Route to SubscriptionManager for query-level notifications
    if ($APP.SubscriptionManager) {
      $APP.SubscriptionManager.notifyMatchingQueries(model, action, record);
    }

    // Broadcast to service worker for other tabs
    if ($APP.SW) {
      $APP.SW.request("SW:BROADCAST_QUERY_SYNC", payload);
    }
  });

  return Model;
}

export default { initModelFrontend };
`,mimeType:"text/javascript"},"/$app/router/app.js":{content:`/**
 * @bootstrapp/router - App Integration
 * Bridges Router to $APP framework features
 */

export function initRouterApp($APP, Router, Controller = null) {
  // Initialize router with $APP configuration
  const init = () => {
    Router.init($APP.routes, {
      appName: $APP.settings.name,
      isProduction: $APP.settings.production,
      onRouteChange: null,
    });

    // Register Router as a sync type for component bindings
    if (Controller) {
      Controller.registerSyncType(
        (adapter) => adapter === Router,
        (adapter) => ({ adapter: "router", syncObj: adapter.$sync }),
      );
    }

    // Make Router available on $APP
    $APP.Router = Router;
  };

  // Hook into APP:INIT event
  $APP.events.on("APP:INIT", init);

  // Register as framework module
  $APP.addModule({
    name: "router",
    path: "/$app/router",
    exports: Router,
  });

  // Set up popstate handler for browser back/forward
  // Only for browser-based routers
  if (Router.adapter?.type === "browser") {
    window.addEventListener("popstate", () => {
      Router.handleHistoryNavigation();
    });
  }
}

export default initRouterApp;
`,mimeType:"text/javascript"},"/$app/router/index.js":{content:`/**
 * @bootstrapp/router
 * Client-side router leveraging the URLPattern API
 * Supports nested routes, dynamic parameters, query strings, and history management
 */

import Controller from "/$app/controller/index.js";
import { createBrowserAdapter } from "./adapters.js";
import { createRouterCore } from "./core.js";

// Create singleton router with browser adapter
const Router = createRouterCore(createBrowserAdapter());

// Initialize sync for reactive properties
Router.$sync = Controller.createSync(Router, "router", [
  "currentRoute",
  "stack",
]);

export default Router;
`,mimeType:"text/javascript"},"/$app/base/app/index.js":{content:`import $APP from "/$app.js";

$APP.addModule({ name: "app", path: "/$app/base/app" });
`,mimeType:"text/javascript"},"/$app/controller/adapters/storage.js":{content:`const serialize = (value) => {
  if ((typeof value === "object" && value !== null) || Array.isArray(value)) {
    return JSON.stringify(value);
  }
  return value;
};

const deserialize = (value) => {
  try {
    return JSON.parse(value);
  } catch {
    return value;
  }
};

const get = (storage) => (key) => {
  const value = storage.getItem(key);
  return value !== null ? deserialize(value) : null;
};

const set = (storage) => (key, value) => {
  storage.setItem(key, serialize(value));
  return { key };
};

const remove = (storage) => (key) => {
  storage.removeItem(key);
  return { key };
};
const keys = (storage) => () => {
  return Object.keys(storage);
};

const has = (storage) => (key) => {
  return storage.getItem(key) !== null && storage.getItem(key) !== undefined;
};

const createStorageAdapter = (storage) => {
  return {
    has: has(storage),
    set: set(storage),
    remove: remove(storage),
    get: get(storage),
    keys: keys(storage),
  };
};

const ramStore = new Map();
const ram = {
  has: (key) => {
    return ramStore.has(key);
  },
  get: (key) => {
    return ramStore.get(key);
  },
  set: (key, value) => {
    ramStore.set(key, value);
    return { key };
  },
  remove: (key) => {
    ramStore.delete(key);
    return { key };
  },
  keys: () => ramStore.keys(),
};

const local = createStorageAdapter(window.localStorage);
const session = createStorageAdapter(window.sessionStorage);
export default { local, ram, session };
`,mimeType:"text/javascript"},"/$app/controller/adapters/url.js":{content:`const getHashParams = () => {
  const hash = window.location.hash.substring(1);
  return new URLSearchParams(hash);
};

const setHashParams = (params) => {
  const newHash = params.toString();
  window.location.hash = newHash;
};

const hash = {
  get: (key) => {
    const params = getHashParams();
    return params.get(key);
  },
  has: (key) => {
    const params = getHashParams();
    return params.has(key);
  },
  set: (key, value) => {
    const params = getHashParams();
    if (value === null || value === undefined) {
      params.delete(key);
    } else {
      params.set(key, value);
    }
    setHashParams(params);
    window.dispatchEvent(new Event("popstate"));
    return { key };
  },
  remove: (key) => {
    const params = getHashParams();
    params.delete(key);
    setHashParams(params);
    return { key };
  },
  keys: () => {
    const params = getHashParams();
    return [...params.keys()];
  },
  entries: () => {
    const params = getHashParams();
    return [...params.entries()];
  },
};

const querystring = {
  get(key) {
    const params = new URLSearchParams(window.location.search);
    return params.get(key);
  },

  set(key, value) {
    const params = new URLSearchParams(window.location.search);
    if (value === null || value === undefined) {
      params.delete(key);
    } else {
      params.set(key, value);
    }
    window.history?.pushState?.(
      {},
      "",
      \`\${window.location.pathname}?\${params}\`,
    );
    window.dispatchEvent(new Event("popstate"));
    return { key };
  },

  remove(key) {
    const params = new URLSearchParams(window.location.search);
    params.delete(key);
    window.history.pushState?.({}, "", \`\${window.location.pathname}?\${params}\`);
    return { key };
  },
  keys() {
    const params = new URLSearchParams(window.location.search);
    return [...params.keys()];
  },
  has(key) {
    const params = new URLSearchParams(window.location.search);
    return params.has(key);
  },
  entries: () => {
    const params = new URLSearchParams(window.location.search);
    return [...params.entries()];
  },
};

export default { querystring, hash };
`,mimeType:"text/javascript"},"/frontend.js":{content:`import T from "/$app/types/index.js";
import $APP from "/$app.js";
import Interactions from "/controllers/interactions.js";
import "/models/schema.js";
import "/$app/i18n/index.js";
import Theme from "/$app/theme/index.js";
import "/$app/tailwind/index.js";
import "/$app/uix/app.js";
import "/$app/icon-lucide/app.js";
import "/controllers/index.js";
import "/$app/admin/index.js";
import "/$app/maps/app.js";
import "/admin/maps-plugin.js";
import "/admin/maps-import.js";
import "/admin/instagram-plugin.js";
import "/admin/instagram-import.js";
import { initAuthFrontend } from "/$app/auth/frontend.js";

initAuthFrontend($APP);

$APP.i18n.registerLocale("en", () => import("/locales/en.js"));
$APP.i18n.registerLocale("pt", () => import("/locales/pt.js"));

// Handle guest to registered user migration
$APP.events.on("AUTH:GUEST_CONVERTED", async ({ guestId, newUserId }) => {
  await Interactions.migrateGuestData(guestId, newUserId);
});

$APP.events.on("APP:INIT", async () => {
  // Restore auth session before rendering
  if ($APP.Auth) {
    const restored = await $APP.Auth.restore();
    console.log(
      restored
        ? \`Auth restored for: \${$APP.Auth.user?.name}\`
        : "No auth session - guest mode",
    );
  }

  Theme.loadTheme("nbs");

  $APP.define("app-container", {
    extends: "router-ui",
    properties: { userId: T.number({ sync: "local" }) },
    async connected() {
      this.currentLang = $APP.i18n.getLanguage();
      $APP.events.on("i18n:language-changed", ({ locale }) => {
        this.currentLang = locale;
      });
      this.addEventListener("item-click", (e) => {
        this.modalItem = e.detail.item;
        this.modalOpen = true;
      });
    },
  });
});
`,mimeType:"text/javascript"},"/$app/controller/core.js":{content:`/**
 * @bootstrapp/controller - Core
 * State management system with reactive adapters
 */

import createEventHandler from "/$app/events/index.js";

const adapters = {};
const adapterCache = new Map();

const parseKey = (k) =>
  typeof k === "string" && k.includes(".") ? k.split(".", 2) : [k, null];

/**
 * Creates an adapter with event capabilities
 * @param {Object} store - The storage backend
 * @param {string} name - Adapter name
 * @returns {Object} Adapter instance
 */
export const createAdapter = (store, name) => {
  const adapter =
    typeof store === "function"
      ? store
      : (k, v) => (v !== undefined ? adapter.set(k, v) : adapter.get(k));

  // Install event system
  createEventHandler(adapter);

  // Emit handler - will be overridden by app.js if needed
  const emit = (k, v) => adapter.emit(k, v);

  adapter.get = (key) => {
    const [k, path] = parseKey(key);
    const val = store.get(k);
    return path && val && typeof val === "object" ? val[path] : val;
  };

  adapter.set = (key, val) => {
    const [k, path] = parseKey(key);
    if (path) {
      const obj = { ...(store.get(k) || {}), [path]: val };
      store.set(k, obj);
      emit(k, obj);
      return obj;
    }
    store.set(k, val);
    emit(k, val);
    return val;
  };

  adapter.remove = (key) => {
    const [k, path] = parseKey(key);
    if (path) {
      const obj = store.get(k);
      if (obj && typeof obj === "object") {
        delete obj[path];
        store.set(k, obj);
        emit(k, obj);
      }
    } else {
      store.remove(k);
      emit(k, undefined);
    }
    return { key: k };
  };

  Object.assign(adapter, {
    has: store.has,
    keys: store.keys,
    entries: store.entries,
    broadcast: store.broadcast,
  });

  adapterCache.set(name, adapter);
  return adapter;
};

/**
 * Controller proxy for lazy adapter creation
 */
export const createController = (initialAdapters = {}) => {
  Object.assign(adapters, initialAdapters);

  const Controller = new Proxy(
    {},
    {
      get(target, prop) {
        if (prop in target) return target[prop];
        if (adapterCache.has(prop)) return adapterCache.get(prop);
        return adapters[prop] ? createAdapter(adapters[prop], prop) : undefined;
      },
    },
  );

  Controller.add = (n, a) =>
    typeof n === "object" ? Object.assign(adapters, n) : (adapters[n] = a);

  Controller.createAdapter = createAdapter;

  return Controller;
};

export default createController;
`,mimeType:"text/javascript"},"/$app/controller/sync-factory.js":{content:`/**
 * Creates a sync object for any class instance and installs subscribe/notify pattern
 * @param {Object} instance - The instance to sync with
 * @param {string} adapterName - The name of the adapter to use in the Controller
 * @param {Array<string>} syncableProps - Array of property names that can be synced (optional, defaults to all)
 * @returns {Object} A sync object compatible with the property sync system
 */
export const createSync = (instance, adapterName, syncableProps = null) => {
  if (!instance._listeners) instance._listeners = new Map();
  if (!instance.subscribe) {
    instance.subscribe = function (key, callback) {
      if (!this._listeners.has(key)) this._listeners.set(key, new Set());
      const listeners = this._listeners.get(key);
      listeners.add(callback);
      return () => listeners.delete(callback);
    };
  }
  if (!instance._notify) {
    instance._notify = function (key, value) {
      if (this._listeners.has(key))
        this._listeners.get(key).forEach((callback) => callback(value));
    };
  }
  const allowedProps = syncableProps ? new Set(syncableProps) : null;
  const validateProp = (key) => {
    if (allowedProps && !allowedProps.has(key)) {
      console.warn(
        \`Property "\${key}" is not in the list of syncable properties for \${adapterName}\`,
      );
      return false;
    }
    return true;
  };
  if (syncableProps) {
    syncableProps.forEach((key) => {
      const descriptor = Object.getOwnPropertyDescriptor(instance, key);
      if (descriptor && typeof descriptor.set === "function") return;
      const currentValue = instance[key];
      const privateKey = \`_\${key}\`;
      instance[privateKey] = currentValue;
      Object.defineProperty(instance, key, {
        get() {
          return this[privateKey];
        },
        set(value) {
          if (this[privateKey] === value) return;
          this[privateKey] = value;
          this._notify(key, value);
        },
        enumerable: true,
        configurable: true,
      });
    });
  }

  return {
    adapter: adapterName,
    get: (key) => {
      if (!validateProp(key)) return undefined;
      return instance[key];
    },
    set: (key, value) => {
      if (!validateProp(key)) return;
      instance[key] = value;
    },
    subscribe: (key, callback) => {
      if (!validateProp(key)) return () => {};
      return instance.subscribe(key, callback);
    },
  };
};
`,mimeType:"text/javascript"},"/$app/controller/sync.js":{content:`/**
 * @bootstrapp/controller - Sync Utilities
 * Generic sync logic with extensible type system
 */

// Sync type registry for custom types (ModelType, etc.)
const syncTypes = new Map();

/**
 * Register a custom sync type
 * @param {Function} check - Function that returns true if adapter matches this type
 * @param {Function} handler - Function that returns sync info for this type
 *
 * @example
 * registerSyncType(
 *   (adapter) => adapter instanceof ModelType,
 *   (adapter) => ({ adapter: adapter.name, syncObj: adapter })
 * )
 */
export function registerSyncType(check, handler) {
  syncTypes.set(check, handler);
}

/**
 * Get sync info for an adapter with pluggable type checking
 * @param {string|Object} adapter - Adapter name or sync object
 * @returns {Object|null} Sync info with adapter name and sync object
 */
export function getSyncInfo(adapter) {
  if (typeof adapter === "string") return { adapter, syncObj: null };
  for (const [check, handler] of syncTypes)
    if (check(adapter)) return handler(adapter);
  if (adapter?.$sync)
    return { adapter: adapter.$sync.adapter, syncObj: adapter.$sync };
  return null;
}

/**
 * Check if sync object requires async loading
 * @param {Object} syncObj - Sync object to check
 * @returns {boolean} True if async loading needed (has getAll method)
 */
export function needsAsyncLoad(syncObj) {
  return typeof syncObj?.getAll === "function";
}

/**
 * Get scoped key for component instance
 * @param {string} base - Base key name
 * @param {Object} prop - Property definition
 * @param {Object} inst - Component instance
 * @returns {string} Scoped key
 */
export function getScopedKey(base, prop, inst) {
  const { scope } = prop;
  if (!scope) return base;

  if (scope.includes(".")) {
    const [obj, key] = scope.split(".");
    if (inst[obj]?.[key]) return \`\${inst[obj][key]}:\${base}\`;
  }

  return inst[scope] ? \`\${inst[scope]}:\${base}\` : base;
}

/**
 * Update component state and trigger re-render
 * @param {Object} inst - Component instance
 * @param {string} key - Property key
 * @param {*} val - New value
 */
export function updateState(instance, key, val) {
  const oldValue = instance.state[key];
  instance.state[key] = val;
  if (!instance.isConnected) return;
  instance.requestUpdate(key, oldValue);
}

/**
 * Sync URL adapter when browser history changes
 * @param {Object} adapter - URL adapter (querystring or hash)
 */
export function syncUrl(adapter) {
  const current = new Map(adapter.entries());
  const old = new Set(adapter.listeners.keys());

  current.forEach((v, k) => {
    adapter.emit(k, v);
    old.delete(k);
  });

  old.forEach((k) => adapter.emit(k, undefined));
}

/**
 * Bind a custom sync object to a component property
 * @param {Object} options - Binding options
 * @param {Object} options.instance - Component instance
 * @param {string} options.key - Property key
 * @param {Object} options.prop - Property definition
 * @param {Object} options.syncObj - Sync object
 * @param {Function} options.onAsyncLoad - Optional async loading handler for special sync types
 */
export function bindCustomSync({ instance, key, prop, syncObj, onAsyncLoad }) {
  instance._customSyncUnsubscribers ||= [];
  instance._syncReloaders ||= {};

  Object.defineProperty(instance, key, {
    get: () => instance.state[key],
    set: (v) => {
      const oldValue = instance.state[key];
      if (oldValue === v) return;
      instance.state[key] = v;
      if (!prop.query && v !== syncObj.get(key)) syncObj.set(key, v);
      instance.requestUpdate(key, oldValue);
    },
  });

  if (onAsyncLoad && prop.query) {
    // Store reloader function for dependsOn support
    if (prop.dependsOn) {
      instance._syncReloaders[key] = () => {
        // Cleanup old subscription for this key
        const oldUnsubIdx = instance._customSyncUnsubscribers.findIndex(
          (fn) => fn._syncKey === key,
        );
        if (oldUnsubIdx > -1) {
          instance._customSyncUnsubscribers[oldUnsubIdx]();
          instance._customSyncUnsubscribers.splice(oldUnsubIdx, 1);
        }
        // Re-run async load with new query values
        onAsyncLoad({ instance, key, prop, syncObj, updateState });
      };
    }
    onAsyncLoad({ instance, key, prop, syncObj, updateState });
  } else {
    const val = syncObj.get(key);
    instance._customSyncUnsubscribers.push(
      syncObj.subscribe(key, (v) => updateState(instance, key, v)),
    );
    updateState(instance, key, val ?? prop.defaultValue);
  }
}

/**
 * Check if any dependency properties have changed and re-run queries
 * @param {Object} instance - Component instance
 * @param {Object} component - Component definition
 * @param {Map} changedProps - Map of changed property names
 */
export function checkDependsOn(instance, component, changedProps) {
  if (!instance._syncReloaders) return;

  Object.entries(component.properties || {})
    .filter(([, p]) => p.sync && p.dependsOn)
    .forEach(([key, prop]) => {
      const depsChanged = prop.dependsOn.some((dep) => changedProps.has(dep));
      if (depsChanged && instance._syncReloaders[key]) {
        instance._syncReloaders[key]();
      }
    });
}

/**
 * Bind an adapter to a component property
 * @param {Object} options - Binding options
 * @param {Object} options.instance - Component instance
 * @param {string} options.key - Property key
 * @param {Object} options.prop - Property definition
 * @param {string} options.adapterName - Adapter name
 * @param {Object} options.Controller - Controller instance
 * @param {Function} options.onBroadcast - Optional broadcast callback for cross-tab sync
 */
export function bindAdapterSync({
  instance,
  key,
  prop,
  adapterName,
  Controller,
  onBroadcast,
}) {
  const adapter = Controller[adapterName];
  if (!adapter) return;
  const sKey = getScopedKey(key, prop, instance);
  if (onBroadcast && adapterName === "local" && !adapter.hasListeners(sKey)) {
    adapter.on(sKey, (value, opts) => {
      if (!opts?.skipBroadcast) {
        onBroadcast({ value, sync: adapterName, key: sKey });
      }
    });
  }

  const listener = (v) => updateState(instance, key, v);
  (instance._listeners ||= {})[adapterName] ||= {};
  instance._listeners[adapterName][sKey] = listener;

  Object.defineProperty(instance, key, {
    get: () => instance.state[key],
    set: (v) => {
      const oldValue = instance.state[key];
      if (oldValue === v) return;
      instance.state[key] = v;
      if (v !== adapter.get(sKey)) adapter.set(sKey, v);
      instance.requestUpdate(key, oldValue);
    },
  });

  adapter.on(sKey, listener);
  updateState(instance, key, adapter.get(sKey) ?? prop.defaultValue);
}

/**
 * Cleanup sync bindings when component disconnects
 * @param {Object} instance - Component instance
 * @param {Object} Controller - Controller instance
 */
export function cleanupSyncBindings(instance, Controller) {
  if (instance._listeners) {
    Object.entries(instance._listeners).forEach(([name, fns]) => {
      const adapter = Controller[name];
      if (adapter) Object.entries(fns).forEach(([k, fn]) => adapter.off(k, fn));
    });
  }

  if (instance._customSyncUnsubscribers) {
    instance._customSyncUnsubscribers.forEach((unsubscribe) => unsubscribe());
    instance._customSyncUnsubscribers = null;
  }
}
`,mimeType:"text/javascript"},"/$app/router/adapters.js":{content:`/**
 * @bootstrapp/router - Platform Adapters
 * Abstracts browser and memory-based platform operations
 */

/**
 * Browser Platform Adapter
 * Uses window.location, window.history, and document APIs
 */
export const createBrowserAdapter = () => ({
  type: "browser",

  // Get current location information
  getLocation() {
    return {
      href: window.location.href,
      origin: window.location.origin,
      pathname: window.location.pathname,
      search: window.location.search,
      hash: window.location.hash,
    };
  },

  // Check if current URL matches path
  isSamePath(path) {
    return window.location.href === path;
  },

  // Navigate to new path (SSG support)
  hardNavigate(path) {
    window.location.href = path;
  },

  // Push state to history
  pushState(state, path) {
    const url = new URL(path, window.location.origin);
    if (url.href !== window.location.href) {
      window.history.pushState(state, "", path);
    }
  },

  // Replace current state
  replaceState(state, path) {
    window.history.replaceState(state, "", path);
  },

  // Navigate back in history
  back() {
    window.history.back();
  },

  // Navigate forward in history
  forward() {
    window.history.forward();
  },

  // Set document title
  setTitle(title) {
    document.title = title;
  },
});

/**
 * Memory Platform Adapter
 * Maintains location and history state in memory
 */
export const createMemoryAdapter = (initialPath = "/") => {
  // Parse initial path
  const initialUrl = new URL(initialPath, "http://memory");

  // Internal state
  const state = {
    pathname: initialUrl.pathname,
    search: initialUrl.search,
    hash: initialUrl.hash,
    origin: "http://memory",
  };

  // History stack for back/forward
  const history = [];
  let historyIndex = -1;

  return {
    type: "memory",

    getLocation() {
      return {
        href: \`\${state.origin}\${state.pathname}\${state.search}\${state.hash}\`,
        origin: state.origin,
        pathname: state.pathname,
        search: state.search,
        hash: state.hash,
      };
    },

    isSamePath(path) {
      const url = new URL(path, state.origin);
      const currentHref = \`\${state.pathname}\${state.search}\${state.hash}\`;
      const newHref = \`\${url.pathname}\${url.search}\${url.hash}\`;
      return currentHref === newHref;
    },

    hardNavigate(path) {
      // Memory routers don't support SSG hard navigation
      // Just update state instead
      const url = new URL(path, state.origin);
      state.pathname = url.pathname;
      state.search = url.search;
      state.hash = url.hash;
    },

    pushState(stateData, path) {
      const url = new URL(path, state.origin);

      // Update current state
      state.pathname = url.pathname;
      state.search = url.search;
      state.hash = url.hash;

      // Truncate forward history if we're not at the end
      if (historyIndex < history.length - 1) {
        history.splice(historyIndex + 1);
      }

      // Add to history
      history.push({
        pathname: state.pathname,
        search: state.search,
        hash: state.hash,
        state: stateData,
      });
      historyIndex = history.length - 1;
    },

    replaceState(stateData, path) {
      const url = new URL(path, state.origin);

      // Update current state
      state.pathname = url.pathname;
      state.search = url.search;
      state.hash = url.hash;

      // Replace current history entry
      if (historyIndex >= 0) {
        history[historyIndex] = {
          pathname: state.pathname,
          search: state.search,
          hash: state.hash,
          state: stateData,
        };
      }
    },

    back() {
      if (historyIndex > 0) {
        historyIndex--;
        const entry = history[historyIndex];
        state.pathname = entry.pathname;
        state.search = entry.search;
        state.hash = entry.hash;
        return true; // Indicate navigation occurred
      }
      return false; // No navigation (at start of history)
    },

    forward() {
      if (historyIndex < history.length - 1) {
        historyIndex++;
        const entry = history[historyIndex];
        state.pathname = entry.pathname;
        state.search = entry.search;
        state.hash = entry.hash;
        return true; // Indicate navigation occurred
      }
      return false; // No navigation (at end of history)
    },

    setTitle(title) {
      // Memory routers don't update document.title
      // This is a no-op, but keeps the interface consistent
    },

    // Memory-specific: Get current history state for inspection
    getHistory() {
      return {
        entries: [...history],
        index: historyIndex,
      };
    },
  };
};
`,mimeType:"text/javascript"},"/$app/router/core.js":{content:`/**
 * @bootstrapp/router - Core Implementation
 * Platform-agnostic router logic
 */

/**
 * Creates a router instance with the given platform adapter
 * @param {Object} adapter - Platform adapter (browser or memory)
 * @returns {Object} Router instance
 */
export const createRouterCore = (adapter) => {
  const router = {
    stack: [],
    routes: [],
    namedRoutes: {},
    currentRoute: {},
    defaultTitle: "",
    options: {},
    adapter, // Store adapter reference

    /**
     * Converts a route path and its named parameters into a URLPattern compatible string.
     * e.g., path: '/servers', namedParams: ['page'] becomes '/servers(/page/:page)?'
     * @param {object} route - The route object from the configuration.
     * @returns {string} The pattern string for the URLPattern constructor.
     * @private
     */
    _createPatternString(route) {
      let path = route.path;
      if (route.namedParams && route.namedParams.length > 0) {
        const optionalSegments = route.namedParams
          .map((param) => \`/\${param}/:\${param}\`)
          .join("");
        path += \`(\${optionalSegments})?\`;
      }
      return path;
    },

    /**
     * Recursively flattens the nested route configuration.
     * @param {object} routes - The nested routes object to process.
     * @param {string} [basePath=''] - The base path from the parent route.
     * @param {object} [parentRoute=null] - The parent route object.
     * @returns {{flatRoutes: object, namedRoutes: object}}
     */
    flattenRoutes(routes, basePath = "", parentRoute = null) {
      const flatRoutes = {};
      const namedRoutes = {};

      for (const path in routes) {
        const route =
          typeof routes[path] === "function"
            ? routes[path]
            : { ...routes[path] };
        const fullPath = (basePath + path).replace(/\\/+/g, "/");

        route.path = fullPath || "/";
        route.parent = parentRoute;
        flatRoutes[route.path] = route;

        if (route.name) {
          if (namedRoutes[route.name]) {
            console.warn(
              \`Router: Duplicate route name "\${route.name}". Overwriting.\`,
            );
          }
          namedRoutes[route.name] = route.path;
        }

        if (route.routes) {
          const { flatRoutes: childFlatRoutes, namedRoutes: childNamedRoutes } =
            this.flattenRoutes(route.routes, fullPath, route);
          Object.assign(flatRoutes, childFlatRoutes);
          Object.assign(namedRoutes, childNamedRoutes);
        }
      }
      return { flatRoutes, namedRoutes };
    },

    /**
     * Initializes the router.
     * @param {object} routesConfig - The main routes configuration.
     * @param {object} [options={}] - Configuration options.
     * @param {string} [options.appName=''] - Application name for document titles.
     * @param {boolean} [options.isProduction=false] - Whether running in production mode (affects SSG behavior).
     * @param {Function} [options.onRouteChange=null] - Callback when route changes (receives currentRoute).
     * @param {Function} [options.onTitleChange=null] - Callback when title changes (receives newTitle).
     */
    init(routesConfig, options = {}) {
      if (!routesConfig || !Object.keys(routesConfig).length) {
        console.error("Router: No routes loaded");
        return;
      }

      this.options = {
        appName: "",
        isProduction: false,
        onRouteChange: null,
        onTitleChange: null,
        ...options,
      };

      const { flatRoutes, namedRoutes } = this.flattenRoutes(routesConfig);
      this.namedRoutes = namedRoutes;
      this.defaultTitle = this.options.appName || "";

      for (const path in flatRoutes) {
        const route = flatRoutes[path];
        const patternString = this._createPatternString(route);
        try {
          const pattern = new URLPattern({ pathname: patternString });
          this.routes.push({ pattern, route, originalPath: path });
        } catch (e) {
          console.error(
            \`Router: Error creating URLPattern for path: "\${patternString}"\`,
            e,
          );
        }
      }

      this.routes.sort((a, b) => {
        const aParts = a.originalPath.split("/").length;
        const bParts = b.originalPath.split("/").length;
        return bParts - aParts;
      });

      // Initial route setup using adapter
      const location = this.adapter.getLocation();
      this.setCurrentRoute(location.href, false);
    },

    /**
     * Finds the route that matches the given URL path.
     * @param {string} pathname - The normalized URL pathname to match.
     * @returns {object|null} A match object or null.
     * @private
     */
    _matchRoute(pathname) {
      for (const { pattern, route } of this.routes) {
        const match = pattern.exec({ pathname });

        if (match) {
          const params = match.pathname.groups || {};
          const combinedParams = { ...params };

          const component =
            typeof route === "function"
              ? route
              : typeof route.component === "function"
                ? route.component(combinedParams)
                : route.component;

          const result = {
            route,
            params: combinedParams,
            name: route.name,
            component,
            template: route.template,
          };

          if (route.parent) {
            result.route = route.parent;
            result.template = route.parent.template;
            result.component = route.parent.component(combinedParams);
            result.matched = {
              route,
              params: combinedParams,
              path: route.path,
              name: route.name,
              component: component,
              template: route.template,
            };
          }
          return result;
        }
      }
      return null;
    },

    /**
     * Sets the current route based on a path.
     * @param {string} path - The URL path to navigate to.
     * @param {boolean} [pushState=true] - Whether to push to the history stack.
     */
    setCurrentRoute(path, pushState = true) {
      if (!this.routes.length) return;

      const location = this.adapter.getLocation();
      const url = new URL(path, location.origin);
      const normalizedPathname = this.normalizePath(url.pathname);
      const matched = this._matchRoute(normalizedPathname);

      if (!matched) {
        console.warn(
          \`Router: No route found for path "\${normalizedPathname}".\`,
        );
        return pushState ? this.go("/") : null;
      }

      // SSG route handling (only for browser adapter in production)
      if (
        matched.route.ssg &&
        this.options.isProduction &&
        this.adapter.type === "browser" &&
        !this.adapter.isSamePath(path)
      ) {
        this.adapter.hardNavigate(path);
        return;
      }

      matched.path = url.pathname;
      matched.querystring = url.search;
      matched.hash = url.hash;
      matched.queryParams = Object.fromEntries(url.searchParams.entries());
      matched.params = { ...matched.queryParams, ...matched.params };

      if (matched.route.action) return matched.route.action(matched.params);
      if (matched.route.redirect) return this.go(matched.route.redirect);

      this.currentRoute = matched;
      const newTitle = matched.route.title || this.defaultTitle;
      this.setTitle(newTitle);

      if (pushState) {
        this.pushToStack(path, matched.params, newTitle);
        this._pushState(path, { path });
      } else {
        this.updateCurrentRoute(this.currentRoute);
      }
    },

    /**
     * Handles browser history navigation (back/forward buttons).
     */
    handleHistoryNavigation() {
      const location = this.adapter.getLocation();
      const currentPath = location.href;
      const stackIndex = this.stack.findIndex(
        (item) =>
          this.normalizePath(item.path) === this.normalizePath(currentPath),
      );
      if (stackIndex !== -1) {
        this.truncateStack(stackIndex);
      }
      this.setCurrentRoute(currentPath, false);
    },

    /**
     * Generates a URL path for a named route.
     * @param {string} routeName - The name of the route.
     * @param {object} [params={}] - The parameters for the path.
     * @returns {string|null} The generated path or null on error.
     */
    create(routeName, params = {}) {
      if (!routeName) {
        console.error("Router: Route name is required for Router.create()");
        return null;
      }

      const pathPattern = this.namedRoutes[routeName];
      if (!pathPattern) {
        console.error(\`Router: Route with name "\${routeName}" not found.\`);
        return null;
      }

      let finalPath = pathPattern;
      const pathParams = { ...params };

      finalPath = finalPath.replace(/:(\\w+)/g, (match, paramName) => {
        if (
          pathParams[paramName] !== undefined &&
          pathParams[paramName] !== null
        ) {
          const value = pathParams[paramName];
          delete pathParams[paramName];
          return String(value);
        }
        console.warn(
          \`Router: Parameter "\${paramName}" was not provided for named route "\${routeName}".\`,
        );
        return match;
      });

      const queryParams = new URLSearchParams(pathParams).toString();
      return queryParams ? \`\${finalPath}?\${queryParams}\` : finalPath;
    },

    /**
     * Navigates to a given route.
     * @param {string} routeNameOrPath - The path or the name of the route.
     * @param {object} [params] - Route parameters if navigating by name.
     */
    go(routeNameOrPath, params) {
      const isNamedRoute = !!params || this.namedRoutes[routeNameOrPath];
      const path = isNamedRoute
        ? this.create(routeNameOrPath, params)
        : routeNameOrPath;
      if (path !== null) {
        this.setCurrentRoute(path, true);
      }
    },

    /**
     * Navigates to a named route (alias for go).
     * @param {string} routeName - The name of the route.
     * @param {object} [params={}] - Route parameters.
     */
    navigate(routeName, params = {}) {
      return this.go(routeName, params);
    },

    /**
     * Replaces the current route without adding to history.
     * @param {string} routeNameOrPath - The path or the name of the route.
     * @param {object} [params={}] - Route parameters if using named route.
     */
    replace(routeNameOrPath, params = {}) {
      const isNamedRoute = !!params || this.namedRoutes[routeNameOrPath];
      const path = isNamedRoute
        ? this.create(routeNameOrPath, params)
        : routeNameOrPath;

      if (path === null) return;

      const location = this.adapter.getLocation();
      const url = new URL(path, location.origin);
      const normalizedPathname = this.normalizePath(url.pathname);
      const matched = this._matchRoute(normalizedPathname);

      if (!matched) {
        console.warn(
          \`Router: No route found for path "\${normalizedPathname}".\`,
        );
        return;
      }

      matched.path = url.pathname;
      matched.querystring = url.search;
      matched.hash = url.hash;
      matched.queryParams = Object.fromEntries(url.searchParams.entries());
      matched.params = { ...matched.queryParams, ...matched.params };

      this.currentRoute = matched;
      const newTitle = matched.route.title || this.defaultTitle;
      this.setTitle(newTitle);

      this.adapter.replaceState({ path }, path);
      this.updateCurrentRoute(this.currentRoute);
    },

    /**
     * Navigate forward in history.
     */
    forward() {
      const didNavigate = this.adapter.forward();
      // For memory router, trigger route update after forward
      if (this.adapter.type === "memory" && didNavigate) {
        this.handleHistoryNavigation();
      }
    },

    /**
     * Navigate to home route and reset stack.
     */
    home() {
      this.stack = [];
      this.go("/");
    },

    /**
     * Navigate back in history.
     */
    back() {
      if (this.stack.length <= 1) return this.home();
      this.stack = this.stack.slice(0, -1);
      const didNavigate = this.adapter.back();
      // For memory router, trigger route update after back
      if (this.adapter.type === "memory" && didNavigate) {
        this.handleHistoryNavigation();
      }
    },

    _pushState(path, state = {}) {
      const location = this.adapter.getLocation();
      const fullUrl = new URL(path, location.origin).href;
      if (!this.adapter.isSamePath(fullUrl)) {
        this.adapter.pushState(state, path);
      }
      this.updateCurrentRoute(this.currentRoute);
    },

    pushToStack(path, params = {}, title = this.defaultTitle) {
      const newItem = { path, params, title };
      if (this.normalizePath(path) === "/") {
        this.stack = [newItem];
      } else {
        this.stack = [...this.stack, newItem];
      }
    },

    setTitle(newTitle) {
      const fullTitle =
        newTitle && this.options.appName
          ? \`\${newTitle} | \${this.options.appName}\`
          : newTitle || this.options.appName;

      this.adapter.setTitle(fullTitle);

      if (this.stack.length > 0) {
        const updated = [...this.stack];
        updated[updated.length - 1] = {
          ...updated[updated.length - 1],
          title: newTitle,
        };
        this.stack = updated;
      }
      if (this.currentRoute?.route) this.currentRoute.route.title = newTitle;

      if (this.options.onTitleChange) {
        this.options.onTitleChange(fullTitle);
      }
    },

    updateCurrentRoute(route) {
      this.currentRoute = { ...route, root: this.isRoot() };
      if (this.options.onRouteChange) {
        this.options.onRouteChange(this.currentRoute);
      }
    },

    isRoot() {
      return this.stack.length <= 1;
    },

    truncateStack(index = 0) {
      this.stack = this.stack.slice(0, index + 1);
    },

    normalizePath(path = "/") {
      const normalized = path.split("?")[0].split("#")[0];
      return (normalized || "/").replace(/\\/+$/, "") || "/";
    },
  };

  return router;
};
`,mimeType:"text/javascript"},"/controllers/interactions.js":{content:`/**
 * @file Interactions Controller
 * @description Handles migration of guest user data to authenticated user.
 * All other interaction logic is now handled directly in views via Model sync.
 */

import $APP from "/$app.js";

const Interactions = {
  /**
   * Migrate guest user data to authenticated user
   * Called after successful registration/login to transfer guest interactions
   * @param {string} _guestId - (Deprecated) The old guest ID - no longer used since we use shared "guest" user
   * @param {string} newUserId - The authenticated user ID to migrate to
   */
  async migrateGuestData(_guestId, newUserId) {
    if (!newUserId) return;

    // Get the shared "guest" user with all interaction arrays
    const guestUser = await $APP.Model.users.get("guest", {
      includes: [
        "likedPlaces",
        "likedEvents",
        "likedMeetups",
        "likedGroups",
        "interestedEvents",
        "interestedMeetups",
        "skippedPlaces",
        "skippedEvents",
        "skippedMeetups",
        "skippedGroups",
      ],
    });

    if (!guestUser) return;

    // Check if guest has any interactions to migrate
    const hasInteractions = [
      "likedPlaces",
      "likedEvents",
      "likedMeetups",
      "likedGroups",
      "interestedEvents",
      "interestedMeetups",
      "skippedPlaces",
      "skippedEvents",
      "skippedMeetups",
      "skippedGroups",
    ].some((field) => guestUser[field]?.length > 0);

    if (hasInteractions) {
      // Get authenticated user record
      const user = await $APP.Model.users.get(newUserId, {
        includes: [
          "likedPlaces",
          "likedEvents",
          "likedMeetups",
          "likedGroups",
          "interestedEvents",
          "interestedMeetups",
          "skippedPlaces",
          "skippedEvents",
          "skippedMeetups",
          "skippedGroups",
        ],
      });

      if (!user) return;

      // Merge all interaction arrays
      const fields = [
        "likedPlaces",
        "likedEvents",
        "likedMeetups",
        "likedGroups",
        "interestedEvents",
        "interestedMeetups",
        "skippedPlaces",
        "skippedEvents",
        "skippedMeetups",
        "skippedGroups",
      ];

      for (const field of fields) {
        if (!user[field]) user[field] = [];
        if (guestUser[field]?.length > 0) {
          // Merge arrays by ID, removing duplicates
          const existingIds = new Set(user[field].map((i) => i.id));
          const newItems = guestUser[field].filter((i) => !existingIds.has(i.id));
          user[field] = [...user[field], ...newItems];
        }
      }

      // Save updated user record
      await $APP.Model.users.edit(user);

      // Clear guest user's interaction arrays
      for (const field of fields) {
        guestUser[field] = [];
      }
      await $APP.Model.users.edit(guestUser);
    }

    // Migrate meetup attendance records (change userId from "guest" to newUserId)
    const guestMeetupAttendance = await $APP.Model.meetup_attendance.getAll({
      where: { userId: "guest" },
    });
    for (const attendance of guestMeetupAttendance) {
      await $APP.Model.meetup_attendance.edit({
        id: attendance.id,
        userId: newUserId,
      });
    }

    // Migrate meetups created by guest
    const guestMeetups = await $APP.Model.meetups.getAll({
      where: { createdBy: "guest" },
    });
    for (const meetup of guestMeetups) {
      await $APP.Model.meetups.edit({ id: meetup.id, createdBy: newUserId });
    }
  },
};

export default Interactions;
`,mimeType:"text/javascript"},"/$app/theme/index.js":{content:`import View, { settings } from "/$app/view/index.js";

View.plugins.push({
  name: "theme",
  init: async ({ tag, component }) => {
    if (component.style && settings.loadStyle) {
      const path = View.getComponentPath(tag);
      await loadComponentCSS(\`\${path}.css\`, tag);
    }
  },
  events: {
    connected: (opts) => {
      const { tag, component, instance } = opts;
      if (!component.style) return;
      const root = instance.getRootNode();
      if (!(root instanceof ShadowRoot)) return;
      const entry = View.components.get(tag);
      if (!entry?.cssContent) return;
      let injected = View.shadowStylesInjected.get(root);
      if (!injected) {
        injected = new Set();
        View.shadowStylesInjected.set(root, injected);
      }
      if (injected.has(component)) return;
      const style = document.createElement("style");
      style.setAttribute("data-component-style", component.tag);
      style.textContent = entry.cssContent;
      root.prepend(style);
      injected.add(component);
    },
  },
});
// CSS Loading Utility (replaces $APP.fs.css)
const loadedCSSFiles = new Set();
/**
 * Fetch CSS content as text (for shadow DOM injection)
 * @param {string} url - URL or path to CSS file
 * @returns {Promise<string|null>} CSS content as string, or null if fetch fails
 */
const fetchCSS = async (url) => {
  try {
    const response = await fetch(url);
    if (!response.ok) {
      console.warn(\`Failed to fetch CSS from \${url}: \${response.status}\`);
      return null;
    }
    return await response.text();
  } catch (error) {
    console.error(\`Error fetching CSS from \${url}:\`, error);
    return null;
  }
};

const loadCSS = (href, prepend = false) => {
  if (loadedCSSFiles.has(href)) {
    return; // Already loaded
  }

  const link = document.createElement("link");
  link.rel = "stylesheet";
  link.href = href;

  if (prepend) {
    document.head.prepend(link);
  } else {
    document.head.appendChild(link);
  }

  loadedCSSFiles.add(href);
};

const loadComponentCSS = async (file, tag) => {
  const css = await fetchCSS(file);
  if (css) {
    globalStyleTag.textContent += css;
    const entry = View.components.get(tag);
    if (entry) entry.cssContent = css;
  }
};

const globalStyleTag = document.createElement("style");
globalStyleTag.id = "compstyles";
document.head.appendChild(globalStyleTag);

// Font Loading Utility (moved from base/frontend.js)
const loadedFonts = new Set();

const loadFont = (fontFamily) => {
  if (!fontFamily || loadedFonts.has(fontFamily)) {
    return; // Skip if no font or already loaded
  }

  // Load from Google Fonts
  const fontName = fontFamily.replace(/\\s+/g, "+");
  const url = \`https://fonts.googleapis.com/css2?family=\${fontName}:wght@300;400;500;600;700;800&display=swap\`;

  loadCSS(url);

  // Inject CSS variables for font
  const styleId = "theme-font-vars";
  let styleTag = document.getElementById(styleId);

  if (!styleTag) {
    styleTag = document.createElement("style");
    styleTag.id = styleId;
    document.head.appendChild(styleTag);
  }

  styleTag.textContent = \`
    :root {
      --font-family-base: '\${fontFamily}', sans-serif;
    }
    body {
      font-family: var(--font-family-base);
    }
  \`;

  loadedFonts.add(fontFamily);
};

const rgbToHSL = (r, g, b) => {
  const max = Math.max(r, g, b),
    min = Math.min(r, g, b);
  let h,
    s,
    l = (max + min) / 2;

  if (max === min) {
    h = s = 0;
  } else {
    const d = max - min;
    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
    switch (max) {
      case r:
        h = (g - b) / d + (g < b ? 6 : 0);
        break;
      case g:
        h = (b - r) / d + 2;
        break;
      case b:
        h = (r - g) / d + 4;
        break;
    }
    h /= 6;
  }
  return {
    h: Math.round(h * 360),
    s: Math.round(s * 100),
    l: Math.round(l * 100),
  };
};

/**
 * HELPER: HSL to CSS string
 */
const hslToCSS = (hsl) => \`hsl(\${hsl.h} \${hsl.s}% \${hsl.l}%)\`;

/**
 * HELPER: Adjust HSL lightness (clamped to 0-100)
 */
const adjustLightness = (hsl, delta) => ({
  h: hsl.h,
  s: hsl.s,
  l: Math.max(0, Math.min(100, hsl.l + delta)),
});

/**
 * HELPER: Mix color with white or black
 * amount: 0-1 (0 = original color, 1 = full white/black)
 */
const mixWithColor = (hsl, mixWith, amount) => {
  if (mixWith === "white") {
    // Mix towards white: increase lightness, decrease saturation
    return {
      h: hsl.h,
      s: Math.round(hsl.s * (1 - amount * 0.5)),
      l: Math.round(hsl.l + (100 - hsl.l) * amount),
    };
  } else if (mixWith === "black") {
    // Mix towards black: decrease lightness, decrease saturation slightly
    return {
      h: hsl.h,
      s: Math.round(hsl.s * (1 - amount * 0.3)),
      l: Math.round(hsl.l * (1 - amount)),
    };
  }
  return hsl;
};

/**
 * HELPER: Parses Hex, RGB, or HSL strings into an HSL object
 * Returns null if the string isn't a recognizable color format
 */
const parseColor = (str) => {
  if (!str || typeof str !== "string") return null;
  const s = str.trim();

  // 1. HEX
  if (s.startsWith("#")) {
    let hex = s.slice(1);
    if (hex.length === 3)
      hex = hex
        .split("")
        .map((c) => c + c)
        .join("");
    const r = parseInt(hex.slice(0, 2), 16) / 255;
    const g = parseInt(hex.slice(2, 4), 16) / 255;
    const b = parseInt(hex.slice(4, 6), 16) / 255;
    return rgbToHSL(r, g, b);
  }

  // 2. RGB
  if (s.startsWith("rgb")) {
    const match = s.match(/\\d+/g);
    if (!match || match.length < 3) return null;
    return rgbToHSL(match[0] / 255, match[1] / 255, match[2] / 255);
  }

  // 3. HSL
  if (s.startsWith("hsl")) {
    // Matches integer or float numbers
    const match = s.match(/[\\d.]+/g);
    if (!match || match.length < 3) return null;
    return {
      h: Math.round(parseFloat(match[0])),
      s: Math.round(parseFloat(match[1])),
      l: Math.round(parseFloat(match[2])),
    };
  }

  return null;
};

/**
 * HELPER: Generate 5 shade variations from a base color
 * Supports both HSL lightness adjustment and color mixing
 * @param {Object} baseHSL - Base color in HSL format
 * @param {Object} config - Optional shade configuration
 * @returns {Object} Object with lighter, light, DEFAULT, dark, darker shades
 */
const generateShades = (baseHSL, config = {}) => {
  // Default configuration: HSL lightness adjustment
  const defaultConfig = {
    lighter: { lightness: 20 },
    light: { lightness: 10 },
    dark: { lightness: -10 },
    darker: { lightness: -20 },
  };

  const shadeConfig = { ...defaultConfig, ...config };
  const shades = { DEFAULT: hslToCSS(baseHSL) };

  for (const [shadeName, shadeOpts] of Object.entries(shadeConfig)) {
    if (shadeName === "DEFAULT") continue;

    if (shadeOpts.mix) {
      // Mix with white/black
      const mixed = mixWithColor(
        baseHSL,
        shadeOpts.mix,
        shadeOpts.amount || 0.3,
      );
      shades[shadeName] = hslToCSS(mixed);
    } else if (shadeOpts.lightness !== undefined) {
      // HSL lightness adjustment
      const adjusted = adjustLightness(baseHSL, shadeOpts.lightness);
      shades[shadeName] = hslToCSS(adjusted);
    }
  }

  return shades;
};

/**
 * GENERATOR: Traverses object and creates CSS variables
 * Automatically generates shades for colors defined in the 'color' block
 * unless explicit overrides are provided in the theme object.
 */
const generateThemeVariables = (themeObj, prefix = "-") => {
  const variables = {};
  const shadeSuffixes = ["lighter", "light", "dark", "darker"];

  const traverse = (obj, currentKey) => {
    for (const [key, value] of Object.entries(obj)) {
      const newKey = currentKey ? \`\${currentKey}-\${key}\` : \`\${prefix}-\${key}\`;

      // Check if we are currently iterating through the 'color' object properties
      // prefix is usually "-" so we look for "-color"
      const isColorBlock = currentKey === \`\${prefix}-color\`;

      if (typeof value === "object" && value !== null) {
        // Recursive step
        traverse(value, newKey);
      } else {
        // It's a value (string/number)
        variables[newKey] = value;

        // If we are in the color block and the value is a string (a color),
        // attempt to auto-generate shades.
        if (isColorBlock && typeof value === "string") {
          // Prevent generating shades of shades (e.g. don't gen primary-dark-dark)
          const isVariant = shadeSuffixes.some((suffix) =>
            key.endsWith(\`-\${suffix}\`),
          );

          if (!isVariant) {
            const baseHSL = parseColor(value);
            if (baseHSL) {
              const generatedShades = generateShades(baseHSL);

              shadeSuffixes.forEach((shade) => {
                const variantKey = \`\${key}-\${shade}\`;

                // CRITICAL: Only add the generated shade if the theme
                // does NOT explicitly define it.
                if (obj[variantKey] === undefined) {
                  variables[\`\${newKey}-\${shade}\`] = generatedShades[shade];
                }
              });
            }
          }
        }
      }
    }
  };

  traverse(themeObj, "");
  return variables;
};

/**
 * INJECTOR: Updates the CSS variables in the DOM
 */
const injectThemeCSS = (variables) => {
  const styleId = "dynamic-theme-vars";
  let styleTag = document.getElementById(styleId);

  if (!styleTag) {
    styleTag = document.createElement("style");
    styleTag.id = styleId;
    document.head.appendChild(styleTag);
  }

  const cssRules = Object.entries(variables)
    .map(([key, val]) => \`\${key}: \${val};\`)
    .join("\\n  ");

  styleTag.textContent = \`:root {\\n  \${cssRules}\\n}\`;
};

// Theme registry
const availableThemes = {};

const registerTheme = (name, loader) => {
  availableThemes[name] = loader;
};

/**
 * APPLY: Apply a theme object directly (for theme generator preview)
 */
const applyTheme = (themeData) => {
  const cssVars = generateThemeVariables(themeData);
  injectThemeCSS(cssVars);

  if (themeData?.font?.family) loadFont(themeData.font.family);
};

/**
 * LOADER: Load a theme by name (string) or apply a theme object directly (object)
 * @param {string|object} themeInput - The name of a registered theme or a theme object.
 */
const loadTheme = async (themeInput) => {
  if (!themeInput) {
    const styleTag = document.getElementById("dynamic-theme-vars");
    if (styleTag) styleTag.remove();
    console.log("Theme removed.");
    return;
  }

  // 1. If it's an object, apply it directly using the existing logic
  if (typeof themeInput === "object" && themeInput !== null) {
    applyTheme(themeInput);
    console.log("Custom theme object applied successfully.");
    return;
  }

  // 2. If it's a string, proceed with loading a registered theme
  const themeName = themeInput;
  const themeLoader = availableThemes[themeName];

  if (!themeLoader) {
    console.warn(\`Theme "\${themeName}" not found.\`);
    return;
  }

  try {
    const module = await themeLoader();
    const themeData = module.default || module;

    // Use applyTheme to reuse the core injection logic
    applyTheme(themeData);

    console.log(\`Theme "\${themeName}" loaded successfully.\`);
  } catch (error) {
    console.error(\`Failed to load theme "\${themeName}":\`, error);
  }
};

// Register default themes
// NOTE: These imports will need to be correctly resolved in your environment
registerTheme("gruvbox-dark", () => import("./themes/gruvbox-dark.js"));
registerTheme("gruvbox-light", () => import("./themes/gruvbox-light.js"));
registerTheme("nbs", () => import("./themes/nbs.js"));

// Public API
export default {
  // Core functions
  parseColor,
  generateShades,
  generateThemeVariables,
  injectThemeCSS,

  // Theme management
  registerTheme,
  loadTheme, // Refactored
  applyTheme,
  availableThemes,
  fetchCSS,
  // Resource loading
  loadCSS,
  loadFont,
  loadComponentCSS,
  // Utility functions
  rgbToHSL,
  hslToCSS,
  adjustLightness,
  mixWithColor,
};

export {
  parseColor,
  generateShades,
  generateThemeVariables,
  injectThemeCSS,
  registerTheme,
  loadTheme,
  applyTheme,
  availableThemes,
  loadCSS,
  loadFont,
  rgbToHSL,
  hslToCSS,
  adjustLightness,
  mixWithColor,
};
`,mimeType:"text/javascript"},"/$app/i18n/index.js":{content:`/**
 * i18n Module
 * Provides internationalization support for Bootstrapp apps
 */
import Controller from "/$app/controller/index.js";
import View from "/$app/view/index.js";
import { I18n } from "./base.js";
import i18nViewPlugin from "./view-plugin.js";

// Initialize i18n instance
const i18nInstance = new I18n();

// Register view plugin for component-level i18n
View.plugins.push(i18nViewPlugin);
const base = {
  /**
   * Translate a key (with pluralization support)
   * @param {string} key - Translation key (dot-separated)
   * @param {Object} params - Parameters for interpolation (use 'n' or 'count' for plurals)
   * @example
   * $APP.i18n.t('welcome.title')
   * $APP.i18n.t('pushup', { n: 5 })  // "5 pushups"
   * $APP.i18n.t('greeting', { name: 'John' })  // "Hello, John!"
   */
  t: (key, params) => i18nInstance.t(key, params),

  /**
   * Format a number according to current locale
   * @param {number} number - Number to format
   * @param {Object} options - Intl.NumberFormat options
   * @example
   * $APP.i18n.n(1000)  // "1,000" (en) or "1.000" (pt)
   * $APP.i18n.n(0.5, { style: 'percent' })  // "50%"
   * $APP.i18n.n(99.99, { style: 'currency', currency: 'USD' })  // "$99.99"
   */
  n: (number, options) => i18nInstance.formatNumber(number, options),

  /**
   * Format a date according to current locale
   * @param {Date|string|number} date - Date to format
   * @param {Object} options - Intl.DateTimeFormat options
   * @example
   * $APP.i18n.d(new Date())  // "Jan 15, 2025"
   * $APP.i18n.d(date, { dateStyle: 'full' })  // "Wednesday, January 15, 2025"
   * $APP.i18n.d(date, { timeStyle: 'short' })  // "2:30 PM"
   */
  d: (date, options) => i18nInstance.formatDate(date, options),

  /**
   * Format a relative date (today, yesterday, X days ago)
   * @param {Date|string|number} date - Date to format
   * @example
   * $APP.i18n.r(new Date())  // "today"
   * $APP.i18n.r(yesterdayDate)  // "yesterday"
   * $APP.i18n.r(twoDaysAgo)  // "2 days ago"
   */
  r: (date) => i18nInstance.formatRelativeDate(date),

  /**
   * Set current language (with lazy loading)
   * @param {string} locale - Locale code
   */
  setLanguage: async (locale) => {
    console.log("i18n setLanguage called with:", locale);
    const newLocale = await i18nInstance.setLanguage(locale);
    console.log("Locale loaded:", newLocale);

    // Persist to localStorage via Controller
    if (Controller?.i18n) {
      Controller.i18n.set("currentLocale", newLocale);
    }

    // Auto re-render root component if enabled
    const autoRerender = $APP.settings.i18n.autoRerender;
    const rootComponent = $APP.settings.i18n.rootComponent;
    console.log("Auto-rerender settings:", { autoRerender, rootComponent });

    if (autoRerender && rootComponent) {
      try {
        const oldContainer = document.querySelector(rootComponent);
        console.log("Found container:", oldContainer);
        if (oldContainer) {
          // Use innerHTML to create custom element (createElement doesn't work for custom elements)
          const temp = document.createElement('div');
          temp.innerHTML = \`<\${rootComponent}></\${rootComponent}>\`;
          oldContainer.replaceWith(temp.firstElementChild);
          console.log("Replaced container");
        }
      } catch (error) {
        console.warn("Failed to auto-rerender root component:", error);
        console.warn("You may need to manually trigger re-render");
      }
    }

    return newLocale;
  },

  /**
   * Get current language
   */
  getLanguage: () => i18nInstance.getLanguage(),

  /**
   * Get available locales
   */
  getAvailableLocales: () => i18nInstance.getAvailableLocales(),

  /**
   * Register a locale loader for lazy loading
   * @param {string} locale - Locale code
   * @param {Function} loader - Function that returns Promise<translations>
   */
  registerLocale: (locale, loader) =>
    i18nInstance.registerLocale(locale, loader),

  /**
   * Add translations for a locale (used by modules)
   * @param {string} locale - Locale code
   * @param {Object} translations - Translation object
   */
  addTranslations: (locale, translations) =>
    i18nInstance.addTranslations(locale, translations),

  /**
   * Internal: Get i18n instance (for advanced use cases)
   */
  _instance: i18nInstance,
};
// Register module with Bootstrapp
$APP.addModule({
  name: "i18n",
  base,

  settings: {
    defaultLocale: "en",
    fallbackLocale: "en",
    persistLocale: true,
    autoRerender: true,
    rootComponent: "app-container",
  },

  events: () => ({
    /**
     * When a module is added, merge its i18n translations
     */
    moduleAdded({ module }) {
      if (module.i18n) {
        // Module provides translations: { locale: translations }
        for (const [locale, translations] of Object.entries(module.i18n)) {
          i18nInstance.addTranslations(locale, translations);
        }
      }
    },

    /**
     * On app init, restore saved language preference
     */
    async "APP:INIT"() {
      // Set up Controller adapter for persistence
      if (Controller && !Controller.i18n) {
        Controller.createAdapter("i18n", {
          storage: "localStorage",
          prefix: "i18n:",
        });
      }

      // Restore saved locale
      const savedLocale = Controller?.i18n?.get("currentLocale");
      if (savedLocale) {
        await i18nInstance.setLanguage(savedLocale);
      } else {
        // Use default locale from settings
        const defaultLocale = $APP.settings.get("i18n.defaultLocale") || "en";
        await i18nInstance.setLanguage(defaultLocale);
      }
    },
  }),
});

export default base;
`,mimeType:"text/javascript"},"/$app/maps/app.js":{content:`/**
 * @bootstrapp/maps - App Module
 * Register maps components
 */

import $APP from "/$app.js";

// Register as module
$APP.addModule({
  name: "maps",
  path: "/$app/maps",
});
`,mimeType:"text/javascript"},"/$app/admin/index.js":{content:`import $APP from "/$app.js";
import { html } from "/npm/lit-html";
import { getPluginRoutes } from "./plugins.js";

// Import bundler module (registers bundler-ui component)
import "/$app/bundler/index.js";

// Import admin plugins (they self-register via registerPlugin)
import "/$app/bundler/plugin.js";
import "/$app/theme/plugin.js";
import "/$app/extension/admin/plugin.js";

// Register admin module
$APP.addModule({
  name: "admin",
  path: "/$app/admin/views",
});

// Core admin routes (dashboard, models, legacy)
const coreRoutes = {
  // Dashboard
  "/admin": {
    name: "admin-dashboard",
    component: () => html\`<admin-dashboard></admin-dashboard>\`,
    title: "Admin Dashboard",
    template: "admin-layout",
  },

  // Model CRUD
  "/admin/models/:model": {
    name: "admin-model-list",
    component: ({ model }) => html\`
      <admin-model-list
        model=\${model}
        .data-query=\${{ model, key: "rows" }}
      ></admin-model-list>
    \`,
    title: "Admin - Models",
    template: "admin-layout",
  },

  "/admin/models/:model/:id": {
    name: "admin-model-detail",
    component: ({ model, id }) => html\`
      <admin-model-list
        model=\${model}
        selectedId=\${id}
        .data-query=\${{ model, key: "rows" }}
      ></admin-model-list>
    \`,
    title: "Admin - Edit",
    template: "admin-layout",
  },

  // Legacy CMS routes (for backward compatibility)
  "/admin/cms": {
    component: () => html\`<admin-dashboard></admin-dashboard>\`,
    title: "Admin",
    template: "admin-layout",
  },

  "/admin/cms/:model": {
    component: ({ model }) => html\`
      <admin-model-list
        model=\${model}
        .data-query=\${{ model, key: "rows" }}
      ></admin-model-list>
    \`,
    title: "Admin",
    template: "admin-layout",
  },

  "/admin/cms/:model/:id": {
    name: "cms_item",
    component: ({ model, id }) => html\`
      <admin-model-list
        model=\${model}
        selectedId=\${id}
        .data-query=\${{ model, key: "rows" }}
      ></admin-model-list>
    \`,
    title: "Admin",
    template: "admin-layout",
  },
};

// Merge core routes with plugin routes
const routes = { ...coreRoutes, ...getPluginRoutes() };

// Register routes
$APP.routes.set(routes);

export default routes;
`,mimeType:"text/javascript"},"/$app/tailwind/index.js":{content:`import presetWind4 from "https://cdn.jsdelivr.net/npm/@unocss/preset-wind4@66.3.3/+esm";
import $APP from "/$app.js";

const fontFamily = "Manrope";

window.__unocss = {
  theme: {
    font: {
      family: fontFamily,
      icon: {
        family: "lucide",
      },
    },
  },
  extendTheme: (theme) =>
    $APP.theme.set({
      ...theme,
      ...$APP.theme,
      colors: {
        ...theme.colors,
        default: "var(--text-color)",
        muted: "var(--text-muted)",
        inverted: "var(--color-inverse)",
        // Base Content Colors
        // Maps 'bg-surface', 'text-surface', 'border-surface' to var(--color-surface)
        surface: {
          DEFAULT: "var(--color-surface)",
          lighter: "var(--color-surface-lighter)",
          light: "var(--color-surface-light)",
          dark: "var(--color-surface-dark)",
          darker: "var(--color-surface-darker)",
        },
        accent: {
          DEFAULT: "var(--color-accent)",
          lighter: "var(--color-accent-lighter)",
          light: "var(--color-accent-light)",
          dark: "var(--color-accent-dark)",
          darker: "var(--color-accent-darker)",
        },
        // Maps 'bg-inverse', 'text-inverse' to var(--color-inverse)
        // Includes variants like 'bg-inverse-light' -> var(--color-inverse-light)
        inverse: {
          DEFAULT: "var(--color-inverse)",
          lighter: "var(--color-inverse-lighter)",
          light: "var(--color-inverse-light)",
          dark: "var(--color-inverse-dark)",
          darker: "var(--color-inverse-darker)",
        },

        // Primary Palette
        // Maps 'bg-primary', 'text-primary' etc.
        primary: {
          DEFAULT: "var(--color-primary)",
          lighter: "var(--color-primary-lighter)",
          light: "var(--color-primary-light)",
          dark: "var(--color-primary-dark)",
          darker: "var(--color-primary-darker)",
        },

        // Secondary Palette
        secondary: {
          DEFAULT: "var(--color-secondary)",
          lighter: "var(--color-secondary-lighter)",
          light: "var(--color-secondary-light)",
          dark: "var(--color-secondary-dark)",
          darker: "var(--color-secondary-darker)",
        },

        // Semantic / Status Colors
        success: {
          DEFAULT: "var(--color-success)",
          lighter: "var(--color-success-lighter)",
          light: "var(--color-success-light)",
          dark: "var(--color-success-dark)",
          darker: "var(--color-success-darker)",
        },
        danger: {
          DEFAULT: "var(--color-danger)",
          lighter: "var(--color-danger-lighter)",
          light: "var(--color-danger-light)",
          dark: "var(--color-danger-dark)",
          darker: "var(--color-danger-darker)",
        },
        warning: {
          DEFAULT: "var(--color-warning)",
          lighter: "var(--color-warning-lighter)",
          light: "var(--color-warning-light)",
          dark: "var(--color-warning-dark)",
          darker: "var(--color-warning-darker)",
        },
        info: {
          DEFAULT: "var(--color-info)",
          lighter: "var(--color-info-lighter)",
          light: "var(--color-info-light)",
          dark: "var(--color-info-dark)",
          darker: "var(--color-info-darker)",
        },

        // Interaction States
        hover: "var(--color-hover)",
        focus: "var(--color-focus)",
      },

      // Extend textColor specifically if you want 'text-default' to map to your base text color
      textColor: {
        DEFAULT: "var(--text-color)",
      },

      // Extend backgroundColor specifically for the main app background
      backgroundColor: {
        DEFAULT: "var(--background-color)",
      },
    }),
  presets: [presetWind4({ preflights: { theme: true } })],
};

await import("https://cdn.jsdelivr.net/npm/@unocss/runtime/core.global.js");
`,mimeType:"text/javascript"},"/admin/maps-plugin.js":{content:`/**
 * Maps Plugin for meetup.rio Admin
 * Adds "Import from Maps" action to places model
 */

import { registerPlugin } from "/$app/admin/plugins.js";
import { html } from "/npm/lit-html";

registerPlugin("maps", {
  actions: {
    places: [
      {
        label: "Import from Maps",
        icon: "map-pin",
        handler: (context) => context.openModal("maps-import"),
      },
    ],
  },

  modals: {
    "maps-import": {
      title: "Import Place from Maps",
      component: ({ model }) => html\`
        <admin-maps-import .model=\${model}></admin-maps-import>
      \`,
    },
  },
});
`,mimeType:"text/javascript"},"/$app/uix/app.js":{content:`import Theme from "/$app/theme/index.js";
import { html } from "/npm/lit-html";
import $APP from "/$app.js";
import UIX from "./index.js";

$APP.routes.set({ "/showcase": () => html\`<uix-showcase></uix-showcase>\` });
Theme.loadCSS("/$app/uix/theme.css", true);

$APP.addModule(UIX);
`,mimeType:"text/javascript"},"/controllers/index.js":{content:`import $APP from "/$app.js";
import { html } from "/npm/lit-html";

const routes = {
  "/": {
    name: "discover",
    component: () => html\`<view-discover-view></view-discover-view>\`,
    title: "Discover - MEETUP.RIO",
    template: "template-app",
  },
  "/discover": {
    name: "discover-alias",
    component: () => html\`<view-discover-view></view-discover-view>\`,
    title: "Discover - MEETUP.RIO",
    routes: {
      "/:category": {
        name: "discover-category",
        component: ({ category }) =>
          html\`<view-discover-view .initialCategory=\${category}></view-discover-view>\`,
        title: "Discover - MEETUP.RIO",
      },
    },
    template: "template-app",
  },
  "/meetups": {
    name: "meetups",
    component: () => html\`<view-meetups-view></view-meetups-view>\`,
    title: "My Meetups - MEETUP.RIO",
    template: "template-app",
  },
  "/groups": {
    name: "groups",
    component: () =>
      html\`<view-groups-view  .data-query=\${{ model: "groups", key: "groups" }}></view-groups-view>\`,
    title: "Groups - MEETUP.RIO",
    template: "template-app",
  },
  "/profile": {
    name: "profile",
    component: () => html\`<view-profile-view></view-profile-view>\`,
    title: "My Profile - MEETUP.RIO",
    template: "template-app",
  },
  "/place/:slug": {
    name: "place-detail",
    component: ({ slug }) =>
      html\`<view-place-detail-view .data-query=\${{ model: "places", where: { slug }, key: "place", single: true }}></view-place-detail-view>\`,
    title: "Place - MEETUP.RIO",
    template: "template-app",
  },
  "/event/:slug": {
    name: "event-detail",
    component: ({ slug }) =>
      html\`<view-event-detail-view .data-query=\${{ model: "events", where: { slug }, key: "event", single: true }}></view-event-detail-view>\`,
    title: "Event - MEETUP.RIO",
    template: "template-app",
  },
  "/meetup/:slug": {
    name: "meetup-detail",
    component: ({ slug }) =>
      html\`<view-meetup-detail-view .data-query=\${{ model: "meetups", where: { slug }, key: "meetup", single: true }}></view-meetup-detail-view>\`,
    title: "Meetup - MEETUP.RIO",
    template: "template-app",
  },
  "/group/:slug": {
    name: "group-detail",
    component: ({ slug }) =>
      html\`<view-group-detail-view .data-query=\${{ model: "groups", where: { slug }, key: "group", single: true }}></view-group-detail-view>\`,
    title: "Group - MEETUP.RIO",
    template: "template-app",
  },
  "/calendar": {
    name: "calendar",
    component: () => html\`<view-calendar-view></view-calendar-view>\`,
    title: "Calendar - MEETUP.RIO",
    template: "template-app",
  },
  "/auth/callback": {
    name: "auth-callback",
    component: () => html\`<view-auth-callback></view-auth-callback>\`,
    title: "Authenticating... - MEETUP.RIO",
  },
};

$APP.routes.set(routes);
`,mimeType:"text/javascript"},"/$app/icon-lucide/app.js":{content:`import $APP from "/$app.js";

$APP.addModule({ name: "icon-lucide", icon: true });
`,mimeType:"text/javascript"},"/admin/maps-import.js":{content:`/**
 * Maps Import Component for meetup.rio Admin
 * Search maps and create places from results
 */

import T from "/$app/types/index.js";
import $APP from "/$app.js";
import { html } from "/npm/lit-html";
import Theme from "/$app/theme/index.js";

// Load component styles
Theme.loadCSS("/admin/maps-import.css", true);

// Define and register the component
$APP.define("admin-maps-import", {
  tag: "admin-maps-import",

  properties: {
    model: T.string(),
    selectedPlace: T.object(),
    category: T.string({ defaultValue: "attractions" }),
    description: T.string({ defaultValue: "" }),
    image: T.string({ defaultValue: "" }),
    saving: T.boolean({ defaultValue: false }),
  },

  handlePlaceSelected(e) {
    this.selectedPlace = e.detail;
  },

  async createPlace() {
    if (!this.selectedPlace) return;

    this.saving = true;
    try {
      const place = this.selectedPlace;
      const [error] = await $APP.Model.places.add({
        name: place.name,
        address: place.address,
        lat: place.lat,
        lng: place.lng,
        description: this.description || \`Imported from maps: \${place.name}\`,
        category: this.category,
        image: this.image || \`https://picsum.photos/seed/\${encodeURIComponent(place.name)}/800/1200\`,
        createdAt: new Date().toISOString(),
      });

      if (error) {
        console.error("Error creating place:", error);
        alert(\`Error: \${error.message || "Failed to create place"}\`);
        this.saving = false;
        return;
      }

      this.emit("close-modal");
      this.emit("refresh");
    } catch (err) {
      console.error("Error creating place:", err);
      alert(\`Error: \${err.message}\`);
    }
    this.saving = false;
  },

  render() {
    const categories = [
      { value: "beaches", label: "Beaches" },
      { value: "nightlife", label: "Nightlife" },
      { value: "food", label: "Food & Drinks" },
      { value: "attractions", label: "Attractions" },
    ];

    return html\`
      <div class="admin-maps-import">
        <maps-search
          placeholder="Search for places in Rio de Janeiro..."
          @place-selected=\${this.handlePlaceSelected}
        ></maps-search>

        \${this.selectedPlace
          ? html\`
              <div class="selected-place">
                <h3 class="selected-place-title">
                  <uix-icon name="map-pin" size="20"></uix-icon>
                  \${this.selectedPlace.name}
                </h3>
                <p class="selected-place-address">\${this.selectedPlace.address}</p>
                <p class="selected-place-coords">
                  Lat: \${this.selectedPlace.lat.toFixed(6)},
                  Lng: \${this.selectedPlace.lng.toFixed(6)}
                </p>

                <div class="place-form">
                  <div class="form-field">
                    <label>Category</label>
                    <uix-select
                      .value=\${this.category}
                      .options=\${categories}
                      @change=\${(e) => (this.category = e.target.value)}
                    ></uix-select>
                  </div>

                  <div class="form-field">
                    <label>Description</label>
                    <uix-textarea
                      .value=\${this.description}
                      @input=\${(e) => (this.description = e.target.value)}
                      placeholder="Enter a description for this place..."
                      rows="3"
                    ></uix-textarea>
                  </div>

                  <div class="form-field">
                    <label>Image URL (optional)</label>
                    <uix-input
                      .value=\${this.image}
                      @input=\${(e) => (this.image = e.target.value)}
                      placeholder="https://example.com/image.jpg"
                    ></uix-input>
                  </div>
                </div>

                <div class="import-actions">
                  <uix-button
                    primary
                    @click=\${this.createPlace}
                    ?loading=\${this.saving}
                    ?disabled=\${this.saving}
                  >
                    <uix-icon name="plus" size="18"></uix-icon>
                    Create Place
                  </uix-button>
                </div>
              </div>
            \`
          : ""}
      </div>
    \`;
  },
});
`,mimeType:"text/javascript"},"/admin/instagram-plugin.js":{content:`/**
 * Instagram Plugin for meetup.rio Admin
 * Scrape Instagram profiles and create places
 */

import { registerPlugin } from "/$app/admin/plugins.js";
import { html } from "/npm/lit-html";

// Instagram profile selectors (2024-2025)
// Instagram uses React with minified classes - prefer attribute/structure selectors
export const INSTAGRAM_SELECTORS = {
  // Profile picture - most stable selector
  avatar: 'header img[alt*="profile picture"], img[alt*="\\'s profile picture"]',

  // Username from the page title meta tag (most reliable)
  metaTitle: 'meta[property="og:title"]',

  // Username from header - h2 is usually the username
  username: 'header section h2',

  // Verification badge - aria-label is stable
  isVerified: 'svg[aria-label="Verified"]',

  // External link in bio
  externalLink: 'header a[href*="l.instagram.com"]',

  // Stats - structure-based (fragile but common approach)
  statsSection: 'header section ul',
};

// Script to extract Instagram profile data (more reliable than selectors)
export const INSTAGRAM_SCRAPE_SCRIPT = \`
  (function() {
    const data = {
      username: null,
      fullName: null,
      bio: null,
      avatar: null,
      followers: null,
      following: null,
      posts: null,
      isVerified: false,
      externalLink: null,
      profileUrl: window.location.href
    };

    // Get username from URL (most reliable)
    const urlMatch = window.location.pathname.match(/^\\\\/([^\\\\/]+)\\\\/?/);
    data.username = urlMatch ? urlMatch[1] : null;

    // Get from meta tags (very reliable)
    const metaTitle = document.querySelector('meta[property="og:title"]');
    if (metaTitle) {
      const titleContent = metaTitle.content;
      // Format: "Full Name (@username) \u2022 Instagram photos and videos"
      const nameMatch = titleContent.match(/^([^(]+)\\\\s*\\\\(@/);
      if (nameMatch) {
        data.fullName = nameMatch[1].trim();
      }
    }

    const metaDesc = document.querySelector('meta[property="og:description"]');
    if (metaDesc) {
      // Format: "123 Followers, 45 Following, 67 Posts - See Instagram photos..."
      const descContent = metaDesc.content;
      const followersMatch = descContent.match(/([\\\\d,.]+[KMB]?)\\\\s*Followers/i);
      const followingMatch = descContent.match(/([\\\\d,.]+[KMB]?)\\\\s*Following/i);
      const postsMatch = descContent.match(/([\\\\d,.]+[KMB]?)\\\\s*Posts/i);

      if (followersMatch) data.followers = followersMatch[1];
      if (followingMatch) data.following = followingMatch[1];
      if (postsMatch) data.posts = postsMatch[1];
    }

    // Get avatar (profile picture)
    const avatarImg = document.querySelector('header img[alt*="profile picture"]')
      || document.querySelector('img[alt*="\\\\'s profile picture"]');
    if (avatarImg) {
      data.avatar = avatarImg.src;
    }

    // Check for verification badge
    data.isVerified = !!document.querySelector('svg[aria-label="Verified"]');

    // Get bio text - it's usually in a span inside the header section
    const headerSection = document.querySelector('header section');
    if (headerSection) {
      // Bio is usually in a div with -webkit-line-clamp style or specific structure
      const bioDiv = headerSection.querySelector('div > span[dir="auto"]');
      if (bioDiv) {
        data.bio = bioDiv.textContent.trim();
      }
    }

    // Get external link
    const extLink = document.querySelector('header a[href*="l.instagram.com"]');
    if (extLink) {
      data.externalLink = extLink.href;
    }

    return data;
  })()
\`;

registerPlugin("instagram", {
  actions: {
    places: [
      {
        label: "Import from Instagram",
        icon: "instagram",
        handler: (context) => context.openModal("instagram-import"),
      },
    ],
  },

  modals: {
    "instagram-import": {
      title: "Import from Instagram",
      component: ({ model }) => html\`
        <admin-instagram-import .model=\${model}></admin-instagram-import>
      \`,
    },
  },
});
`,mimeType:"text/javascript"},"/manifest.json":{content:`{
  "name": "meetup.rio",
  "short_name": "meetup.rio",
  "description": "Discover the best of Rio de Janeiro - Places, Events, and Things to Do",
  "start_url": "/",
  "display": "standalone",
  "background_color": "#fef3c7",
  "theme_color": "#facc15",
  "orientation": "portrait",
  "icons": [
    {
      "src": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik0yMCAxMGMwIDQuOTkzLTUuNTM5IDEwLjE5My03LjM5OSAxMS43OTlhMSAxIDAgMCAxLTEuMjAyIDBDOS41MzkgMjAuMTkzIDQgMTQuOTkzIDQgMTBhOCA4IDAgMCAxIDE2IDAiLz48Y2lyY2xlIGN4PSIxMiIgY3k9IjEwIiByPSIzIi8+PC9zdmc+",
      "sizes": "192x192",
      "type": "image/svg+xml",
      "purpose": "any maskable"
    },
    {
      "src": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik0yMCAxMGMwIDQuOTkzLTUuNTM5IDEwLjE5My03LjM5OSAxMS43OTlhMSAxIDAgMCAxLTEuMjAyIDBDOS41MzkgMjAuMTkzIDQgMTQuOTkzIDQgMTBhOCA4IDAgMCAxIDE2IDAiLz48Y2lyY2xlIGN4PSIxMiIgY3k9IjEwIiByPSIzIi8+PC9zdmc+",
      "sizes": "512x512",
      "type": "image/svg+xml",
      "purpose": "any maskable"
    }
  ],
  "categories": ["travel", "lifestyle"],
  "lang": "en",
  "dir": "ltr"
}
`,mimeType:"application/json"},"/admin/instagram-import.js":{content:`/**
 * Instagram Import Component for meetup.rio Admin
 * Scrape Instagram profiles and create places
 */

import {
  getExtensionBridge,
  isConnected,
  onConnectionChange,
} from "/$app/extension/extension-bridge.js";
import Theme from "/$app/theme/index.js";
import T from "/$app/types/index.js";
import $APP from "/$app.js";
import { html, nothing } from "/npm/lit-html";

Theme.loadCSS("/admin/instagram-import.css", true);

$APP.define("admin-instagram-import", {
  tag: "admin-instagram-import",

  properties: {
    model: T.string(),
    connected: T.boolean({ defaultValue: false }),
    instagramTabs: T.array({ defaultValue: [] }),
    selectedTab: T.object(),
    profileData: T.object(),
    scraping: T.boolean({ defaultValue: false }),
    saving: T.boolean({ defaultValue: false }),
    error: T.string({ defaultValue: "" }),
    // Place form fields
    category: T.string({ defaultValue: "nightlife" }),
    description: T.string({ defaultValue: "" }),
  },

  _unsubscribe: null,
  _hasFetched: false,

  connected() {
    // Check if already connected
    this.connected = isConnected();

    // Subscribe to connection changes
    this._unsubscribe = onConnectionChange((event) => {
      this.connected = event.type === "connected";
    });
  },

  disconnected() {
    if (this._unsubscribe) {
      this._unsubscribe();
    }
  },

  async findInstagramTabs() {
    const bridge = getExtensionBridge();
    if (!bridge) {
      this.error = "Not connected to extension";
      return;
    }

    this.error = "";
    try {
      const allTabs = await bridge.getTabs();
      console.log("[Instagram] Got tabs:", allTabs?.length);
      this.instagramTabs = (allTabs || []).filter((tab) =>
        tab.url?.includes("instagram.com"),
      );
      console.log("[Instagram] Instagram tabs:", this.instagramTabs.length);
      this._hasFetched = true;
    } catch (err) {
      console.error("Failed to get tabs:", err);
      this.error = \`Failed to get tabs: \${err.message}\`;
    }
  },

  async scrapeProfile() {
    const bridge = getExtensionBridge();
    if (!bridge || !this.selectedTab) return;

    this.scraping = true;
    this.error = "";
    this.profileData = null;

    try {
      // Get username from URL
      const username = this.extractUsernameFromUrl();
      if (!username) {
        this.error =
          "Could not extract username from URL. Make sure you're on an Instagram profile page.";
        this.scraping = false;
        return;
      }

      console.log("[Instagram] Fetching profile via API:", username);

      // Use direct API call (REST first, then GraphQL fallback)
      const result = await bridge.fetchInstagramProfile(
        this.selectedTab.id,
        username,
      );
      console.log("[Instagram] API result:", result);

      if (result?.success && result.user) {
        const user = result.user;
        this.profileData = {
          username: user.username || username,
          fullName: user.full_name || "",
          bio: user.biography || "",
          avatar:
            user.profile_pic_url || user.hd_profile_pic_url_info?.url || "",
          followers: user.follower_count?.toString() || "",
          following: user.following_count?.toString() || "",
          posts: user.media_count?.toString() || "",
          externalLink: user.external_url || "",
          isVerified: user.is_verified || false,
          profileUrl: this.selectedTab.url,
          source: result.source, // "rest" or "graphql"
        };

        // Pre-fill description with bio
        if (this.profileData.bio && !this.description) {
          this.description = this.profileData.bio;
        }

        console.log("[Instagram] Profile data extracted via", result.source);
      } else {
        // Fallback to DOM scraping if API fails
        console.log("[Instagram] API failed, trying DOM scraping...");
        const scrapeResult = await bridge.scrapeInstagram(this.selectedTab.id);

        if (scrapeResult) {
          this.profileData = {
            username: scrapeResult.username || username,
            fullName: scrapeResult.fullName || "",
            bio: scrapeResult.bio || "",
            avatar: scrapeResult.avatar || "",
            followers: scrapeResult.followers || "",
            following: scrapeResult.following || "",
            posts: scrapeResult.posts || "",
            externalLink: scrapeResult.externalLink || "",
            isVerified: scrapeResult.isVerified || false,
            profileUrl: this.selectedTab.url,
            source: "dom",
          };

          if (this.profileData.bio && !this.description) {
            this.description = this.profileData.bio;
          }
        } else {
          this.error =
            result?.error ||
            "Could not fetch profile. Make sure you're logged into Instagram.";
        }
      }
    } catch (err) {
      console.error("[Instagram] Fetch error:", err);
      this.error = \`Failed to fetch profile: \${err.message}\`;
    }

    this.scraping = false;
  },

  extractUsernameFromUrl() {
    if (!this.selectedTab?.url) return "";
    const match = this.selectedTab.url.match(/instagram\\.com\\/([^/?]+)/);
    return match ? match[1] : "";
  },

  async createPlace() {
    if (!this.profileData) return;

    this.saving = true;
    try {
      const name = this.profileData.fullName || this.profileData.username;
      const [error] = await $APP.Model.places.add({
        name,
        description:
          this.description ||
          this.profileData.bio ||
          \`Instagram: @\${this.profileData.username}\`,
        category: this.category,
        image:
          this.profileData.avatar ||
          \`https://picsum.photos/seed/\${encodeURIComponent(name)}/800/1200\`,
        instagram: this.profileData.username,
        website: this.profileData.externalLink || "",
        createdAt: new Date().toISOString(),
      });

      if (error) {
        this.error = \`Error creating place: \${error.message || "Unknown error"}\`;
        this.saving = false;
        return;
      }

      this.emit("close-modal");
      this.emit("refresh");
    } catch (err) {
      this.error = \`Error: \${err.message}\`;
    }
    this.saving = false;
  },

  renderNotConnected() {
    return html\`
      <div class="ig-not-connected">
        <uix-icon name="link-2" size="48" class="ig-icon-muted"></uix-icon>
        <h3>Extension Not Connected</h3>
        <p>
          Connect the browser extension first to scrape Instagram profiles.
        </p>
        <p class="ig-help-text">
          Go to <strong>Extension</strong> in the admin sidebar to connect.
        </p>
        <uix-button @click=\${() => $APP.Router.go("/admin/extension")}>
          <uix-icon name="puzzle" size="18"></uix-icon>
          Open Extension Settings
        </uix-button>
      </div>
    \`;
  },

  renderTabSelector() {
    return html\`
      <div class="ig-section">
        <h3 class="ig-section-title">
          <uix-icon name="layout" size="18"></uix-icon>
          Select Instagram Tab
        </h3>

        \${
          this.instagramTabs.length === 0
            ? html\`
              <div class="ig-empty">
                \${
                  this._hasFetched
                    ? html\`<p>No Instagram tabs found.</p>\`
                    : html\`<p>Click the button below to find Instagram tabs.</p>\`
                }
                <p class="ig-help-text">
                  Make sure you have an Instagram profile open in another tab.
                </p>
                <uix-button primary @click=\${this.findInstagramTabs}>
                  <uix-icon name="search" size="16"></uix-icon>
                  Find Instagram Tabs
                </uix-button>
              </div>
            \`
            : html\`
              <div class="ig-tabs-list">
                \${this.instagramTabs.map(
                  (tab) => html\`
                    <div
                      class="ig-tab-item \${
                        this.selectedTab?.id === tab.id ? "selected" : ""
                      }"
                      @click=\${() => {
                        this.selectedTab = tab;
                        this.profileData = null;
                      }}
                    >
                      <img
                        class="ig-tab-favicon"
                        src=\${tab.favIconUrl || ""}
                        alt=""
                      />
                      <div class="ig-tab-info">
                        <span class="ig-tab-title">\${tab.title}</span>
                        <span class="ig-tab-url">\${tab.url}</span>
                      </div>
                    </div>
                  \`,
                )}
              </div>
              <uix-button
                size="sm"
                class="ig-refresh-btn"
                @click=\${this.findInstagramTabs}
              >
                <uix-icon name="refresh-cw" size="16"></uix-icon>
                Refresh
              </uix-button>
            \`
        }
      </div>
    \`;
  },

  renderScrapeSection() {
    if (!this.selectedTab) return nothing;

    return html\`
      <div class="ig-section">
        <h3 class="ig-section-title">
          <uix-icon name="download" size="18"></uix-icon>
          Scrape Profile
        </h3>

        <p class="ig-selected-tab">
          Selected: <strong>\${this.selectedTab.title}</strong>
        </p>

        <uix-button
          primary
          @click=\${this.scrapeProfile}
          ?loading=\${this.scraping}
          ?disabled=\${this.scraping}
        >
          <uix-icon name="download" size="18"></uix-icon>
          Scrape Profile Data
        </uix-button>
      </div>
    \`;
  },

  renderProfilePreview() {
    if (!this.profileData) return nothing;

    const categories = [
      { value: "beaches", label: "Beaches" },
      { value: "nightlife", label: "Nightlife" },
      { value: "food", label: "Food & Drinks" },
      { value: "attractions", label: "Attractions" },
    ];

    return html\`
      <div class="ig-section ig-profile-preview">
        <h3 class="ig-section-title">
          <uix-icon name="user" size="18"></uix-icon>
          Profile Data
        </h3>

        <div class="ig-profile-card">
          \${
            this.profileData.avatar
              ? html\`<img
                class="ig-profile-avatar"
                src=\${this.profileData.avatar}
                alt=""
              />\`
              : nothing
          }
          <div class="ig-profile-info">
            <div class="ig-profile-name">
              \${this.profileData.fullName || this.profileData.username}
              \${
                this.profileData.isVerified
                  ? html\`<uix-icon
                    name="check-circle"
                    size="16"
                    class="ig-verified"
                  ></uix-icon>\`
                  : nothing
              }
            </div>
            <div class="ig-profile-username">@\${this.profileData.username}</div>
            <div class="ig-profile-stats">
              \${
                this.profileData.posts
                  ? html\`<span>\${this.profileData.posts} posts</span>\`
                  : nothing
              }
              \${
                this.profileData.followers
                  ? html\`<span>\${this.profileData.followers} followers</span>\`
                  : nothing
              }
              \${
                this.profileData.following
                  ? html\`<span>\${this.profileData.following} following</span>\`
                  : nothing
              }
            </div>
          </div>
        </div>

        \${
          this.profileData.bio
            ? html\`<p class="ig-profile-bio">\${this.profileData.bio}</p>\`
            : nothing
        }
        \${
          this.profileData.externalLink
            ? html\`<p class="ig-profile-link">
              <uix-icon name="external-link" size="14"></uix-icon>
              <a href=\${this.profileData.externalLink} target="_blank">
                \${this.profileData.externalLink}
              </a>
            </p>\`
            : nothing
        }

        <div class="ig-form">
          <div class="ig-form-field">
            <label>Category</label>
            <uix-select
              .value=\${this.category}
              .options=\${categories}
              @change=\${(e) => (this.category = e.target.value)}
            ></uix-select>
          </div>

          <div class="ig-form-field">
            <label>Description</label>
            <uix-textarea
              .value=\${this.description}
              @input=\${(e) => (this.description = e.target.value)}
              placeholder="Enter a description..."
              rows="3"
            ></uix-textarea>
          </div>
        </div>

        <div class="ig-actions">
          <uix-button
            primary
            @click=\${this.createPlace}
            ?loading=\${this.saving}
            ?disabled=\${this.saving}
          >
            <uix-icon name="plus" size="18"></uix-icon>
            Create Place
          </uix-button>
        </div>
      </div>
    \`;
  },

  render() {
    return html\`
      <div class="admin-instagram-import">
        \${
          this.error ? html\`<div class="ig-error">\${this.error}</div>\` : nothing
        }
        \${
          !this.connected
            ? this.renderNotConnected()
            : html\`
              \${this.renderTabSelector()} \${this.renderScrapeSection()}
              \${this.renderProfilePreview()}
            \`
        }
      </div>
    \`;
  },
});
`,mimeType:"text/javascript"},"/$app/auth/frontend.js":{content:`/**
 * @file Frontend Auth Module
 * @description Handles user authentication state, session persistence, and cross-tab sync
 */

/**
 * AuthSession - Manages auth token persistence in localStorage
 */
export class AuthSession {
  static STORAGE_KEY = "bootstrapp_auth";
  static TOKEN_KEY = "bootstrapp_token";

  /**
   * Get stored auth session
   * @returns {{ token: string, user: object, timestamp: number } | null}
   */
  static get() {
    try {
      const data = localStorage.getItem(AuthSession.STORAGE_KEY);
      return data ? JSON.parse(data) : null;
    } catch (e) {
      console.error("AuthSession: Failed to parse stored session", e);
      return null;
    }
  }

  /**
   * Store auth session
   * @param {string} token - Auth token
   * @param {object} user - User object
   * @param {object} [$APP] - App instance for cross-tab sync
   */
  static set(token, user, $APP = null) {
    const data = { token, user, timestamp: Date.now() };
    localStorage.setItem(AuthSession.STORAGE_KEY, JSON.stringify(data));
    localStorage.setItem(AuthSession.TOKEN_KEY, token);

    // Broadcast to other tabs via Service Worker
    if ($APP?.SW) {
      $APP.SW.postMessage({
        type: "SW:BROADCAST_AUTH_STATE",
        payload: { token, user, action: "login" },
      });
    }
  }

  /**
   * Clear stored auth session
   * @param {object} [$APP] - App instance for cross-tab sync
   */
  static clear($APP = null) {
    localStorage.removeItem(AuthSession.STORAGE_KEY);
    localStorage.removeItem(AuthSession.TOKEN_KEY);

    if ($APP?.SW) {
      $APP.SW.postMessage({
        type: "SW:BROADCAST_AUTH_STATE",
        payload: { action: "logout" },
      });
    }
  }

  /**
   * Get stored token
   * @returns {string | null}
   */
  static getToken() {
    return localStorage.getItem(AuthSession.TOKEN_KEY);
  }

  /**
   * Check if stored token is valid (not expired)
   * @returns {boolean}
   */
  static isValid() {
    const data = AuthSession.get();
    if (!data || !data.token) return false;

    // Tokens are JWTs - check expiration
    try {
      const payload = JSON.parse(atob(data.token.split(".")[1]));
      return payload.exp * 1000 > Date.now();
    } catch (e) {
      return false;
    }
  }

  /**
   * Get token expiration time in ms
   * @returns {number | null}
   */
  static getExpiration() {
    const data = AuthSession.get();
    if (!data || !data.token) return null;

    try {
      const payload = JSON.parse(atob(data.token.split(".")[1]));
      return payload.exp * 1000;
    } catch (e) {
      return null;
    }
  }
}

/**
 * Create Auth module instance
 * @param {object} $APP - App instance with Backend, SW, events, Database
 * @returns {object} Auth module
 */
export function createAuth($APP) {
  const Auth = {
    // State
    user: null,
    token: null,
    _refreshTimer: null,
    _$APP: $APP,

    /**
     * Check if user is authenticated
     */
    get isAuthenticated() {
      return !!this.token && !!this.user;
    },

    /**
     * Check if user is a guest (not authenticated)
     */
    get isGuest() {
      return !this.isAuthenticated;
    },

    // ============================================================
    // Guest ID Management
    // ============================================================

    /**
     * Storage key for guest ID
     * @private
     */
    _GUEST_ID_KEY: "bootstrapp_guest_id",

    /**
     * Get or create a persistent guest ID
     * Used to track guest interactions before registration
     * @returns {string} Guest ID in format "guest_{timestamp}_{random}"
     */
    getGuestId() {
      let guestId = localStorage.getItem(this._GUEST_ID_KEY);
      if (!guestId) {
        guestId = \`guest_\${Date.now()}_\${Math.random().toString(36).substr(2, 9)}\`;
        localStorage.setItem(this._GUEST_ID_KEY, guestId);
      }
      return guestId;
    },

    /**
     * Clear the stored guest ID (called after successful registration)
     */
    clearGuestId() {
      localStorage.removeItem(this._GUEST_ID_KEY);
    },

    /**
     * Get the current user ID - either authenticated user ID or guest ID
     * This is the primary way to get a user identifier for data operations
     * @returns {string} User ID or guest ID
     */
    get currentUserId() {
      return this.isAuthenticated ? this.user.id : this.getGuestId();
    },

    /**
     * Check if a given user ID is a guest ID
     * @param {string} userId - User ID to check
     * @returns {boolean} True if the ID is a guest ID
     */
    isGuestId(userId) {
      return typeof userId === "string" && userId.startsWith("guest_");
    },

    /**
     * Login with email and password
     * @param {string} email
     * @param {string} password
     * @returns {Promise<{ success: boolean, user?: object, error?: string }>}
     */
    async login(email, password) {
      try {
        const result = await $APP.Backend.request("AUTH:LOGIN", {
          email,
          password,
        });

        if (result.error) {
          return { success: false, error: result.error };
        }

        if (result.token && result.user) {
          this.token = result.token;
          this.user = result.user;
          AuthSession.set(result.token, result.user, $APP);
          this._startRefreshTimer();

          // Notify the database adapter of user login (triggers sync)
          if ($APP.Database?.handleUserLogin) {
            await $APP.Database.handleUserLogin(result.user.id);
          }

          $APP.events.emit("AUTH:LOGGED_IN", { user: result.user });
          return { success: true, user: result.user };
        }

        return { success: false, error: "Invalid response from server" };
      } catch (error) {
        console.error("Auth.login error:", error);
        return { success: false, error: error.message };
      }
    },

    /**
     * Register a new user
     * @param {object} data - { email, password, passwordConfirm?, name, ...extraData }
     * @returns {Promise<{ success: boolean, user?: object, error?: string }>}
     */
    async register(data) {
      try {
        const result = await $APP.Backend.request("AUTH:REGISTER", data);

        if (result.error) {
          return { success: false, error: result.error, data: result.data };
        }

        if (result.token && result.user) {
          this.token = result.token;
          this.user = result.user;
          AuthSession.set(result.token, result.user, $APP);
          this._startRefreshTimer();
          $APP.events.emit("AUTH:REGISTERED", { user: result.user });
          return { success: true, user: result.user };
        }

        return { success: false, error: "Invalid response from server" };
      } catch (error) {
        console.error("Auth.register error:", error);
        return { success: false, error: error.message };
      }
    },

    /**
     * Start OAuth login flow
     * @param {string} provider - 'google' or 'apple'
     * @returns {Promise<{ success: boolean, error?: string }>}
     */
    async loginWithOAuth(provider) {
      try {
        const redirectUrl = \`\${window.location.origin}/auth/callback\`;
        const result = await $APP.Backend.request("AUTH:OAUTH_START", {
          provider,
          redirectUrl,
        });

        if (result.error) {
          return { success: false, error: result.error };
        }

        if (result.authUrl && result.codeVerifier) {
          // Store OAuth state for callback
          sessionStorage.setItem("oauth_code_verifier", result.codeVerifier);
          sessionStorage.setItem("oauth_provider", provider);
          sessionStorage.setItem("oauth_redirect", window.location.href);
          sessionStorage.setItem("oauth_state", result.state || "");

          // Redirect to OAuth provider
          window.location.href = result.authUrl;
          return { success: true, redirecting: true };
        }

        return { success: false, error: "Invalid OAuth response" };
      } catch (error) {
        console.error("Auth.loginWithOAuth error:", error);
        return { success: false, error: error.message };
      }
    },

    /**
     * Complete OAuth login after redirect
     * @param {string} code - Authorization code from OAuth provider
     * @param {string} state - State parameter for validation
     * @returns {Promise<{ success: boolean, user?: object, error?: string }>}
     */
    async completeOAuth(code, state) {
      try {
        const codeVerifier = sessionStorage.getItem("oauth_code_verifier");
        const provider = sessionStorage.getItem("oauth_provider");
        const storedState = sessionStorage.getItem("oauth_state");
        const redirectUrl = \`\${window.location.origin}/auth/callback\`;

        // Clear OAuth session storage
        sessionStorage.removeItem("oauth_code_verifier");
        sessionStorage.removeItem("oauth_provider");
        sessionStorage.removeItem("oauth_state");

        if (!codeVerifier || !provider) {
          return { success: false, error: "OAuth session expired" };
        }

        // Validate state if provided
        if (storedState && state && storedState !== state) {
          return { success: false, error: "OAuth state mismatch" };
        }

        const result = await $APP.Backend.request("AUTH:OAUTH_COMPLETE", {
          provider,
          code,
          codeVerifier,
          redirectUrl,
        });

        if (result.error) {
          return { success: false, error: result.error };
        }

        if (result.token && result.user) {
          this.token = result.token;
          this.user = result.user;
          AuthSession.set(result.token, result.user, $APP);
          this._startRefreshTimer();
          $APP.events.emit("AUTH:OAUTH_SUCCESS", {
            user: result.user,
            provider,
          });

          // Redirect back to original page
          const returnUrl = sessionStorage.getItem("oauth_redirect") || "/";
          sessionStorage.removeItem("oauth_redirect");

          // Small delay to let events process
          setTimeout(() => {
            window.location.href = returnUrl;
          }, 100);

          return { success: true, user: result.user };
        }

        return { success: false, error: "Invalid OAuth response" };
      } catch (error) {
        console.error("Auth.completeOAuth error:", error);
        return { success: false, error: error.message };
      }
    },

    /**
     * Logout current user
     */
    async logout() {
      try {
        await $APP.Backend.request("AUTH:LOGOUT");
      } catch (error) {
        console.warn("Auth.logout backend error (continuing):", error);
      }

      this.token = null;
      this.user = null;
      this._stopRefreshTimer();
      AuthSession.clear($APP);

      // Notify the database adapter to switch to guest mode
      if ($APP.Database?.handleUserLogout) {
        $APP.Database.handleUserLogout(this.getGuestId());
      }

      $APP.events.emit("AUTH:LOGGED_OUT");
    },

    /**
     * Refresh the auth token
     * @returns {Promise<boolean>}
     */
    async refreshToken() {
      if (!this.token) return false;

      try {
        const result = await $APP.Backend.request("AUTH:REFRESH_TOKEN", {
          token: this.token,
        });

        if (result.token && result.user) {
          this.token = result.token;
          this.user = result.user;
          AuthSession.set(result.token, result.user, $APP);
          return true;
        }

        return false;
      } catch (error) {
        console.error("Auth.refreshToken error:", error);
        // Token refresh failed - log out
        await this.logout();
        return false;
      }
    },

    /**
     * Restore auth session from localStorage
     * @returns {Promise<boolean>}
     */
    async restore() {
      const session = AuthSession.get();

      if (!session || !session.token) {
        this.user = null;
        this.token = null;
        return false;
      }

      // Check if token is still valid
      if (!AuthSession.isValid()) {
        // Token expired - try to refresh
        this.token = session.token;
        const refreshed = await this.refreshToken();
        if (!refreshed) {
          AuthSession.clear($APP);
          return false;
        }
      } else {
        // Valid token - restore session
        this.token = session.token;
        this.user = session.user;
        this._startRefreshTimer();
      }

      $APP.events.emit("AUTH:RESTORED", { user: this.user });
      return true;
    },

    /**
     * Update current user profile
     * @param {object} data - Fields to update
     * @returns {Promise<{ success: boolean, user?: object, error?: string }>}
     */
    async updateUser(data) {
      if (!this.isAuthenticated) {
        return { success: false, error: "Not authenticated" };
      }

      try {
        const result = await $APP.Backend.request("AUTH:UPDATE_USER", data);

        if (result.error) {
          return { success: false, error: result.error };
        }

        if (result.user) {
          this.user = result.user;
          AuthSession.set(this.token, result.user, $APP);
          $APP.events.emit("AUTH:USER_UPDATED", { user: result.user });
          return { success: true, user: result.user };
        }

        return { success: false, error: "Invalid response" };
      } catch (error) {
        return { success: false, error: error.message };
      }
    },

    /**
     * Convert guest to registered user
     * Emits AUTH:GUEST_CONVERTED event for app-layer migration handling
     * @param {object} guestData - Guest's current data/preferences
     * @param {object} registrationData - Registration data (email, password, name)
     * @returns {Promise<{ success: boolean, user?: object, error?: string }>}
     */
    async convertGuest(guestData, registrationData) {
      const guestId = this.getGuestId();

      // Merge guest preferences with registration data
      const mergedData = {
        ...registrationData,
        ...guestData,
      };

      // Register the new user
      const result = await this.register(mergedData);

      if (result.success) {
        // Emit event for app-layer to handle migration
        // Apps can listen for this and call their own migration logic
        $APP.events.emit("AUTH:GUEST_CONVERTED", {
          guestId,
          newUserId: result.user.id,
          user: result.user,
        });

        // Clear the guest ID after successful registration
        this.clearGuestId();
      }

      return result;
    },

    /**
     * Start token refresh timer
     * @private
     */
    _startRefreshTimer() {
      this._stopRefreshTimer();

      const checkAndRefresh = async () => {
        const expiration = AuthSession.getExpiration();
        if (!expiration) return;

        const timeUntilExpiry = expiration - Date.now();

        // Refresh if less than 15 minutes remaining
        if (timeUntilExpiry < 15 * 60 * 1000) {
          await this.refreshToken();
        }
      };

      // Check every 10 minutes
      this._refreshTimer = setInterval(checkAndRefresh, 10 * 60 * 1000);

      // Also check immediately
      checkAndRefresh();
    },

    /**
     * Stop token refresh timer
     * @private
     */
    _stopRefreshTimer() {
      if (this._refreshTimer) {
        clearInterval(this._refreshTimer);
        this._refreshTimer = null;
      }
    },
  };

  return Auth;
}

/**
 * Initialize Auth module on frontend
 * @param {object} $APP - App instance
 * @returns {object} Auth module
 */
export function initAuthFrontend($APP) {
  const Auth = createAuth($APP);

  // Register Auth module
  $APP.addModule({ name: "Auth", base: Auth });

  // Listen for cross-tab auth state changes
  $APP.swEvents?.set("SW:AUTH_STATE_UPDATE", ({ payload }) => {
    const { action, token, user } = payload;

    if (action === "logout") {
      Auth.token = null;
      Auth.user = null;
      Auth._stopRefreshTimer();
      $APP.events.emit("AUTH:LOGGED_OUT");
    } else if (action === "login" && token && user) {
      Auth.token = token;
      Auth.user = user;
      Auth._startRefreshTimer();
      $APP.events.emit("AUTH:LOGGED_IN", { user });
    }
  });

  return Auth;
}

export default { AuthSession, createAuth, initAuthFrontend };
`,mimeType:"text/javascript"},"/$app/i18n/base.js":{content:`/**
 * Core i18n Engine
 * Provides translation management with lazy loading support
 */

export class I18n {
  constructor() {
    this.translations = {}; // { locale: { key: value } }
    this.currentLocale = "en";
    this.fallbackLocale = "en";
    this.loadedLocales = new Set();
    this.localeLoaders = {}; // { locale: () => Promise<translations> }
  }

  /**
   * Register a locale loader function for lazy loading
   * @param {string} locale - Locale code (e.g., 'en', 'pt')
   * @param {Function} loader - Function that returns Promise<translations>
   */
  registerLocale(locale, loader) {
    this.localeLoaders[locale] = loader;
  }

  /**
   * Add translations for a locale (used by modules to contribute translations)
   * @param {string} locale - Locale code
   * @param {Object} translations - Translation object
   */
  addTranslations(locale, translations) {
    // Skip if translations is empty, null, or undefined
    if (
      !translations ||
      (typeof translations === "object" &&
        Object.keys(translations).length === 0)
    ) {
      return;
    }

    if (!this.translations[locale]) {
      this.translations[locale] = {};
    }
    this.translations[locale] = this.deepMerge(
      this.translations[locale],
      translations,
    );
    this.loadedLocales.add(locale); // Only mark as loaded if we actually added translations
  }

  /**
   * Deep merge two objects
   */
  deepMerge(target, source) {
    const result = { ...target };
    for (const key in source) {
      if (
        source[key] &&
        typeof source[key] === "object" &&
        !Array.isArray(source[key])
      ) {
        result[key] = this.deepMerge(result[key] || {}, source[key]);
      } else {
        result[key] = source[key];
      }
    }
    return result;
  }

  /**
   * Load a locale (lazy loading if loader is registered)
   * @param {string} locale - Locale code
   */
  async loadLocale(locale) {
    // Check if locale has actual translations, not just marked as loaded
    const hasTranslations =
      this.translations[locale] &&
      Object.keys(this.translations[locale]).length > 0;

    if (this.loadedLocales.has(locale) && hasTranslations) {
      return; // Already loaded with actual content
    }

    if (this.localeLoaders[locale]) {
      try {
        const translations = await this.localeLoaders[locale]();
        this.addTranslations(locale, translations.default || translations);
      } catch (error) {
        console.warn(\`Failed to load locale "\${locale}":\`, error);
      }
    }
  }

  /**
   * Set current language
   * @param {string} locale - Locale code
   */
  async setLanguage(locale) {
    await this.loadLocale(locale);
    this.currentLocale = locale;

    // Emit event for reactive updates
    if (typeof $APP !== "undefined" && $APP.events) {
      $APP.events.emit("i18n:language-changed", { locale });
    }

    return locale;
  }

  /**
   * Get current language
   */
  getLanguage() {
    return this.currentLocale;
  }

  /**
   * Get available locales (registered loaders + loaded translations)
   */
  getAvailableLocales() {
    const locales = new Set([
      ...Object.keys(this.localeLoaders),
      ...Object.keys(this.translations),
    ]);
    return Array.from(locales);
  }

  /**
   * Get value from nested object using dot notation
   * @param {Object} obj - Object to search
   * @param {string} path - Dot-separated path (e.g., 'welcome.title')
   */
  getNestedValue(obj, path) {
    return path.split(".").reduce((current, key) => current?.[key], obj);
  }

  /**
   * Get plural category for a number (zero, one, two, few, many, other)
   * @param {number} count - The number to get plural category for
   * @returns {string} - Plural category (zero, one, other, etc.)
   */
  getPluralCategory(count) {
    try {
      const pluralRules = new Intl.PluralRules(this.currentLocale);
      const category = pluralRules.select(count);
      return category;
    } catch (error) {
      // Fallback to simple English rules
      if (count === 0) return "zero";
      if (count === 1) return "one";
      return "other";
    }
  }

  /**
   * Check if an object is a plural form object
   * @param {*} obj - Object to check
   * @returns {boolean}
   */
  isPluralObject(obj) {
    if (!obj || typeof obj !== "object" || Array.isArray(obj)) return false;
    // Check if it has plural keys like 'one', 'other', 'zero', 'few', 'many'
    const pluralKeys = ["zero", "one", "two", "few", "many", "other"];
    const keys = Object.keys(obj);
    return keys.some((key) => pluralKeys.includes(key));
  }

  /**
   * Select plural form from plural object
   * @param {Object} pluralObj - Object with plural forms
   * @param {number} count - Number to select plural for
   * @returns {string}
   */
  selectPlural(pluralObj, count) {
    const category = this.getPluralCategory(count);

    // Try exact match first
    if (pluralObj[category]) {
      return pluralObj[category];
    }

    // Fallback chain: category -> other -> first available
    return pluralObj.other || pluralObj[Object.keys(pluralObj)[0]] || "";
  }

  /**
   * Format a number according to locale
   * @param {number} number - Number to format
   * @param {Object} options - Intl.NumberFormat options
   * @returns {string}
   */
  formatNumber(number, options = {}) {
    try {
      return new Intl.NumberFormat(this.currentLocale, {
        style: options.style || "decimal",
        minimumFractionDigits: options.minimumFractionDigits,
        maximumFractionDigits: options.maximumFractionDigits,
        currency: options.currency,
        ...options,
      }).format(number);
    } catch (error) {
      console.warn("Number formatting failed:", error);
      return String(number);
    }
  }

  /**
   * Format a date according to locale
   * @param {Date|string|number} date - Date to format
   * @param {Object} options - Intl.DateTimeFormat options
   * @returns {string}
   */
  formatDate(date, options = {}) {
    try {
      return new Intl.DateTimeFormat(this.currentLocale, {
        dateStyle: options.dateStyle || "medium",
        timeStyle: options.timeStyle,
        ...options,
      }).format(new Date(date));
    } catch (error) {
      console.warn("Date formatting failed:", error);
      return String(date);
    }
  }

  /**
   * Format a relative date (today, yesterday, X days ago)
   * @param {Date|string|number} date - Date to format
   * @returns {string}
   */
  formatRelativeDate(date) {
    const now = new Date();
    const target = new Date(date);

    // Reset time to midnight for day comparison
    const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
    const targetDay = new Date(
      target.getFullYear(),
      target.getMonth(),
      target.getDate(),
    );

    const diffTime = targetDay - today;
    const diffDays = Math.round(diffTime / (1000 * 60 * 60 * 24));

    // Handle special cases with translations
    if (diffDays === 0) {
      return this.t("relative.today") || "today";
    } else if (diffDays === -1) {
      return this.t("relative.yesterday") || "yesterday";
    } else if (diffDays === 1) {
      return this.t("relative.tomorrow") || "tomorrow";
    } else if (diffDays < 0) {
      // Use Intl.RelativeTimeFormat if available
      try {
        const rtf = new Intl.RelativeTimeFormat(this.currentLocale, {
          numeric: "auto",
        });
        return rtf.format(diffDays, "day");
      } catch (error) {
        return (
          this.t("relative.daysAgo", { n: Math.abs(diffDays) }) ||
          \`\${Math.abs(diffDays)} days ago\`
        );
      }
    } else {
      try {
        const rtf = new Intl.RelativeTimeFormat(this.currentLocale, {
          numeric: "auto",
        });
        return rtf.format(diffDays, "day");
      } catch (error) {
        return (
          this.t("relative.inDays", { n: diffDays }) || \`in \${diffDays} days\`
        );
      }
    }
  }

  /**
   * Interpolate parameters in translation string
   * @param {string} str - Translation string with {param} placeholders
   * @param {Object} params - Parameters to interpolate
   */
  interpolate(str, params = {}) {
    if (!str || typeof str !== "string") return str;

    return str.replace(/\\{(\\w+)\\}/g, (match, key) => {
      return params[key] !== undefined ? params[key] : match;
    });
  }

  /**
   * Translate a key (with pluralization support)
   * @param {string} key - Translation key (dot-separated)
   * @param {Object} params - Parameters for interpolation (use 'n' or 'count' for plurals)
   * @returns {string}
   */
  t(key, params = {}) {
    if (!key) return "";

    // Try current locale
    let translation = this.getNestedValue(
      this.translations[this.currentLocale],
      key,
    );

    // Fallback to fallback locale
    if (
      translation === undefined &&
      this.currentLocale !== this.fallbackLocale
    ) {
      translation = this.getNestedValue(
        this.translations[this.fallbackLocale],
        key,
      );
    }

    // If still not found, return the key
    if (translation === undefined) {
      console.warn(
        \`Translation not found for key "\${key}" in locale "\${this.currentLocale}"\`,
      );
      return key;
    }

    // Check if translation is a plural object
    if (this.isPluralObject(translation)) {
      const count = params.n !== undefined ? params.n : params.count;
      if (count === undefined) {
        console.warn(
          \`Plural translation "\${key}" requires 'n' or 'count' parameter\`,
        );
        return key;
      }
      translation = this.selectPlural(translation, count);
    }

    // Handle nested objects (return key if not a string)
    if (typeof translation !== "string") {
      console.warn(\`Translation for key "\${key}" is not a string\`);
      return key;
    }

    // Interpolate parameters
    return this.interpolate(translation, params);
  }
}

export default I18n;
`,mimeType:"text/javascript"},"/$app/i18n/view-plugin.js":{content:`/**
 * i18n View Plugin
 * Adds component-level i18n support to View components
 *
 * Features:
 * - Extracts inline i18n from component definitions (serves as English default)
 * - Auto-namespaces translations by component tag name
 * - Injects helper methods: $t(), $n(), $d(), $r()
 * - Auto-updates components when language changes
 */

export default {
  name: "i18n",

  /**
   * Called when component is registered via $APP.define()
   * Extracts inline i18n and registers as English translations
   */
  init: ({ component, definition, tag }) => {
    // Extract inline i18n (this IS the English/default translation)
    if (definition.i18n && typeof definition.i18n === "object") {
      // Register under component tag name namespace
      const translations = { [tag]: definition.i18n };

      // Add to English locale (inline i18n is the source of truth for English)
      if (typeof $APP !== "undefined" && $APP.i18n) {
        $APP.i18n.addTranslations("en", translations);
      }
    }

    // Inject helper methods into component prototype

    /**
     * Translate a key with auto-namespacing
     * @param {string} key - Translation key (auto-prefixed with component name)
     * @param {Object} params - Parameters for interpolation/pluralization
     * @example
     * this.$t('submit')  // \u2192 'my-component.submit'
     * this.$t('count', { n: 5 })  // \u2192 Pluralized translation
     */
    component.prototype.$t = function (key, params) {
      const componentName = this.tagName.toLowerCase();
      return $APP.i18n.t(\`\${componentName}.\${key}\`, params);
    };

    /**
     * Format a number with current locale
     * @param {number} number - Number to format
     * @param {Object} options - Intl.NumberFormat options
     */
    component.prototype.$n = (number, options) => $APP.i18n.n(number, options);

    /**
     * Format a date with current locale
     * @param {Date|string|number} date - Date to format
     * @param {Object} options - Intl.DateTimeFormat options
     */
    component.prototype.$d = (date, options) => $APP.i18n.d(date, options);

    /**
     * Format a relative date (today, yesterday, X days ago)
     * @param {Date|string|number} date - Date to format
     */
    component.prototype.$r = (date) => $APP.i18n.r(date);
  },

  /**
   * Component lifecycle events
   */
  events: {
    /**
     * Called when component instance connects to DOM
     * Sets up auto-update on language change
     */
    connected: function () {
      // Create handler that triggers re-render on language change
      this._i18nUpdateHandler = () => {
        this.requestUpdate();
      };

      // Listen to language change events
      if (typeof $APP !== "undefined" && $APP.events) {
        $APP.events.on("i18n:language-changed", this._i18nUpdateHandler);
      }
    },

    /**
     * Called when component instance disconnects from DOM
     * Cleans up event listeners
     */
    disconnected: function () {
      // Remove language change listener
      if (
        this._i18nUpdateHandler &&
        typeof $APP !== "undefined" &&
        $APP.events
      ) {
        $APP.events.off("i18n:language-changed", this._i18nUpdateHandler);
        this._i18nUpdateHandler = null;
      }
    },
  },
};
`,mimeType:"text/javascript"},"/$app/admin/plugins.js":{content:`/**
 * @bootstrapp/admin - Plugin System
 * Simple function-based plugin registry for admin extensibility
 */

// Plugin registry using closures
const plugins = new Map();

/**
 * Register an admin plugin
 * @param {string} name - Unique plugin name
 * @param {Object} config - Plugin configuration
 * @param {Object} config.actions - Model-specific actions { modelName: [{ label, icon, handler }] }
 * @param {Object} config.modals - Custom modals { name: { component } }
 * @param {Object} config.fieldTypes - Custom field type renderers
 */
export const registerPlugin = (name, config) => {
  plugins.set(name, { name, ...config });
  console.log({ plugins });
};

/**
 * Get all registered plugins
 * @returns {Array} Array of plugin configs
 */
export const getPlugins = () => [...plugins.values()];

/**
 * Get custom actions for a specific model
 * @param {string} model - Model name
 * @returns {Array} Array of action configs
 */
export const getModelActions = (model) =>
  getPlugins()
    .filter((p) => p.actions?.[model])
    .flatMap((p) => p.actions[model]);

/**
 * Get all custom modals from plugins
 * @returns {Object} Merged modals object
 */
export const getPluginModals = () =>
  getPlugins().reduce((acc, p) => ({ ...acc, ...p.modals }), {});

/**
 * Get all custom field types from plugins
 * @returns {Object} Merged field types object
 */
export const getFieldTypes = () =>
  getPlugins().reduce((acc, p) => ({ ...acc, ...p.fieldTypes }), {});

/**
 * Get all sidebar items from plugins
 * @returns {Array} Array of sidebar item configs
 */
export const getSidebarItems = () =>
  getPlugins()
    .filter((p) => p.sidebar)
    .flatMap((p) => p.sidebar);

/**
 * Get all routes from plugins
 * @returns {Object} Merged routes object
 */
export const getPluginRoutes = () =>
  getPlugins().reduce((acc, p) => ({ ...acc, ...p.routes }), {});
`,mimeType:"text/javascript"},"/$app/theme/plugin.js":{content:`/**
 * Theme Admin Plugin
 * Registers the theme showcase/generator in the admin sidebar
 */
import { registerPlugin } from "/$app/admin/plugins.js";
import { html } from "/npm/lit-html";

registerPlugin("theme", {
  sidebar: [
    {
      label: "Theme",
      icon: "palette",
      href: "/admin/theme",
    },
  ],
  routes: {
    "/admin/theme": {
      name: "admin-theme",
      component: () => html\`<uix-showcase></uix-showcase>\`,
      title: "Admin - Theme",
      template: "admin-layout",
    },
  },
});
`,mimeType:"text/javascript"},"/$app/bundler/index.js":{content:"export default {}"},"/$app/bundler/plugin.js":{content:`/**
 * Bundler Admin Plugin
 * Registers the bundler/release manager in the admin sidebar
 */
import { registerPlugin } from "/$app/admin/plugins.js";
import { html } from "/npm/lit-html";

registerPlugin("bundler", {
  sidebar: [
    {
      label: "Bundler",
      icon: "package",
      href: "/admin/bundler",
    },
  ],
  routes: {
    "/admin/bundler": {
      name: "admin-bundler",
      component: () => html\`<bundler-ui></bundler-ui>\`,
      title: "Admin - Bundler",
      template: "admin-layout",
    },
  },
});
`,mimeType:"text/javascript"},"/$app/extension/admin/plugin.js":{content:`/**
 * Extension Admin Plugin
 * Registers the browser extension manager in the admin sidebar
 */
import { registerPlugin } from "/$app/admin/plugins.js";
import $APP from "/$app.js";
import { html } from "/npm/lit-html";

$APP.addModule({ name: "extension", path: "/$app/extension/admin" });
registerPlugin("extension", {
  sidebar: [
    {
      label: "Extension",
      icon: "puzzle",
      href: "/admin/extension",
    },
  ],
  actions: {
    _global: [
      {
        label: "Browser Extension",
        icon: "puzzle",
        handler: (context) => context.openModal("extension-manager"),
      },
    ],
  },

  modals: {
    "extension-manager": {
      title: "Browser Extension",
      component: () => html\`<extension-manager></extension-manager>\`,
    },
  },

  routes: {
    "/admin/extension": {
      name: "admin-extension",
      component: () => html\`<extension-manager></extension-manager>\`,
      title: "Admin - Extension",
      template: "admin-layout",
    },
  },
});
`,mimeType:"text/javascript"},"/$app/uix/index.js":{content:`export default {
  name: "uix",
  path: "/$app",
  root: true,
  i18n: {
    pt: () => import("./locales/pt.js"),
  },
  components: {
    navigation: [
      "accordion",
      "breadcrumbs",
      "menu",
      "navbar",
      "nav-item",
      "pagination",
      "sidebar",
      "tabs",
      "tree",
      "tree-item",
      "wizard",
    ],
    overlay: [
      "alert-dialog",
      "drawer",
      "dropdown",
      "modal",
      "overlay",
      "popover",
      "tooltip",
      "popover-controller",
    ],
    display: [
      "avatar",
      "badge",
      "link",
      "button",
      "calendar",
      "circle",
      "editable",
      "heading",
      "icon",
      "image",
      "link",
      "list",
      "list-item",
      "markdown",
      "media",
      "pattern",
      "stat",
      "table",
      "data-table",
      "tag",
      "text",
    ],
    layout: [
      "card",
      "container",
      "divider",
      "flex",
      "grid",
      "page",
      "panel",
      "section",
      "split-pane",
    ],
    app: ["app-container", "app-header", "bottom-nav", "title-bar"],
    page: [
      "cta-section",
      "faq-section",
      "feature-grid",
      "footer",
      "hero-section",
      "logo-cloud",
      "newsletter-section",
      "pricing-card",
      "pricing-table",
      "stats-section",
      "stat-card",
      "contact-avatar",
      "metric-hero-card",
      "testimonial-card",
      "testimonial-section",
    ],
    feedback: [
      "circular-progress",
      "progress-bar",
      "skeleton",
      "spinner",
      "toast",
    ],
    utility: [
      "device",
      "clipboard",
      "darkmode",
      "draggable",
      "droparea",
      "indexeddb-explorer",
      "seo",
      "theme-toggle",
    ],
    form: [
      "auth-form",
      "checkbox",
      "code",
      "file-upload",
      "form",
      "label",
      "input",
      "form-input",
      "join",
      "number-input",
      "radio",
      "radio-group",
      "rating",
      "select",
      "slider",
      "switch",
      "textarea",
      "time",
    ],
    docs: [
      "showcase",
      "showcase-code-viewer",
      "showcase-property-editor",
      "showcase-sidebar",
      "theme-generator",
    ],
  },
};
`,mimeType:"text/javascript"},"/$app/extension/extension-bridge.js":{content:`/**
 * Shared Extension Bridge Singleton
 * Single connection instance shared across all admin components
 */

import { createExtensionBridge } from "/$app/extension/admin-bridge.js";

const STORAGE_KEY = "bootstrapp-extension-id";

// Singleton state
let bridge = null;
let connectionPromise = null;
let disconnectHandler = null;
const listeners = new Set();

/**
 * Get or create the shared bridge instance (only if connected)
 */
export const getExtensionBridge = () => {
  if (bridge?.isConnected()) {
    return bridge;
  }
  return null;
};

/**
 * Handle disconnect event from bridge
 */
const handleDisconnect = () => {
  console.log("[ExtBridge] Connection lost");
  bridge = null;
  connectionPromise = null;
  notifyListeners({ type: "disconnected" });
};

/**
 * Connect to the extension (or return existing connection)
 */
export const connectExtension = async (extensionId) => {
  // Save extension ID
  if (extensionId) {
    localStorage.setItem(STORAGE_KEY, extensionId);
  }

  const id = extensionId || localStorage.getItem(STORAGE_KEY);
  if (!id) {
    throw new Error("Extension ID required");
  }

  // If already connecting, wait for that
  if (connectionPromise) {
    return connectionPromise;
  }

  // If already connected, return
  if (bridge?.isConnected()) {
    return bridge;
  }

  // Create new bridge and connect
  bridge = createExtensionBridge(id);

  // Set up disconnect handler
  if (bridge.onDisconnect) {
    bridge.onDisconnect(handleDisconnect);
  }

  connectionPromise = bridge.connect()
    .then(() => {
      connectionPromise = null;
      console.log("[ExtBridge] Connected successfully");
      notifyListeners({ type: "connected" });
      return bridge;
    })
    .catch((err) => {
      connectionPromise = null;
      bridge = null;
      console.error("[ExtBridge] Connection failed:", err);
      throw err;
    });

  return connectionPromise;
};

/**
 * Disconnect from extension
 */
export const disconnectExtension = () => {
  if (bridge) {
    bridge.disconnect();
    bridge = null;
    notifyListeners({ type: "disconnected" });
  }
};

/**
 * Check if connected
 */
export const isConnected = () => bridge?.isConnected() ?? false;

/**
 * Get saved extension ID
 */
export const getExtensionId = () => localStorage.getItem(STORAGE_KEY) || "";

/**
 * Subscribe to connection changes
 */
export const onConnectionChange = (callback) => {
  listeners.add(callback);
  return () => listeners.delete(callback);
};

const notifyListeners = (event) => {
  listeners.forEach((cb) => cb(event));
};

export default {
  getExtensionBridge,
  connectExtension,
  disconnectExtension,
  isConnected,
  getExtensionId,
  onConnectionChange,
};
`,mimeType:"text/javascript"},"/$app/bundler/targets/index.js":{content:`/**
 * Bundler Target Registry
 * Manages deployment targets (GitHub, Cloudflare, ZIP, etc.)
 */

const targets = new Map();

/**
 * Register a deployment target
 * @param {string} name - Unique target identifier
 * @param {Object} config - Target configuration
 * @param {string} config.name - Target name
 * @param {string} config.label - Display label
 * @param {string} config.icon - Icon name
 * @param {Array} config.credentials - Credential fields needed
 * @param {Function} config.deploy - Deploy function (files, options) => result
 */
export const registerTarget = (name, config) => {
  targets.set(name, { name, ...config });
};

/**
 * Get a target by name
 */
export const getTarget = (name) => targets.get(name);

/**
 * Get all registered targets
 */
export const getTargets = () => [...targets.values()];

/**
 * Get all target names
 */
export const getTargetNames = () => [...targets.keys()];

/**
 * Deploy files to a target
 * @param {string} targetName - Target to deploy to
 * @param {Array} files - Files to deploy [{path, content, mimeType}]
 * @param {Object} options - Deployment options (credentials, version, etc.)
 */
export const deployToTarget = async (targetName, files, options) => {
  const target = targets.get(targetName);
  if (!target) {
    throw new Error(\`Unknown deployment target: \${targetName}\`);
  }
  return target.deploy(files, options);
};
`,mimeType:"text/javascript"},"/$app/bundler/targets/github.js":{content:`/**
 * GitHub Pages Deployment Target
 */
import { registerTarget } from "./index.js";
import Github from "/$app/github/index.js";

registerTarget("github", {
  label: "GitHub Pages",
  icon: "brand-github",
  credentials: [
    { key: "owner", label: "Owner", type: "text", required: true },
    { key: "repo", label: "Repository", type: "text", required: true },
    { key: "branch", label: "Branch", type: "text", default: "main" },
    { key: "token", label: "Token", type: "password", required: true },
  ],
  async deploy(files, options) {
    const { owner, repo, branch, token } = options;
    await Github.deploy({ owner, repo, branch, token, files });
    return {
      success: true,
      type: "remote",
      url: \`https://\${owner}.github.io/\${repo}/\`,
    };
  },
});
`,mimeType:"text/javascript"},"/$app/bundler/targets/cloudflare.js":{content:`/**
 * Cloudflare Workers Deployment Target
 * Note: This target requires a worker script, not static files
 */
import { registerTarget } from "./index.js";

registerTarget("cloudflare", {
  label: "Cloudflare Workers",
  icon: "cloud",
  workerOnly: true, // Special flag - this target uses worker script, not static files
  credentials: [
    { key: "accountId", label: "Account ID", type: "text", required: true },
    { key: "projectName", label: "Project Name", type: "text", required: true },
    { key: "apiToken", label: "API Token", type: "password", required: true },
  ],
  async deploy(scriptContent, options) {
    const { accountId, projectName, apiToken } = options;

    if (!accountId || !apiToken || !projectName || !scriptContent) {
      throw new Error(
        "Cloudflare deployment requires accountId, apiToken, projectName, and scriptContent.",
      );
    }

    console.log(\`Deploying worker to project: \${projectName} via server proxy...\`);

    const response = await fetch("/cloudflare/deploy", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        accountId,
        apiToken,
        projectName,
        scriptContent,
      }),
    });

    const result = await response.json();

    if (!response.ok || !result.success) {
      console.error("Cloudflare API Error:", result.errors || result);
      throw new Error(\`Failed to deploy worker. Status: \${response.status}\`);
    }

    console.log("Worker deployed successfully!");
    return {
      success: true,
      type: "remote",
      url: \`https://\${projectName}.pages.dev/\`,
      result,
    };
  },
});
`,mimeType:"text/javascript"},"/$app/bundler/targets/zip.js":{content:`/**
 * ZIP Download Target
 * Downloads bundled files as a ZIP archive
 */
import { registerTarget } from "./index.js";
import { zipSync, strToU8 } from "/npm/fflate";

registerTarget("zip", {
  label: "Download ZIP",
  icon: "file-zip",
  credentials: [], // No credentials needed - downloads to browser
  async deploy(files, options) {
    const zipData = {};

    for (const file of files) {
      const { path, content } = file;

      if (content instanceof Blob) {
        // Convert Blob to Uint8Array
        const arrayBuffer = await content.arrayBuffer();
        zipData[path] = new Uint8Array(arrayBuffer);
      } else if (typeof content === "string") {
        // Convert string to Uint8Array
        zipData[path] = strToU8(content);
      } else if (content instanceof Uint8Array) {
        zipData[path] = content;
      } else {
        // Try to stringify anything else
        zipData[path] = strToU8(String(content));
      }
    }

    // Create ZIP
    const zipped = zipSync(zipData, { level: 9 });
    const blob = new Blob([zipped], { type: "application/zip" });
    const url = URL.createObjectURL(blob);

    // Trigger download
    const filename = \`\${options.name || "build"}-\${options.version || Date.now()}.zip\`;
    const a = document.createElement("a");
    a.href = url;
    a.download = filename;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);

    // Cleanup
    setTimeout(() => URL.revokeObjectURL(url), 1000);

    return {
      success: true,
      type: "download",
      filename,
    };
  },
});
`,mimeType:"text/javascript"},"/$app/bundler/targets/localhost.js":{content:`/**
 * Localhost Deployment Target
 * Deploys to the local CLI dev server for testing production builds
 */
import { registerTarget } from "./index.js";

const blobToBase64 = (blob) =>
  new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.onloadend = () => resolve(reader.result.split(",")[1]);
    reader.onerror = reject;
    reader.readAsDataURL(blob);
  });

registerTarget("localhost", {
  label: "Deploy Locally",
  icon: "server",
  credentials: [],
  async deploy(files, options) {
    // Convert files to JSON-serializable format
    const payload = await Promise.all(
      files.map(async (file) => ({
        path: file.path,
        content:
          file.content instanceof Blob
            ? await blobToBase64(file.content)
            : file.content,
        encoding: file.content instanceof Blob ? "base64" : "utf8",
      })),
    );

    const response = await fetch("/deploy", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ files: payload }),
    });

    if (!response.ok) {
      throw new Error("Failed to deploy locally");
    }

    const result = await response.json();
    console.log("Deployed locally:", result.urls);

    return {
      success: true,
      type: "remote",
      url: result.urls.prefixed,
      standaloneUrl: result.urls.standalone,
    };
  },
});
`,mimeType:"text/javascript"},"/$app/bundler/targets/targz.js":{content:`/**
 * TAR.GZ Download Target
 * Downloads bundled files as a gzipped tarball
 */
import { registerTarget } from "./index.js";
import { gzipSync, strToU8 } from "/npm/fflate";

/**
 * Create a TAR archive from files
 * TAR format: 512-byte header blocks + file content (padded to 512 bytes)
 */
const createTar = (files) => {
  const blocks = [];

  for (const { path, data } of files) {
    // Create header (512 bytes)
    const header = new Uint8Array(512);
    const encoder = new TextEncoder();

    // File name (100 bytes)
    const nameBytes = encoder.encode(path.slice(0, 99));
    header.set(nameBytes, 0);

    // File mode (8 bytes) - 0644 in octal
    header.set(encoder.encode("0000644\\0"), 100);

    // UID (8 bytes)
    header.set(encoder.encode("0000000\\0"), 108);

    // GID (8 bytes)
    header.set(encoder.encode("0000000\\0"), 116);

    // File size (12 bytes) - octal with leading zeros
    const sizeOctal = data.length.toString(8).padStart(11, "0") + "\\0";
    header.set(encoder.encode(sizeOctal), 124);

    // Modification time (12 bytes) - current time in octal
    const mtime = Math.floor(Date.now() / 1000).toString(8).padStart(11, "0") + "\\0";
    header.set(encoder.encode(mtime), 136);

    // Checksum placeholder (8 spaces - will be calculated)
    header.set(encoder.encode("        "), 148);

    // Type flag (1 byte) - '0' for regular file
    header[156] = 48; // ASCII '0'

    // Link name (100 bytes) - empty for regular files
    // Already zeros

    // USTAR magic (6 bytes)
    header.set(encoder.encode("ustar\\0"), 257);

    // USTAR version (2 bytes)
    header.set(encoder.encode("00"), 263);

    // Owner name (32 bytes)
    header.set(encoder.encode("root"), 265);

    // Group name (32 bytes)
    header.set(encoder.encode("root"), 297);

    // Calculate checksum (sum of all bytes in header, treating checksum field as spaces)
    let checksum = 0;
    for (let i = 0; i < 512; i++) {
      checksum += header[i];
    }
    const checksumOctal = checksum.toString(8).padStart(6, "0") + "\\0 ";
    header.set(encoder.encode(checksumOctal), 148);

    blocks.push(header);

    // Add file content
    blocks.push(data);

    // Pad to 512-byte boundary
    const padding = 512 - (data.length % 512);
    if (padding < 512) {
      blocks.push(new Uint8Array(padding));
    }
  }

  // Add two empty 512-byte blocks to mark end of archive
  blocks.push(new Uint8Array(1024));

  // Concatenate all blocks
  const totalLength = blocks.reduce((sum, b) => sum + b.length, 0);
  const tar = new Uint8Array(totalLength);
  let offset = 0;
  for (const block of blocks) {
    tar.set(block, offset);
    offset += block.length;
  }

  return tar;
};

registerTarget("targz", {
  label: "Download TAR.GZ",
  icon: "file-zip",
  credentials: [],
  async deploy(files, options) {
    // Prepare files for tar
    const tarFiles = [];

    for (const file of files) {
      const { path, content } = file;
      let data;

      if (content instanceof Blob) {
        const arrayBuffer = await content.arrayBuffer();
        data = new Uint8Array(arrayBuffer);
      } else if (typeof content === "string") {
        data = strToU8(content);
      } else if (content instanceof Uint8Array) {
        data = content;
      } else {
        data = strToU8(String(content));
      }

      tarFiles.push({ path, data });
    }

    // Create TAR archive
    const tarData = createTar(tarFiles);

    // Compress with gzip
    const gzipped = gzipSync(tarData, { level: 9 });

    const blob = new Blob([gzipped], { type: "application/gzip" });
    const url = URL.createObjectURL(blob);

    // Trigger download
    const filename = \`\${options.name || "build"}-\${options.version || Date.now()}.tar.gz\`;
    const a = document.createElement("a");
    a.href = url;
    a.download = filename;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);

    // Cleanup
    setTimeout(() => URL.revokeObjectURL(url), 1000);

    return {
      success: true,
      type: "download",
      filename,
    };
  },
});
`,mimeType:"text/javascript"},"/$app/bundler/templates/index.html.js":{content:`import hydrationScript from "./hydration-script.js";

const minifyHTML = (content) => {
  if (typeof content !== "string") return "";
  return content
    .replace(/<!--.*?-->/gs, "")
    .replace(/>\\s+</g, "><")
    .replace(/\\s+/g, " ")
    .replace(/ >/g, ">")
    .replace(/< /g, "<")
    .trim();
};

export default (settings) => minifyHTML(\`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>\${settings.name}</title>
    <meta name="viewport" content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
    <meta name="theme-color" content="\${settings.theme_color || "#000000"}" />
    <meta name="description" content="\${settings.description || "A PWA application."}" />
    <meta property="og:title" content="\${settings.name}" />
    <meta property="og:description" content="\${settings.description || "A PWA application."}" />
    <meta property="og:image" content="\${settings.og_image || "/assets/icons/icon-512x512.png"}" />
    <meta property="og:url" content="\${settings.canonicalUrl || "/"}" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="\${settings.name}" />
    <meta name="twitter:description" content="\${settings.description || "A PWA application."}" />
    <meta name="twitter:image" content="\${settings.og_image || "/assets/icons/icon-512x512.png"}" />
    <link rel="manifest" href="/manifest.json" />
    <link rel="stylesheet" href="/style.css">
    \${settings.importmap ? \`<script type="importmap">\${JSON.stringify({ imports: settings.importmap }, null, 2)}<\/script>\` : ""}
    <link id="favicon" rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLW1vdW50YWluIj48cGF0aCBkPSJtOCAzIDQgOCA1LTUgNSAxNUgyTDggM3oiLz48L3N2Zz4="/>
    <script>\${hydrationScript()}<\/script>
</head>
<body class="production flex">
    <app-container></app-container>
</body>
</html>\`);
`,mimeType:"text/javascript"},"/$app/bundler/templates/manifest.json.js":{content:`export default (settings = {}) => ({
  name: settings.name,
  short_name: settings.short_name || settings.name,
  start_url: settings.url || "/",
  scope: settings.scope || settings.url || "/",
  display: "standalone",
  background_color: settings.theme_color || "#ffffff",
  theme_color: settings.theme_color || "#000000",
  description: settings.description || "",
  icons: [
    {
      src: "/assets/icons/icon-192x192.png",
      sizes: "192x192",
      type: "image/png",
    },
    {
      src: "/assets/icons/icon-512x512.png",
      sizes: "512x512",
      type: "image/png",
      purpose: "any maskable",
    },
  ],
});
`,mimeType:"text/javascript"},"/$app/bundler/templates/robots.txt.js":{content:`export default (settings) => {
  if (!settings.url) {
    console.warn("Cannot generate robots.txt: settings.url is not defined.");
    return "User-agent: *\\nAllow: /\\n";
  }
  const sitemapURL = new URL("sitemap.xml", settings.url).href;
  return \`User-agent: *\\nAllow: /\\nSitemap: \${sitemapURL}\`;
};
`,mimeType:"text/javascript"},"/$app/bundler/templates/sw.js.js":{content:`export default ({ fileMap }) =>
  "const FILE_BUNDLE = " +
  JSON.stringify(fileMap, null, 2) +
  ";" +
  \`self.addEventListener("install", (e) => e.waitUntil(self.skipWaiting()));
self.addEventListener("activate", (e) => e.waitUntil(self.clients.claim()));
self.addEventListener("fetch", (e) => {
  const url = new URL(e.request.url);
  let path = url.pathname;
  if (path.startsWith("/npm/")) {
    path = "/" + path.slice(5);
  }
  const file = FILE_BUNDLE[path];
  if (file) {
    e.respondWith(
      new Response(file.content, {
        headers: { 'Content-Type': file.mimeType || 'application/javascript' }
      })
    );
  }
});\`;
`,mimeType:"text/javascript"},"/$app/bundler/templates/sitemap.xml.js":{content:`export default (settings, pages) => {
  if (!settings.url) {
    console.warn("Cannot generate sitemap.xml: settings.url is not defined.");
    return \`<?xml version="1.0" encoding="UTF-8"?><urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"></urlset>\`;
  }
  const today = new Date().toISOString().split("T")[0];
  const urls = pages
    .map((page) => {
      let urlPath = page.path.replace(/index\\.html$/, "");
      if (urlPath === "") urlPath = "/";
      if (!urlPath.startsWith("/")) urlPath = \`/\${urlPath}\`;
      const loc = new URL(urlPath, settings.url).href;
      const priority = urlPath === "/" ? "1.0" : "0.8";
      return \`
    <url>
        <loc>\${loc}</loc>
        <lastmod>\${today}</lastmod>
        <changefreq>weekly</changefreq>
        <priority>\${priority}</priority>
    </url>\`;
    })
    .join("");
  return \`<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">\${urls}
</urlset>\`.trim();
};
`,mimeType:"text/javascript"},"/$app/bundler/templates/static-page.html.js":{content:`import hydrationScript from "./hydration-script.js";

const minifyHTML = (content) => {
  if (typeof content !== "string") return "";
  return content
    .replace(/<!--.*?-->/gs, "")
    .replace(/>\\s+</g, "><")
    .replace(/\\s+/g, " ")
    .replace(/ >/g, ">")
    .replace(/< /g, "<")
    .trim();
};

export default ({ headContent, content, settings, needsHydration }) => {
  const script = needsHydration
    ? \`<script>setTimeout(() => { \${hydrationScript()} }, 2000); <\/script>\`
    : "";

  return minifyHTML(\`<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="view-transition" content="same-origin">
        <meta name="viewport" content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
        <meta name="theme-color" content="\${settings.theme_color || "#000000"}" />
        \${headContent}
        \${needsHydration && settings.importmap ? \`<script type="importmap">\${JSON.stringify({ imports: settings.importmap }, null, 2)}<\/script>\` : ""}
        <link id="favicon" rel="icon" type="image/svg+xml" href="\${settings.emojiIcon ? \`data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100%22><text y=%22.9em%22 font-size=%2290%22>\${settings.emojiIcon}</text></svg>\` : settings.icon}"/>
        <link rel="stylesheet" href="/style.css">
    </head>
    <body class="production flex">
      \${content}
      \${script}
    </body>
</html>\`);
};
`,mimeType:"text/javascript"},"/$app/bundler/templates/hydration-script.js":{content:`export default () => \`
        const startApp = async () => {
            if (!("serviceWorker" in navigator)) {
                console.warn("Service Worker not supported.");
                throw new Error("Platform not supported");
            }

            const hadController = !!navigator.serviceWorker.controller;

            await navigator.serviceWorker.register("/sw.js", {
                scope: "/",
                type: "module",
            });

            if (!hadController) {
                await new Promise((resolve) => {
                    if (navigator.serviceWorker.controller) return resolve();
                    navigator.serviceWorker.addEventListener("controllerchange", resolve);
                });
                console.log("SW installed, reloading...");
                window.location.reload();
                return;
            }

            console.log("SW is in control!");
            const { default: $APP } = await import("/$app.js");
            await $APP.load(true);
        };

        startApp();\`;
`,mimeType:"text/javascript"},"/$app/github/index.js":{content:"export default {}"},"/$app/extension/admin-bridge.js":{content:`/**
 * Bootstrapp Extension - Admin Bridge
 * Use this in your admin panel to communicate with the extension
 */

// Message types
const MSG = {
  PING: "ext:ping",
  PONG: "ext:pong",
  GET_TABS: "ext:getTabs",
  SCRAPE: "ext:scrape",
  SCRAPE_INSTAGRAM: "ext:scrapeInstagram",
  FETCH_INSTAGRAM_PROFILE: "ext:fetchInstagramProfile",
  UPDATE_DOC_ID: "ext:updateDocId",
  INJECT: "ext:inject",
  EXECUTE: "ext:execute",
  OBSERVE: "ext:observe",
  STOP_OBSERVE: "ext:stopObserve",
  START_INTERCEPT: "ext:startIntercept",
  STOP_INTERCEPT: "ext:stopIntercept",
  INTERCEPTED_DATA: "ext:interceptedData",
  DATA: "ext:data",
  ERROR: "ext:error",
  EVENT: "ext:event",
};

/**
 * Create a bridge to communicate with the Bootstrapp extension
 * @param {string} extensionId - The Chrome extension ID (found in chrome://extensions)
 * @returns {Object} Bridge API
 */
export const createExtensionBridge = (extensionId) => {
  let port = null;
  let connected = false;
  const eventListeners = new Map();
  const pendingRequests = new Map();
  const disconnectCallbacks = new Set();
  const interceptDataCallbacks = new Set();
  let requestId = 0;

  // Check if chrome.runtime is available
  const isExtensionAvailable = () => {
    return typeof chrome !== "undefined" && chrome.runtime && chrome.runtime.connect;
  };

  // Generate unique request ID
  const nextRequestId = () => \`req-\${++requestId}-\${Date.now()}\`;

  // Send message and wait for response
  const sendRequest = (type, payload = {}) => {
    return new Promise((resolve, reject) => {
      if (!connected || !port) {
        reject(new Error("Not connected to extension"));
        return;
      }

      const reqId = nextRequestId();
      console.log(\`[Bridge] Sending request: \${type} (\${reqId})\`);

      const timeout = setTimeout(() => {
        console.log(\`[Bridge] TIMEOUT for \${reqId} - pending requests:\`, [...pendingRequests.keys()]);
        pendingRequests.delete(reqId);
        reject(new Error("Request timeout"));
      }, 30000);

      pendingRequests.set(reqId, { resolve, reject, timeout });

      port.postMessage({
        type,
        requestId: reqId,
        ...payload,
      });
    });
  };

  // Handle incoming messages
  const handleMessage = (message) => {
    console.log("[Bridge] Received:", message);
    console.log("[Bridge] Message requestId:", message.requestId, "| Pending:", [...pendingRequests.keys()]);

    // Handle response to pending request
    if (message.requestId && pendingRequests.has(message.requestId)) {
      console.log(\`[Bridge] MATCHED request \${message.requestId}\`);
      const { resolve, reject, timeout } = pendingRequests.get(message.requestId);
      clearTimeout(timeout);
      pendingRequests.delete(message.requestId);

      if (message.type === MSG.ERROR) {
        reject(new Error(message.error));
      } else {
        resolve(message);
      }
      return;
    }

    // No match - log why
    if (message.requestId) {
      console.log(\`[Bridge] NO MATCH - requestId \${message.requestId} not in pending requests\`);
    } else {
      console.log("[Bridge] NO MATCH - message has no requestId");
    }

    // Handle events
    if (message.type === MSG.EVENT) {
      const listeners = eventListeners.get(message.observerId) || [];
      listeners.forEach((callback) => callback(message));
    }
  };

  return {
    /**
     * Check if extension communication is available
     */
    isAvailable: isExtensionAvailable,

    /**
     * Check if currently connected
     */
    isConnected: () => connected,

    /**
     * Connect to the extension
     * @returns {Promise<boolean>}
     */
    connect: () => {
      return new Promise((resolve, reject) => {
        if (!isExtensionAvailable()) {
          reject(new Error("Chrome extension API not available"));
          return;
        }

        if (!extensionId) {
          reject(new Error("Extension ID is required"));
          return;
        }

        try {
          port = chrome.runtime.connect(extensionId);

          port.onMessage.addListener(handleMessage);

          port.onDisconnect.addListener(() => {
            console.log("[Bridge] Disconnected from extension");
            connected = false;
            port = null;
            // Notify disconnect callbacks
            disconnectCallbacks.forEach((cb) => cb());
          });

          // Wait for initial pong
          const timeout = setTimeout(() => {
            reject(new Error("Connection timeout"));
          }, 5000);

          const initialListener = (msg) => {
            if (msg.type === MSG.PONG) {
              clearTimeout(timeout);
              connected = true;
              console.log("[Bridge] Connected to extension:", msg.connectionId);
              resolve(true);
            }
          };

          port.onMessage.addListener(initialListener);
        } catch (error) {
          reject(new Error(\`Failed to connect: \${error.message}\`));
        }
      });
    },

    /**
     * Disconnect from the extension
     */
    disconnect: () => {
      if (port) {
        port.disconnect();
        port = null;
        connected = false;
      }
    },

    /**
     * Get all open tabs
     * @returns {Promise<Array>} List of tabs
     */
    getTabs: async () => {
      const response = await sendRequest(MSG.GET_TABS);
      return response.data;
    },

    /**
     * Scrape content from a tab
     * @param {number} tabId - Tab ID
     * @param {string|Object} selector - CSS selector or object of selectors
     * @param {Object} options - Scraping options
     * @returns {Promise<Object>} Scraped data
     */
    scrape: async (tabId, selector, options = {}) => {
      const response = await sendRequest(MSG.SCRAPE, { tabId, selector, options });
      return response.data;
    },

    /**
     * Scrape Instagram profile data from a tab
     * Uses a dedicated scraper that doesn't require eval (CSP-safe)
     * @param {number} tabId - Tab ID with Instagram profile page
     * @returns {Promise<Object>} Instagram profile data
     */
    scrapeInstagram: async (tabId) => {
      const response = await sendRequest(MSG.SCRAPE_INSTAGRAM, { tabId });
      return response.data;
    },

    /**
     * Fetch Instagram profile via direct API call
     * Tries REST API first, falls back to GraphQL
     * @param {number} tabId - Tab ID (must be on instagram.com for cookies)
     * @param {string} username - Instagram username to fetch
     * @returns {Promise<Object>} { success, user, source } or { success: false, error }
     */
    fetchInstagramProfile: async (tabId, username) => {
      const response = await sendRequest(MSG.FETCH_INSTAGRAM_PROFILE, { tabId, username });
      return response.data;
    },

    /**
     * Update a doc_id in the registry
     * @param {number} tabId - Tab ID
     * @param {string} type - Type of doc_id (profile, post, reel, etc)
     * @param {string} docId - The new doc_id value
     * @returns {Promise<Object>} Result
     */
    updateDocId: async (tabId, type, docId) => {
      const response = await sendRequest(MSG.UPDATE_DOC_ID, { tabId, type, docId });
      return response.data;
    },

    /**
     * Inject HTML into a tab
     * @param {number} tabId - Tab ID
     * @param {string} html - HTML to inject
     * @param {string} target - Target selector (default: 'body')
     * @param {Object} options - Injection options
     * @returns {Promise<Object>} Injection result
     */
    inject: async (tabId, html, target = "body", options = {}) => {
      const response = await sendRequest(MSG.INJECT, { tabId, html, target, ...options });
      return response.data;
    },

    /**
     * Execute JavaScript in a tab
     * @param {number} tabId - Tab ID
     * @param {string} script - JavaScript code to execute
     * @param {Array} args - Arguments to pass to the script
     * @returns {Promise<any>} Execution result
     */
    execute: async (tabId, script, args = []) => {
      const response = await sendRequest(MSG.EXECUTE, { tabId, script, args });
      return response.data;
    },

    /**
     * Observe DOM changes in a tab
     * @param {number} tabId - Tab ID
     * @param {string} selector - Element selector to observe
     * @param {Function} callback - Callback for changes
     * @param {Array} events - Events to observe (default: ['mutation'])
     * @returns {Promise<string>} Observer ID
     */
    observe: async (tabId, selector, callback, events = ["mutation"]) => {
      const response = await sendRequest(MSG.OBSERVE, { tabId, selector, events });
      const observerId = response.data.observerId;

      // Register callback
      if (!eventListeners.has(observerId)) {
        eventListeners.set(observerId, []);
      }
      eventListeners.get(observerId).push(callback);

      return observerId;
    },

    /**
     * Stop observing
     * @param {string} observerId - Observer ID from observe()
     */
    stopObserving: async (observerId) => {
      await sendRequest(MSG.STOP_OBSERVE, { observerId });
      eventListeners.delete(observerId);
    },

    /**
     * Ping the extension
     * @returns {Promise<boolean>}
     */
    ping: async () => {
      const response = await sendRequest(MSG.PING);
      return response.type === MSG.PONG;
    },

    /**
     * Register a disconnect callback
     * @param {Function} callback - Called when connection is lost
     * @returns {Function} Unsubscribe function
     */
    onDisconnect: (callback) => {
      disconnectCallbacks.add(callback);
      return () => disconnectCallbacks.delete(callback);
    },
  };
};

export default createExtensionBridge;
`,mimeType:"text/javascript"},"/$app/uix/theme.css":{content:`html,body{font-family:var(--font-family);background-color:var(--background-color);color:var(--text-color);width:100%;min-height:100%;height:100%;padding:0;margin:0}a{color:inherit;text-decoration:none;cursor:pointer}html{font-size:14px}@media (max-width: 768px){html{font-size:18px}}@media (max-width: 480px){html{font-size:20px}}textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}:root{box-sizing:border-box;text-size-adjust:none;line-height:1.2}*,*:before,*:after{box-sizing:border-box}*{margin:0}body{font-family:var(--font-family)}button,textarea,select{background-color:inherit;border-width:0;color:inherit}img,picture,video,canvas,svg{display:block;max-width:100%}input,button,textarea,select{font:inherit;background:inherit;border:inherit}p,h1,h2,h3,h4,h5,h6{font-family:var(--font-family);overflow-wrap:break-word}dialog::backdrop{background-color:#000c}::-webkit-scrollbar{width:10px;height:10px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:#79797966;border-radius:0}::-webkit-scrollbar-thumb:hover{background:#646464b3}::-webkit-scrollbar-thumb:active{background:#555c}::-webkit-scrollbar-corner{background:transparent}*{scrollbar-width:thin;scrollbar-color:rgba(121,121,121,.4) transparent}*:not(:defined){display:block;height:100%;opacity:0;transition:opacity .5s ease-in-out;border:1px solid red}.dark{filter:invert(1) hue-rotate(180deg)}.dark img,.dark dialog,.dark video,.dark iframe{filter:invert(1) hue-rotate(180deg)}[direction=horizontal]{--flex-direction: row;flex-direction:row}[direction=vertical]{--flex-direction: column;flex-direction:row}[cursor-pointer]{cursor:pointer}[w-full]{width:100%}[h-full]{height:100%}[min-h-0]{min-height:0}[min-w-0]{min-width:0}[flex]{display:flex}[flex-col]{flex-direction:column}[flex-1]{flex:1}[flex-grow]{flex-grow:1}[flex-shrink-0]{flex-shrink:0}
`,mimeType:"text/css"},"/admin/maps-import.css":{content:`.admin-maps-import{display:flex;flex-direction:column;gap:1.5rem;min-height:400px}.selected-place{padding:1rem;border:2px solid var(--primary, #3b82f6);border-radius:.5rem;background:var(--surface-light, #f9fafb)}.selected-place-title{display:flex;align-items:center;gap:.5rem;font-size:1.125rem;font-weight:600;margin:0 0 .5rem}.selected-place-address{font-size:.875rem;color:var(--text-muted, #6b7280);margin:0 0 .25rem}.selected-place-coords{font-size:.75rem;color:var(--text-muted, #9ca3af);font-family:monospace;margin:0}.place-form{display:flex;flex-direction:column;gap:1rem;margin-top:1rem;padding-top:1rem;border-top:1px solid var(--border-color, #e5e7eb)}.form-field{display:flex;flex-direction:column;gap:.5rem}.form-field label{font-weight:600;font-size:.875rem}.import-actions{display:flex;justify-content:flex-end;margin-top:1rem;padding-top:1rem;border-top:1px solid var(--border-color, #e5e7eb)}
`,mimeType:"text/css"},"/admin/instagram-import.css":{content:`.admin-instagram-import{padding:1rem;max-height:70vh;overflow-y:auto}.ig-error{background:#fee2e2;color:#dc2626;padding:.75rem 1rem;border-radius:8px;margin-bottom:1rem;font-size:.875rem}.ig-not-connected{text-align:center;padding:2rem}.ig-icon-muted{color:var(--color-text-muted, #9ca3af);margin-bottom:1rem}.ig-not-connected h3{margin:0 0 .5rem;font-size:1.125rem}.ig-not-connected p{margin:0 0 .5rem;color:var(--color-text-muted, #6b7280)}.ig-help-text{font-size:.875rem;color:var(--color-text-muted, #9ca3af)}.ig-section{background:var(--color-surface, #fff);border:2px solid var(--color-border, #e5e7eb);border-radius:12px;padding:1.25rem;margin-bottom:1rem}.ig-section-title{display:flex;align-items:center;gap:.5rem;font-size:1rem;font-weight:600;margin:0 0 1rem;color:var(--color-text, #111)}.ig-empty{text-align:center;padding:1rem;color:var(--color-text-muted, #6b7280)}.ig-empty p{margin:0 0 .5rem}.ig-tabs-list{display:flex;flex-direction:column;gap:.5rem;margin-bottom:1rem}.ig-tab-item{display:flex;align-items:center;gap:.75rem;padding:.75rem;border:1px solid var(--color-border, #e5e7eb);border-radius:8px;cursor:pointer;transition:all .15s ease}.ig-tab-item:hover{background:var(--color-background, #f9fafb)}.ig-tab-item.selected{background:linear-gradient(45deg,#f58529,#dd2a7b,#8134af);border-color:transparent;color:#fff}.ig-tab-item.selected .ig-tab-url{color:#fffc}.ig-tab-favicon{width:20px;height:20px;border-radius:4px;flex-shrink:0}.ig-tab-info{display:flex;flex-direction:column;min-width:0}.ig-tab-title{font-size:.875rem;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ig-tab-url{font-size:.75rem;color:var(--color-text-muted, #6b7280);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ig-refresh-btn{margin-top:.5rem}.ig-selected-tab{font-size:.875rem;color:var(--color-text-muted, #6b7280);margin:0 0 1rem}.ig-profile-preview{background:linear-gradient(135deg,#fef3f2,#fef9ee)}.ig-profile-card{display:flex;align-items:center;gap:1rem;margin-bottom:1rem}.ig-profile-avatar{width:64px;height:64px;border-radius:50%;border:3px solid;border-image:linear-gradient(45deg,#f58529,#dd2a7b,#8134af) 1;border-image-slice:1;object-fit:cover}.ig-profile-info{flex:1}.ig-profile-name{display:flex;align-items:center;gap:.5rem;font-size:1.125rem;font-weight:600}.ig-verified{color:#3b82f6}.ig-profile-username{font-size:.875rem;color:var(--color-text-muted, #6b7280)}.ig-profile-stats{display:flex;gap:.75rem;font-size:.75rem;color:var(--color-text-muted, #6b7280);margin-top:.25rem}.ig-profile-stats span{white-space:nowrap}.ig-profile-bio{font-size:.875rem;color:var(--color-text, #374151);margin:0 0 .75rem;line-height:1.5}.ig-profile-link{display:flex;align-items:center;gap:.5rem;font-size:.8125rem;margin:0 0 1rem}.ig-profile-link a{color:#3b82f6;text-decoration:none;word-break:break-all}.ig-profile-link a:hover{text-decoration:underline}.ig-form{display:flex;flex-direction:column;gap:1rem;margin-bottom:1.5rem}.ig-form-field{display:flex;flex-direction:column;gap:.5rem}.ig-form-field label{font-size:.875rem;font-weight:500;color:var(--color-text, #374151)}.ig-actions{display:flex;justify-content:flex-end}
`,mimeType:"text/css"},"/backend.js":{content:`$APP.databaseConfig = {
  type: "indexeddb",
  url: "http://127.0.0.1:8090",
  adminEmail: "alanmeira@gmail.com",
  adminPassword: "1234567890",
  autoAuth: true,
  syncOnInit: false,
  conflictStrategy: "local-wins",
};

import "/$app/base/backend.js";
`,mimeType:"text/javascript"},"/locales/en.js":{content:`/**
 * English translations for meetup.rio
 */
export default {
  app: {
    title: "MEETUP.RIO",
    tagline: "Discover the best of Rio de Janeiro",
  },
  tabs: {
    discover: "Discover",
    meetups: "Meetups",
    profile: "Profile",
    groups: "Groups",
  },
  categories: {
    all: "All",
    beaches: "Beaches",
    nightlife: "Nightlife",
    food: "Food & Drinks",
    attractions: "Attractions",
    groups: "Groups",
  },
  actions: {
    like: "Like",
    skip: "Skip",
    share: "Share",
    unlike: "Unlike",
    join: "Join",
    joined: "Joined",
    beFirst: "Be the first to join!",
    peopleJoined: "{count} joined",
  },
  browse: {
    saved: "SAVED!",
    allCaughtUp: "All Caught Up!",
    noMoreContent: "You've explored everything in this category!",
    viewSaved: "View Saved",
    showSkipped: "Show Skipped Again",
    cardView: "Cards",
    listView: "List",
    noContent: "No content available",
  },
  groups: {
    title: "WhatsApp Groups",
    subtitle: "Join Rio communities and stay connected",
    featured: "Featured Groups",
    allGroups: "All Groups",
    empty: "No groups available yet",
    joinGroup: "Join Group",
  },
  saved: {
    title: "Your Saved Places",
    empty: "No Saved Places Yet",
    emptyDescription:
      "Start browsing and save your favorite places and events!",
    count: {
      zero: "no saved items",
      one: "{n} saved item",
      other: "{n} saved items",
    },
  },
  about: {
    title: "About Rio",
    description:
      "Rio de Janeiro is a vibrant city known for its stunning beaches, lively culture, and iconic landmarks. Whether you're looking for relaxation on the sand, exciting nightlife, delicious food, or breathtaking attractions, Rio has something for everyone!",
    feature1: "Discover famous beaches like Copacabana and Ipanema",
    feature2: "Explore the best nightlife and live music venues",
    feature3: "Find amazing restaurants and local food spots",
    feature4: "Visit iconic attractions and hidden gems",
    sampleDataTitle: "Try It Out!",
    sampleDataDescription:
      "Load sample places and events to explore how the app works.",
    loadSampleData: "Load Sample Data",
    loading: "Loading...",
    dataLoaded: "Sample data loaded successfully!",
    dataLoadError: "Error loading sample data. Please try again.",
  },
  content: {
    date: "Date",
    time: "Time",
    venue: "Venue",
    address: "Address",
  },
  relative: {
    today: "today",
    yesterday: "yesterday",
    tomorrow: "tomorrow",
    daysAgo: "{n} days ago",
    inDays: "in {n} days",
  },
  calendar: {
    title: "Events Calendar",
    listView: "List",
    gridView: "Month",
    today: "Today",
    tomorrow: "Tomorrow",
    thisWeek: "This Week",
    later: "Later",
    noEvents: "No events scheduled",
    eventsToday: "Events Today",
    recurring: "Recurring",
    nextOccurrence: "Next: {date}",
    viewAll: "View All",
  },
  recurrence: {
    daily: "Daily",
    weekly: "Weekly",
    monthly: "Monthly",
    custom: "Custom Days",
    ends: "Ends on {date}",
    never: "Never ends",
    everyMonday: "Every Monday",
    everyFriday: "Every Friday",
    pattern: "Every {pattern}",
  },
  location: {
    allowLocation: "Allow Location",
    skip: "Skip for now",
    whyNeeded: "We use your location to show nearby events",
    nearYou: "Near You",
    requestPermission: "Enable location to see events near you",
    permissionDenied: "Location access denied",
    distance: "Distance",
    getDirections: "Get Directions",
  },
};
`,mimeType:"text/javascript"},"/$app/theme/themes/nbs.js":{content:`/**
 * Neobrutalist (NBS) Theme
 * Bold borders, hard shadows, vibrant colors
 * Playful, interactive design with tactile feedback
 */

const fontFamily = "Manrope";

export default {
  font: {
    family: fontFamily,
    icon: { family: "lucide" },
    // Font weights
    normal: "400",
    medium: "500",
    semibold: "600",
    bold: "700",
    black: "900",
  },

  link: { color: "var(--text-color)" },
  text: {
    color: "#1a1a1a",
    muted: "#6b7280",
    // Font sizes
    xs: "0.75rem",
    sm: "0.875rem",
    base: "1rem",
    lg: "1.125rem",
    xl: "1.25rem",
    "2xl": "1.5rem",
    "3xl": "1.875rem",
  },
  background: { color: "#faf5f0" },

  color: {
    // Vibrant, saturated colors
    primary: "#fabd2f",
    "primary-lighter": "#fde8a3",
    "primary-light": "#fcd875",
    "primary-dark": "#d79921",
    "primary-darker": "#b57614",

    secondary: "#ec4899",
    "secondary-lighter": "#fbcfe8",
    "secondary-light": "#f9a8d4",
    "secondary-dark": "#db2777",
    "secondary-darker": "#be185d",

    success: "#22c55e",
    "success-lighter": "#bbf7d0",
    "success-light": "#86efac",
    "success-dark": "#16a34a",
    "success-darker": "#15803d",

    danger: "#ef4444",
    "danger-lighter": "#fecaca",
    "danger-light": "#fca5a5",
    "danger-dark": "#dc2626",
    "danger-darker": "#b91c1c",

    warning: "#f97316",
    "warning-lighter": "#fed7aa",
    "warning-light": "#fdba74",
    "warning-dark": "#ea580c",
    "warning-darker": "#c2410c",

    info: "#3b82f6",
    "info-lighter": "#bfdbfe",
    "info-light": "#93c5fd",
    "info-dark": "#2563eb",
    "info-darker": "#1d4ed8",

    surface: "#ffffff",
    "surface-light": "#faf5f0",
    "surface-lighter": "#ffffff",
    "surface-dark": "#f5f0eb",
    "surface-darker": "#ebe5df",

    hover: "#d79921",
    focus: "#fabd2f",
    inverse: "#1a1a1a",
    "inverse-lighter": "#525252",
    "inverse-light": "#404040",
    "inverse-dark": "#0a0a0a",
    "inverse-darker": "#000000",
  },

  spacing: {
    xs: "0.25rem",
    sm: "0.5rem",
    md: "0.75rem",
    lg: "1rem",
    xl: "1.5rem",
    "2xl": "2rem",
    "3xl": "3rem",
    "4xl": "5rem",
  },

  // Line heights (generates --leading-tight, --leading-normal, etc.)
  leading: {
    tight: "1.2",
    normal: "1.5",
    relaxed: "1.75",
  },

  // NBS uses larger border radii
  radius: {
    none: "0",
    sm: "0.5rem",
    md: "0.75rem",
    lg: "1rem",
    xl: "1.5rem",
    full: "9999px",
  },

  // Hard offset shadows (NBS signature)
  shadow: {
    none: "none",
    sm: "2px 2px 0px 0px rgba(0,0,0,1)",
    md: "4px 4px 0px 0px rgba(0,0,0,1)",
    lg: "6px 6px 0px 0px rgba(0,0,0,1)",
    xl: "8px 8px 0px 0px rgba(0,0,0,1)",
    "2xl": "12px 12px 0px 0px rgba(0,0,0,1)",
  },

  // NBS-specific component styling (kebab-case keys!)
  button: {
    "border-size": "3px",
    "border-color": "black",
    "border-radius": "0.75rem",
    shadow: "4px 4px 0px 0px rgba(0,0,0,1)",
    "hover-shadow": "2px 2px 0px 0px rgba(0,0,0,1)",
    "active-shadow": "none",
    "hover-translate-x": "-2px",
    "hover-translate-y": "-2px",
    "active-translate-x": "2px",
    "active-translate-y": "2px",
    "font-weight": "900",
    "text-transform": "uppercase",
  },

  input: {
    background: "#ffffff",
    "background-focus": "#ffffff",
    "background-disabled": "#f5f5f5",
    "border-color": "#000000",
    "border-width": "3px",
    "border-radius": "0.75rem",
    "border-focus": "#000000",
    "border-error": "#ef4444",
    text: "#1a1a1a",
    placeholder: "#9ca3af",
    icon: "#6b7280",
    shadow: "4px 4px 0px 0px rgba(0,0,0,1)",
    "focus-shadow": "6px 6px 0px 0px rgba(0,0,0,1)",
  },

  checkbox: {
    "border-width": "3px",
    "border-color": "#000000",
    "border-radius": "0.375rem",
    shadow: "3px 3px 0px 0px rgba(0,0,0,1)",
    "hover-border-color": "#000000",
    "checked-background-color": "#fabd2f",
    "checked-border-color": "#000000",
    "label-font-weight": "600",
  },

  label: {
    "font-size": "1rem",
    "font-weight": "700",
    color: "#1a1a1a",
    "letter-spacing": "0.05em",
    "text-transform": "uppercase",
    margin: "0.5rem",
  },

  tabs: {
    background: "#ffffff",
    "border-color": "#000000",
    "border-width": "3px",
    "border-radius": "0.75rem",
    shadow: "4px 4px 0px 0px rgba(0,0,0,1)",
    "list-background": "#f5f5f5",
    "list-border-color": "#000000",
    tab: {
      padding: "1rem 1.5rem",
      gap: "0.5rem",
      "font-size": "0.875rem",
      "font-weight": "900",
      "text-transform": "uppercase",
      "letter-spacing": "0.05em",
      color: "#6b7280",
      "color-hover": "#1a1a1a",
      "color-active": "#1a1a1a",
      background: "transparent",
      "background-hover": "#e5e5e5",
      "background-active": "#ffffff",
      "border-width": "3px",
      "border-active": "#000000",
    },
  },

  card: {
    background: "#ffffff",
    border: "#000000",
    "border-width": "3px",
    "border-hover": "#000000",
    text: "#1a1a1a",
    "text-muted": "#6b7280",
    header: {
      background: "transparent",
      border: "#000000",
      padding: "0.75rem 1rem",
    },
    footer: {
      background: "transparent",
      border: "#000000",
      "border-style": "solid",
      padding: "0.75rem 1rem",
    },
    icon: {
      background: "#f5f5f5",
      size: "3rem",
      "border-radius": "0.75rem",
    },
    tag: {
      background: "#fabd2f",
      text: "#1a1a1a",
      padding: "0.25rem 0.5rem",
      "border-radius": "0.5rem",
    },
  },

  modal: {
    background: "#ffffff",
    "border-width": "3px",
    "border-color": "#000000",
    "border-radius": "1rem",
    shadow: "8px 8px 0px 0px rgba(0,0,0,1)",
    color: "#1a1a1a",
    overlay: "rgba(0, 0, 0, 0.5)",
    "header-padding": "1.25rem 1.5rem",
    "header-border-width": "3px",
    "header-background": "#ffffff",
    "header-font-size": "1.25rem",
    "header-font-weight": "900",
    "header-color": "#1a1a1a",
    "body-padding": "1.5rem",
    "body-color": "#4b5563",
    "footer-padding": "1rem 1.5rem",
    "footer-border-width": "3px",
    "footer-background": "#f9fafb",
  },

  panel: {
    background: "#ffffff",
    "background-hover": "#f5f5f5",
    border: "#000000",
    "header-background": "transparent",
    "header-text": "#1a1a1a",
    "header-border": "#000000",
  },

  dropdown: {
    background: "#ffffff",
    "background-hover": "#f5f5f5",
    "background-active": "#e5e5e5",
    border: "#000000",
    text: "#1a1a1a",
    "text-muted": "#6b7280",
    separator: "#e5e5e5",
    shadow: "4px 4px 0px 0px rgba(0,0,0,1)",
  },

  badge: {
    default: {
      background: "#f5f5f5",
      text: "#1a1a1a",
      border: "#000000",
    },
    success: {
      background: "#22c55e",
      text: "#ffffff",
      border: "#000000",
    },
    danger: {
      background: "#ef4444",
      text: "#ffffff",
      border: "#000000",
    },
    warning: {
      background: "#f97316",
      text: "#ffffff",
      border: "#000000",
    },
    info: {
      background: "#3b82f6",
      text: "#ffffff",
      border: "#000000",
    },
  },

  list: {
    background: "transparent",
    "background-hover": "#f5f5f5",
    "background-active": "#e5e5e5",
    "background-selected": "#fabd2f",
    border: "#000000",
    "border-hover": "#000000",
    text: "#1a1a1a",
    "text-muted": "#6b7280",
  },

  tree: {
    background: "transparent",
    "background-hover": "#f5f5f5",
    "background-selected": "#fabd2f",
    border: "#000000",
    indent: "1rem",
    icon: "#6b7280",
    "icon-hover": "#1a1a1a",
  },

  table: {
    "border-width": "3px",
    "border-color": "#000000",
    "border-radius": "1rem",
    shadow: "4px 4px 0px 0px rgba(0,0,0,1)",
    "header-background": "#ffffff",
    "header-color": "#1a1a1a",
    "header-font-weight": "900",
    "header-font-size": "0.75rem",
    "header-text-transform": "uppercase",
    "row-background": "#ffffff",
    "row-hover-background": "#fef3c7",
    "cell-padding": "1rem 1.25rem",
    "cell-font-size": "0.875rem",
    "cell-color": "#4b5563",
  },

  pagination: {
    "border-width": "3px",
    "border-color": "#000000",
    "border-radius": "0.75rem",
    background: "#ffffff",
    color: "#1a1a1a",
    "font-weight": "700",
    shadow: "3px 3px 0px 0px rgba(0,0,0,1)",
    "hover-background": "#f5f5f5",
    "hover-border-color": "#000000",
    "hover-shadow": "2px 2px 0px 0px rgba(0,0,0,1)",
    "hover-transform": "translate(-1px, -1px)",
    "active-background": "#fabd2f",
    "active-border-color": "#000000",
    "active-color": "#000000",
    "active-shadow": "3px 3px 0px 0px rgba(0,0,0,1)",
    "nav-font-weight": "900",
  },

  sidebar: {
    background: "#ffffff",
    "border-width": "3px",
    "border-color": "#000000",
    "border-radius": "0",
    shadow: "none",
    width: "256px",
    "collapsed-width": "80px",
    // Header
    "header-padding": "1rem",
    "header-background": "#ffffff",
    "header-border-width": "3px",
    "header-font-weight": "900",
    // Content
    "content-padding": "0.75rem",
    // Footer
    "footer-padding": "0.75rem",
    "footer-background": "#ffffff",
    "footer-border-width": "3px",
    // Toggle button
    "toggle-background": "transparent",
    "toggle-hover-background": "#f5f5f5",
    "toggle-border-radius": "0.5rem",
    // Nav items
    "item-padding": "0.75rem 1rem",
    "item-border-radius": "0.75rem",
    "item-font-weight": "500",
    "item-color": "#4b5563",
    "item-hover-background": "#f5f5f5",
    "item-hover-color": "#1a1a1a",
    "item-active-background": "#000000",
    "item-active-color": "#ffffff",
    "item-active-font-weight": "600",
  },
};
`,mimeType:"text/javascript"},"/$app/router/ui.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";
import { keyed } from "/npm/lit-html/directives/keyed.js";
import { html as staticHTML, unsafeStatic } from "/npm/lit-html/static.js";
import Router from "./index.js";

export default {
  tag: "router-ui",
  properties: {
    currentRoute: T.object({
      sync: Router,
    }),
  },
  renderRoute(route, params) {
    const component =
      typeof route.component === "function"
        ? route.component(params)
        : route.component;
    return route.template
      ? staticHTML\`<\${unsafeStatic(route.template)} .component=\${component}>
			</\${unsafeStatic(route.template)}>\`
      : component;
  },

  render() {
    const { route, params } = this.currentRoute || {};
    return route
      ? keyed(
          route.name ?? route.path,
          this.renderRoute(
            typeof route === "function" ? { component: route } : route,
            params,
          ),
        )
      : html\`404: Page not found\`;
  },
};
`,mimeType:"text/javascript"},"/$app/base/backend.js":{content:`import config from "/$app/base/config.js";
import createEventHandler from "/$app/events/index.js";
import { initSWBackend } from "/$app/sw/backend.js";
import $APP from "/$app.js";

$APP.addModule({ name: "events", base: createEventHandler({}) });
initSWBackend($APP, config);
import "/$app/base/backend/workers/database.js";
`,mimeType:"text/javascript"},"/$app/base/config.js":{content:`/**
 * Bootstrapp Framework Configuration
 *
 * Central configuration for framework constants and settings
 * @module config
 */

/**
 * Service Worker configuration
 */
export const serviceWorker = {
  /** Timeout in milliseconds for Service Worker initialization */
  initTimeout: 200,
  /** Maximum number of retries for Service Worker registration */
  maxRetries: 5,
};

/**
 * Cache configuration for Service Worker file caching
 */
export const cache = {
  /** Cache name for local files */
  localFiles: "local-files-v1",
  /** Cache name for staging files */
  stagingFiles: "staging-files-v1",
};

/**
 * Backend communication configuration
 */
export const backend = {
  /** Default timeout in milliseconds for client requests to backend */
  requestTimeout: 5000,
};

/**
 * Test configuration
 */
export const test = {
  /** Default test server host */
  host: "test.localhost",
  /** Default test server port */
  port: 1313,
  /** Get full test URL */
  getUrl(path = '/test.html') {
    return \`http://\${this.host}:\${this.port}\${path}\`;
  }
};

/**
 * Development server configuration
 */
export const devServer = {
  /**
   * Calculate WebSocket port for dev server hot reload
   * @param {number} currentPort - Current application port
   * @returns {number} WebSocket port
   */
  getWsPort(currentPort) {
    return Number.parseInt(currentPort, 10) + 1;
  }
};

/**
 * Default configuration object
 */
export default {
  serviceWorker,
  cache,
  backend,
  test,
  devServer,
};
`,mimeType:"text/javascript"},"/$app/events/index.js":{content:`/**
 * @bootstrapp/events
 * Lightweight event system with pub/sub pattern
 */

/**
 * Creates an event handler with on, off, emit, set, get
 * @param {Object} target - The target object to install event methods on (optional)
 * @param {Object} options - Configuration options
 * @param {boolean} options.getter - Whether to include the 'get' method (default: true)
 * @returns {Object} Event handler instance
 */
function createEventHandler(target = {}, { getter = true } = {}) {
  const listeners = new Map();

  target.listeners = listeners;
  target.hasListeners = (key) => listeners.has(key);

  /**
   * Registers an event listener.
   * @param {string} key - The event key.
   * @param {Function} callback - The listener function (can be async).
   */
  target.on = (key, callback) => {
    if (!callback)
      return console.error(
        \`Error adding listener to \${key}: no callback passed\`,
      );
    if (!listeners.has(key)) listeners.set(key, new Set());
    listeners.get(key).add(callback);
  };

  /**
   * Registers multiple event listeners from an object.
   * @param {Object<string, Function>} events - Key-value pairs of events and callbacks.
   */
  target.set = (events) =>
    Object.entries(events).forEach(([key, callback]) =>
      target.on(key, callback),
    );

  /**
   * Gets all registered callbacks for a specific key.
   * @param {string} key - The event key.
   * @returns {Function[]} An array of callback functions.
   */
  if (getter) target.get = (key) => [...(listeners.get(key) ?? [])];

  /**
   * Unregisters an event listener.
   * @param {string} key - The event key.
   * @param {Function} callback - The listener function to remove.
   */
  target.off = (key, callback) => {
    const callbackSet = listeners.get(key);
    if (!callbackSet) return;
    callbackSet.delete(callback);
    if (callbackSet.size === 0) listeners.delete(key);
  };

  /**
   * Executes all listeners for a key and returns a Promise
   * that resolves when all listeners (sync or async) have completed.
   * @param {string} key - The event key.
   * @param {*} data - The data to pass to the listeners.
   * @returns {Promise<Array<*>>} A promise resolving to an array of results from the listeners.
   */
  target.emit = async (key, data) => {
    const results = [];
    listeners.get(key)?.forEach((callback) => {
      try {
        results.push(callback(data));
      } catch (error) {
        console.error(\`Error in listener for key "\${key}":\`, error);
      }
    });
    return Promise.all(results);
  };

  return target;
}

export default createEventHandler;
`,mimeType:"text/javascript"},"/$app/sw/backend.js":{content:`/**
 * @file Service Worker Backend Module
 * @description Service Worker backend with caching, fetch handling, and messaging
 */

import createFSHandlers from "./filesystem.js";

let $APP;
let config;

/**
 * Get MIME type for a file path
 * @param {string} path - File path
 * @returns {string} MIME type
 */
const getMimeType = (path) => {
  const ext = path.split(".").pop()?.toLowerCase();
  const mimeTypes = {
    html: "text/html",
    css: "text/css",
    js: "application/javascript",
    mjs: "application/javascript",
    json: "application/json",
    png: "image/png",
    jpg: "image/jpeg",
    jpeg: "image/jpeg",
    gif: "image/gif",
    svg: "image/svg+xml",
    ico: "image/x-icon",
    webp: "image/webp",
    woff: "font/woff",
    woff2: "font/woff2",
    ttf: "font/ttf",
    eot: "application/vnd.ms-fontobject",
    otf: "font/otf",
    mp3: "audio/mpeg",
    mp4: "video/mp4",
    webm: "video/webm",
    pdf: "application/pdf",
    txt: "text/plain",
    md: "text/markdown",
    xml: "application/xml",
    wasm: "application/wasm",
  };
  return mimeTypes[ext] || "application/octet-stream";
};

/**
 * Get local URL for a path
 * @param {string} path - File path
 * @returns {string} Full URL
 */
const getLocalUrl = (path) => {
  const origin = self.location.origin;
  const normalizedPath = path.startsWith("/") ? path : \`/\${path}\`;
  return \`\${origin}\${normalizedPath}\`;
};

/**
 * Initialize Service Worker backend
 * @param {Object} app - $APP instance
 * @param {Object} appConfig - App configuration
 */
export function initSWBackend(app, appConfig = {}) {
  $APP = app;
  config = appConfig;

  // Only run in service worker runtime
  if ($APP.settings?.runtime !== "serviceworker") {
    return;
  }

  const LOCAL_FILES_CACHE_NAME = config.cache?.localFiles || "local-files-v1";
  const STAGING_CACHE_NAME = config.cache?.stagingFiles || "staging-files-v1";
  const CDN_CACHE_NAME = "cdn-assets-v1";
  const FILE_STORE_CACHE_NAME = "file-store-v1";

  const ALLOWED_HOSTNAMES = [
    "esm.sh",
    "cdn.jsdelivr.net",
    "unpkg.com",
    "cdnjs.cloudflare.com",
  ];

  // File system cache helpers
  const fsCache = {
    open: async (type) => {
      const cacheNames = {
        local: LOCAL_FILES_CACHE_NAME,
        staging: STAGING_CACHE_NAME,
        cdn: CDN_CACHE_NAME,
        fileStore: FILE_STORE_CACHE_NAME,
      };
      return caches.open(cacheNames[type] || type);
    },
    getKeysInDirectory: async (cache, dirPath) => {
      const keys = await cache.keys();
      return keys.filter((req) => {
        const url = new URL(req.url);
        return url.pathname.startsWith(dirPath);
      });
    },
  };

  // Create filesystem event handlers
  const FSHandlers = createFSHandlers({ getMimeType, fsCache, getLocalUrl });

  // Service Worker install event
  self.addEventListener("install", (event) => {
    console.log("Service Worker: Installing...");
    event.waitUntil(
      Promise.all([
        caches.open(LOCAL_FILES_CACHE_NAME),
        caches.open(STAGING_CACHE_NAME),
        caches.open(CDN_CACHE_NAME),
        caches.open(FILE_STORE_CACHE_NAME),
      ]).then(() => {
        console.log("Service Worker: Caches initialized");
        return self.skipWaiting();
      })
    );
  });

  // Service Worker activate event
  self.addEventListener("activate", (event) => {
    console.log("Service Worker: Activating...");
    event.waitUntil(self.clients.claim());
  });

  // Message handler
  const respond = (client) => (payload, type) => {
    client.postMessage({ payload, type });
  };

  const messageHandlers = {
    "SW:BROADCAST_SYNCED_PROP": async (data, { broadcast }) => {
      broadcast({ type: "SW:SYNC_PROPS", payload: data.payload });
    },
    "SW:BROADCAST_QUERY_SYNC": async (data, { broadcast }) => {
      broadcast({ type: "SW:QUERY_SYNC", payload: data.payload });
    },
    "SW:BROADCAST_AUTH_STATE": async (data, { broadcast }) => {
      broadcast({ type: "SW:AUTH_STATE", payload: data.payload });
    },
    "SW:CACHE_FILE": async (data, { respond }) => {
      try {
        const { url, content } = data.payload;
        const cache = await fsCache.open("fileStore");
        const response = new Response(content, {
          headers: { "Content-Type": getMimeType(url) },
        });
        await cache.put(url, response);
        respond({ success: true });
      } catch (error) {
        respond({ error: error.message });
      }
    },
    "SW:GET_CACHED_FILES": async (data, { respond }) => {
      try {
        const files = {};

        // Get local files
        const localCache = await fsCache.open("local");
        const localKeys = await localCache.keys();
        for (const req of localKeys) {
          const response = await localCache.match(req);
          if (response) {
            const url = new URL(req.url);
            const content = await response.clone().text();
            const mimeType = response.headers.get("Content-Type")?.split(";")[0] || getMimeType(url.pathname);
            files[url.pathname] = { content, mimeType };
          }
        }

        // Get CDN files (esm.sh) with their esm.sh paths
        const cdnCache = await fsCache.open("cdn");
        const cdnKeys = await cdnCache.keys();
        for (const req of cdnKeys) {
          const response = await cdnCache.match(req);
          if (response) {
            const url = new URL(req.url);
            if (url.hostname === "esm.sh") {
              const esmPath = \`\${url.pathname}\${url.search}\`;
              const content = await response.clone().text();
              const mimeType = response.headers.get("Content-Type")?.split(";")[0] || "application/javascript";
              files[esmPath] = { content, mimeType };
            }
          }
        }

        respond(files);
      } catch (error) {
        respond({ error: error.message });
      }
    },
    ...FSHandlers,
  };

  self.addEventListener("message", async (event) => {
    const { data } = event;
    const { type, payload, eventId } = data;
    const client = event.source;

    const broadcastToClients = async (message) => {
      const clients = await self.clients.matchAll({ type: "window" });
      clients.forEach((c) => {
        if (c.id !== client?.id) {
          c.postMessage(message);
        }
      });
    };

    const handler = messageHandlers[type];
    if (handler) {
      await handler(
        { payload, eventId },
        {
          respond: (responsePayload, responseType) => {
            if (client) {
              client.postMessage({
                payload: responsePayload,
                type: responseType || type,
                eventId,
              });
            }
          },
          broadcast: broadcastToClients,
        }
      );
    } else {
      // Emit event for custom handlers
      $APP.events?.emit(type, { payload, eventId, client });
    }
  });

  // Fetch handler
  self.addEventListener("fetch", (event) => {
    const url = new URL(event.request.url);

    // Handle /npm/ requests - proxy to esm.sh
    if (url.origin === self.location.origin && url.pathname.startsWith("/npm/")) {
      event.respondWith(
        (async () => {
          // Convert /npm/lit-html to https://esm.sh/lit-html
          const packagePath = url.pathname.slice(5); // Remove "/npm/"
          const esmUrl = \`https://esm.sh/\${packagePath}\${url.search}\`;

          // Check CDN cache first
          const cdnCache = await fsCache.open("cdn");
          const cacheKey = new Request(esmUrl);
          const cachedResponse = await cdnCache.match(cacheKey);
          if (cachedResponse) return cachedResponse;

          // Fetch from esm.sh
          try {
            const networkResponse = await fetch(esmUrl);
            if (networkResponse.ok) {
              cdnCache.put(cacheKey, networkResponse.clone());
            }
            return networkResponse;
          } catch (error) {
            console.error("SW: ESM.sh fetch failed:", error);
            return new Response("Network error", { status: 503 });
          }
        })()
      );
      return;
    }

    // Handle esm.sh internal paths (e.g., /lit-html@3.3.1/..., /v135/...)
    const isEsmPath = url.origin === self.location.origin &&
      (url.pathname.match(/^\\/[^\\/]+@[\\d.]+/) || url.pathname.startsWith("/v1"));

    if (isEsmPath) {
      event.respondWith(
        (async () => {
          const esmUrl = \`https://esm.sh\${url.pathname}\${url.search}\`;
          const cdnCache = await fsCache.open("cdn");
          const cacheKey = new Request(esmUrl);
          const cachedResponse = await cdnCache.match(cacheKey);
          if (cachedResponse) return cachedResponse;

          try {
            const networkResponse = await fetch(esmUrl);
            if (networkResponse.ok) {
              cdnCache.put(cacheKey, networkResponse.clone());
            }
            return networkResponse;
          } catch (error) {
            console.error("SW: ESM.sh internal fetch failed:", error);
            return new Response("Network error", { status: 503 });
          }
        })()
      );
      return;
    }

    // Handle CDN requests
    if (ALLOWED_HOSTNAMES.includes(url.hostname)) {
      event.respondWith(
        (async () => {
          const cdnCache = await fsCache.open("cdn");
          const cachedResponse = await cdnCache.match(event.request);
          if (cachedResponse) return cachedResponse;

          try {
            const networkResponse = await fetch(event.request);
            if (networkResponse.ok) {
              cdnCache.put(event.request, networkResponse.clone());
            }
            return networkResponse;
          } catch (error) {
            console.error("SW: CDN fetch failed:", error);
            return new Response("Network error", { status: 503 });
          }
        })()
      );
      return;
    }

    // Handle local requests
    if (url.origin === self.location.origin) {
      event.respondWith(
        (async () => {
          // Try staging cache first (edited files from IDE)
          const stagingCache = await fsCache.open("staging");
          const stagingResponse = await stagingCache.match(event.request);
          if (stagingResponse) return stagingResponse;

          // Always fetch from network in dev (don't serve from local cache)
          try {
            const networkResponse = await fetch(event.request);
            // Cache GET requests for later bundling (Cache API only supports GET)
            if (networkResponse.ok && event.request.method === "GET") {
              const localCache = await fsCache.open("local");
              localCache.put(event.request, networkResponse.clone());
            }
            return networkResponse;
          } catch (error) {
            console.error("SW: Local fetch failed:", error);
            return new Response("Not found", { status: 404 });
          }
        })()
      );
    }
  });

  console.log("Service Worker: Backend initialized");
}

export default { initSWBackend };
`,mimeType:"text/javascript"},"/$app.js":{content:`import createEventHandler from "/$app/events/index.js";

const runtime = (() => {
  if (
    typeof ServiceWorkerGlobalScope !== "undefined" &&
    globalThis instanceof ServiceWorkerGlobalScope
  )
    return "serviceworker";

  if (
    typeof WorkerGlobalScope !== "undefined" &&
    globalThis instanceof WorkerGlobalScope
  )
    return "worker";
  return "frontend";
})();

globalThis.sleep = (ms = 0) =>
  new Promise((resolve) => setTimeout(resolve, ms));
const ObjectStorageFunctions = {
  set: function (...args) {
    if (args.length === 1 && typeof args[0] === "object" && args[0] !== null)
      Object.entries(args[0]).forEach(([k, v]) => {
        this[k] =
          !Array.isArray(this[k]) &&
          typeof this[k] === "object" &&
          typeof v === "object"
            ? { ...this[k], ...v }
            : v;
      });
    if (args.length === 2 && typeof args[0] === "string")
      this[args[0]] = args[1];
    return this;
  },
  get: function (...args) {
    const [key1, key2] = args;
    if (args.length === 0) return undefined;
    if (args.length === 2) return this[key1]?.[key2];
    return this[key1];
  },
  remove: function (...args) {
    args.length === 2 ? delete this[args[0]][args[1]] : delete this[args[0]];
    return this;
  },
  keys: function () {
    return Object.keys(this);
  },
};
const fs = {
  async fetchResource(path, handleResponse, extension) {
    try {
      const response = await fetch(path);
      this[path] = {
        path,
        extension,
      };
      if (response.ok) return await handleResponse(response);
    } catch (error) {
      console.warn(\`Resource not found at: \${path}\`, error);
    }
    return null;
  },
  text(path) {
    return fs.fetchResource(path, (res) => res.text(), "text");
  },
  json(path) {
    return fs.fetchResource(path, (res) => res.json(), "json");
  },
  getFilePath(file) {
    return \`\${$APP.settings.basePath}\${file.startsWith("/") ? file : \`/\${file}\`}\`;
  },
  getRequestPath(urlString) {
    const url = new URL(urlString);
    return url.pathname + url.search;
  },
};

const installModulePrototype = (base) => {
  if (base instanceof Set || base instanceof Map || Array.isArray(base)) return;
  if (!base) base = {};
  const proto = Object.create(Object.getPrototypeOf(base));
  Object.assign(proto, ObjectStorageFunctions);
  Object.setPrototypeOf(base, proto);
  return base;
};

const coreModules = {
  events: createEventHandler({}),
  app: {},
  assetFiles: new Set(),
  components: {},
  data: {},
  devFiles: new Set(),
  error: console.error,
  fs: fs,
  log: console.log,
  models: {},
  modules: {},
  routes: {},
  settings: {
    base: {
      runtime,
      dev: true,
      backend: false,
      frontend: true,
      basePath: "",
    },
    events: ({ context }) => ({
      moduleAdded({ module }) {
        if (module.settings) context[module.name] = module.settings;
      },
    }),
  },
};

if (runtime === "frontend") {
  coreModules.routes = {};
  coreModules.icons = {
    alias: "Icons",
    base: new Map(Object.entries(globalThis.__icons || {})),
  };
  coreModules.theme = {
    base: {
      font: {
        icon: {
          family: "lucide",
        },
      },
    },
    events: ({ context }) => ({
      moduleAdded({ module }) {
        if (module.theme) context[module.name] = module.theme;
      },
    }),
  };
}

const prototypeAPP = {
  async load(production, backend = false) {
    try {
      const response = await fetch("/package.json");
      if (!response.ok)
        throw new Error(\`HTTP error! status: \${response.status}\`);
      const appConfig = await response.json();
      this._packageJson = appConfig;
      await this.bootstrap({ ...appConfig, production, backend });
    } catch (error) {
      console.error("Could not load 'package.json'. Bootstrap failed.", {
        error,
      });
    }
  },
  async bootstrap({
    backend = false,
    production = false,
    settings = {},
    theme,
  } = {}) {
    for (const [key, value] of Object.entries({
      ...settings,
      backend,
      runtime,
      frontend: !backend,
      production,
      dev: !production,
    }))
      this.settings.set(key, value);
    if (!backend && theme) this.theme.set(theme);
    try {
      await import("/index.js");
      if (this.settings.dev) {
        await this.loadModuleSchemas();
        await this.loadModuleData();
      }
      await import(
        backend ? "/$app/base/backend/backend.js" : "/$app/base/frontend.js"
      );
      await this.events.emit("APP:INIT");
    } catch (error) {
      console.warn(error);
    }
    return this;
  },
  async loadModuleSchemas() {
    console.log(this.settings.dev, { runtime });
    if (!this.settings.dev || !this._packageJson) return;

    console.log(this.settings.dev, { runtime });
    const { discoverSchemaModules, namespaceModels } = await import(
      "/$app/model/schema-loader.js"
    );
    const modules = await discoverSchemaModules(this._packageJson);
    console.log({ modules });
    for (const mod of modules) {
      try {
        const schemaPath = \`/node_modules/\${mod.packageName}/models/schema.js\`;
        const schemaModule = await import(schemaPath);
        const models = schemaModule.default;

        if (models) {
          const namespace = mod.namespace ? mod.name : null;
          const namespacedModels = namespaceModels(models, namespace);
          this.models.set(namespacedModels);
          this.log?.(
            \`Loaded schema from \${mod.packageName}\` +
              (namespace ? \` (namespace: \${namespace}_*)\` : ""),
          );
        }
      } catch (e) {
        console.warn(\`Failed to load schema from \${mod.packageName}:\`, e);
      }
    }
  },
  async loadModuleData() {
    if (!this.settings.dev || !this._packageJson) return;

    const { discoverSchemaModules, namespaceData } = await import(
      "/$app/model/schema-loader.js"
    );
    const modules = await discoverSchemaModules(this._packageJson);

    for (const mod of modules) {
      try {
        const seedPath = \`/node_modules/\${mod.packageName}/models/seed.js\`;
        const seedModule = await import(seedPath);
        const data = seedModule.default;

        if (data) {
          const namespace = mod.namespace ? mod.name : null;
          const namespacedData = namespaceData(data, namespace);
          this.data.set(namespacedData);
          this.log?.(
            \`Loaded seed data from \${mod.packageName}\` +
              (namespace ? \` (namespace: \${namespace}_*)\` : ""),
          );
        }
      } catch (e) {
        // seed.js is optional, don't warn if not found
        if (!e.message?.includes("Failed to fetch")) {
          console.warn(\`Failed to load seed from \${mod.packageName}:\`, e);
        }
      }
    }
  },
  addModule(module) {
    if (
      (module.dev && this.settings.dev !== true) ||
      !!this?.modules?.[module.name]
    )
      return;
    if (!module.base) module.base = {};
    const { alias, name, events } = module;
    const base = module.base ?? this[name];
    if (this.modules && !this.modules[name]) this.modules.set(name, module);
    installModulePrototype(base);
    this[name] = base;
    if (alias) this[alias] = base;
    if (events)
      Object.entries(
        typeof events === "function"
          ? events({ $APP: this, context: base })
          : events,
      ).map(([name, fn]) => this.events.on(name, fn));
    this.events
      .get("moduleAdded")
      .map((fn) => fn.bind(this[module.name])({ module }));

    if (this.log) this.log(\`Module '\${module.name}' added successfully\`);
    return base;
  },
};

const $APP = Object.create(prototypeAPP);

for (const [name, base = {}] of Object.entries(coreModules))
  $APP.addModule({
    name,
    ...(base.base ? base : { base }),
  });
globalThis.$APP = $APP;
export default $APP;
`,mimeType:"text/javascript"},"/$app/base/backend/workers/database.js":{content:`import $APP from "/$app.js";

if ($APP.settings.runtime === "worker") {
  const bootstrap = async () => {
    console.log("bootstrap() called");
    const APP = await $APP.load(!$APP.settings.dev, true);
    return APP;
  };

  let commsPort;
  const events = [];
  const MessageHandler = {
    handleMessage: async ({ data }) => {
      if (data.eventId && events.includes(data.eventId)) return;
      if (data.eventId) events.push(data.eventId);
      const respond =
        data.eventId &&
        ((responsePayload) => {
          if (commsPort)
            commsPort.postMessage({
              eventId: data.eventId,
              payload: responsePayload,
              connection: data.connection,
            });
        });
      if ($APP?.Backend) {
        console.log(\`Routing message to backend: \${data.type}\`, data);
        $APP.Backend.handleMessage({
          data,
          respond,
        });
      } else {
        $APP.events.on("APP:DATABASE:STARTED", async () => {
          console.log(
            \`Routing message to backend after APP:DATABASE:STARTED: \${data.type}\`,
          );
          $APP.Backend.handleMessage({
            data,
            respond,
          });
        });
      }
    },
  };

  self.addEventListener("message", async (event) => {
    if (event.data.type === "APP:BACKEND:START") {
      commsPort = event.ports[0];
      console.info("Communication port initialized");
      commsPort.onmessage = MessageHandler.handleMessage;
      (async () => {
        await bootstrap();
        commsPort.postMessage({ type: "APP:BACKEND:READY" });
        $APP.Backend.client = commsPort;
      })();
    }
  });
}
`,mimeType:"text/javascript"},"/$app/sw/filesystem.js":{content:`/**
 * @file Filesystem Event Handlers
 * @description Service Worker filesystem operations for cache-based storage
 */

/**
 * Create filesystem event handlers for Service Worker
 * @param {Object} deps - Dependencies
 * @param {Function} deps.getMimeType - Function to get MIME type from path
 * @param {Object} deps.fsCache - Cache helper object
 * @param {Function} deps.getLocalUrl - Function to get local URL from path
 * @returns {Object} Event handlers map
 */
export default ({ getMimeType, fsCache, getLocalUrl }) => ({
  "FS:WRITE_FILES": async (data, { respond }) => {
    try {
      const { files } = data.payload;
      if (!Array.isArray(files))
        throw new Error("Payload must include a 'files' array.");

      const filesToCache = files.map((entry) => {
        const fullPath = entry.directory
          ? \`\${entry.directory}/\${entry.name}\`
          : \`/\${entry.name}\`;
        if (entry.isDirectory) {
          const dirPath = fullPath.endsWith("/") ? fullPath : \`\${fullPath}/\`;
          return { path: \`\${dirPath}.dir-placeholder\`, content: "" };
        }
        return { path: fullPath, content: entry.content || "" };
      });

      const cache = await fsCache.open("local");
      const cachingPromises = filesToCache.map(({ path, content }) => {
        const requestUrl = getLocalUrl(path);
        const responseToCache = new Response(content, {
          headers: { "Content-Type": getMimeType(path) },
        });
        return cache.put(requestUrl, responseToCache);
      });

      await Promise.all(cachingPromises);
      console.info(\`Service Worker: Batch wrote \${files.length} entries.\`);
      respond({ success: true, count: files.length }, "FS_WRITE_FILES_SUCCESS");
    } catch (error) {
      console.error("Service Worker Error in FS:WRITE_FILES:", error);
      respond({ error: error.message }, "FS_WRITE_FILES_ERROR");
    }
  },

  "FS:WRITE_FILE": async (data, { respond }) => {
    try {
      const { path, content, system } = data.payload;
      const cache = await fsCache.open(system ? "cdn" : "staging");
      const requestUrl = system ? \`https://\${path}\` : getLocalUrl(path);
      const responseToCache = new Response(content, {
        headers: { "Content-Type": getMimeType(path) },
      });
      await cache.put(requestUrl, responseToCache);
      respond({ path }, "FS_WRITE_SUCCESS");
    } catch (error) {
      console.error({ error, data });
      respond({ error: error.message }, "FS_WRITE_ERROR");
    }
  },

  "FS:READ_FILE": async (data, { respond }) => {
    try {
      const { path, system } = data.payload;
      let response;

      if (system) {
        const cdnCache = await fsCache.open("cdn");
        const requestUrl = \`https://\${path}\`;
        response = await cdnCache.match(requestUrl);
      } else {
        const stgCache = await fsCache.open("staging");
        const globalCache = await fsCache.open("local");
        const requestUrl = getLocalUrl(path);
        response =
          (await stgCache.match(requestUrl)) ||
          (await globalCache.match(requestUrl));
      }

      if (!response) throw new Error(\`File not found: \${path}\`);
      const content = await response.text();
      respond({ path, content }, "FS_READ_SUCCESS");
    } catch (error) {
      respond({ error: error.message }, "FS_READ_ERROR");
    }
  },

  "FS:DELETE_FILE": async (data, { respond }) => {
    try {
      const { path, system } = data.payload;
      let deleted = false;

      if (system) {
        const cdnCache = await fsCache.open("cdn");
        const requestUrl = \`https://\${path}\`;
        deleted = await cdnCache.delete(requestUrl);
      } else {
        const stgCache = await fsCache.open("staging");
        const globalCache = await fsCache.open("local");
        const requestUrl = getLocalUrl(path);
        const deletedFromStg = await stgCache.delete(requestUrl);
        const deletedFromGlobal = await globalCache.delete(requestUrl);
        deleted = deletedFromStg || deletedFromGlobal;
      }

      if (!deleted) {
        throw new Error(\`File not found: \${path}\`);
      }
      respond({ path }, "FS_DELETE_SUCCESS");
    } catch (error) {
      respond({ error: error.message }, "FS_DELETE_ERROR");
    }
  },

  "FS:DELETE_DIRECTORY": async (data, { respond }) => {
    try {
      const { path, system } = data.payload;

      if (system) {
        respond(
          { path, message: "System directory deletion not supported." },
          "FS_DIRECTORY_DELETE_SKIPPED"
        );
        return;
      }

      const stgCache = await fsCache.open("staging");
      const globalCache = await fsCache.open("local");
      const dirPath = path.endsWith("/") ? path : \`\${path}/\`;

      const keysInStgDir = await fsCache.getKeysInDirectory(stgCache, dirPath);
      const keysInGlobalDir = await fsCache.getKeysInDirectory(globalCache, dirPath);

      const allKeys = [...keysInStgDir, ...keysInGlobalDir];
      const uniqueUrls = [...new Set(allKeys.map((req) => req.url))];

      const deletionPromises = uniqueUrls.flatMap((url) => [
        stgCache.delete(url),
        globalCache.delete(url),
      ]);

      await Promise.all(deletionPromises);
      respond({ path }, "FS_DIRECTORY_DELETE_SUCCESS");
    } catch (error) {
      respond({ error: error.message }, "FS_DIRECTORY_DELETE_ERROR");
    }
  },

  "FS:LIST_FILES": async (data, { respond }) => {
    try {
      const { path = "/", system } = data.payload;

      if (system) {
        // List files from CDN cache
        const cdnCache = await fsCache.open("cdn");
        const keys = await cdnCache.keys();
        const pathPrefix =
          path === "/" ? "" : path.endsWith("/") ? path : \`\${path}/\`;
        const directChildren = new Map();

        for (const req of keys) {
          const url = new URL(req.url);
          const fullPath = \`\${url.hostname}\${url.pathname}\`;

          if (path !== "/" && !fullPath.startsWith(pathPrefix)) continue;

          const relativePath =
            path === "/" ? fullPath : fullPath.substring(pathPrefix.length);

          if (!relativePath) continue;

          const firstSlashIndex = relativePath.indexOf("/");
          const segmentName =
            firstSlashIndex === -1
              ? relativePath
              : relativePath.substring(0, firstSlashIndex);

          if (!segmentName) continue;

          const isDirectory = firstSlashIndex !== -1;
          const childPath = \`\${pathPrefix}\${segmentName}\${isDirectory ? "/" : ""}\`;

          if (!directChildren.has(childPath)) {
            directChildren.set(childPath, {
              path: childPath,
              name: segmentName,
              isDirectory,
            });
          }
        }

        const filesList = Array.from(directChildren.values());
        filesList.sort((a, b) => {
          if (a.isDirectory !== b.isDirectory) return a.isDirectory ? -1 : 1;
          return a.name.localeCompare(b.name);
        });
        respond(filesList);
        return;
      }

      // List local files
      const dirPath = path.endsWith("/") ? path : \`\${path}/\`;
      const stgCache = await fsCache.open("staging");
      const globalCache = await fsCache.open("local");

      const stgKeys = await fsCache.getKeysInDirectory(stgCache, dirPath);
      const globalKeys = await fsCache.getKeysInDirectory(globalCache, dirPath);

      const requestMap = new Map();
      globalKeys.forEach((req) => requestMap.set(req.url, req));
      stgKeys.forEach((req) => requestMap.set(req.url, req));
      const keys = Array.from(requestMap.values());

      const pathPromises = keys.map(async (req) => {
        const fullPathUrl = new URL(req.url).pathname;
        const isDirPlaceholder = fullPathUrl.endsWith(".dir-placeholder");
        const finalPath = isDirPlaceholder
          ? fullPathUrl.replace(/\\.dir-placeholder$/, "")
          : fullPathUrl;
        return { path: finalPath };
      });

      const allCacheEntries = (await Promise.all(pathPromises)).filter(Boolean);
      const directChildren = new Map();

      for (const entry of allCacheEntries) {
        if (!entry.path.startsWith(dirPath)) continue;
        const relativePath = entry.path.substring(dirPath.length);
        if (relativePath === "") continue;

        const firstSlashIndex = relativePath.indexOf("/");
        const segmentName =
          firstSlashIndex === -1
            ? relativePath
            : relativePath.substring(0, firstSlashIndex);
        if (!segmentName) continue;

        const isDirectory = firstSlashIndex !== -1 || entry.path.endsWith("/");
        if (isDirectory) {
          const childDirPath = \`\${dirPath}\${segmentName}/\`;
          if (!directChildren.has(childDirPath)) {
            directChildren.set(childDirPath, {
              path: childDirPath,
              name: segmentName,
              isDirectory: true,
            });
          }
        } else {
          const childFilePath = \`\${dirPath}\${segmentName}\`;
          if (!directChildren.has(childFilePath)) {
            directChildren.set(childFilePath, {
              path: childFilePath,
              name: segmentName,
              isDirectory: false,
            });
          }
        }
      }

      const filesList = Array.from(directChildren.values());
      filesList.sort((a, b) => {
        if (a.isDirectory !== b.isDirectory) return a.isDirectory ? -1 : 1;
        return a.name.localeCompare(b.name);
      });

      respond(filesList);
    } catch (error) {
      console.error("Service Worker Error in FS:LIST_FILES:", error);
      respond({ error: error.message }, "FS_LIST_ERROR");
    }
  },

  "FS:DIR_EXISTS": async (data, { respond }) => {
    try {
      const { path } = data.payload;
      if (!path) throw new Error("Payload must include 'path'.");
      const dirPath = path.endsWith("/") ? path : \`\${path}/\`;
      const stgCache = await fsCache.open("staging");
      const globalCache = await fsCache.open("local");

      const stgKeys = await fsCache.getKeysInDirectory(stgCache, dirPath);
      if (stgKeys.length > 0) {
        respond(true);
        return;
      }

      const globalKeys = await fsCache.getKeysInDirectory(globalCache, dirPath);
      respond(globalKeys.length > 0);
    } catch (error) {
      respond({ error: error.message }, "FS_DIR_EXISTS_ERROR");
    }
  },

  "FS:FILE_EXISTS": async (data, { respond }) => {
    try {
      const { path } = data.payload;
      if (!path) throw new Error("Payload must include 'path'.");
      const stgCache = await fsCache.open("staging");
      const globalCache = await fsCache.open("local");
      const requestUrl = getLocalUrl(path);

      let response = await stgCache.match(requestUrl);
      if (response) {
        respond(true);
        return;
      }

      response = await globalCache.match(requestUrl);
      respond(!!response);
    } catch (error) {
      respond({ error: error.message }, "FS_FILE_EXISTS_ERROR");
    }
  },
});
`,mimeType:"text/javascript"},"/package.json":{content:`{
  "name": "meetup.rio",
  "version": "0.1.0",
  "description": "Discover Rio de Janeiro - Places, Events, and Things to Do",
  "type": "module",
  "dependencies": {
    "@bootstrapp/auth": "file:../../public/auth",
    "@bootstrapp/base": "file:../../public/base",
    "@bootstrapp/model": "file:../../public/model",
    "@bootstrapp/model-indexeddb": "file:../../public/model-indexeddb",
    "@bootstrapp/model-pocketbase": "file:../../public/model-pocketbase",
    "@bootstrapp/model-hybrid": "file:../../public/model-hybrid",
    "@bootstrapp/sw": "file:../../public/sw",
    "@bootstrapp/controller": "file:../../public/controller",
    "@bootstrapp/events": "file:../../public/events",
    "@bootstrapp/i18n": "file:../../public/i18n",
    "@bootstrapp/icon-lucide": "file:../../public/icon-lucide",
    "@bootstrapp/router": "file:../../public/router",
    "@bootstrapp/tailwind": "file:../../public/tailwind",
    "@bootstrapp/theme": "file:../../public/theme",
    "@bootstrapp/types": "file:../../public/types",
    "@bootstrapp/uix": "file:../../public/uix",
    "@bootstrapp/view": "file:../../public/view",
    "@bootstrapp/admin": "file:../../public/admin",
    "@bootstrapp/maps": "file:../../public/maps",
    "@bootstrapp/extension": "file:../../public/extension",
    "@bootstrapp/bundler": "file:../../public/bundler",
    "@bootstrapp/github": "file:../../public/github",
    "pocketbase": "^0.26.5"
  },
  "settings": {
    "name": "Meetup Rio",
    "short_name": "Meetup.Rio",
    "description": "Discover Rio de Janeiro - Places, Events, and Things to Do",
    "url": "https://meetup.rio/",
    "theme_color": "#00d4aa",
    "og_image": "/assets/cover.png",
    "emojiIcon": "\u{1F334}",
    "scope": "/"
  },
  "theme": {
    "font": {
      "family": "Manrope"
    },
    "icon": {
      "family": "lucide"
    },
    "color": {
      "primary": "hsl(179 85% 53%)",
      "secondary": "hsl(6 90% 64%)",
      "accent": "hsl(6 90% 64%)",
      "surface": "hsl(100 35% 80%)",
      "text": "hsl(183 80% 34%)",
      "danger": "hsl(0 90% 65%)",
      "border": "#000000",
      "border-subtle": "#5c5050"
    }
  }
}
`,mimeType:"application/json"},"/index.js":{content:`import "/models/schema.js";
`,mimeType:"text/javascript"},"/models/schema.js":{content:`export const version = 3;

import { slugHooks } from "/$app/model/slug.js";
import T from "/$app/types/index.js";
import $APP from "/$app.js";

const generateId = () => {
  const timestamp = String(Date.now() + Math.floor(Math.random() * 100));
  const random = Math.floor(Math.random() * 100)
    .toString()
    .padStart(2, "0");
  return Number(timestamp + random);
};

const generateUserId = generateId;
const generateContentId = generateId;

$APP.models.set({
  users: {
    id: T.string({ required: true }),
    name: T.string({ required: true }),
    username: T.string(),
    bio: T.string(),
    avatar: T.string(), // PocketBase expects file upload, not URL
    stats: T.object(),

    // Prototype auth
    email: T.string({ required: true }), // Required by PocketBase
    password: T.string(),
    passwordConfirm: T.string(),
    isGuest: T.boolean({ defaultValue: false }),

    // Onboarding Fields
    travelStatus: T.string({ defaultValue: "visitor" }),
    arrivalDate: T.string(),
    departureDate: T.string(),
    vibeTime: T.string({ defaultValue: "night" }),
    vibeSocial: T.string({ defaultValue: "social" }),
    vibeDrink: T.string({ defaultValue: "caipirinha" }),
    lookingFor: T.array({ defaultValue: [] }),

    // Location
    lastKnownLat: T.number(),
    lastKnownLng: T.number(),

    // User Interactions - Likes
    likedPlaces: T.belongs_many("places"),
    likedEvents: T.belongs_many("events"),
    likedMeetups: T.belongs_many("meetups"),
    likedGroups: T.belongs_many("groups"),

    // User Interactions - Interests (only for events/meetups)
    interestedEvents: T.belongs_many("events"),
    interestedMeetups: T.belongs_many("meetups"),

    // User Interactions - Skips
    skippedPlaces: T.belongs_many("places"),
    skippedEvents: T.belongs_many("events"),
    skippedMeetups: T.belongs_many("meetups"),
    skippedGroups: T.belongs_many("groups"),

    createdAt: T.string({}),
  },
  places: {
    $hooks: slugHooks("name", "slug"),
    // Core
    id: T.string({ required: true }),
    name: T.string({ required: true }),
    slug: T.string({ index: true, immutable: true }),
    description: T.string({ required: true }),
    category: T.string({ required: true, index: true }),
    image: T.string({ required: true }),

    // Location
    address: T.string(),
    lat: T.number({ index: true }),
    lng: T.number({ index: true }),

    // Social
    whatsappLink: T.string(),
    featured: T.boolean({ defaultValue: false, index: true }),

    // Metadata
    createdAt: T.string({ required: true, index: true }),
    order: T.number({ index: true }),
  },
  events: {
    $hooks: slugHooks("name", "slug"),
    // Core
    id: T.string({ required: true }),
    name: T.string({ required: true }),
    slug: T.string({ index: true, immutable: true }),
    description: T.string({ required: true }),
    category: T.string({ required: true, index: true }),
    image: T.string({ required: true }),

    // Event details
    date: T.string({ index: true }),
    time: T.string(),
    venue: T.string(),

    // Pricing
    price: T.number({ defaultValue: 0 }),
    currency: T.string({ defaultValue: "BRL" }),
    ticketLink: T.string(),

    // Location
    lat: T.number({ index: true }),
    lng: T.number({ index: true }),

    // Relationships
    place: T.belongs("places"), // FK to places (optional)

    // Recurrence
    isRecurring: T.boolean({ defaultValue: false, index: true }),
    recurrencePattern: T.string(),
    recurrenceDays: T.array({ defaultValue: [] }),
    recurrenceEndDate: T.string(),
    recurrenceParentId: T.string({ index: true }),

    // Social
    attendees: T.array({ defaultValue: [] }),
    createdBy: T.belongs("users"),
    maxAttendees: T.number({ defaultValue: 20 }),
    isActive: T.boolean({ defaultValue: true, index: true }),
    whatsappLink: T.string(),

    // Metadata
    createdAt: T.string({ required: true, index: true }),
    order: T.number({ index: true }),
  },
  meetups: {
    $hooks: slugHooks("name", "slug"),
    // Core
    id: T.string({ required: true }),
    name: T.string({ required: true }),
    slug: T.string({ index: true, immutable: true }),
    description: T.string({ required: true }),
    category: T.string({ required: true, index: true }),
    image: T.string({ required: true }),
    date: T.string({ index: true }),
    time: T.string(),
    venue: T.string(),

    // Relationships (mutually exclusive)
    event: T.belongs("events"), // FK to events (optional)
    place: T.belongs("places"), // FK to places (optional)

    // Location
    lat: T.number({ index: true }),
    lng: T.number({ index: true }),

    // Social
    attendees: T.array({ defaultValue: [] }),
    createdBy: T.belongs("users"),
    maxAttendees: T.number({ defaultValue: 20 }),
    isActive: T.boolean({ defaultValue: true, index: true }),

    // Metadata
    createdAt: T.string({ required: true, index: true }),
    order: T.number({ index: true }),
  },
  groups: {
    $hooks: slugHooks("name", "slug"),
    // Core
    id: T.string({ required: true }),
    name: T.string({ required: true }),
    slug: T.string({ index: true, immutable: true }),
    description: T.string({ required: true }),
    category: T.string({ required: true, index: true }),
    image: T.string({ required: true }),

    // Group details
    groupName: T.string(),
    memberCount: T.string(),
    whatsappLink: T.string(),

    // Social
    featured: T.boolean({ defaultValue: false, index: true }),

    // Location (optional, for location-based groups)
    lat: T.number({ index: true }),
    lng: T.number({ index: true }),

    // Metadata
    createdAt: T.string({ required: true, index: true }),
    order: T.number({ index: true }),
  },
  // Meetup attendance tracking (events don't need attendance - users attend meetups)
  meetup_attendance: {
    id: T.string({ required: true }),
    user: T.belongs("users", { required: true }),
    meetup: T.belongs("meetups", { required: true }),
    status: T.string({
      defaultValue: "attending",
      enum: ["attending", "maybe", "cancelled"],
    }),
    joinedAt: T.string({ required: true, index: true }),
    updatedAt: T.string({ index: true }),
    createdAt: T.string({ required: true }),
  },
});
const users = [
  { id: "guest", name: "Guest", email: "guest@localhost", isGuest: true },
  {
    id: generateUserId(),
    name: "John Brooklyn",
    username: "@johnbrooklyn",
    bio: "Travel writers who wrote my own story. Living my life in my style.",
    email: "john.brooklyn@example.com",
    stats: {
      interested: 1359,
      saved: 876,
      attending: 28,
    },
    // Default Values for New Fields
    travelStatus: "visitor",
    arrivalDate: "2025-12-01",
    departureDate: "2025-12-15",
    vibeTime: "morning",
    vibeSocial: "social",
    vibeDrink: "coconut",
    lookingFor: ["dates", "activities"],
    createdAt: new Date().toISOString(),
    password: "123456890",
    passwordConfirm: "123456890",
  },
  {
    id: generateUserId(),
    name: "Maria Silva",
    username: "@mariasilva",
    bio: "Rio local, samba lover, and night owl. Let's dance! \u{1F483}",
    email: "maria.silva@example.com",
    stats: {
      interested: 234,
      saved: 156,
      attending: 42,
    },
    travelStatus: "resident",
    vibeTime: "night",
    vibeSocial: "social",
    vibeDrink: "caipirinha",
    lookingFor: ["friends", "parties"],
    createdAt: new Date().toISOString(),
    password: "123456890",
    passwordConfirm: "123456890",
  },
  {
    id: generateUserId(),
    name: "Carlos Mendez",
    username: "@carlosnomad",
    bio: "Digital nomad exploring South America. Always down for a beach day!",
    email: "carlos.mendez@example.com",
    stats: {
      interested: 567,
      saved: 345,
      attending: 38,
    },
    travelStatus: "nomad",
    arrivalDate: "2025-12-01",
    departureDate: "2026-02-28",
    vibeTime: "morning",
    vibeSocial: "chill",
    vibeDrink: "coconut",
    lookingFor: ["friends", "tips", "activities"],
    createdAt: new Date().toISOString(),
    password: "123456890",
    passwordConfirm: "123456890",
  },
  {
    id: generateUserId(),
    name: "Ana Costa",
    username: "@anacosta",
    bio: "Party girl visiting from S\xE3o Paulo. Show me Rio's nightlife! \u{1F389}",
    email: "ana.costa@example.com",
    stats: {
      interested: 892,
      saved: 234,
      attending: 18,
    },
    travelStatus: "visitor",
    arrivalDate: "2025-12-10",
    departureDate: "2025-12-20",
    vibeTime: "night",
    vibeSocial: "social",
    vibeDrink: "beer",
    lookingFor: ["parties", "dates"],
    createdAt: new Date().toISOString(),
    password: "123456890",
    passwordConfirm: "123456890",
  },
  {
    id: generateUserId(),
    name: "Lucas Santos",
    username: "@lucassantos",
    bio: "Carioca born and raised. Morning runs and a\xE7a\xED bowls are my thing.",
    email: "lucas.santos@example.com",
    stats: {
      interested: 445,
      saved: 289,
      attending: 31,
    },
    travelStatus: "resident",
    vibeTime: "morning",
    vibeSocial: "chill",
    vibeDrink: "coconut",
    lookingFor: ["activities", "tips"],
    createdAt: new Date().toISOString(),
    password: "123456890",
    passwordConfirm: "123456890",
  },
  {
    id: generateUserId(),
    name: "Julia Martinez",
    username: "@juliatraveler",
    bio: "Solo traveler making friends around the world. Let's explore Rio together!",
    email: "julia.martinez@example.com",
    stats: {
      interested: 1123,
      saved: 678,
      attending: 45,
    },
    travelStatus: "visitor",
    arrivalDate: "2025-12-05",
    departureDate: "2025-12-25",
    vibeTime: "night",
    vibeSocial: "social",
    vibeDrink: "caipirinha",
    lookingFor: ["friends", "parties", "dates"],
    createdAt: new Date().toISOString(),
    password: "123456890",
    passwordConfirm: "123456890",
  },
  {
    id: generateUserId(),
    name: "Pedro Oliveira",
    username: "@pedrolocal",
    bio: "Beach volleyball enthusiast and Rio tour guide. Ask me anything!",
    email: "pedro.oliveira@example.com",
    stats: {
      interested: 356,
      saved: 234,
      attending: 52,
    },
    travelStatus: "resident",
    vibeTime: "morning",
    vibeSocial: "social",
    vibeDrink: "beer",
    lookingFor: ["friends", "activities"],
    createdAt: new Date().toISOString(),
    password: "123456890",
    passwordConfirm: "123456890",
  },
  {
    id: generateUserId(),
    name: "Sofia Rodriguez",
    username: "@sofiaexplorer",
    bio: "Remote worker and adventure seeker. Yoga, hiking, and good coffee \u2615",
    email: "sofia.rodriguez@example.com",
    stats: {
      interested: 789,
      saved: 445,
      attending: 35,
    },
    travelStatus: "nomad",
    arrivalDate: "2025-11-15",
    departureDate: "2026-01-31",
    vibeTime: "morning",
    vibeSocial: "chill",
    vibeDrink: "coconut",
    lookingFor: ["tips", "activities", "friends"],
    createdAt: new Date().toISOString(),
    password: "123456890",
    passwordConfirm: "123456890",
  },
  {
    id: generateUserId(),
    name: "Diego Fernandez",
    username: "@diegofernandez",
    bio: "Here for the holidays! Looking to party and meet cool people \u{1F37B}",
    email: "diego.fernandez@example.com",
    stats: {
      interested: 445,
      saved: 167,
      attending: 12,
    },
    travelStatus: "visitor",
    arrivalDate: "2025-12-15",
    departureDate: "2025-12-30",
    vibeTime: "night",
    vibeSocial: "social",
    vibeDrink: "beer",
    lookingFor: ["parties", "friends"],
    createdAt: new Date().toISOString(),
    password: "123456890",
    passwordConfirm: "123456890",
  },
  {
    id: generateUserId(),
    name: "Beatriz Lima",
    username: "@beatrizcarioca",
    bio: "Rio de Janeiro \xE9 meu amor! Coffee addict and culture enthusiast \u{1F3AD}",
    email: "beatriz.lima@example.com",
    stats: {
      interested: 612,
      saved: 389,
      attending: 37,
    },
    travelStatus: "resident",
    vibeTime: "night",
    vibeSocial: "social",
    vibeDrink: "caipirinha",
    lookingFor: ["friends", "dates"],
    createdAt: new Date().toISOString(),
    password: "123456890",
    passwordConfirm: "123456890",
  },
  {
    id: generateUserId(),
    name: "Rafael Almeida",
    username: "@rafaelrio",
    bio: "Surf instructor and beach lover. Catch me at Prainha! \u{1F3C4}\u200D\u2642\uFE0F",
    email: "rafael.almeida@example.com",
    stats: {
      interested: 234,
      saved: 145,
      attending: 22,
    },
    travelStatus: "resident",
    vibeTime: "morning",
    vibeSocial: "chill",
    vibeDrink: "coconut",
    lookingFor: ["activities", "friends"],
    createdAt: new Date().toISOString(),
    password: "123456890",
    passwordConfirm: "123456890",
  },
  {
    id: generateUserId(),
    name: "Emma Thompson",
    username: "@emmaexplores",
    bio: "British expat living in Rio for 2 years. Love samba and a\xE7a\xED!",
    email: "emma.thompson@example.com",
    stats: {
      interested: 567,
      saved: 345,
      attending: 41,
    },
    travelStatus: "resident",
    vibeTime: "night",
    vibeSocial: "social",
    vibeDrink: "caipirinha",
    lookingFor: ["parties", "friends"],
    createdAt: new Date().toISOString(),
    password: "123456890",
    passwordConfirm: "123456890",
  },
  {
    id: generateUserId(),
    name: "Gabriel Souza",
    username: "@gabrielcarioca",
    bio: "DJ and music producer. Ask me about Rio's underground scene \u{1F3A7}",
    email: "gabriel.souza@example.com",
    stats: {
      interested: 892,
      saved: 567,
      attending: 63,
    },
    travelStatus: "resident",
    vibeTime: "night",
    vibeSocial: "social",
    vibeDrink: "beer",
    lookingFor: ["parties", "friends"],
    createdAt: new Date().toISOString(),
    password: "123456890",
    passwordConfirm: "123456890",
  },
  {
    id: generateUserId(),
    name: "Isabella Chen",
    username: "@isabellawanderer",
    bio: "Travel blogger from Singapore. Documenting my South America journey!",
    email: "isabella.chen@example.com",
    stats: {
      interested: 1456,
      saved: 892,
      attending: 28,
    },
    travelStatus: "visitor",
    arrivalDate: "2025-12-01",
    departureDate: "2025-12-20",
    vibeTime: "morning",
    vibeSocial: "social",
    vibeDrink: "coconut",
    lookingFor: ["tips", "activities", "friends"],
    createdAt: new Date().toISOString(),
    password: "123456890",
    passwordConfirm: "123456890",
  },
  {
    id: generateUserId(),
    name: "Thiago Barbosa",
    username: "@thiagofitness",
    bio: "Personal trainer and CrossFit enthusiast. Training on the beach daily!",
    email: "thiago.barbosa@example.com",
    stats: {
      interested: 345,
      saved: 189,
      attending: 34,
    },
    travelStatus: "resident",
    vibeTime: "morning",
    vibeSocial: "chill",
    vibeDrink: "coconut",
    lookingFor: ["activities", "friends"],
    createdAt: new Date().toISOString(),
    password: "123456890",
    passwordConfirm: "123456890",
  },
];
// Generate IDs for events that will be referenced by meetups
const carnivalBallId = generateContentId();

$APP.data.set({
  places: [
    // BEACHES
    {
      id: generateContentId(),
      name: "Copacabana Beach",
      description:
        "Iconic 4km beach with the famous wave-pattern boardwalk. Perfect for sunbathing, swimming, and people-watching.",
      category: "beaches",
      image: "https://picsum.photos/seed/copacabana/800/1200",
      address: "Av. Atl\xE2ntica, Copacabana, Rio de Janeiro",
      lat: -22.9711,
      lng: -43.1822,
      createdAt: "2025-01-01T00:00:00Z",
      order: 4,
    },
    {
      id: generateContentId(),
      name: "Ipanema Beach",
      description:
        "Trendy beach known for its stunning sunsets, upscale neighborhood, and the famous 'Girl from Ipanema' song.",
      category: "beaches",
      image: "https://picsum.photos/seed/ipanema/800/1200",
      address: "Av. Vieira Souto, Ipanema, Rio de Janeiro",
      lat: -22.9838,
      lng: -43.2044,
      whatsappLink: "https://wa.me/?text=Ipanema%20Beach%20is%20amazing!%20\u{1F305}",
      createdAt: "2025-01-02T00:00:00Z",
      order: 2,
    },
    {
      id: generateContentId(),
      name: "Prainha",
      description:
        "Hidden gem beach surrounded by lush green mountains. Less crowded, perfect for surfing and nature lovers.",
      category: "beaches",
      image: "https://picsum.photos/seed/prainha/800/1200",
      address: "Av. Estado da Guanabara, Recreio dos Bandeirantes",
      lat: -23.0425,
      lng: -43.5008,
      whatsappLink:
        "https://wa.me/?text=Found%20this%20hidden%20beach%20gem%20-%20Prainha!%20\u{1F3C4}",
      createdAt: "2025-01-03T00:00:00Z",
      order: 3,
    },

    // NIGHTLIFE
    {
      id: generateContentId(),
      name: "Lapa Arches Street Party",
      description:
        "Historic neighborhood known for samba, live music, and vibrant nightlife under the famous arches.",
      category: "nightlife",
      image: "https://picsum.photos/seed/lapa/800/1200",
      address: "Arcos da Lapa, Centro, Rio de Janeiro",
      lat: -22.913,
      lng: -43.1802,
      whatsappLink:
        "https://wa.me/?text=Let's%20party%20at%20Lapa%20Arches!%20\u{1F389}",
      createdAt: "2025-01-04T00:00:00Z",
      order: 4,
    },

    // FOOD & DRINKS
    {
      id: generateContentId(),
      name: "Confeiteiro Colombo",
      description:
        "Historic Belle \xC9poque caf\xE9 serving traditional Brazilian pastries and coffee since 1894. A must-visit!",
      category: "food",
      image: "https://picsum.photos/seed/colombo/800/1200",
      address: "Rua Gon\xE7alves Dias, 32, Centro",
      lat: -22.9067,
      lng: -43.1773,
      whatsappLink:
        "https://wa.me/?text=Amazing%20historic%20caf\xE9%20-%20Confeitaria%20Colombo!%20\u2615",
      createdAt: "2025-01-07T00:00:00Z",
      order: 7,
    },
    {
      id: generateContentId(),
      name: "Churrascaria Palace",
      description:
        "Traditional Brazilian steakhouse with unlimited rod\xEDzio service. Experience the best cuts of meat!",
      category: "food",
      image: "https://picsum.photos/seed/churrasco/800/1200",
      address: "Rua Rodolfo Dantas, 16, Copacabana",
      lat: -22.9688,
      lng: -43.1862,
      whatsappLink: "https://wa.me/?text=Best%20churrascaria%20in%20Rio!%20\u{1F969}",
      createdAt: "2025-01-08T00:00:00Z",
      order: 8,
    },

    // ATTRACTIONS
    {
      id: generateContentId(),
      name: "Christ the Redeemer",
      description:
        "Iconic 98-foot Art Deco statue atop Corcovado Mountain. One of the New Seven Wonders of the World!",
      category: "attractions",
      image: "https://picsum.photos/seed/christ/800/1200",
      address: "Parque Nacional da Tijuca, Alto da Boa Vista",
      lat: -22.9519,
      lng: -43.2105,
      whatsappLink:
        "https://wa.me/?text=Visiting%20Christ%20the%20Redeemer!%20\u271D\uFE0F",
      createdAt: "2025-01-10T00:00:00Z",
      order: 10,
    },
    {
      id: generateContentId(),
      name: "Sugarloaf Mountain Cable Car",
      description:
        "Take the cable car to the top for breathtaking 360\xB0 views of Rio, beaches, and Guanabara Bay.",
      category: "attractions",
      image: "https://picsum.photos/seed/sugarloaf/800/1200",
      address: "Av. Pasteur, 520, Urca",
      lat: -22.9489,
      lng: -43.1575,
      whatsappLink:
        "https://wa.me/?text=Amazing%20views%20from%20Sugarloaf%20Mountain!%20\u{1F6A1}",
      createdAt: "2025-01-11T00:00:00Z",
      order: 11,
    },
    {
      id: generateContentId(),
      name: "Escadaria Selar\xF3n",
      description:
        "Colorful mosaic staircase with 215 steps, decorated with tiles from over 60 countries. Perfect for photos!",
      category: "attractions",
      image: "https://picsum.photos/seed/selaron/800/1200",
      address: "Rua Joaquim Silva, Lapa",
      lat: -22.915,
      lng: -43.1796,
      whatsappLink:
        "https://wa.me/?text=Check%20out%20these%20colorful%20steps!%20\u{1F3A8}",
      createdAt: "2025-01-12T00:00:00Z",
      order: 12,
    },
    {
      id: generateContentId(),
      name: "Rio Botanical Garden",
      description:
        "Peaceful 340-acre garden with over 6,500 species. Home to giant water lilies and the famous palm tree avenue.",
      category: "attractions",
      image: "https://picsum.photos/seed/botanical/800/1200",
      address: "Rua Jardim Bot\xE2nico, 1008, Jardim Bot\xE2nico",
      lat: -22.9668,
      lng: -43.2246,
      whatsappLink:
        "https://wa.me/?text=Beautiful%20Botanical%20Garden%20in%20Rio!%20\u{1F334}",
      createdAt: "2025-01-14T00:00:00Z",
      order: 14,
    },
    {
      id: generateContentId(),
      name: "Arpoador Rock Sunset",
      description:
        "Famous spot where locals gather to watch the sunset between Ipanema and Copacabana. Bring your camera!",
      category: "attractions",
      image: "https://picsum.photos/seed/arpoador/800/1200",
      address: "Arpoador, between Ipanema and Copacabana",
      lat: -22.9897,
      lng: -43.1898,
      whatsappLink: "https://wa.me/?text=Best%20sunset%20spot%20in%20Rio!%20\u{1F307}",
      createdAt: "2025-01-15T00:00:00Z",
      order: 15,
    },
  ],
  events: [
    {
      id: carnivalBallId,
      name: "Copacabana Palace Carnival Ball",
      description:
        "Exclusive black-tie carnival ball at the iconic Copacabana Palace Hotel. Experience glamour and tradition! Dress code is strictly black tie or luxury costume.",
      category: "nightlife",
      image: "https://picsum.photos/seed/carnival/800/1200",
      date: "2025-03-01",
      time: "22:00",
      venue: "Copacabana Palace Hotel",
      price: 2500,
      currency: "BRL",
      ticketLink: "https://example.com/tickets",
      lat: -22.9667,
      lng: -43.1756,
      createdAt: "2025-01-05T00:00:00Z",
      order: 1,
    },
    {
      id: generateContentId(),
      name: "Pedra do Sal Samba Night",
      description:
        "Authentic outdoor samba gathering every Monday and Friday. Free event with locals dancing in the streets!",
      category: "nightlife",
      image: "https://picsum.photos/seed/samba/800/1200",
      date: "2025-12-05",
      time: "19:00",
      venue: "Pedra do Sal, Sa\xFAde",
      lat: -22.8955,
      lng: -43.1896,
      isRecurring: true,
      recurrencePattern: "custom",
      recurrenceDays: [1, 5], // Monday and Friday
      recurrenceEndDate: "2026-03-31",
      attendees: [],
      whatsappLink:
        "https://wa.me/?text=Join%20me%20for%20samba%20at%20Pedra%20do%20Sal!%20\u{1F483}",
      createdAt: "2025-01-06T00:00:00Z",
      order: 6,
    },
    {
      id: generateContentId(),
      name: "Rio Food Truck Festival",
      description:
        "Monthly food festival with 30+ gourmet food trucks, live music, and craft beer. Variety for everyone!",
      category: "food",
      image: "https://picsum.photos/seed/foodtruck/800/1200",
      date: "2025-12-15",
      time: "12:00",
      venue: "Parque dos Atletas, Barra da Tijuca",
      lat: -22.9844,
      lng: -43.3958,
      attendees: [
        users[0].id,
        users[1].id,
        users[2].id,
        users[3].id,
        users[4].id,
        users[5].id,
      ],
      whatsappLink:
        "https://wa.me/?text=Food%20Truck%20Festival%20this%20weekend!%20\u{1F354}",
      createdAt: "2025-01-09T00:00:00Z",
      order: 9,
    },
    {
      id: generateContentId(),
      name: "Maracan\xE3 Stadium Tour",
      description:
        "Guided tour of the legendary football stadium. Walk on the field, visit locker rooms, and feel the history!",
      category: "attractions",
      image: "https://picsum.photos/seed/maracana/800/1200",
      date: "2025-12-10",
      time: "14:00",
      venue: "Est\xE1dio do Maracan\xE3, Maracan\xE3",
      lat: -22.9121,
      lng: -43.2302,
      attendees: [
        users[0].id,
        users[1].id,
        users[2].id,
        users[3].id,
        users[4].id,
        users[5].id,
      ],
      whatsappLink: "https://wa.me/?text=Stadium%20tour%20at%20Maracan\xE3!%20\u26BD",
      createdAt: "2025-01-13T00:00:00Z",
      order: 13,
    },
    {
      id: generateContentId(),
      name: "Copacabana Beach Volleyball",
      description:
        "Weekly pickup volleyball games at Copacabana Beach. All skill levels welcome! Bring water and sunscreen.",
      category: "attractions",
      image: "https://picsum.photos/seed/beachvolley/800/1200",
      date: "2025-12-07",
      time: "09:00",
      venue: "Posto 6, Copacabana Beach",
      lat: -22.9711,
      lng: -43.1822,
      isRecurring: true,
      recurrencePattern: "custom",
      recurrenceDays: [0, 6], // Sunday and Saturday
      recurrenceEndDate: "2026-02-28",
      attendees: [
        users[0].id,
        users[1].id,
        users[2].id,
        users[3].id,
        users[4].id,
        users[5].id,
      ],
      whatsappLink:
        "https://wa.me/?text=Beach%20Volleyball%20this%20weekend!%20\u{1F3D0}",
      createdAt: "2025-01-19T00:00:00Z",
      order: 16,
    },
    {
      id: generateContentId(),
      name: "Ipanema Sunset Yoga",
      description:
        "Free outdoor yoga sessions at sunset. Bring your own mat and enjoy the ocean breeze. Beginner-friendly!",
      category: "attractions",
      image: "https://picsum.photos/seed/yoga/800/1200",
      date: "2025-12-05",
      time: "17:30",
      venue: "Arpoador Beach",
      lat: -22.9897,
      lng: -43.1898,
      isRecurring: true,
      recurrencePattern: "custom",
      recurrenceDays: [2, 4], // Tuesday and Thursday
      recurrenceEndDate: "2026-03-31",
      attendees: [
        users[0].id,
        users[1].id,
        users[2].id,
        users[3].id,
        users[4].id,
        users[5].id,
      ],
      whatsappLink: "https://wa.me/?text=Sunset%20Yoga%20at%20Arpoador!%20\u{1F9D8}",
      createdAt: "2025-01-20T00:00:00Z",
      order: 17,
    },
    {
      id: generateContentId(),
      name: "Downtown Food Market",
      description:
        "Weekly food market featuring local vendors, fresh produce, and street food. Support local businesses!",
      category: "food",
      image: "https://picsum.photos/seed/market/800/1200",
      date: "2025-12-05",
      time: "12:00",
      venue: "Pra\xE7a XV, Centro",
      lat: -22.9035,
      lng: -43.1758,
      isRecurring: true,
      recurrencePattern: "custom",
      recurrenceDays: [4], // Thursday
      recurrenceEndDate: "2025-12-31",
      attendees: [
        users[0].id,
        users[1].id,
        users[2].id,
        users[3].id,
        users[4].id,
        users[5].id,
      ],
      whatsappLink: "https://wa.me/?text=Food%20Market%20on%20Thursday!%20\u{1F34E}",
      createdAt: "2025-01-21T00:00:00Z",
      order: 18,
    },
    {
      id: generateContentId(),
      name: "Lapa Street Party",
      description:
        "The legendary Lapa nightlife experience! Samba, caipirinhas, and live music under the arches every weekend.",
      category: "nightlife",
      image: "https://picsum.photos/seed/lapaparty/800/1200",
      date: "2025-12-05",
      time: "22:00",
      venue: "Arcos da Lapa, Centro",
      lat: -22.913,
      lng: -43.1802,
      isRecurring: true,
      recurrencePattern: "custom",
      recurrenceDays: [5, 6], // Friday and Saturday
      recurrenceEndDate: "2026-03-01",
      attendees: [
        users[0].id,
        users[1].id,
        users[2].id,
        users[3].id,
        users[4].id,
        users[5].id,
      ],
      whatsappLink: "https://wa.me/?text=Party%20at%20Lapa%20tonight!%20\u{1F389}",
      createdAt: "2025-01-22T00:00:00Z",
      order: 19,
    },
  ],
  meetups: [
    {
      id: generateContentId(),
      name: "Pre-Ball Drinks \u{1F942}",
      description:
        "Let's meet for some champagne before heading into the Palace! Meeting at the hotel bar.",
      category: "nightlife",
      image: "https://picsum.photos/seed/drinks/800/600",
      date: "2025-03-01",
      time: "20:00",
      venue: "Pergula Restaurant",
      event: carnivalBallId, // Linked to Carnival Ball event
      attendees: [],
      createdAt: "2025-01-25T00:00:00Z",
      order: 3,
    },
  ],
  groups: [
    // FEATURED GROUPS
    {
      id: generateContentId(),
      name: "MEETUP.RIO - Official",
      description:
        "The main MEETUP.RIO community! Connect with travelers, get insider tips, and join events happening around Rio.",
      category: "groups",
      groupName: "MEETUP.RIO - Official",
      memberCount: "1,200+ members",
      image: "https://picsum.photos/seed/meetuprio/800/1200",
      lat: -22.9068,
      lng: -43.1729,
      whatsappLink: "https://chat.whatsapp.com/MEETUPRIO",
      featured: true,
      createdAt: "2025-01-01T00:00:00Z",
      order: 20,
    },
    {
      id: generateContentId(),
      name: "Rio Events & Parties",
      description:
        "Stay updated on the hottest parties, festivals, and events in Rio. Organized by MEETUP.RIO team.",
      category: "groups",
      groupName: "Rio Events & Parties",
      memberCount: "800+ members",
      image: "https://picsum.photos/seed/rioevents/800/1200",
      lat: -22.9068,
      lng: -43.1729,
      whatsappLink: "https://chat.whatsapp.com/RIOEVENTS",
      featured: true,
      createdAt: "2025-01-02T00:00:00Z",
      order: 21,
    },

    // COMMUNITY GROUPS
    {
      id: generateContentId(),
      name: "Ipanema Locals",
      description:
        "Community group for people living in or visiting Ipanema. Share tips, meetups, and local recommendations.",
      category: "groups",
      groupName: "Ipanema Locals",
      memberCount: "350+ members",
      image: "https://picsum.photos/seed/ipanema-group/800/1200",
      lat: -22.9838,
      lng: -43.2044,
      whatsappLink: "https://chat.whatsapp.com/IPANEMA",
      featured: false,
      createdAt: "2025-01-16T00:00:00Z",
      order: 22,
    },
    {
      id: generateContentId(),
      name: "Rio Food Lovers",
      description:
        "For food enthusiasts! Share restaurant recommendations, food truck finds, and organize dinner meetups.",
      category: "groups",
      groupName: "Rio Food Lovers",
      memberCount: "500+ members",
      image: "https://picsum.photos/seed/foodies/800/1200",
      lat: -22.9068,
      lng: -43.1729,
      whatsappLink: "https://chat.whatsapp.com/RIOFOODIES",
      featured: false,
      createdAt: "2025-01-17T00:00:00Z",
      order: 23,
    },
    {
      id: generateContentId(),
      name: "Beach Volleyball Rio",
      description:
        "Join pickup games at Copacabana and Ipanema! All skill levels welcome. Games usually weekends.",
      category: "groups",
      groupName: "Beach Volleyball Rio",
      memberCount: "280+ members",
      image: "https://picsum.photos/seed/volleyball/800/1200",
      lat: -22.9711,
      lng: -43.1822,
      whatsappLink: "https://chat.whatsapp.com/VOLLEYBALL",
      featured: false,
      createdAt: "2025-01-18T00:00:00Z",
      order: 24,
    },
  ],
  users,
});
`,mimeType:"text/javascript"},"/$app/model/slug.js":{content:`/**
 * @file Slug Utilities
 * @description Utilities for generating URL-friendly slugs from strings
 */

/**
 * Convert a string to a URL-friendly slug
 * @param {string} str - String to slugify
 * @returns {string} URL-friendly slug
 * @example
 * slugify("Hello World!") // "hello-world"
 * slugify("Caf\xE9 & A\xE7a\xED") // "cafe-acai"
 */
export const slugify = (str) => {
  if (!str || typeof str !== "string") return "";

  return str
    .toLowerCase()
    .normalize("NFD")
    .replace(/[\\u0300-\\u036f]/g, "") // remove accents
    .replace(/[^a-z0-9]+/g, "-") // non-alphanumeric -> hyphen
    .replace(/^-|-$/g, "") // trim leading/trailing hyphens
    .replace(/-+/g, "-"); // collapse multiple hyphens
};

/**
 * Generate a unique slug by checking against existing records
 * Appends -1, -2, etc. if duplicates exist
 * @param {Object} adapter - Database adapter instance
 * @param {string} model - Model name
 * @param {string} field - Slug field name
 * @param {string} value - Source value to slugify
 * @param {string|number|null} [excludeId=null] - ID to exclude from duplicate check (for edits)
 * @returns {Promise<string>} Unique slug
 * @example
 * await generateUniqueSlug(adapter, "places", "slug", "My Place") // "my-place"
 * await generateUniqueSlug(adapter, "places", "slug", "My Place") // "my-place-1" (if "my-place" exists)
 */
export const generateUniqueSlug = async (
  adapter,
  model,
  field,
  value,
  excludeId = null,
) => {
  const base = slugify(value);
  if (!base) return "";

  let candidate = base;
  let suffix = 0;

  while (true) {
    const existing = await adapter.getAll(model, {
      where: { [field]: candidate },
      limit: 1,
    });

    // No conflict, or only conflict is self (edit case)
    if (!existing.length || existing[0].id === excludeId) {
      return candidate;
    }

    suffix++;
    candidate = \`\${base}-\${suffix}\`;
  }
};

/**
 * Create reusable hooks for auto-generating slugs
 * @param {string} [sourceField="name"] - Field to generate slug from
 * @param {string} [slugField="slug"] - Field to store slug in
 * @returns {Object} Hooks object with beforeAdd and beforeEdit
 * @example
 * // In schema.js
 * import { slugHooks } from "/$app/model/slug.js";
 *
 * places: {
 *   $hooks: slugHooks("name", "slug"),
 *   name: T.string({ required: true }),
 *   slug: T.string({ index: true, immutable: true }),
 * }
 */
export const slugHooks = (sourceField = "name", slugField = "slug") => ({
  beforeAdd: async (data, { model, adapter }) => {
    if (!data[slugField] && data[sourceField]) {
      data[slugField] = await generateUniqueSlug(
        adapter,
        model,
        slugField,
        data[sourceField],
      );
    }
    return data;
  },
  beforeEdit: async (data, { model, adapter }) => {
    // Only regenerate slug if source field changed and slug not manually provided
    // Note: If slug field is immutable, it will be stripped anyway
    if (data[sourceField] && !data[slugField]) {
      data[slugField] = await generateUniqueSlug(
        adapter,
        model,
        slugField,
        data[sourceField],
        data.id,
      );
    }
    return data;
  },
});

export default { slugify, generateUniqueSlug, slugHooks };
`,mimeType:"text/javascript"},"/$app/types/index.js":{content:`/**
 * @file Type System - Type validation and coercion
 * @description Provides type definitions, validation, and conversion utilities
 * for model fields and component properties. Supports primitive types,
 * relationships, and custom validators.
 */

import timestampExt from "./timestamp.js";

/** @type {Object<string, RegExp>} Format validation patterns */
const formats = { email: /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/ };

/**
 * Safely parses JSON with fallback
 * @private
 * @param {string} value - String to parse
 * @returns {*} Parsed value or undefined
 */
const parseJSON = (value) => {
  try {
    return value in specialCases ? value : JSON.parse(value);
  } catch (_) {
    return undefined;
  }
};

/**
 * Special case values for type conversion
 * @private
 * @type {Object}
 */
const specialCases = {
  undefined: undefined,
  null: null,
  "": null,
  [undefined]: undefined,
};

/**
 * Type conversion handlers for each supported type
 * @private
 * @type {Object<string, Function>}
 */
const typeHandlers = {
  any: (value) => value,
  function: (value) => value,
  boolean: (value, { attribute = true } = {}) =>
    (attribute && value === "") || ["true", 1, "1", true].includes(value),
  string: (val) => (val in specialCases ? specialCases[val] : String(val)),
  array: (value, prop = {}) => {
    if (Array.isArray(value)) return value;
    const { itemType } = prop;
    try {
      if (!value) throw value;
      const parsedArray = parseJSON(value);
      if (!Array.isArray(parsedArray)) throw parsedArray;
      return !itemType
        ? parsedArray
        : parsedArray.map((item) =>
            typeof item !== "object"
              ? item
              : Object.entries(item).reduce((obj, [key, val]) => {
                  obj[key] = typeHandlers[itemType[key]?.type]
                    ? typeHandlers[itemType[key].type](val, prop)
                    : val;
                  return obj;
                }, {}),
          );
    } catch (_) {
      return [];
    }
  },
  number: (value) => {
    return value === null || value === undefined || value === ""
      ? value
      : Number(value);
  },
  date: (value) => {
    if (!value) return null;
    if (value instanceof Date) return value;
    return new Date(value);
  },
  datetime: (value) => {
    if (!value) return null;
    if (value instanceof Date) return value;
    const date = new Date(value);
    return date;
  },
  object: (v, prop = {}) => {
    if (v === null) return null;
    const value = typeof v === "string" ? parseJSON(v) : v;
    if (prop.properties && value && typeof value === "object") {
      Object.entries(prop.properties).map(([propKey, propProps]) => {
        if (
          propProps.defaultValue !== undefined &&
          value[propKey] === undefined
        ) {
          value[propKey] = propProps.defaultValue;
        }
      });
    }
    return value;
  },
};

const parse = (value, prop = {}) => {
  const { type } = prop;
  return (typeHandlers[type] || ((val) => val))(value, prop);
};

const validations = {
  datetime: (value, prop = {}) => {
    if (value === null) {
      return prop.required ? ["required", null] : null;
    }
    if (!(value instanceof Date) || Number.isNaN(value.getTime())) {
      return ["invalid", "invalid datetime"];
    }
    if (prop.min && value < new Date(prop.min)) {
      return ["minimum", null];
    }
    if (prop.max && value > new Date(prop.max)) {
      return ["maximum", null];
    }
  },
  date: (value, prop = {}) => {
    if (value === null) {
      return prop.required ? ["required", null] : null;
    }
    if (!(value instanceof Date) || Number.isNaN(value.getTime())) {
      return ["invalid", "invalid date"];
    }
    if (prop.min && value < new Date(prop.min)) {
      return ["minimum", null];
    }
    if (prop.max && value > new Date(prop.max)) {
      return ["maximum", null];
    }
  },
  object: (value, prop = {}) => {
    if (value === null) {
      return prop.required
        ? ["required", null]
        : ["invalid", "null is not an object"];
    }
    if (typeof value !== "object" || Array.isArray(value)) {
      return ["invalid", "not an object"];
    }
  },
  number: (value, prop = {}) => {
    if (Number.isNaN(Number(value))) {
      if (
        !prop.required &&
        (value === null || value === undefined || value === "")
      ) {
        return null;
      }
      return ["NaN", null];
    }
    if ("min" in prop && value < prop.min) {
      return ["minimum", null];
    }
    if ("max" in prop && value > prop.max) {
      return ["maximum", null];
    }
  },
};

const validateField = (value, prop, context = {}) => {
  if (value === undefined && prop.defaultValue !== undefined) {
    value = prop.defaultValue;
  }

  if (
    prop.required === true &&
    (value === undefined || value === null || value === "")
  )
    return ["required", null];
  if (prop.customValidator) {
    const result = prop.customValidator(value, prop, context);
    if (result) return result;
  }
  if (prop.relationship) {
    if (prop.many) {
      return [
        null,
        Array.isArray(value)
          ? value.map((i) => (prop.mixed ? i : (i?.id ?? i)))
          : [],
      ];
    }
    return [null, value?.id ?? value];
  }
  const typeHandler = typeHandlers[prop.type];
  let typedValue = typeHandler ? typeHandler(value, prop) : value;
  if (
    (value === undefined || value === null || value === "") &&
    prop.defaultValue !== undefined
  )
    typedValue = prop.defaultValue;

  if (
    prop.required === true &&
    (typedValue === undefined || typedValue === null || typedValue === "")
  )
    return ["required", null];
  if (!prop.required && (typedValue === null || typedValue === undefined)) {
    if (prop.type === "object" && typedValue === null) {
    } else return [null, typedValue];
  }

  const validation = validations[prop.type];
  if (validation) {
    const errors = validation(typedValue, prop);
    if (errors) return errors;
  }

  if (prop.format) {
    const formatFn =
      formats[prop.format] ||
      (typeof prop.format === "function" ? prop.format : null);

    if (formatFn) {
      const format =
        typeof formatFn === "function"
          ? formatFn
          : (value) => formatFn.test(value);
      const isValid = format(typedValue);
      if (!isValid) return ["invalid", \`invalid format: \${prop.format}\`];
    }
  }

  return [null, typedValue];
};

/**
 * Prototype for methods to be attached to type definition objects.
 * @private
 */
const TypeDefinitionPrototype = {
  /**
   * Validates a value against this type definition.
   * @param {*} value - The value to validate.
   * @param {Object} [context={}] - Additional context for validation.
   * @returns {{valid: boolean, value: *, error: string|null, details: *|null}}
   */
  validate(value, context = {}) {
    const [error, result] = validateField(value, this, context);

    if (error) {
      return {
        valid: false,
        error: error,
        details: result,
        value: value,
      };
    }

    return {
      valid: true,
      value: result,
      error: null,
      details: null,
    };
  },
};

function interpolate(str, data) {
  return str.replace(/\\\${(.*?)}/g, (_, key) => {
    return data[key.trim()];
  });
}

/**
 * Validates an object against a type schema
 * @param {Object} object - Object to validate
 * @param {Object} options - Validation options
 * @param {Object} options.schema - Type schema to validate against
 * @param {Object} [options.row={}] - Original row data for context
 * @param {boolean} [options.undefinedProps=true] - Validate undefined props
 * @param {boolean} [options.validateVirtual=false] - Validate virtual properties
 * @param {string} [options.operation=null] - Operation context (add, edit, etc.)
 * @returns {Array} [errors, validatedObject] tuple
 */
const validateType = (
  object,
  {
    schema,
    row = {},
    undefinedProps = true,
    validateVirtual = false,
    operation = null,
  },
) => {
  if (!schema) return [null, object];
  const errors = {};
  let hasError = false;

  const context = { operation, row };

  const props = undefinedProps ? schema : object;
  for (const key in props) {
    const prop = { ...schema[key], key };
    if ("virtual" in prop || prop.persist === false) continue;
    const shouldValidate =
      prop.customValidator || object[key] !== undefined || prop.required;

    const [error, value] = shouldValidate
      ? validateField(object[key], prop, context)
      : [null, prop.defaultValue];

    if (error) {
      hasError = true;
      errors[key] = error;
    } else if (value !== undefined) object[key] = value;
  }
  const virtual = Object.fromEntries(
    Object.entries(schema).filter(([_, prop]) => "virtual" in prop),
  );
  for (const prop in virtual) {
    if (validateVirtual) {
      const [error, value] = validateField(
        interpolate(virtual[prop].virtual, { ...row, ...object }),
        virtual[prop],
        context,
      );
      if (error) {
        hasError = true;
        errors[prop] = error;
      } else if (value !== undefined) object[prop] = value;
    } else
      object[prop] = interpolate(virtual[prop].virtual, { ...row, ...object });
  }

  if (hasError) return [errors, null];
  return [null, object];
};

/**
 * Creates a type definition object
 * @param {string} type - Type name (string, number, boolean, etc.)
 * @param {*|Object} options - Default value or options object
 * @returns {Object} Type definition
 */
const createType = (type, options) => {
  const normalizedOptions =
    typeof options === "object" && !Array.isArray(options) && options !== null
      ? options
      : { defaultValue: options };

  const typeDef = {
    type,
    persist: true,
    attribute: !["array", "object", "function"].includes(type),
    ...normalizedOptions,
  };

  Object.setPrototypeOf(typeDef, TypeDefinitionPrototype);

  return typeDef;
};

/**
 * Type system helper functions
 * @type {Object}
 */
const typesHelpers = {
  createType,
  parse,
  validateType,
};

/** @type {Object} Extension registry for custom type creators */
const customTypeCreators = {};

/**
 * Registers a type system extension
 * @param {Object} extension - Extension object with types property
 * @param {Object} [extension.types] - Custom type creator functions
 */
const registerExtension = (extension) => {
  if (extension.types) {
    Object.assign(customTypeCreators, extension.types);
  }
};

typesHelpers.registerExtension = registerExtension;

/**
 * Creates a relationship type factory function
 * @private
 * @param {string} relationship - Relationship type (belongs, many, one, etc.)
 * @returns {Function} Type factory function
 */
const createRelationType =
  (relationship) =>
  (...args) => {
    const targetModel = args[0];
    let targetForeignKey;
    let options = args[2];
    if (typeof args[1] === "string") targetForeignKey = args[1];
    else options = args[1];
    const belongs = belongTypes.includes(relationship);

    const typeDef = {
      type: belongs
        ? relationship === "belongs_many"
          ? "array"
          : "string"
        : relationship === "one"
          ? "string"
          : "array",
      many: manyTypes.includes(relationship),
      belongs,
      persist: belongs,
      relationship,
      defaultValue: relationship === "belongs_many" ? [] : null,
      polymorphic: targetModel === "*" || Array.isArray(targetModel),
      targetModel,
      targetForeignKey,
      index: belongTypes.includes(relationship),
      ...options,
    };

    Object.setPrototypeOf(typeDef, TypeDefinitionPrototype);

    return typeDef;
  };

const relationshipTypes = ["one", "many", "belongs", "belongs_many"];
const manyTypes = ["many", "belongs_many"];
const belongTypes = ["belongs", "belongs_many"];
const proxyHandler = {
  get(target, prop) {
    if (target[prop]) return target[prop];
    if (customTypeCreators[prop]) return customTypeCreators[prop];

    const type = prop.toLowerCase();
    if (relationshipTypes.includes(prop)) return createRelationType(prop);
    return (options = {}) => {
      if (!typeHandlers[type]) throw new Error(\`Unknown type: \${type}\`);
      return createType(type, options);
    };
  },
};

const Types = new Proxy(typesHelpers, proxyHandler);

Types.registerExtension(timestampExt);
export default Types;
`,mimeType:"text/javascript"},"/$app/types/timestamp.js":{content:`// ============================================================================
// Timestamp Extension
// Adds T.timestamp() with auto-creation and auto-update support
// ============================================================================

/**
 * Timestamp validator with auto-creation and auto-update logic
 * - Auto-creates timestamp on create operation if value is empty
 * - Auto-updates timestamp on update operation if \`update: true\` option is set
 * - Stores as unix timestamp (milliseconds since epoch)
 */
const timestampValidator = (value, prop, context = {}) => {
  const { operation } = context;
  const currentTime = Date.now();

  if (prop.update === true) {
    return [null, currentTime];
  }

  // Auto-create logic: create on insert if no value provided
  if (
    operation === "create" &&
    prop.create !== false &&
    (!value || value === "")
  ) {
    return [null, currentTime];
  }

  // If value is provided, validate and convert it
  if (value) {
    let timestamp;

    // Convert Date objects to timestamp
    if (value instanceof Date) {
      timestamp = value.getTime();
    }
    // Convert string dates to timestamp
    else if (typeof value === "string") {
      const date = new Date(value);
      if (Number.isNaN(date.getTime())) {
        return ["invalid_timestamp", null];
      }
      timestamp = date.getTime();
    }
    // Keep numbers as-is
    else if (typeof value === "number") {
      timestamp = value;
    } else {
      return ["invalid_timestamp", null];
    }

    // Check min/max constraints
    if (prop.min && timestamp < prop.min) {
      return ["minimum", null];
    }
    if (prop.max && timestamp > prop.max) {
      return ["maximum", null];
    }

    return [null, timestamp];
  }

  // No value and no auto-create
  return [null, null];
};

/**
 * Timestamp type creator
 * Usage:
 *   T.timestamp()                 // Auto-creates on insert only
 *   T.timestamp({ update: true }) // Auto-creates on insert, auto-updates on every update
 *   T.timestamp({ index: true })  // With database index
 *
 * Stores timestamps as numbers (milliseconds since epoch)
 */
const createTimestamp = (options = {}) => {
  return {
    type: "number",
    timestamp: true,
    index: true,
    persist: true,
    attribute: true,
    customValidator: timestampValidator,
    ...options,
  };
};

export default {
  types: {
    timestamp: createTimestamp,
  },
};
`,mimeType:"text/javascript"},"/$app/model/schema-loader.js":{content:`/**
 * Schema Loader Utility
 * Discovers and loads module schemas from @bootstrapp/* dependencies
 */

/**
 * Discover modules with bootstrapp.schema: true in their package.json
 * @param {object} projectPackageJson - The project's package.json content
 * @returns {Promise<Array<{name: string, packageName: string, namespace: boolean}>>}
 */
export async function discoverSchemaModules(projectPackageJson) {
  const modules = [];
  const deps = {
    ...projectPackageJson.dependencies,
    ...projectPackageJson.devDependencies,
  };

  for (const [depName] of Object.entries(deps)) {
    if (!depName.startsWith("@bootstrapp/")) continue;

    try {
      const pkgRes = await fetch(\`/node_modules/\${depName}/package.json\`);
      if (!pkgRes.ok) continue;

      const pkg = await pkgRes.json();

      if (pkg?.bootstrapp?.schema === true) {
        const moduleName = depName.replace("@bootstrapp/", "");
        modules.push({
          name: moduleName,
          packageName: depName,
          namespace: pkg.bootstrapp.namespace !== false,
        });
      }
    } catch (e) {
      console.warn(\`Failed to check schema for \${depName}:\`, e);
    }
  }

  return modules;
}

/**
 * Apply namespace prefix to model names
 * @param {object} models - Original models object
 * @param {string} namespace - Namespace prefix
 * @returns {object} Namespaced models
 */
export function namespaceModels(models, namespace) {
  if (!namespace) return models;

  const namespaced = {};
  const modelNames = Object.keys(models);

  for (const [modelName, modelDef] of Object.entries(models)) {
    const namespacedName = \`\${namespace}_\${modelName}\`;
    namespaced[namespacedName] = updateRelationshipRefs(
      { ...modelDef },
      namespace,
      modelNames
    );
  }

  return namespaced;
}

/**
 * Apply namespace prefix to seed data keys
 * @param {object} data - Original data object
 * @param {string} namespace - Namespace prefix
 * @returns {object} Namespaced data
 */
export function namespaceData(data, namespace) {
  if (!namespace) return data;

  const namespaced = {};

  for (const [modelName, records] of Object.entries(data)) {
    const namespacedName = \`\${namespace}_\${modelName}\`;
    namespaced[namespacedName] = records;
  }

  return namespaced;
}

/**
 * Update relationship references to use namespaced model names
 * @param {object} modelDef - Model definition
 * @param {string} namespace - Namespace prefix
 * @param {string[]} modelNames - List of model names in this module
 * @returns {object} Updated model definition
 */
function updateRelationshipRefs(modelDef, namespace, modelNames) {
  const updated = { ...modelDef };

  for (const [fieldName, fieldDef] of Object.entries(updated)) {
    if (!fieldDef || typeof fieldDef !== "object") continue;

    // Handle T.belongs, T.many, T.one, T.belongs_many relationships
    if (fieldDef.targetModel && modelNames.includes(fieldDef.targetModel)) {
      updated[fieldName] = {
        ...fieldDef,
        targetModel: \`\${namespace}_\${fieldDef.targetModel}\`,
      };
    }
  }

  return updated;
}
`,mimeType:"text/javascript"},"/node_modules/@bootstrapp/bundler/models/schema.js":{content:`import T from "/$app/types/index.js";

export default {
  credentials: {
    owner: T.string(),
    repo: T.string(),
    branch: T.string({ defaultValue: "main" }),
    token: T.string(),
  },
  releases: {
    version: T.string({
      index: true,
    }),
    notes: T.string(),
    status: T.string({
      enum: ["pending", "success", "failed"],
      defaultValue: "pending",
    }),
    deployType: T.string({
      enum: ["spa", "ssg", "hybrid", "worker"],
      defaultValue: "hybrid",
    }),
    deployTarget: T.string({
      enum: ["github", "cloudflare", "zip", "targz", "localhost"],
      defaultValue: "github",
    }),
    deployedAt: T.string(),
    files: T.array(),
    result: T.object(),
  },
};
`,mimeType:"text/javascript"},"/node_modules/@bootstrapp/auth/package.json":{content:`{
  "name": "@bootstrapp/auth",
  "version": "0.2.0",
  "description": "Authentication module with session persistence, OAuth, and cross-tab sync",
  "main": "./index.js",
  "module": "./index.js",
  "type": "module",
  "exports": {
    ".": "./index.js",
    "./frontend": "./frontend.js",
    "./backend": "./backend.js"
  },
  "keywords": [
    "auth",
    "authentication",
    "session",
    "oauth",
    "pocketbase",
    "bootstrapp"
  ],
  "author": "Alan Leal",
  "license": "AGPL-3.0",
  "repository": {
    "type": "git",
    "url": "https://github.com/bootstrapp-ai/bootstrapp.git",
    "directory": "public/auth"
  },
  "homepage": "https://github.com/bootstrapp-ai/bootstrapp#readme",
  "bugs": {
    "url": "https://github.com/bootstrapp-ai/bootstrapp/issues"
  },
  "dependencies": {
    "@bootstrapp/events": "^0.2.0"
  }
}
`,mimeType:"application/json"},"/node_modules/@bootstrapp/base/package.json":{content:`{
  "name": "@bootstrapp/base",
  "version": "0.2.0",
  "description": "Bootstrapp MVC Framework - app shell and meta package",
  "main": "./index.js",
  "module": "./index.js",
  "type": "module",
  "exports": {
    ".": "./index.js",
    "./app": "./app.js",
    "./frontend": "./frontend.js",
    "./backend": "./backend.js",
    "./config": "./config.js",
    "./apploader": "./apploader.js",
    "./bootstrapp": "./bootstrapp.js",
    "./backend/backend": "./backend/backend.js",
    "./backend/frontend": "./backend/frontend.js",
    "./app/*": "./app/*",
    "./test/*": "./test/*"
  },
  "keywords": [
    "bootstrapp",
    "framework",
    "web-components",
    "pocketbase",
    "offline-first"
  ],
  "author": "Alan Leal",
  "license": "AGPL-3.0",
  "repository": {
    "type": "git",
    "url": "https://github.com/bootstrapp-ai/bootstrapp.git",
    "directory": "public/base"
  },
  "homepage": "https://github.com/bootstrapp-ai/bootstrapp#readme",
  "bugs": {
    "url": "https://github.com/bootstrapp-ai/bootstrapp/issues"
  },
  "dependencies": {
    "@bootstrapp/types": "^0.2.0",
    "@bootstrapp/events": "^0.2.0",
    "@bootstrapp/view": "^0.2.0",
    "@bootstrapp/router": "^0.1.0",
    "@bootstrapp/controller": "^0.2.0",
    "@bootstrapp/theme": "^0.2.0",
    "@bootstrapp/model": "^0.2.0",
    "@bootstrapp/auth": "^0.2.0",
    "@bootstrapp/sw": "^0.2.0"
  }
}
`,mimeType:"application/json"},"/node_modules/@bootstrapp/model/package.json":{content:`{
  "name": "@bootstrapp/model",
  "version": "0.2.0",
  "description": "ORM-like data layer with reactive arrays, proxy-based API, and subscription management",
  "main": "./index.js",
  "module": "./index.js",
  "type": "module",
  "exports": {
    ".": "./index.js",
    "./frontend": "./frontend.js",
    "./backend": "./backend.js",
    "./subscription-manager": "./subscription-manager.js",
    "./query-builder": "./query-builder.js",
    "./row-utils": "./row-utils.js",
    "./factory": "./factory.js",
    "./adapter-base": "./adapter-base.js"
  },
  "keywords": [
    "orm",
    "model",
    "data-layer",
    "reactive",
    "proxy",
    "subscriptions",
    "bootstrapp"
  ],
  "author": "Alan Leal",
  "license": "AGPL-3.0",
  "repository": {
    "type": "git",
    "url": "https://github.com/bootstrapp-ai/bootstrapp.git",
    "directory": "public/model"
  },
  "homepage": "https://github.com/bootstrapp-ai/bootstrapp#readme",
  "bugs": {
    "url": "https://github.com/bootstrapp-ai/bootstrapp/issues"
  },
  "dependencies": {
    "@bootstrapp/events": "^0.2.0"
  }
}
`,mimeType:"application/json"},"/node_modules/@bootstrapp/model-indexeddb/package.json":{content:`{
  "name": "@bootstrapp/model-indexeddb",
  "version": "0.2.0",
  "description": "IndexedDB database adapter for @bootstrapp/model with offline-first support",
  "main": "./index.js",
  "module": "./index.js",
  "type": "module",
  "exports": {
    ".": "./index.js",
    "./adapter": "./adapter.js",
    "./system-model-manager": "./system-model-manager.js"
  },
  "keywords": [
    "indexeddb",
    "database",
    "adapter",
    "offline-first",
    "orm",
    "bootstrapp"
  ],
  "author": "Alan Leal",
  "license": "AGPL-3.0",
  "repository": {
    "type": "git",
    "url": "https://github.com/bootstrapp-ai/bootstrapp.git",
    "directory": "public/model-indexeddb"
  },
  "homepage": "https://github.com/bootstrapp-ai/bootstrapp#readme",
  "bugs": {
    "url": "https://github.com/bootstrapp-ai/bootstrapp/issues"
  },
  "dependencies": {
    "@bootstrapp/model": "^0.2.0"
  }
}
`,mimeType:"application/json"},"/node_modules/@bootstrapp/model-pocketbase/package.json":{content:`{
  "name": "@bootstrapp/model-pocketbase",
  "version": "0.2.0",
  "description": "PocketBase database adapter for @bootstrapp/model with realtime subscriptions",
  "main": "./index.js",
  "module": "./index.js",
  "type": "module",
  "exports": {
    ".": "./index.js",
    "./adapter": "./adapter.js",
    "./filter-builder": "./filter-builder.js",
    "./realtime-manager": "./realtime-manager.js",
    "./auth-manager": "./auth-manager.js",
    "./relationship-loader": "./relationship-loader.js"
  },
  "keywords": [
    "pocketbase",
    "database",
    "adapter",
    "realtime",
    "orm",
    "bootstrapp"
  ],
  "author": "Alan Leal",
  "license": "AGPL-3.0",
  "repository": {
    "type": "git",
    "url": "https://github.com/bootstrapp-ai/bootstrapp.git",
    "directory": "public/model-pocketbase"
  },
  "homepage": "https://github.com/bootstrapp-ai/bootstrapp#readme",
  "bugs": {
    "url": "https://github.com/bootstrapp-ai/bootstrapp/issues"
  },
  "dependencies": {
    "@bootstrapp/model": "^0.2.0"
  },
  "peerDependencies": {
    "pocketbase": "^0.21.0"
  }
}
`,mimeType:"application/json"},"/node_modules/@bootstrapp/model-hybrid/package.json":{content:`{
  "name": "@bootstrapp/model-hybrid",
  "version": "0.2.0",
  "description": "Hybrid database adapter combining IndexedDB + PocketBase for offline-first architecture",
  "main": "./index.js",
  "module": "./index.js",
  "type": "module",
  "exports": {
    ".": "./index.js",
    "./adapter": "./adapter.js"
  },
  "keywords": [
    "hybrid",
    "offline-first",
    "database",
    "adapter",
    "indexeddb",
    "pocketbase",
    "sync",
    "bootstrapp"
  ],
  "author": "Alan Leal",
  "license": "AGPL-3.0",
  "repository": {
    "type": "git",
    "url": "https://github.com/bootstrapp-ai/bootstrapp.git",
    "directory": "public/model-hybrid"
  },
  "homepage": "https://github.com/bootstrapp-ai/bootstrapp#readme",
  "bugs": {
    "url": "https://github.com/bootstrapp-ai/bootstrapp/issues"
  },
  "dependencies": {
    "@bootstrapp/model": "^0.2.0",
    "@bootstrapp/model-indexeddb": "^0.2.0",
    "@bootstrapp/model-pocketbase": "^0.2.0"
  },
  "peerDependencies": {
    "pocketbase": "^0.21.0"
  }
}
`,mimeType:"application/json"},"/node_modules/@bootstrapp/sw/package.json":{content:`{
  "name": "@bootstrapp/sw",
  "version": "0.2.0",
  "description": "Service Worker module with caching, messaging, and filesystem API",
  "main": "./index.js",
  "module": "./index.js",
  "type": "module",
  "exports": {
    ".": "./index.js",
    "./frontend": "./frontend.js",
    "./backend": "./backend.js",
    "./adapter": "./adapter.js",
    "./filesystem": "./filesystem.js"
  },
  "keywords": [
    "service-worker",
    "sw",
    "cache",
    "offline",
    "filesystem",
    "bootstrapp"
  ],
  "author": "Alan Leal",
  "license": "AGPL-3.0",
  "repository": {
    "type": "git",
    "url": "https://github.com/bootstrapp-ai/bootstrapp.git",
    "directory": "public/sw"
  },
  "homepage": "https://github.com/bootstrapp-ai/bootstrapp#readme",
  "bugs": {
    "url": "https://github.com/bootstrapp-ai/bootstrapp/issues"
  },
  "dependencies": {
    "@bootstrapp/events": "^0.2.0"
  }
}
`,mimeType:"application/json"},"/node_modules/@bootstrapp/controller/package.json":{content:`{
  "name": "@bootstrapp/controller",
  "version": "0.2.0",
  "description": "Reactive state management with storage, URL, and custom adapters",
  "main": "./index.js",
  "module": "./index.js",
  "type": "module",
  "exports": {
    ".": "./index.js",
    "./sync": "./sync.js",
    "./sync-factory": "./sync-factory.js",
    "./adapters/storage": "./adapters/storage.js",
    "./adapters/url": "./adapters/url.js",
    "./app": "./app.js"
  },
  "keywords": [
    "state-management",
    "reactive",
    "storage",
    "url-state",
    "controller",
    "bootstrapp"
  ],
  "author": "Alan Leal",
  "license": "AGPL-3.0",
  "repository": {
    "type": "git",
    "url": "https://github.com/bootstrapp-ai/bootstrapp.git",
    "directory": "public/controller"
  },
  "homepage": "https://github.com/bootstrapp-ai/bootstrapp#readme",
  "bugs": {
    "url": "https://github.com/bootstrapp-ai/bootstrapp/issues"
  },
  "dependencies": {
    "@bootstrapp/events": "^0.2.0"
  }
}
`,mimeType:"application/json"},"/node_modules/@bootstrapp/events/package.json":{content:`{
  "name": "@bootstrapp/events",
  "version": "0.2.0",
  "description": "Lightweight event system with pub/sub pattern and event handler installation",
  "main": "./index.js",
  "module": "./index.js",
  "type": "module",
  "exports": {
    ".": "./index.js"
  },
  "keywords": [
    "events",
    "pub-sub",
    "event-emitter",
    "observer-pattern",
    "bootstrapp"
  ],
  "author": "Alan Leal",
  "license": "AGPL-3.0",
  "repository": {
    "type": "git",
    "url": "https://github.com/bootstrapp-ai/bootstrapp.git",
    "directory": "public/events"
  },
  "homepage": "https://github.com/bootstrapp-ai/bootstrapp#readme",
  "bugs": {
    "url": "https://github.com/bootstrapp-ai/bootstrapp/issues"
  }
}
`,mimeType:"application/json"},"/node_modules/@bootstrapp/i18n/package.json":{content:`{
  "name": "@bootstrapp/i18n",
  "version": "0.2.0",
  "description": "Internationalization (i18n) module for Bootstrapp framework",
  "type": "module",
  "main": "index.js",
  "exports": {
    ".": "./index.js",
    "./base": "./base.js",
    "./view-plugin": "./view-plugin.js"
  },
  "dependencies": {
    "@bootstrapp/controller": "^0.2.0",
    "@bootstrapp/view": "^0.2.0"
  },
  "keywords": [
    "bootstrapp",
    "i18n",
    "internationalization",
    "localization",
    "translation"
  ],
  "author": "Alan Leal",
  "license": "AGPL-3.0"
}
`,mimeType:"application/json"},"/node_modules/@bootstrapp/icon-lucide/package.json":{content:`{
  "name": "@bootstrapp/icon-lucide",
  "version": "0.0.1",
  "type": "module",
  "description": "Lucide icon library for Bootstrapp framework",
  "main": "index.js",
  "exports": {
    ".": "./index.js",
    "./lucide/*": "./lucide/*",
    "./app.js": "./app.js"
  },
  "dependencies": {
    "@bootstrapp/base": "^0.2.0"
  }
}
`,mimeType:"application/json"},"/node_modules/@bootstrapp/router/package.json":{content:`{
  "name": "@bootstrapp/router",
  "version": "0.1.0",
  "description": "Client-side router with URLPattern API support, nested routes, and history management",
  "main": "./index.js",
  "module": "./index.js",
  "type": "module",
  "exports": {
    ".": "./index.js",
    "./app": "./app.js",
    "./ui": "./ui.js"
  },
  "keywords": [
    "router",
    "routing",
    "spa",
    "urlpattern",
    "history",
    "navigation",
    "bootstrapp"
  ],
  "author": "Alan Leal",
  "license": "AGPL-3.0",
  "repository": {
    "type": "git",
    "url": "https://github.com/bootstrapp-ai/bootstrapp.git",
    "directory": "public/router"
  },
  "homepage": "https://github.com/bootstrapp-ai/bootstrapp#readme",
  "bugs": {
    "url": "https://github.com/bootstrapp-ai/bootstrapp/issues"
  },
  "dependencies": {
    "@bootstrapp/controller": "^0.2.0",
    "@bootstrapp/types": "^0.2.0"
  }
}
`,mimeType:"application/json"},"/node_modules/@bootstrapp/tailwind/package.json":{content:`{
  "name": "@bootstrapp/tailwind",
  "version": "0.1.0",
  "description": "Tailwind/UnoCSS styling configuration for Bootstrapp",
  "type": "module",
  "main": "index.js",
  "exports": {
    ".": "./index.js"
  },
  "dependencies": {
    "@bootstrapp/base": "^0.2.0"
  }
}
`,mimeType:"application/json"},"/node_modules/@bootstrapp/theme/package.json":{content:`{
  "name": "@bootstrapp/theme",
  "version": "0.2.0",
  "description": "Standalone theming system with dynamic CSS variable generation and color utilities",
  "main": "./index.js",
  "module": "./index.js",
  "type": "module",
  "exports": {
    ".": "./index.js",
    "./themes/*": "./themes/*"
  },
  "keywords": [
    "theme",
    "theming",
    "css-variables",
    "color-utilities",
    "design-system",
    "bootstrapp"
  ],
  "author": "Alan Leal",
  "license": "AGPL-3.0",
  "repository": {
    "type": "git",
    "url": "https://github.com/bootstrapp-ai/bootstrapp.git",
    "directory": "public/theme"
  },
  "homepage": "https://github.com/bootstrapp-ai/bootstrapp#readme",
  "bugs": {
    "url": "https://github.com/bootstrapp-ai/bootstrapp/issues"
  },
  "dependencies": {
    "@bootstrapp/view": "^0.2.0"
  }
}
`,mimeType:"application/json"},"/node_modules/@bootstrapp/types/package.json":{content:`{
  "name": "@bootstrapp/types",
  "version": "0.2.0",
  "description": "Type validation and coercion library for model fields and component properties",
  "main": "./index.js",
  "module": "./index.js",
  "type": "module",
  "exports": {
    ".": "./index.js"
  },
  "keywords": [
    "types",
    "validation",
    "coercion",
    "schema",
    "type-system",
    "bootstrapp"
  ],
  "author": "Alan Leal",
  "license": "AGPL-3.0",
  "repository": {
    "type": "git",
    "url": "https://github.com/bootstrapp-ai/bootstrapp.git",
    "directory": "base/types"
  },
  "homepage": "https://github.com/bootstrapp-ai/bootstrapp#readme",
  "bugs": {
    "url": "https://github.com/bootstrapp-ai/bootstrapp/issues"
  },
  "dependencies": {},
  "devDependencies": {}
}
`,mimeType:"application/json"},"/node_modules/@bootstrapp/uix/package.json":{content:`{
  "name": "@bootstrapp/uix",
  "version": "0.2.0",
  "description": "UI/UX component toolkit built on @bootstrapp/view with ready-to-use components for modern web applications",
  "main": "./index.js",
  "module": "./index.js",
  "type": "module",
  "exports": {
    ".": "./index.js",
    "./import.js": "./import.js",
    "./display/*": "./display/*",
    "./layout/*": "./layout/*",
    "./form/*": "./form/*",
    "./navigation/*": "./navigation/*",
    "./overlay/*": "./overlay/*",
    "./feedback/*": "./feedback/*",
    "./page/*": "./page/*",
    "./app/*": "./app/*",
    "./utility/*": "./utility/*",
    "./theme.css": "./theme.css"
  },
  "keywords": [
    "ui-components",
    "uix",
    "web-components",
    "bootstrapp",
    "design-system",
    "component-library",
    "lit-html",
    "custom-elements"
  ],
  "author": "Alan Leal",
  "license": "AGPL-3.0",
  "repository": {
    "type": "git",
    "url": "https://github.com/bootstrapp-ai/bootstrapp.git",
    "directory": "public/uix"
  },
  "homepage": "https://github.com/bootstrapp-ai/bootstrapp#readme",
  "bugs": {
    "url": "https://github.com/bootstrapp-ai/bootstrapp/issues"
  },
  "dependencies": {
    "@bootstrapp/view": "^0.2.0",
    "@bootstrapp/types": "^0.2.0",
    "@bootstrapp/theme": "^0.2.0",
    "@bootstrapp/router": "^0.1.0",
    "@bootstrapp/controller": "^0.2.0",
    "@bootstrapp/base": "^0.2.0",
    "lit-html": "^3.0.0"
  }
}
`,mimeType:"application/json"},"/node_modules/@bootstrapp/view/package.json":{content:`{
  "name": "@bootstrapp/view",
  "version": "0.2.0",
  "description": "Web components framework built on Custom Elements API with lit-html templating",
  "main": "./index.js",
  "module": "./index.js",
  "scripts": {
    "docs": "npx serve docs -p 3000"
  },
  "type": "module",
  "exports": {
    ".": "./index.js",
    "./loader": "./loader.js"
  },
  "keywords": [
    "web-components",
    "custom-elements",
    "lit-html",
    "reactive",
    "view",
    "bootstrapp",
    "framework"
  ],
  "author": "Alan Leal",
  "license": "AGPL-3.0",
  "repository": {
    "type": "git",
    "url": "https://github.com/bootstrapp-ai/bootstrapp.git",
    "directory": "base/view"
  },
  "homepage": "https://github.com/bootstrapp-ai/bootstrapp#readme",
  "bugs": {
    "url": "https://github.com/bootstrapp-ai/bootstrapp/issues"
  },
  "dependencies": {
    "@bootstrapp/types": "^0.1.0",
    "lit-html": "^3.3.1"
  },
  "devDependencies": {}
}
`,mimeType:"application/json"},"/node_modules/@bootstrapp/admin/package.json":{content:`{
  "name": "@bootstrapp/admin",
  "version": "0.1.0",
  "description": "Bootstrapp Admin Panel",
  "type": "module",
  "main": "index.js",
  "exports": {
    ".": "./index.js",
    "./cms/*": "./cms/*",
    "./project/*": "./project/*",
    "./views/*": "./views/*"
  },
  "dependencies": {
    "@bootstrapp/base": "^0.2.0",
    "@bootstrapp/bundler": "^0.1.0"
  }
}
`,mimeType:"application/json"},"/node_modules/@bootstrapp/maps/package.json":{content:`{
  "name": "@bootstrapp/maps",
  "version": "0.1.0",
  "description": "Provider-agnostic maps integration for searching and geocoding places",
  "main": "./index.js",
  "module": "./index.js",
  "type": "module",
  "exports": {
    ".": "./index.js",
    "./app.js": "./app.js",
    "./search.js": "./search.js",
    "./search.css": "./search.css"
  },
  "keywords": [
    "maps",
    "geocoding",
    "places",
    "nominatim",
    "openstreetmap",
    "bootstrapp",
    "web-components"
  ],
  "author": "Alan Leal",
  "license": "AGPL-3.0",
  "repository": {
    "type": "git",
    "url": "https://github.com/bootstrapp-ai/bootstrapp.git",
    "directory": "public/maps"
  },
  "homepage": "https://github.com/bootstrapp-ai/bootstrapp#readme",
  "bugs": {
    "url": "https://github.com/bootstrapp-ai/bootstrapp/issues"
  },
  "dependencies": {
    "@bootstrapp/base": "^0.2.0",
    "@bootstrapp/types": "^0.2.0",
    "@bootstrapp/view": "^0.2.0",
    "lit-html": "^3.0.0"
  }
}
`,mimeType:"application/json"},"/node_modules/@bootstrapp/extension/package.json":{content:`{
  "name": "@bootstrapp/extension",
  "version": "0.1.0",
  "description": "Chrome extension for bidirectional communication between admin panel and browser tabs",
  "type": "module",
  "exports": {
    ".": "./index.js",
    "./admin-bridge.js": "./admin-bridge.js"
  },
  "keywords": [
    "chrome-extension",
    "browser-extension",
    "scraping",
    "dom-manipulation",
    "bootstrapp"
  ],
  "author": "Alan Leal",
  "license": "AGPL-3.0",
  "repository": {
    "type": "git",
    "url": "https://github.com/bootstrapp-ai/bootstrapp.git",
    "directory": "public/extension"
  }
}
`,mimeType:"application/json"},"/node_modules/@bootstrapp/bundler/package.json":{content:`{
  "name": "@bootstrapp/bundler",
  "version": "0.1.0",
  "description": "Bootstrapp project bundler",
  "type": "module",
  "main": "index.js",
  "exports": {
    ".": "./index.js"
  },
  "bootstrapp": {
    "schema": true,
    "namespace": true
  },
  "dependencies": {
    "@bootstrapp/base": "^0.2.0",
    "@bootstrapp/github": "^0.1.0"
  }
}
`,mimeType:"application/json"},"/node_modules/@bootstrapp/github/package.json":{content:`{
  "name": "@bootstrapp/github",
  "version": "0.1.0",
  "description": "GitHub API integration for Bootstrapp",
  "type": "module",
  "main": "index.js",
  "exports": {
    ".": "./index.js"
  },
  "dependencies": {
    "@bootstrapp/base": "^0.2.0"
  }
}
`,mimeType:"application/json"},"/node_modules/@bootstrapp/bundler/models/seed.js":{content:`export default {
  credentials: [
    {
      id: "singleton",
      owner: "meiraleal",
      branch: "main",
      repo: "brazuka.dev",
      token: "",
    },
  ],
};
`,mimeType:"text/javascript"},"/$app/base/backend/backend.js":{content:`import { initAuthBackend } from "/$app/auth/backend.js";
import config from "/$app/base/config.js";
import { initModelBackend } from "/$app/model/backend.js";
import { createDatabase, registerAdapter } from "/$app/model/factory.js";
import {
  buildQueryResult,
  matchesWhere,
  validateQueryOptions,
} from "/$app/model/query-builder.js";
import {
  generateId,
  mergeRowUpdates,
  prepareRow,
  validateRow,
} from "/$app/model/row-utils.js";
import { SubscriptionManager } from "/$app/model/subscription-manager.js";
import { IndexedDBAdapter } from "/$app/model-indexeddb/adapter.js";
import {
  loadRelationships,
  loadRelationshipsForMany,
} from "/$app/model-pocketbase/relationship-loader.js";
import T from "/$app/types/index.js";
import $APP from "/$app.js";

// Register IndexedDB adapter with injected dependencies
registerAdapter(
  "indexeddb",
  class ConfiguredIndexedDBAdapter extends IndexedDBAdapter {
    constructor(cfg) {
      super({
        ...cfg,
        validateRow,
        prepareRow,
        generateId,
        mergeRowUpdates,
        buildQueryResult,
        matchesWhere,
        validateQueryOptions,
        loadRelationships,
        loadRelationshipsForMany,
        eventEmitter: (event, data) => $APP.events.emit(event, data),
        subscriptionManager: $APP.SubscriptionManager,
      });
    }
  },
);

// Initialize model and auth backends with $APP injection
initModelBackend($APP);
initAuthBackend($APP);
let Backend;
let Database;
let SysModel;

if ($APP.settings.runtime === "worker") {
  const SYSMODELS = { APP: "App", USER: "User", DEVICE: "Device" };

  const SYSTEM = {
    export: async () => {
      if ($APP.Database?.exportData) {
        return await $APP.Database.exportData();
      }
      throw new Error("Export not supported by current database adapter");
    },
    import: async (payload) => {
      if (Database?.importData) {
        const { dump, keepIndex = true } = payload;
        await Database.importData(dump, { keepIndex });

        if (SysModel) {
          const manager = SysModel.getSystemModelManager();
          const app = await manager.getApp();
          await SysModel.edit(manager.MODELS.APP, app.id, {
            migrationTimestamp: Date.now(),
          });
        }
        return { success: true };
      }
      throw new Error("Import not supported by current database adapter");
    },
  };

  $APP.addModule({
    name: "sysmodels",
    alias: "SYSTEM",
    base: SYSTEM,
    settings: SYSMODELS,
  });

  const dbConfig = $APP.databaseConfig || {};
  const needsSystemModels =
    !dbConfig.type ||
    dbConfig.type === "indexeddb" ||
    dbConfig.type === "hybrid";

  if (needsSystemModels) {
    $APP.sysmodels.set({
      [SYSMODELS.APP]: {
        name: T.string({ index: true, primary: true }),
        version: T.number(),
        users: T.many(SYSMODELS.USER, "appId"),
        active: T.boolean({ defaultValue: true, index: true }),
        models: T.object(),
        migrationTimestamp: T.number(),
      },
      [SYSMODELS.USER]: {
        name: T.string({ index: true, primary: true }),
        appId: T.one(SYSMODELS.APP, "users"),
        devices: T.many(SYSMODELS.DEVICE, "userId"),
        publicKey: T.string(),
        privateKey: T.string(),
        active: T.boolean({ index: true }),
      },
      [SYSMODELS.DEVICE]: {
        name: T.string({ index: true, primary: true }),
        userId: T.one(SYSMODELS.USER, "devices"),
        deviceData: T.string(),
        active: T.boolean({ defaultValue: true, index: true }),
      },
    });
  }

  $APP.events.on("APP:BACKEND:STARTED", async ({ app, user, device }) => {
    if (!app) {
      console.error("APP:BACKEND:STARTED hook called with invalid app.", {
        app,
      });
      return;
    }
    if (Database) {
      $APP.SubscriptionManager = new SubscriptionManager(Database);
      console.log("SubscriptionManager: Initialized");

      $APP.Database = Database;
    }
    await $APP.events.emit("APP:DATABASE:STARTED", { app, user, device });
  });

  let nextRequestId = 1;
  const pendingBackendRequests = {};

  const requestFromClient = async (
    type,
    payload,
    timeout = config.backend.requestTimeout,
  ) => {
    const clients = await self.clients.matchAll({
      type: "window",
      includeUncontrolled: true,
    });
    const client = clients[0]; // Simple strategy: pick the first client.

    if (!client) {
      return Promise.reject(
        new Error("No active client found to send request to."),
      );
    }

    const eventId = \`backend-request-\${nextRequestId++}\`;

    return new Promise((resolve, reject) => {
      pendingBackendRequests[eventId] = { resolve, reject };
      setTimeout(() => {
        delete pendingBackendRequests[eventId];
        reject(new Error(\`Request timed out after \${timeout}ms\`));
      }, timeout);
      client.postMessage({
        type,
        payload,
        eventId,
      });
    });
  };

  const broadcast = async (params) => {
    if (!$APP.Backend.client) return;
    $APP.Backend.client.postMessage(params);
    $APP.Backend.client.postMessage({ type: "BROADCAST", params });
  };

  const handleMessage = async ({ data, respond }) => {
    const { type, payload, eventId } = data;
    if (pendingBackendRequests[eventId]) {
      const promise = pendingBackendRequests[eventId];
      promise.resolve(payload);
      delete pendingBackendRequests[eventId];
      return;
    }

    await $APP.events.emit(type, {
      payload,
      eventId,
      respond,
      client: createClientProxy($APP.Backend.client),
      broadcast,
    });
  };

  const createClientProxy = (client) => {
    return new Proxy(
      {},
      {
        get: (target, prop) => {
          return (payload) => sendRequestToClient(client, prop, payload);
        },
      },
    );
  };

  const sendRequestToClient = (client, type, payload) => {
    const eventId = \`sw_\${nextRequestId++}\`;
    return new Promise((resolve, reject) => {
      pendingBackendRequests[eventId] = { resolve, reject };
      client.postMessage({ type, payload, eventId });
    });
  };

  const createAppEntry = async (options) => {
    if (!SysModel) return null;
    const manager = SysModel.getSystemModelManager();
    return manager ? await manager.createAppEntry(options) : null;
  };

  const getApp = async () => {
    if (!SysModel) return null;
    const manager = SysModel.getSystemModelManager();
    return manager ? await manager.getApp() : null;
  };

  const getUser = async (_app) => {
    if ($APP.Backend.user) return $APP.Backend.user;
    if (!SysModel) return null;
    const manager = SysModel.getSystemModelManager();
    return manager ? await manager.getUser(_app) : null;
  };

  const getDevice = async (opts) => {
    if (!SysModel) return null;
    const manager = SysModel.getSystemModelManager();
    return manager ? await manager.getDevice(opts) : null;
  };

  $APP.events.set({
    GET_CURRENT_APP: async ({ respond }) => {
      if (!SysModel) {
        respond({
          error: "Multi-app not supported with current database adapter",
        });
        return;
      }
      const app = await $APP.Backend.getApp();
      respond(app);
    },
    LIST_APPS: async ({ respond }) => {
      if (!SysModel) {
        respond({
          error: "Multi-app not supported with current database adapter",
        });
        return;
      }
      const manager = SysModel.getSystemModelManager();
      const apps = await manager.listApps();
      respond(apps || []);
    },
    CREATE_APP: async ({ respond }) => {
      if (!SysModel) {
        respond({
          error: "Multi-app not supported with current database adapter",
        });
        return;
      }
      const manager = SysModel.getSystemModelManager();
      const currentApp = await manager.getApp();
      if (currentApp) {
        await SysModel.edit(SYSMODELS.APP, currentApp.id, {
          active: false,
        });
      }

      const newApp = await manager.createAppEntry();
      const env = await manager.setupAppEnvironment(newApp);
      respond(env.app);
    },
    SELECT_APP: async ({ payload, respond }) => {
      if (!SysModel) {
        respond({
          error: "Multi-app not supported with current database adapter",
        });
        return;
      }
      const { appId } = payload;
      if (!appId) {
        return respond({
          error: "An 'appId' is required to select an app.",
        });
      }

      const manager = SysModel.getSystemModelManager();
      const selectedApp = await manager.selectApp(appId);
      const env = await manager.setupAppEnvironment(selectedApp);
      respond(env.app);
    },

    GET_DB_DUMP: async ({ respond }) => {
      const dump = await $APP.SYSTEM.export();
      respond(dump);
    },

    LOAD_DB_DUMP: async ({ payload, respond = console.log }) => {
      try {
        await $APP.SYSTEM.import(payload);
        respond({ success: true });
      } catch (error) {
        console.error("Failed to load DB dump:", error);
        respond({ success: false, error });
      }
    },
  });

  Backend = {
    bootstrap: async () => {
      const dbConfig = {
        type: "indexeddb",
        name: "app",
        models: $APP.models,
        ...($APP.databaseConfig || {}),
      };
      const needsSystemModels = ["indexeddb", "hybrid"].includes(dbConfig.type);

      let app;
      if (needsSystemModels) {
        SysModel = await createDatabase({
          type: "indexeddb",
          name: SYSMODELS.APP,
          version: 1,
          models: $APP.sysmodels,
          system: true,
          enableSystemModels: true,
          systemModelManagerOptions: {
            eventEmitter: (event, data) => $APP.events.emit(event, data),
            importData: async ({ dump }) => {
              if (Database?.importData) {
                await Database.importData(dump, { keepIndex: true });
              }
            },
          },
        });
        await SysModel.init();
        $APP.SysModel = SysModel;

        const manager = SysModel.getSystemModelManager();
        app = await manager.getApp();
        if (!app) app = await manager.createAppEntry();
        dbConfig.name = app.id;
        dbConfig.version = app.version;
        Database = await createDatabase(dbConfig);
        $APP.Database = Database;
        await Database.init();
        if ($APP.data && !app.migrationTimestamp) {
          console.error({ app });
          await manager.migrateData($APP.data, app);
          app = await manager.getApp();
        }

        await $APP.events.emit("APP:BACKEND:STARTED", { app });
      } else {
        app = {
          id: dbConfig.name,
          version: 1,
          active: true,
        };
        Database = await createDatabase(dbConfig);
        await Database.init();
        const env = { app, user: null, device: null };
        await $APP.events.emit("APP:BACKEND:STARTED", env);
      }
    },
    handleMessage,
    getApp,
    getDevice,
    createAppEntry,
    getUser,
    broadcast,
    requestFromClient,
  };
  $APP.addModule({ name: "Backend", base: Backend });
}

$APP.events.on("APP:INIT", async () => {
  console.info("Initializing backend application");
  await Backend.bootstrap();
});

export default Backend;
`,mimeType:"text/javascript"},"/$app/auth/backend.js":{content:`/**
 * @file Backend Auth Module
 * @description Handles authentication event handlers in the Web Worker context
 */

/**
 * Generate a random code verifier for PKCE
 * @returns {string}
 */
const generateCodeVerifier = () => {
  const array = new Uint8Array(32);
  crypto.getRandomValues(array);
  return btoa(String.fromCharCode.apply(null, array))
    .replace(/\\+/g, "-")
    .replace(/\\//g, "_")
    .replace(/=+$/, "");
};

/**
 * Generate code challenge from verifier for PKCE
 * @param {string} verifier
 * @returns {Promise<string>}
 */
const generateCodeChallenge = async (verifier) => {
  const encoder = new TextEncoder();
  const data = encoder.encode(verifier);
  const digest = await crypto.subtle.digest("SHA-256", data);
  return btoa(String.fromCharCode.apply(null, new Uint8Array(digest)))
    .replace(/\\+/g, "-")
    .replace(/\\//g, "_")
    .replace(/=+$/, "");
};

/**
 * Create auth event handlers for worker context
 * @param {object} $APP - App instance with Database
 * @returns {object} Event handlers object
 */
export function createAuthEventHandlers($APP) {
  /**
   * Get PocketBase instance from Database adapter
   * @returns {object} PocketBase instance
   * @throws {Error} If PocketBase is not initialized
   */
  const getPb = () => {
    if (!$APP.Database?.pb) {
      throw new Error("PocketBase not initialized");
    }
    return $APP.Database.pb;
  };

  return {
    /**
     * Login with email and password
     */
    "AUTH:LOGIN": async ({ payload, respond }) => {
      try {
        const pb = getPb();
        const { email, password } = payload;

        const authData = await pb.collection("users").authWithPassword(email, password);

        respond({
          token: authData.token,
          user: authData.record,
        });
      } catch (error) {
        console.error("AUTH:LOGIN error:", error);
        respond({
          error: error.message || "Login failed",
          code: error.status,
        });
      }
    },

    /**
     * Register a new user
     */
    "AUTH:REGISTER": async ({ payload, respond }) => {
      try {
        const pb = getPb();
        const { email, password, passwordConfirm, name, ...extraData } = payload;

        // Build user data
        const userData = {
          email,
          password,
          passwordConfirm: passwordConfirm || password,
          name,
          ...extraData,
          isGuest: false,
        };

        // Create the user
        await pb.collection("users").create(userData);

        // Auto-login after registration
        const authData = await pb.collection("users").authWithPassword(email, password);

        respond({
          token: authData.token,
          user: authData.record,
        });
      } catch (error) {
        console.error("AUTH:REGISTER error:", error);
        respond({
          error: error.message || "Registration failed",
          code: error.status,
          data: error.data,
        });
      }
    },

    /**
     * Start OAuth flow - returns auth URL and PKCE verifier
     */
    "AUTH:OAUTH_START": async ({ payload, respond }) => {
      try {
        const pb = getPb();
        const { provider, redirectUrl } = payload;

        // Get available auth methods
        const authMethods = await pb.collection("users").listAuthMethods();

        if (!authMethods.oauth2?.enabled) {
          respond({ error: "OAuth2 is not enabled" });
          return;
        }

        const providerConfig = authMethods.oauth2.providers?.find(
          (p) => p.name === provider,
        );

        if (!providerConfig) {
          respond({ error: \`OAuth provider "\${provider}" is not configured\` });
          return;
        }

        // Generate PKCE challenge
        const codeVerifier = generateCodeVerifier();
        const codeChallenge = await generateCodeChallenge(codeVerifier);

        // Build auth URL
        const authUrl = new URL(providerConfig.authURL);
        authUrl.searchParams.set("redirect_uri", redirectUrl);
        authUrl.searchParams.set("code_challenge", codeChallenge);
        authUrl.searchParams.set("code_challenge_method", "S256");

        respond({
          authUrl: authUrl.toString(),
          codeVerifier,
          state: providerConfig.state,
          provider,
        });
      } catch (error) {
        console.error("AUTH:OAUTH_START error:", error);
        respond({ error: error.message || "Failed to start OAuth" });
      }
    },

    /**
     * Complete OAuth flow - exchange code for token
     */
    "AUTH:OAUTH_COMPLETE": async ({ payload, respond }) => {
      try {
        const pb = getPb();
        const { provider, code, codeVerifier, redirectUrl } = payload;

        const authData = await pb
          .collection("users")
          .authWithOAuth2Code(provider, code, codeVerifier, redirectUrl);

        respond({
          token: authData.token,
          user: authData.record,
          meta: authData.meta,
        });
      } catch (error) {
        console.error("AUTH:OAUTH_COMPLETE error:", error);
        respond({
          error: error.message || "OAuth authentication failed",
          code: error.status,
        });
      }
    },

    /**
     * Logout - clear auth store
     */
    "AUTH:LOGOUT": async ({ respond }) => {
      try {
        const pb = getPb();
        pb.authStore.clear();
        respond({ success: true });
      } catch (error) {
        console.error("AUTH:LOGOUT error:", error);
        respond({ error: error.message });
      }
    },

    /**
     * Get current authenticated user
     */
    "AUTH:GET_USER": async ({ respond }) => {
      try {
        const pb = getPb();
        respond({ user: pb.authStore.model });
      } catch (error) {
        respond({ error: error.message });
      }
    },

    /**
     * Refresh auth token
     */
    "AUTH:REFRESH_TOKEN": async ({ payload, respond }) => {
      try {
        const pb = getPb();

        // Restore token if provided
        if (payload?.token) {
          pb.authStore.save(payload.token, pb.authStore.model);
        }

        const authData = await pb.collection("users").authRefresh();

        respond({
          token: authData.token,
          user: authData.record,
        });
      } catch (error) {
        console.error("AUTH:REFRESH_TOKEN error:", error);
        respond({
          error: error.message || "Token refresh failed",
          code: error.status,
        });
      }
    },

    /**
     * Update current user profile
     */
    "AUTH:UPDATE_USER": async ({ payload, respond }) => {
      try {
        const pb = getPb();
        const userId = pb.authStore.model?.id;

        if (!userId) {
          respond({ error: "Not authenticated" });
          return;
        }

        const updated = await pb.collection("users").update(userId, payload);
        respond({ user: updated });
      } catch (error) {
        console.error("AUTH:UPDATE_USER error:", error);
        respond({
          error: error.message || "Update failed",
          code: error.status,
        });
      }
    },

    /**
     * Hookable guest migration - emits event for apps to handle
     * Apps should listen to AUTH:MIGRATE_GUEST_REQUEST and respond
     */
    "AUTH:MIGRATE_GUEST": async ({ payload, respond }) => {
      try {
        const { guestId, newUserId } = payload;

        if (!guestId || !newUserId) {
          respond({ error: "guestId and newUserId are required" });
          return;
        }

        // Emit event for app-level migration handlers
        // Apps can register handlers via $APP.events.on("AUTH:MIGRATE_GUEST_REQUEST", ...)
        const migrationResult = { success: true, migrated: {} };

        // Allow apps to hook into migration
        try {
          await new Promise((resolve, reject) => {
            let handled = false;

            // Set a timeout in case no handler responds
            const timeout = setTimeout(() => {
              if (!handled) {
                resolve(); // No handler, that's ok
              }
            }, 100);

            // Emit the event and wait for handlers
            $APP.events.emit("AUTH:MIGRATE_GUEST_REQUEST", {
              guestId,
              newUserId,
              onComplete: (result) => {
                handled = true;
                clearTimeout(timeout);
                if (result) {
                  Object.assign(migrationResult.migrated, result);
                }
                resolve();
              },
              onError: (error) => {
                handled = true;
                clearTimeout(timeout);
                reject(error);
              },
            });
          });
        } catch (migrationError) {
          console.warn("Guest migration handler error:", migrationError);
          migrationResult.warning = migrationError.message;
        }

        respond(migrationResult);
      } catch (error) {
        console.error("AUTH:MIGRATE_GUEST error:", error);
        respond({ error: error.message });
      }
    },

    /**
     * Check if email is available for registration
     */
    "AUTH:CHECK_EMAIL": async ({ payload, respond }) => {
      try {
        const pb = getPb();
        const { email } = payload;

        // Try to find a user with this email
        try {
          const users = await pb.collection("users").getList(1, 1, {
            filter: \`email = "\${email}"\`,
          });
          respond({ available: users.totalItems === 0 });
        } catch (e) {
          // If we can't query, assume available
          respond({ available: true });
        }
      } catch (error) {
        respond({ error: error.message });
      }
    },
  };
}

/**
 * Initialize Auth backend in worker context
 * @param {object} $APP - App instance
 */
export function initAuthBackend($APP) {
  const handlers = createAuthEventHandlers($APP);
  $APP.events.set(handlers);
  console.log("Auth backend module loaded");
}

export default { createAuthEventHandlers, initAuthBackend };
`,mimeType:"text/javascript"},"/$app/model/backend.js":{content:`/**
 * @file Backend Model Module
 * @description Initializes Model system for worker context with database operations
 */

import { createModel } from "./index.js";

/**
 * Create model event handlers for worker context
 * @param {object} $APP - App instance with Database
 * @returns {object} Event handlers object
 */
export function createModelEventHandlers($APP) {
  return {
    ADD: async ({ payload, respond }) => {
      try {
        const response = await $APP.Database.add(payload.model, payload.row);
        respond([null, response]);
      } catch (error) {
        respond([error, null]);
      }
    },
    ADD_MANY: async ({ payload, respond }) => {
      const results = [];
      for (const row of payload.rows) {
        try {
          const result = await $APP.Database.add(payload.model, row);
          results.push([null, result]);
        } catch (error) {
          respond([error, null]);
        }
      }
      respond([null, results]);
    },
    REMOVE: async ({ payload, respond }) => {
      const response = await $APP.Database.remove(payload.model, payload.id);
      respond(response);
    },
    REMOVE_MANY: async ({ payload, respond }) => {
      const results = [];
      const ids = Array.isArray(payload.ids) ? payload.ids : [payload.ids];
      for (const id of ids) {
        const result = await $APP.Database.remove(payload.model, id);
        results.push(result);
      }
      respond([null, results]);
    },
    EDIT: async ({ payload, respond }) => {
      if (!payload.row.id) {
        respond([
          new Error("Record data must include 'id' field for edit operation"),
          null,
        ]);
        return;
      }
      try {
        const response = await $APP.Database.edit(
          payload.model,
          payload.row.id,
          payload.row,
        );
        respond([null, response]);
      } catch (error) {
        respond([error, null]);
      }
    },
    EDIT_MANY: async ({ payload, respond }) => {
      const results = [];
      for (const row of payload.rows) {
        if (!row.id) {
          results.push([new Error("Record must have id field"), null]);
          continue;
        }
        try {
          const result = await $APP.Database.edit(payload.model, row.id, row);
          results.push([null, result]);
        } catch (error) {
          respond([error, null]);
        }
      }
      respond([null, results]);
    },
    GET: async ({ payload, respond }) => {
      const { id, model, opts = {} } = payload;
      let response;
      if (id) {
        response = await $APP.Database.get(model, id, opts);
      } else if (opts.where) {
        const where =
          typeof opts.where === "string" ? JSON.parse(opts.where) : opts.where;
        const results = await $APP.Database.getAll(model, {
          where,
          limit: 1,
          includes: opts.includes || [],
        });
        response = results.length > 0 ? results[0] : null;
      } else {
        response = null;
      }
      respond(response);
    },
    GET_MANY: async ({ payload: { model, opts = {} }, respond } = {}) => {
      const response = await $APP.Database.getAll(model, opts);
      respond(response);
    },
  };
}

/**
 * Create relationship sync handlers
 * @param {object} $APP - App instance
 * @returns {object} Event handlers for relationship sync
 */
export function createRelationshipSyncHandlers($APP) {
  return {
    onAddRecord({ model, row }) {
      $APP.Backend.broadcast({
        type: "QUERY_DATA_SYNC",
        payload: { action: "add", model, record: row },
      });
    },
    onEditRecord({ model, row }) {
      $APP.Backend.broadcast({
        type: "QUERY_DATA_SYNC",
        payload: { action: "update", model, record: row },
      });
    },
    onRemoveRecord({ model, row, id }) {
      $APP.Backend.broadcast({
        type: "QUERY_DATA_SYNC",
        payload: { action: "delete", model, record: row || { id } },
      });
    },
  };
}

/**
 * Initialize Model backend in worker context
 * @param {object} $APP - App instance with Database, Backend
 * @returns {object} Model instance
 */
export function initModelBackend($APP) {
  const Model = createModel($APP);

  // Register CRUD event handlers
  const queryModelEvents = createModelEventHandlers($APP);
  $APP.events.set(queryModelEvents);

  // Create direct request function for worker
  const request = (action, modelName, payload = {}) => {
    return new Promise((resolve) => {
      const event = queryModelEvents[action];
      if (event && typeof event === "function") {
        event({
          respond: resolve,
          payload: {
            model: modelName,
            ...payload,
          },
        });
      } else
        resolve({ success: false, error: \`Action "\${action}" not found.\` });
    });
  };

  // Register relationship sync handlers
  const relationshipHandlers = createRelationshipSyncHandlers($APP);
  $APP.events.set(relationshipHandlers);

  Model.request = request;
  $APP.addModule({ name: "Model", base: Model });

  return Model;
}

export default {
  createModelEventHandlers,
  createRelationshipSyncHandlers,
  initModelBackend,
};
`,mimeType:"text/javascript"},"/$app/model/factory.js":{content:`/**
 * @file Database Adapter Factory
 * @description Factory function to create database adapters with lazy loading
 */

/**
 * Registry of available adapter types
 * @type {Map<string, Class>}
 */
const ADAPTER_REGISTRY = new Map();

/**
 * Register a database adapter
 * @param {string} type - Adapter type name
 * @param {Class} AdapterClass - Adapter class
 */
export function registerAdapter(type, AdapterClass) {
  if (ADAPTER_REGISTRY.has(type)) {
    console.warn(\`Database: Overwriting existing adapter type "\${type}"\`);
  }
  ADAPTER_REGISTRY.set(type, AdapterClass);
  console.info(\`Database: Registered adapter type "\${type}"\`);
}

/**
 * Create a database adapter instance
 * @param {Object} config - Configuration object
 * @param {string} [config.type='indexeddb'] - Adapter type
 * @param {string} config.name - Database name
 * @param {number} [config.version=1] - Database version
 * @param {Object} config.models - Model schemas
 * @returns {Promise<Object>} Adapter instance
 *
 */
export async function createDatabase(config) {
  if (typeof config === "string") {
    config = { type: config };
  }

  const { type = "indexeddb", name, version = 1, models = {} } = config;

  if (!name) {
    throw new Error("Database name is required");
  }

  if (!models || Object.keys(models).length === 0) {
    console.warn(\`Database: No models provided for database "\${name}"\`);
  }

  // Check registry first
  if (!ADAPTER_REGISTRY.has(type)) {
    throw new Error(
      \`Unknown adapter type "\${type}". Available types: \${getAvailableAdapters().join(", ")}. Use registerAdapter() to register adapters.\`,
    );
  }

  const AdapterClass = ADAPTER_REGISTRY.get(type);
  const adapter = new AdapterClass(config);

  console.info(\`Database: Created \${type} adapter for "\${name}" v\${version}\`);

  return adapter;
}

/**
 * Get list of registered adapter types
 * @returns {Array<string>} List of adapter type names
 */
export function getAvailableAdapters() {
  return Array.from(ADAPTER_REGISTRY.keys());
}

/**
 * Check if an adapter type is registered
 * @param {string} type - Adapter type name
 * @returns {boolean} True if adapter is registered
 */
export function hasAdapter(type) {
  return ADAPTER_REGISTRY.has(type);
}

export default {
  createDatabase,
  registerAdapter,
  getAvailableAdapters,
  hasAdapter,
};
`,mimeType:"text/javascript"},"/$app/model/query-builder.js":{content:`/**
 * @file Query Builder Utilities
 * @description Common query building and filtering logic shared across adapters
 */

/**
 * Parse order string into structured format
 * @param {string|Array} order - Order specification
 * @returns {Array<{field: string, direction: 'ASC'|'DESC'}>}
 * @example
 * parseOrder('name ASC') => [{field: 'name', direction: 'ASC'}]
 * parseOrder('age DESC, name ASC') => [{field: 'age', direction: 'DESC'}, {field: 'name', direction: 'ASC'}]
 */
export function parseOrder(order) {
  if (!order) return [];
  if (Array.isArray(order)) return order;

  return order.split(',').map(part => {
    const [field, direction = 'ASC'] = part.trim().split(/\\s+/);
    return { field, direction: direction.toUpperCase() };
  });
}

/**
 * Apply where filter to a record
 * @param {Object} record - Record to test
 * @param {Object} where - Filter conditions
 * @returns {boolean} True if record matches filter
 * @example
 * matchesWhere({age: 25}, {age: 25}) => true
 * matchesWhere({age: 30}, {age: {'>': 25}}) => true
 */
export function matchesWhere(record, where) {
  if (!where || Object.keys(where).length === 0) return true;

  return Object.entries(where).every(([field, condition]) => {
    const value = record[field];

    // Direct equality
    if (typeof condition !== 'object' || condition === null) {
      // Use string coercion for 'id' field to handle string/number mismatch
      // (PocketBase returns string IDs, but queries may use numbers)
      if (field === 'id') {
        return String(value) === String(condition);
      }
      return value === condition;
    }

    // Operator-based conditions
    return Object.entries(condition).every(([operator, expected]) => {
      switch (operator) {
        case '>':
          return value > expected;
        case '>=':
          return value >= expected;
        case '<':
          return value < expected;
        case '<=':
          return value <= expected;
        case '!=':
        case '<>':
          return value !== expected;
        case 'in':
          return Array.isArray(expected) && expected.includes(value);
        case 'not in':
          return Array.isArray(expected) && !expected.includes(value);
        case 'like':
          return typeof value === 'string' && value.includes(expected);
        case 'ilike':
          return typeof value === 'string' &&
                 value.toLowerCase().includes(expected.toLowerCase());
        case 'is null':
          return value === null || value === undefined;
        case 'is not null':
          return value !== null && value !== undefined;
        default:
          return value === expected;
      }
    });
  });
}

/**
 * Apply sorting to an array of records
 * @param {Array<Object>} records - Records to sort
 * @param {string|Array} order - Sort specification
 * @returns {Array<Object>} Sorted records
 */
export function applyOrder(records, order) {
  if (!order || !records || records.length === 0) return records;

  const orderArray = parseOrder(order);
  if (orderArray.length === 0) return records;

  return [...records].sort((a, b) => {
    for (const { field, direction } of orderArray) {
      const aVal = a[field];
      const bVal = b[field];

      if (aVal === bVal) continue;

      const comparison = aVal < bVal ? -1 : 1;
      return direction === 'DESC' ? -comparison : comparison;
    }
    return 0;
  });
}

/**
 * Apply limit and offset to an array of records
 * @param {Array<Object>} records - Records to paginate
 * @param {number} [limit] - Maximum records to return
 * @param {number} [offset=0] - Records to skip
 * @returns {Array<Object>} Paginated records
 */
export function applyPagination(records, limit, offset = 0) {
  if (!records) return [];
  if (!limit && !offset) return records;

  const start = offset || 0;
  const end = limit ? start + limit : undefined;

  return records.slice(start, end);
}

/**
 * Build a complete query result from options
 * @param {Array<Object>} allRecords - All available records
 * @param {Object} options - Query options
 * @param {Object} [options.where] - Filter conditions
 * @param {string|Array} [options.order] - Sort specification
 * @param {number} [options.limit] - Maximum records
 * @param {number} [options.offset] - Records to skip
 * @returns {Object} {items: Array, count: number, total: number}
 */
export function buildQueryResult(allRecords, options = {}) {
  const { where, order, limit, offset } = options;

  // Filter
  let filtered = where ? allRecords.filter(r => matchesWhere(r, where)) : allRecords;
  const total = filtered.length;

  // Sort
  if (order) {
    filtered = applyOrder(filtered, order);
  }

  // Paginate
  const items = applyPagination(filtered, limit, offset);

  return {
    items,
    count: total,
    total,
    limit,
    offset: offset || 0,
  };
}

/**
 * Validate query options
 * @param {Object} options - Query options to validate
 * @throws {Error} If options are invalid
 */
export function validateQueryOptions(options = {}) {
  const { limit, offset, where } = options;

  if (limit !== undefined) {
    if (typeof limit !== 'number' || limit < 0) {
      throw new Error('limit must be a positive number');
    }
  }

  if (offset !== undefined) {
    if (typeof offset !== 'number' || offset < 0) {
      throw new Error('offset must be a non-negative number');
    }
  }

  if (where !== undefined && (typeof where !== 'object' || where === null)) {
    throw new Error('where must be an object');
  }

  return true;
}

export default {
  parseOrder,
  matchesWhere,
  applyOrder,
  applyPagination,
  buildQueryResult,
  validateQueryOptions,
};
`,mimeType:"text/javascript"},"/$app/model/row-utils.js":{content:`/**
 * @file Row Utilities
 * @description Utilities for preparing, validating, and transforming database rows
 */

/**
 * Type conversion maps for boolean values
 * Different databases may store booleans differently
 */
export const BOOLEAN_TO_STORAGE = { true: 1, false: 0 };
export const STORAGE_TO_BOOLEAN = { 1: true, 0: false, true: true, false: false };

/**
 * Prepare a row for storage in the database
 * Handles type conversion, default values, and relationship fields
 * @param {Object} models - All model schemas
 * @param {string} modelName - Name of the model
 * @param {Object} row - Row data to prepare
 * @param {Object} [options={}] - Preparation options
 * @param {Object} [options.currentRow={}] - Existing row (for updates)
 * @param {boolean} [options.reverse=false] - Convert from storage format
 * @returns {Object} Prepared row
 */
export function prepareRow(models, modelName, row, options = {}) {
  const { currentRow = {}, reverse = false } = options;
  const modelSchema = models[modelName];

  if (!modelSchema) {
    throw new Error(\`Model "\${modelName}" not found in schema\`);
  }

  const prepared = { ...row };
  const booleanMap = reverse ? STORAGE_TO_BOOLEAN : BOOLEAN_TO_STORAGE;

  for (const [field, fieldDef] of Object.entries(modelSchema)) {
    // Skip relationship fields that don't belong (many, one)
    if (fieldDef.relationship && !fieldDef.belongs) {
      continue;
    }

    const value = row[field];

    // Preserve current value if new value is undefined
    if (value === undefined && currentRow[field] !== undefined) {
      prepared[field] = currentRow[field];
      continue;
    }

    // Convert booleans for storage
    if (fieldDef.type === "boolean" && value !== undefined && value !== null) {
      prepared[field] = reverse
        ? (booleanMap[value] ?? value)
        : (booleanMap[value] ?? value);
    }

    // Handle timestamps
    if ((fieldDef.type === "date" || fieldDef.type === "datetime") && value) {
      if (reverse) {
        // Convert from storage (timestamp) to Date
        prepared[field] = typeof value === "number" ? new Date(value) : value;
      } else {
        // Convert to timestamp for storage
        prepared[field] = value instanceof Date ? value.getTime() : value;
      }
    }

    // Apply default values for new records
    if (
      !reverse &&
      value === undefined &&
      fieldDef.defaultValue !== undefined
    ) {
      prepared[field] =
        typeof fieldDef.defaultValue === "function"
          ? fieldDef.defaultValue()
          : fieldDef.defaultValue;
    }
  }

  return prepared;
}

/**
 * Validate a row against model schema
 * @param {Object} models - All model schemas
 * @param {string} modelName - Name of the model
 * @param {Object} row - Row data to validate
 * @param {Object} [options={}] - Validation options
 * @param {string} [options.operation] - Operation type (add, edit)
 * @returns {Object} {valid: boolean, errors: Object, data: Object}
 */
export function validateRow(models, modelName, row, options = {}) {
  const modelSchema = models[modelName];

  if (!modelSchema) {
    return {
      valid: false,
      errors: { _model: \`Model "\${modelName}" not found\` },
      data: null,
    };
  }

  const errors = {};
  const validated = { ...row };

  for (const [field, fieldDef] of Object.entries(modelSchema)) {
    const value = row[field];

    // Check required fields
    if (
      fieldDef.required &&
      (value === undefined || value === null || value === "")
    ) {
      if (options.operation !== "edit") {
        // Required only for add, not partial updates
        errors[field] = \`\${field} is required\`;
        continue;
      }
    }

    // Type validation
    if (value !== undefined && value !== null && fieldDef.type) {
      const expectedType = fieldDef.type;
      const actualType = Array.isArray(value) ? "array" : typeof value;

      const validTypes = {
        string: ["string", "number"], // Allow coercion
        number: ["number", "string"], // Allow coercion
        boolean: ["boolean", "number", "string"], // Allow coercion
        object: ["object"],
        array: ["array"],
        date: ["object", "number", "string"], // Date objects or timestamps
        datetime: ["object", "number", "string"],
      };

      if (
        validTypes[expectedType] &&
        !validTypes[expectedType].includes(actualType)
      ) {
        errors[field] = \`\${field} must be of type \${expectedType}\`;
      }
    }

    // Custom validators
    if (fieldDef.validator && value !== undefined) {
      try {
        const isValid = fieldDef.validator(value, row);
        if (!isValid) {
          errors[field] = \`\${field} failed custom validation\`;
        }
      } catch (e) {
        errors[field] = e.message || \`\${field} validation error\`;
      }
    }

    // Format validation (e.g., email)
    if (fieldDef.format && value) {
      const formats = {
        email: /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/,
        url: /^https?:\\/\\/.+/,
      };

      if (formats[fieldDef.format] && !formats[fieldDef.format].test(value)) {
        errors[field] = \`\${field} must be a valid \${fieldDef.format}\`;
      }
    }
  }

  return {
    valid: Object.keys(errors).length === 0,
    errors,
    data: validated,
  };
}

/**
 * Extract relationship fields from a row
 * @param {Object} modelSchema - Model schema
 * @param {Object} row - Row data
 * @returns {Object} {belongs: Object, references: Object}
 */
export function extractRelationships(modelSchema, row) {
  const belongs = {}; // Foreign keys (belongs relationships)
  const references = {}; // Data for many/one relationships

  for (const [field, fieldDef] of Object.entries(modelSchema)) {
    if (!fieldDef.relationship) continue;

    if (fieldDef.belongs && row[field] !== undefined) {
      belongs[field] = row[field];
    } else if (!fieldDef.belongs && row[field] !== undefined) {
      references[field] = row[field];
    }
  }

  return { belongs, references };
}

/**
 * Generate a unique ID (for databases that don't auto-generate)
 * @param {boolean} [useStringId=false] - Return string ID instead of number
 * @returns {string|number} Unique ID
 */
export function generateId(useStringId = false) {
  const id = \`\${Date.now()}\${Math.random().toString(10).substr(2, 2)}\`;
  return useStringId ? id : Number(id);
}

/**
 * Clone a row (deep copy)
 * @param {Object} row - Row to clone
 * @returns {Object} Cloned row
 */
export function cloneRow(row) {
  if (!row || typeof row !== "object") return row;

  try {
    return JSON.parse(JSON.stringify(row));
  } catch (e) {
    // Fallback for objects with circular references
    return { ...row };
  }
}

/**
 * Merge row updates (for partial updates)
 * @param {Object} currentRow - Current row data
 * @param {Object} updates - Updates to apply
 * @returns {Object} Merged row
 */
export function mergeRowUpdates(currentRow, updates) {
  return {
    ...currentRow,
    ...updates,
  };
}

export default {
  prepareRow,
  validateRow,
  extractRelationships,
  generateId,
  cloneRow,
  mergeRowUpdates,
  BOOLEAN_TO_STORAGE,
  STORAGE_TO_BOOLEAN,
};
`,mimeType:"text/javascript"},"/$app/model/subscription-manager.js":{content:`/**
 * @file Subscription Manager
 * @description Manages query-level subscriptions for efficient data synchronization
 * Tracks unique queries (model + where clause) and routes notifications only to matching subscribers
 */

import { matchesWhere } from "./query-builder.js";

/**
 * Represents a single query subscription
 */
export class QuerySubscription {
  constructor(model, where, filterString) {
    this.model = model; // Model name (e.g., "users")
    this.where = where; // Where clause object (e.g., { status: "active" })
    this.filterString = filterString; // Adapter-specific filter string
    this.queryHash = null; // Unique hash for this query
    this.callbacks = new Set(); // Set of callback functions
    this.refCount = 0; // Number of active subscribers
  }

  /**
   * Add a callback to this subscription
   */
  addCallback(callback) {
    this.callbacks.add(callback);
    this.refCount++;
  }

  /**
   * Remove a callback from this subscription
   */
  removeCallback(callback) {
    this.callbacks.delete(callback);
    this.refCount--;
  }

  /**
   * Notify all callbacks with an event
   */
  notify(event) {
    this.callbacks.forEach((callback) => {
      try {
        callback(event);
      } catch (error) {
        console.error("Error in query subscription callback:", error);
      }
    });
  }
}

/**
 * Generate a stable hash for a query (model + where clause)
 * @param {string} model - Model name
 * @param {object} where - Where clause object
 * @returns {string} Query hash
 */
export function hashQuery(model, where) {
  if (!where || Object.keys(where).length === 0) {
    return \`\${model}::*\`; // All records
  }

  // Sort keys for stable hashing
  const sortedKeys = Object.keys(where).sort();
  const sortedWhere = {};
  sortedKeys.forEach((key) => {
    sortedWhere[key] = where[key];
  });

  const whereString = JSON.stringify(sortedWhere);
  return \`\${model}::\${whereString}\`;
}

/**
 * Default filter builder (identity function)
 * Can be replaced by adapter-specific builders (e.g., PocketBase filter syntax)
 * @param {object} where - Where clause object
 * @returns {string} Filter string
 */
const defaultFilterBuilder = (where) => {
  if (!where || Object.keys(where).length === 0) {
    return "";
  }
  return JSON.stringify(where);
};

/**
 * Centralized subscription manager for query-level subscriptions
 */
export class SubscriptionManager {
  /**
   * @param {object} database - Database adapter instance (optional)
   * @param {object} [options={}] - Configuration options
   * @param {function} [options.buildFilterString] - Custom filter string builder
   */
  constructor(database, options = {}) {
    this.database = database; // Database adapter instance

    // Allow custom filter builder (e.g., for PocketBase)
    this.buildFilterString = options.buildFilterString || defaultFilterBuilder;

    // Map: queryHash -> QuerySubscription
    this.subscriptions = new Map();

    // Map: model -> Set<queryHash>
    this.modelToQueries = new Map();

    // Map: queryHash -> adapter-specific unsubscribe function
    this.adapterUnsubscribers = new Map();
  }

  /**
   * Set a custom filter builder function
   * @param {function} builder - Filter builder function (where) => filterString
   */
  setFilterBuilder(builder) {
    this.buildFilterString = builder;
  }

  /**
   * Subscribe to a query (model + where clause)
   * @param {string} model - Model name
   * @param {object} where - Where clause object
   * @param {function} callback - Callback function (event) => void
   * @returns {function} Unsubscribe function
   */
  async subscribe(model, where, callback) {
    if (typeof callback !== "function") {
      console.error("Subscription callback must be a function");
      return () => {};
    }

    const queryHash = hashQuery(model, where);
    let subscription = this.subscriptions.get(queryHash);
    let isNew = false;

    if (!subscription) {
      // First subscriber for this query - create new subscription
      const filterString = this.buildFilterString(where);
      subscription = new QuerySubscription(model, where, filterString);
      subscription.queryHash = queryHash;
      isNew = true;
    }

    // Add callback BEFORE adding to maps (prevents race condition where
    // notifyMatchingQueries finds subscription but callbacks is empty)
    subscription.addCallback(callback);

    if (isNew) {
      // Now add to tracking maps
      this.subscriptions.set(queryHash, subscription);

      if (!this.modelToQueries.has(model)) {
        this.modelToQueries.set(model, new Set());
      }
      this.modelToQueries.get(model).add(queryHash);

      // Create adapter-specific subscription (PocketBase realtime)
      await this.createAdapterSubscription(subscription);
    }

    // Return unsubscribe function
    return () => this.unsubscribe(queryHash, callback);
  }

  /**
   * Unsubscribe a callback from a query
   * @param {string} queryHash - Query hash
   * @param {function} callback - Callback to remove
   */
  unsubscribe(queryHash, callback) {
    const subscription = this.subscriptions.get(queryHash);
    if (!subscription) return;

    subscription.removeCallback(callback);

    // If no more subscribers, cleanup
    if (subscription.refCount === 0) {
      this.cleanupSubscription(queryHash);
    }
  }

  /**
   * Create adapter-specific subscription (PocketBase, IndexedDB, Hybrid)
   * @param {QuerySubscription} subscription
   * @private
   */
  async createAdapterSubscription(subscription) {
    const { model, filterString } = subscription;

    // Check if database adapter supports realtime subscriptions
    if (
      this.database?.realtimeManager &&
      typeof this.database.realtimeManager.subscribe === "function"
    ) {
      // PocketBase or Hybrid adapter with realtime support
      try {
        const unsubscribe = await this.database.realtimeManager.subscribe(
          model,
          filterString,
          (event) => {
            // Route event to subscription callbacks
            subscription.notify(event);
          },
        );

        this.adapterUnsubscribers.set(subscription.queryHash, unsubscribe);
      } catch (error) {
        console.error(
          "SubscriptionManager: Failed to create realtime subscription",
          error,
        );
      }
    }
    // IndexedDB adapter uses event-based notifications (no native realtime)
  }

  /**
   * Cleanup a subscription when no more subscribers
   * @param {string} queryHash
   * @private
   */
  cleanupSubscription(queryHash) {
    const subscription = this.subscriptions.get(queryHash);
    if (!subscription) return;

    // Unsubscribe from adapter
    const adapterUnsub = this.adapterUnsubscribers.get(queryHash);
    if (adapterUnsub && typeof adapterUnsub === "function") {
      adapterUnsub();
      this.adapterUnsubscribers.delete(queryHash);
    }

    // Remove from tracking
    this.subscriptions.delete(queryHash);

    const modelQueries = this.modelToQueries.get(subscription.model);
    if (modelQueries) {
      modelQueries.delete(queryHash);
      if (modelQueries.size === 0) {
        this.modelToQueries.delete(subscription.model);
      }
    }
  }

  /**
   * Notify all query subscriptions that match a record change
   * Used by IndexedDB adapter and frontend event handler
   * @param {string} model - Model name
   * @param {string} action - Action type: 'add', 'update', 'delete'
   * @param {object} record - Changed record
   */
  notifyMatchingQueries(model, action, record) {
    const queryHashes = this.modelToQueries.get(model);
    if (!queryHashes) return;

    for (const queryHash of queryHashes) {
      const subscription = this.subscriptions.get(queryHash);
      if (!subscription) continue;

      // For deletes, always notify (can't check match on deleted record)
      // For add/update, check if record matches the where clause
      const shouldNotify =
        action === "delete" ||
        action === "remove" ||
        !subscription.where ||
        Object.keys(subscription.where).length === 0 ||
        matchesWhere(record, subscription.where);
      if (shouldNotify) {
        subscription.notify({
          action,
          record,
          model,
        });
      }
    }
  }

  /**
   * Cleanup all subscriptions (called on app shutdown)
   */
  cleanup() {
    for (const queryHash of this.subscriptions.keys()) {
      this.cleanupSubscription(queryHash);
    }
  }

  /**
   * Get subscription statistics (for debugging)
   */
  getStats() {
    const stats = {
      totalSubscriptions: this.subscriptions.size,
      byModel: {},
    };

    for (const [model, queryHashes] of this.modelToQueries) {
      stats.byModel[model] = {
        queries: queryHashes.size,
        totalCallbacks: 0,
      };

      for (const queryHash of queryHashes) {
        const subscription = this.subscriptions.get(queryHash);
        if (subscription) {
          stats.byModel[model].totalCallbacks += subscription.refCount;
        }
      }
    }

    return stats;
  }
}

export default SubscriptionManager;
`,mimeType:"text/javascript"},"/$app/model-pocketbase/relationship-loader.js":{content:`/**
 * @file Relationship Loader
 * @description Handles loading of relationships (belongs, many, one) for database records
 */

/**
 * Load relationships for a single record
 * @param {Object} adapter - Database adapter instance
 * @param {Object} models - Model schemas
 * @param {string} modelName - Name of the model
 * @param {Object} record - Record to load relationships for
 * @param {Array<string>} includes - Relationship names to load
 * @param {boolean} [recursive=false] - Load nested relationships
 * @returns {Promise<Object>} Record with loaded relationships
 */
export async function loadRelationships(
  adapter,
  models,
  modelName,
  record,
  includes,
  recursive = false,
) {
  if (!includes || includes.length === 0 || !record) {
    return record;
  }

  const modelSchema = models[modelName];
  if (!modelSchema) {
    console.warn(\`Relationship loader: Model "\${modelName}" not found\`);
    return record;
  }

  const enriched = { ...record };

  for (const relationName of includes) {
    const relationDef = modelSchema[relationName];

    if (!relationDef) {
      console.warn(
        \`Relationship loader: Relationship "\${relationName}" not found in model "\${modelName}"\`,
      );
      continue;
    }

    if (!relationDef.relationship) {
      console.warn(
        \`Relationship loader: Field "\${relationName}" is not a relationship\`,
      );
      continue;
    }

    try {
      enriched[relationName] = await loadRelationship(
        adapter,
        models,
        modelName,
        record,
        relationName,
        relationDef,
        recursive,
      );
    } catch (error) {
      console.error(
        \`Relationship loader: Error loading "\${relationName}"\`,
        error,
      );
      enriched[relationName] = relationDef.many ? [] : null;
    }
  }

  return enriched;
}

/**
 * Load relationships for multiple records
 * @param {Object} adapter - Database adapter instance
 * @param {Object} models - Model schemas
 * @param {string} modelName - Name of the model
 * @param {Array<Object>} records - Records to load relationships for
 * @param {Array<string>} includes - Relationship names to load
 * @param {boolean} [recursive=false] - Load nested relationships
 * @returns {Promise<Array<Object>>} Records with loaded relationships
 */
export async function loadRelationshipsForMany(
  adapter,
  models,
  modelName,
  records,
  includes,
  recursive = false,
) {
  if (!includes || includes.length === 0 || !records || records.length === 0) {
    return records;
  }

  return Promise.all(
    records.map((record) =>
      loadRelationships(adapter, models, modelName, record, includes, recursive),
    ),
  );
}

/**
 * Load a single relationship
 * @private
 */
async function loadRelationship(
  adapter,
  models,
  modelName,
  record,
  relationName,
  relationDef,
  recursive,
) {
  const { relationship, targetModel, targetForeignKey, many } = relationDef;

  // Belongs relationship (foreign key in this model)
  if (relationship === "belongs") {
    const foreignKeyValue = record[relationName];
    if (!foreignKeyValue) return null;

    const related = await adapter.get(targetModel, foreignKeyValue);
    return related;
  }

  // Belongs Many relationship (array of foreign keys)
  if (relationship === "belongs_many") {
    const foreignKeyValues = record[relationName];
    if (!Array.isArray(foreignKeyValues) || foreignKeyValues.length === 0) {
      return [];
    }

    const allRecords = await adapter.getAll(targetModel);
    return allRecords.filter((r) => foreignKeyValues.includes(r.id));
  }

  // Has Many relationship (foreign key in target model)
  if (relationship === "many") {
    const foreignKeyField = targetForeignKey || \`\${modelName}Id\`;

    const related = await adapter.getAll(targetModel, {
      where: { [foreignKeyField]: record.id },
    });

    return related || [];
  }

  // Has One relationship (foreign key in target model)
  if (relationship === "one") {
    const foreignKeyField = targetForeignKey || \`\${modelName}Id\`;

    const related = await adapter.getAll(targetModel, {
      where: { [foreignKeyField]: record.id },
      limit: 1,
    });

    return related && related.length > 0 ? related[0] : null;
  }

  console.warn(
    \`Relationship loader: Unknown relationship type "\${relationship}"\`,
  );
  return many ? [] : null;
}

/**
 * Parse nested includes syntax
 * Supports: ['posts', 'posts.comments', 'author']
 * @param {Array<string>} includes - Include specifications
 * @returns {Object} Structured includes with nested relationships
 * @example
 * parseIncludes(['posts', 'posts.comments', 'author'])
 * // Returns:
 * // {
 * //   posts: { nested: ['comments'] },
 * //   author: { nested: [] }
 * // }
 */
export function parseIncludes(includes) {
  if (!includes || !Array.isArray(includes)) {
    return {};
  }

  const parsed = {};

  for (const include of includes) {
    const parts = include.split(".");
    const rootRelation = parts[0];

    if (!parsed[rootRelation]) {
      parsed[rootRelation] = { nested: [] };
    }

    if (parts.length > 1) {
      const nestedPath = parts.slice(1).join(".");
      parsed[rootRelation].nested.push(nestedPath);
    }
  }

  return parsed;
}

/**
 * Load nested relationships recursively
 * @param {Object} adapter - Database adapter instance
 * @param {Object} models - Model schemas
 * @param {string} modelName - Name of the model
 * @param {Object|Array} records - Record(s) to load relationships for
 * @param {Array<string>} includes - Include specifications
 * @returns {Promise<Object|Array>} Records with nested relationships loaded
 */
export async function loadNestedRelationships(
  adapter,
  models,
  modelName,
  records,
  includes,
) {
  if (!includes || includes.length === 0) {
    return records;
  }

  const parsedIncludes = parseIncludes(includes);
  const isArray = Array.isArray(records);
  const recordArray = isArray ? records : [records];

  // Load first level relationships
  const firstLevelIncludes = Object.keys(parsedIncludes);
  const enriched = await loadRelationshipsForMany(
    adapter,
    models,
    modelName,
    recordArray,
    firstLevelIncludes,
    false,
  );

  // Load nested relationships
  for (const [relationName, { nested }] of Object.entries(parsedIncludes)) {
    if (nested.length === 0) continue;

    const relationDef = models[modelName][relationName];
    if (!relationDef) continue;

    const targetModel = relationDef.targetModel;

    for (const record of enriched) {
      const relatedData = record[relationName];
      if (!relatedData) continue;

      // Recursively load nested relationships
      if (Array.isArray(relatedData)) {
        record[relationName] = await loadNestedRelationships(
          adapter,
          models,
          targetModel,
          relatedData,
          nested,
        );
      } else {
        record[relationName] = await loadNestedRelationships(
          adapter,
          models,
          targetModel,
          relatedData,
          nested,
        );
      }
    }
  }

  return isArray ? enriched : enriched[0];
}

export default {
  loadRelationships,
  loadRelationshipsForMany,
  loadNestedRelationships,
  parseIncludes,
};
`,mimeType:"text/javascript"},"/$app/model-indexeddb/adapter.js":{content:`/**
 * @file IndexedDB Database Adapter
 * @description IndexedDB adapter implementing the database interface
 */

import { DatabaseAdapterBase } from "/$app/model/adapter-base.js";
import { SystemModelManager } from "./system-model-manager.js";

/**
 * IndexedDB Adapter Configuration
 * @typedef {Object} IndexedDBConfig
 * @property {string} name - Database name
 * @property {number} version - Database version
 * @property {Object} models - Model schemas
 * @property {boolean} [system] - Is system database
 * @property {Function} [onConnected] - Callback when connected
 * @property {boolean} [enableSystemModels] - Enable system model management
 * @property {Function} [buildQueryResult] - Query result builder (injected)
 * @property {Function} [matchesWhere] - Where clause matcher (injected)
 * @property {Function} [validateQueryOptions] - Query options validator (injected)
 * @property {Function} [loadRelationships] - Relationship loader (injected)
 * @property {Function} [loadRelationshipsForMany] - Batch relationship loader (injected)
 * @property {Function} [generateId] - ID generator (injected)
 * @property {Function} [mergeRowUpdates] - Row merge function (injected)
 * @property {Function} [prepareRow] - Row preparation function (injected)
 * @property {Function} [validateRow] - Row validation function (injected)
 * @property {Function} [eventEmitter] - Event emitter for reactivity
 * @property {Object} [subscriptionManager] - Subscription manager for query notifications
 */

export class IndexedDBAdapter extends DatabaseAdapterBase {
  constructor(config) {
    super(config);
    this.db = null;
    this.isConnected = false;
    this.connectionPromise = null;

    // Injected dependencies
    this.buildQueryResult =
      config.buildQueryResult ||
      ((records, options) => ({ items: records, total: records.length }));
    this.matchesWhere = config.matchesWhere || (() => true);
    this.validateQueryOptions = config.validateQueryOptions || (() => {});
    this.loadRelationships = config.loadRelationships || ((a, b, c, r) => r);
    this.loadRelationshipsForMany =
      config.loadRelationshipsForMany || ((a, b, c, r) => r);
    this.generateId =
      config.generateId ||
      ((useStringId) => {
        const id = \`\${Date.now()}\${Math.random().toString(10).substr(2, 2)}\`;
        return useStringId ? id : Number(id);
      });
    this.mergeRowUpdates =
      config.mergeRowUpdates ||
      ((current, updates) => ({ ...current, ...updates }));
    this.prepareRow =
      config.prepareRow || ((models, model, row) => ({ ...row }));
    this.validateRow =
      config.validateRow || (() => ({ valid: true, errors: {} }));
    this.eventEmitter = config.eventEmitter || null;
    this.subscriptionManager = config.subscriptionManager || null;

    // System model manager
    this.systemModelManager = config.enableSystemModels
      ? new SystemModelManager(this, config.systemModelManagerOptions || {})
      : null;
  }

  /**
   * Initialize IndexedDB connection
   * @returns {Promise<IDBDatabase>}
   */
  async init() {
    if (this.connectionPromise) return this.connectionPromise;

    this.connectionPromise = new Promise((resolve, reject) => {
      const request = indexedDB.open(this.name, Number(this.version));

      request.onerror = (event) => {
        this.connectionPromise = null;
        console.error("IndexedDB: Failed to open database", event.target.error);
        reject(new Error(\`Failed to open database: \${event.target.error}\`));
      };

      request.onsuccess = (event) => {
        this.db = event.target.result;
        this.isConnected = true;
        this.db.onversionchange = () => {
          console.warn(
            "IndexedDB: Database version changed, closing connection",
          );
          this.close();
        };
        console.log(
          \`IndexedDB: Connected to database "\${this.name}" v\${this.version}\`,
        );
        if (this.onConnected && typeof this.onConnected === "function") {
          this.onConnected();
        }
        resolve(this.db);
      };

      request.onupgradeneeded = (event) => {
        const db = event.target.result;
        const transaction = event.target.transaction;
        console.info(
          \`IndexedDB: Upgrading database to version \${this.version}\`,
        );
        for (const [modelName, schema] of Object.entries(this.models)) {
          if (!db.objectStoreNames.contains(modelName)) {
            this._createObjectStore(db, modelName, schema);
          } else {
            this._updateObjectStore(transaction.objectStore(modelName), schema);
          }
        }
      };
    });

    return this.connectionPromise;
  }

  /**
   * Create an object store with indexes
   * @private
   */
  _createObjectStore(db, storeName, schema) {
    const idField = schema.id;
    const useAutoIncrement = !idField || idField.type === "number";

    const store = db.createObjectStore(storeName, {
      keyPath: "id",
      autoIncrement: useAutoIncrement,
    });

    for (const [field, fieldDef] of Object.entries(schema)) {
      if (fieldDef.index === true || fieldDef.unique === true) {
        store.createIndex(field, field, {
          unique: fieldDef.unique ?? false,
          multiEntry: fieldDef.type === "array",
        });
      }
    }

    console.log(
      \`IndexedDB: Created object store "\${storeName}" with \${Object.keys(schema).length} fields\`,
    );
  }

  /**
   * Update object store indexes
   * @private
   */
  _updateObjectStore(store, schema) {
    for (const [field, fieldDef] of Object.entries(schema)) {
      if (
        (fieldDef.index === true || fieldDef.unique === true) &&
        !store.indexNames.contains(field)
      ) {
        store.createIndex(field, field, {
          unique: fieldDef.unique ?? false,
          multiEntry: fieldDef.type === "array",
        });
        console.log(\`IndexedDB: Added index for field "\${field}"\`);
      }
    }
  }

  /**
   * Execute a transaction
   * @private
   */
  async _executeTransaction(storeNames, mode, callback) {
    await this.init();

    return new Promise((resolve, reject) => {
      const stores = Array.isArray(storeNames) ? storeNames : [storeNames];
      const transaction = this.db.transaction(stores, mode);
      const result = callback(transaction);

      transaction.oncomplete = () => resolve(result);
      transaction.onerror = () => reject(transaction.error);
      transaction.onabort = () => reject(new Error("Transaction aborted"));
    });
  }

  /**
   * Emit an event if eventEmitter is available
   * @private
   */
  _emit(event, data) {
    if (this.eventEmitter && typeof this.eventEmitter === "function") {
      this.eventEmitter(event, data);
    }
  }

  /**
   * Notify query subscribers that match this record change
   * @param {string} model - Model name
   * @param {string} action - Action type: 'add', 'update', 'delete'
   * @param {Object} record - Changed record
   * @private
   */
  _notifyQuerySubscribers(model, action, record) {
    if (!this.subscriptionManager) return;

    const subManager = this.subscriptionManager;
    const queryHashes = subManager.modelToQueries?.get(model);
    if (!queryHashes) return;

    for (const queryHash of queryHashes) {
      const subscription = subManager.subscriptions?.get(queryHash);
      if (!subscription) continue;

      const shouldNotify =
        action === "delete" ||
        !subscription.where ||
        Object.keys(subscription.where).length === 0 ||
        this.matchesWhere(record, subscription.where);

      if (shouldNotify) {
        subscription.callbacks.forEach((callback) => {
          try {
            callback({ action, record, model });
          } catch (error) {
            console.error(
              "IndexedDB: Error in query subscription callback:",
              error,
            );
          }
        });
      }
    }
  }

  /**
   * Get a single record by ID or query
   * @param {string} model - Model name
   * @param {string|number|Object} idOrWhere - Record ID or where clause object
   * @param {Object} [options={}] - Query options
   * @returns {Promise<Object|null>}
   */
  async get(model, idOrWhere, options = {}) {
    try {
      const isId = typeof idOrWhere !== "object" || idOrWhere === null;

      if (isId) {
        const id = idOrWhere;
        let record = await this._executeTransaction(
          model,
          "readonly",
          (transaction) => {
            return new Promise((resolve, reject) => {
              const store = transaction.objectStore(model);
              const request = store.get(id);
              request.onsuccess = () => {
                const row = request.result;
                if (row) {
                  const prepared = this.prepareRow(this.models, model, row, {
                    reverse: true,
                    currentRow: row,
                  });
                  resolve(prepared);
                } else {
                  resolve(null);
                }
              };
              request.onerror = () => reject(request.error);
            });
          },
        );

        if (record && options.includes) {
          record = await this.loadRelationships(
            this,
            this.models,
            model,
            record,
            options.includes,
            options.recursive || false,
          );
        }

        return record;
      } else {
        const where = idOrWhere;
        const results = await this.getAll(model, {
          where,
          limit: 1,
          includes: options.includes,
        });
        return results.length > 0 ? results[0] : null;
      }
    } catch (error) {
      console.error(\`IndexedDB: Error getting record from "\${model}"\`, error);
      throw error;
    }
  }

  /**
   * Get all records matching criteria
   * @param {string} model - Model name
   * @param {Object} [options={}] - Query options
   * @returns {Promise<Array<Object>>}
   */
  async getAll(model, options = {}) {
    this.validateQueryOptions(options);

    try {
      const records = await this._executeTransaction(
        model,
        "readonly",
        (transaction) => {
          return new Promise((resolve, reject) => {
            const store = transaction.objectStore(model);
            const request = store.getAll();

            request.onsuccess = () => {
              const rows = request.result || [];
              const prepared = rows.map((row) =>
                this.prepareRow(this.models, model, row, {
                  reverse: true,
                  currentRow: row,
                }),
              );
              resolve(prepared);
            };
            request.onerror = () => reject(request.error);
          });
        },
      );

      const result = this.buildQueryResult(records, options);
      let items = result.items;

      if (options.includes && items.length > 0) {
        items = await this.loadRelationshipsForMany(
          this,
          this.models,
          model,
          items,
          options.includes,
          options.recursive || false,
        );
      }

      // Return full pagination object if limit was requested
      if (options.limit !== undefined) {
        result.items = items; // items may have relationships loaded
        return result;
      }
      return items;
    } catch (error) {
      console.error(\`IndexedDB: Error getting records from "\${model}"\`, error);
      throw error;
    }
  }

  /**
   * Add a new record
   * @param {string} model - Model name
   * @param {Object} data - Record data
   * @returns {Promise<Object>} Created record with ID
   */
  async add(model, data) {
    // Run beforeAdd hook
    data = await this.runBeforeAdd(model, data);

    const idField = this.models[model]?.id;
    const useStringId = (idField && idField.type === "string") || !idField;
    if (!data.id) data.id = this.generateId(useStringId);

    const validation = this.validateRow(this.models, model, data, {
      operation: "add",
    });
    if (!validation.valid) {
      throw new Error(
        \`Validation failed: \${JSON.stringify(validation.errors)}\`,
      );
    }

    try {
      const prepared = this.prepareRow(this.models, model, data);

      const id = await this._executeTransaction(
        model,
        "readwrite",
        (transaction) => {
          return new Promise((resolve, reject) => {
            try {
              const store = transaction.objectStore(model);
              const request = store.add(prepared);

              request.onsuccess = () => {
                if (!this.system) {
                  this._emit(\`ModelAddRecord-\${model}\`, {
                    model,
                    row: prepared,
                  });
                  this._emit("onAddRecord", { model, row: prepared });
                  this._notifyQuerySubscribers(model, "add", prepared);
                }
                resolve(request.result);
              };
              request.onerror = () => reject(request.error);
            } catch (error) {
              reject(error);
            }
          });
        },
      );

      const result = await this.get(model, id);
      // Run afterAdd hook
      return this.runAfterAdd(model, result);
    } catch (error) {
      console.error(\`IndexedDB: Error adding record to "\${model}"\`, error);
      throw error;
    }
  }

  /**
   * Update an existing record
   * @param {string} model - Model name
   * @param {string|number} id - Record ID
   * @param {Object} data - Updated data
   * @returns {Promise<Object>} Updated record
   */
  async edit(model, id, data) {
    // Strip immutable fields
    data = this.stripImmutableFields(model, data);

    // Run beforeEdit hook
    data = await this.runBeforeEdit(model, { ...data, id });

    const validation = this.validateRow(this.models, model, data, {
      operation: "edit",
    });
    if (!validation.valid) {
      throw new Error(
        \`Validation failed: \${JSON.stringify(validation.errors)}\`,
      );
    }

    try {
      const currentRecord = await this.get(model, id);
      if (!currentRecord) {
        throw new Error(\`Record with id \${id} not found in model "\${model}"\`);
      }

      const merged = this.mergeRowUpdates(currentRecord, data);
      merged.id = id;
      const prepared = this.prepareRow(this.models, model, merged, {
        currentRow: currentRecord,
      });

      await this._executeTransaction(model, "readwrite", (transaction) => {
        return new Promise((resolve, reject) => {
          const store = transaction.objectStore(model);
          const request = store.put(prepared);

          request.onsuccess = () => {
            if (!this.system) {
              this._emit(\`ModelEditRecord-\${model}\`, {
                model,
                row: prepared,
              });
              this._emit("onEditRecord", { model, row: prepared });
              this._notifyQuerySubscribers(model, "update", prepared);
            }
            resolve(request.result);
          };
          request.onerror = () => reject(request.error);
        });
      });

      const result = await this.get(model, id);
      // Run afterEdit hook
      return this.runAfterEdit(model, result);
    } catch (error) {
      console.error(\`IndexedDB: Error updating record in "\${model}"\`, error);
      throw error;
    }
  }

  /**
   * Delete a record
   * @param {string} model - Model name
   * @param {string|number} id - Record ID
   * @returns {Promise<boolean>} True if deleted
   */
  async remove(model, id) {
    try {
      const record = await this.get(model, id);

      // Run beforeRemove hook - can return false to cancel
      const shouldProceed = await this.runBeforeRemove(model, id, record);
      if (!shouldProceed) {
        return false;
      }

      await this._executeTransaction(model, "readwrite", (transaction) => {
        return new Promise((resolve, reject) => {
          const store = transaction.objectStore(model);
          const request = store.delete(id);
          request.onsuccess = () => {
            if (!this.system) {
              this._emit(\`ModelRemoveRecord-\${model}\`, { model, id });
              this._emit("onRemoveRecord", { model, id });
              this._notifyQuerySubscribers(model, "delete", record || { id });
            }
            resolve(true);
          };
          request.onerror = () => reject(request.error);
        });
      });

      // Run afterRemove hook
      await this.runAfterRemove(model, id, record);

      console.log(\`IndexedDB: Deleted record \${id} from "\${model}"\`);
      return true;
    } catch (error) {
      console.error(\`IndexedDB: Error deleting record from "\${model}"\`, error);
      throw error;
    }
  }

  /**
   * Count records matching criteria
   * @param {string} model - Model name
   * @param {Object} [options={}] - Query options
   * @returns {Promise<number>}
   */
  async count(model, options = {}) {
    const records = await this.getAll(model, { where: options.where });
    return records.length;
  }

  /**
   * Execute operations in a transaction
   * @param {Function} callback - Async function to execute
   * @returns {Promise<*>} Result of callback
   */
  async transaction(callback) {
    await this.init();
    return callback(this);
  }

  /**
   * Close database connection
   * @returns {Promise<void>}
   */
  async close() {
    if (this.db) {
      this.db.close();
      this.db = null;
      this.isConnected = false;
      this.connectionPromise = null;
      console.log("IndexedDB: Connection closed");
    }
  }

  /**
   * Export all model data
   * @returns {Promise<Object>} Data dump object
   */
  async exportData() {
    const dump = {};
    for (const modelName of Object.keys(this.models)) {
      dump[modelName] = await this.getAll(modelName, { object: true });
    }
    return dump;
  }

  /**
   * Import data with optional ID preservation
   * @param {Object} dump - Data dump object
   * @param {Object} options - Import options
   * @param {boolean} options.keepIndex - Whether to preserve original IDs
   * @returns {Promise<void>}
   */
  async importData(dump, options = {}) {
    for (const [modelName, entries] of Object.entries(dump)) {
      if (this.models[modelName])
        await this.addMany(modelName, entries, {
          keepIndex: options.keepIndex,
        });
    }
  }

  /**
   * Get system model manager if supported
   * @returns {SystemModelManager|null}
   */
  getSystemModelManager() {
    return this.systemModelManager;
  }

  /**
   * Get adapter metadata
   * @returns {Object}
   */
  getMetadata() {
    return {
      ...super.getMetadata(),
      type: "indexeddb",
      isConnected: this.isConnected,
      dbName: this.name,
    };
  }
}

export default IndexedDBAdapter;
`,mimeType:"text/javascript"},"/$app/model/index.js":{content:`/**
 * @file Model System - ORM-like API for data access
 * @description Provides a proxy-based model API with automatic CRUD operations,
 * dynamic finders, relationships, and reactive data synchronization
 */
import createEventHandler from "/$app/events/index.js";

export class ModelType {}

/**
 * Symbol used to store subscription callbacks on a row instance
 * without polluting the data properties.
 */
const SUBSCRIPTION_SYMBOL = Symbol("subscriptions");

/**
 * Symbol used to store relationship subscription unsubscribers on a row instance.
 */
const RELATIONSHIP_SUBS_SYMBOL = Symbol("relationshipSubscriptions");

/**
 * A simple helper to check if a row matches a 'where' clause.
 * This is naive and only supports exact, top-level key-value matches.
 * @param {object} row - The row object to check.
 * @param {object} where - The 'where' clause (e.g., { active: true }).
 * @returns {boolean} True if the row matches.
 */
const simpleMatcher = (row, where) => {
  if (!where || Object.keys(where).length === 0) {
    return true; // No filter means all rows match.
  }
  return Object.keys(where).every((key) => {
    // Use string coercion for 'id' field to handle string/number mismatch
    if (key === "id") {
      return String(row[key]) === String(where[key]);
    }
    return row[key] === where[key];
  });
};

/**
 * Create a reactive array prototype with subscription capabilities
 * @param {function} proxifyRow - Function to proxify individual rows
 * @param {object} $APP - App instance with SubscriptionManager
 * @returns {object} Reactive array prototype
 */
function createReactiveArrayPrototype(proxifyRow, $APP) {
  const reactiveArrayPrototype = {
    // Pagination metadata (set by proxifyMultipleRows when available)
    total: 0,
    limit: undefined,
    offset: 0,
    count: 0,

    /**
     * Subscribes to changes in the row set.
     * @param {function(Array): void} callback - Fired with the new array.
     */
    subscribe(callback) {
      if (typeof callback !== "function") {
        console.error("Subscription callback must be a function.");
        return this;
      }
      // On the first subscription, register query-level listener
      if (this.subscriptions.size === 0) {
        this.registerListeners();
      }
      this.subscriptions.add(callback);
      return this;
    },

    /**
     * Unsubscribes from changes.
     * @param {function} callback - The original callback to remove.
     */
    unsubscribe(callback) {
      this.subscriptions.delete(callback);
      // If last subscription is gone, destroy all listeners
      if (this.subscriptions.size === 0) {
        this.destroy();
      }
    },

    /**
     * Notifies all set-level subscribers with the current rows.
     */
    notifySubscribers() {
      // Pass a shallow copy so subscribers can't mutate our internal array
      const rowsCopy = [...this];
      this.subscriptions.forEach((cb) => {
        try {
          cb(rowsCopy);
        } catch (err) {
          console.error("Error in ReactiveArray subscription callback:", err);
        }
      });
    },

    /**
     * Handle query-level update notifications from SubscriptionManager
     * @param {object} event - Event object { action, record, model }
     * @private
     */
    handleQueryUpdate(event) {
      const { action, record } = event;

      switch (action) {
        case "add":
        case "create":
          this.handleRecordAdd(record);
          break;

        case "update":
        case "edit":
          this.handleRecordUpdate(record);
          break;

        case "delete":
        case "remove":
          this.handleRecordDelete(record);
          break;
      }
    },

    /**
     * Handle a new record being added
     * @param {object} newRecord - The new record
     * @private
     */
    handleRecordAdd(newRecord) {
      // Check if already in array
      if (this.some((r) => String(r.id) === String(newRecord.id))) {
        return;
      }

      // Proxify and add to array
      const proxified = proxifyRow(newRecord, this.modelName);
      this.push(proxified);
      this.notifySubscribers();
    },

    /**
     * Handle a record being updated
     * @param {object} updatedRecord - The updated record
     * @private
     */
    handleRecordUpdate(updatedRecord) {
      const index = this.findIndex(
        (r) => String(r.id) === String(updatedRecord.id),
      );

      if (index > -1) {
        // Record exists in our array
        // Check if still matches our where clause
        const stillMatches =
          !this.opts.where || simpleMatcher(updatedRecord, this.opts.where);

        if (stillMatches) {
          // Replace with new proxified row (ensures different object reference for change detection)
          const newRow = proxifyRow(updatedRecord, this.modelName);
          this[index] = newRow;
          this.notifySubscribers();
        } else {
          // No longer matches - remove from array
          this.splice(index, 1);
          this.notifySubscribers();
        }
      } else {
        // Record not in array, but might match now (e.g., status changed to 'active')
        const matches =
          !this.opts.where || simpleMatcher(updatedRecord, this.opts.where);

        if (matches) {
          this.handleRecordAdd(updatedRecord);
        }
      }
    },

    /**
     * Handle a record being deleted
     * @param {object} deletedRecord - The deleted record (with at least { id })
     * @private
     */
    handleRecordDelete(deletedRecord) {
      const index = this.findIndex(
        (r) => String(r.id) === String(deletedRecord.id),
      );
      if (index > -1) {
        this.splice(index, 1);
        this.notifySubscribers();
      }
    },

    /**
     * Registers query-level listener via SubscriptionManager
     * @private
     */
    registerListeners() {
      // Subscribe to this specific query (model + where clause)
      $APP.SubscriptionManager.subscribe(
        this.modelName,
        this.opts.where,
        (event) => this.handleQueryUpdate(event),
      )
        .then((unsubscribe) => {
          this.queryUnsubscribe = unsubscribe;
        })
        .catch((error) => {
          console.error("Failed to register query subscription:", error);
        });
    },

    /**
     * Cleans up all listeners to prevent memory leaks.
     * @private
     */
    destroy() {
      if (
        this.queryUnsubscribe &&
        typeof this.queryUnsubscribe === "function"
      ) {
        this.queryUnsubscribe();
        this.queryUnsubscribe = null;
      }
      this.subscriptions.clear();
    },
  };
  Object.setPrototypeOf(reactiveArrayPrototype, Array.prototype);
  return reactiveArrayPrototype;
}

/**
 * Create instance proxy handler for model rows
 * @param {object} Model - Model instance
 * @param {object} $APP - App instance
 * @returns {ProxyHandler} Instance proxy handler
 */
function createInstanceProxyHandler(Model, $APP) {
  return {
    get(target, prop, receiver) {
      if (prop === "remove")
        return () =>
          Model.request("REMOVE", target._modelName, { id: target.id });

      if (prop === "update")
        return () => {
          const cleanRow = { ...target };
          delete cleanRow._modelName;
          return Model.request("EDIT", target._modelName, {
            row: cleanRow,
          });
        };

      if (prop === "include") {
        return async (include) => {
          if (!target.id || !target._modelName) {
            console.error(
              "Cannot run .include() on an object without an ID or model name.",
            );
            return receiver;
          }

          if (!(target._modelName in $APP.models))
            throw new Error(
              \`Model \${target._modelName} does not exist in models\`,
            );

          const model = $APP.models[target._modelName];
          const propDef = model[include];
          if (!propDef)
            throw new Error(
              \`Relationship '\${include}' not found in \${target._modelName} model\`,
            );
          const freshData = await Model.request(
            "GET_MANY",
            propDef.targetModel,
            {
              opts: {
                where: propDef.belongs
                  ? target[include]
                  : { [propDef.targetForeignKey]: target.id },
              },
            },
          );
          target[include] = Model.proxifyMultipleRows(
            freshData,
            propDef.targetModel,
          );

          return receiver;
        };
      }

      /**
       * Instance method: Subscribe to updates on this specific row instance.
       * Uses SubscriptionManager under the hood with a single-row query.
       */
      if (prop === "subscribe") {
        return (callback) => {
          if (typeof callback !== "function") {
            console.error("Subscription callback must be a function.");
            return target;
          }

          // Use SubscriptionManager with single-row query
          if ($APP.SubscriptionManager) {
            $APP.SubscriptionManager.subscribe(
              target._modelName,
              { id: target.id },
              (event) => {
                const { action, record } = event;
                if (action === "delete" || action === "remove") {
                  callback(undefined); // Signal deletion
                } else {
                  callback(record); // Pass updated record
                }
              },
            )
              .then((unsubscribe) => {
                // Store unsubscribe function on the target for later cleanup
                if (!target[SUBSCRIPTION_SYMBOL]) {
                  target[SUBSCRIPTION_SYMBOL] = new Set();
                }
                target[SUBSCRIPTION_SYMBOL].add({
                  callback,
                  unsubscribe,
                });
              })
              .catch((error) => {
                console.error("Failed to create row subscription:", error);
              });
          } else {
            // Fallback to old method if SubscriptionManager not available
            if (!target[SUBSCRIPTION_SYMBOL]) {
              target[SUBSCRIPTION_SYMBOL] = new Set();
            }
            target[SUBSCRIPTION_SYMBOL].add(callback);
          }

          return target;
        };
      }

      /**
       * Instance method: Unsubscribe from updates on this row instance.
       * @deprecated Use query-level subscriptions instead
       */
      if (prop === "unsubscribe") {
        return (callback) => {
          if (target[SUBSCRIPTION_SYMBOL]) {
            // Find and call unsubscribe function if using SubscriptionManager
            for (const item of target[SUBSCRIPTION_SYMBOL]) {
              if (
                typeof item === "object" &&
                item.callback === callback &&
                item.unsubscribe
              ) {
                item.unsubscribe();
                target[SUBSCRIPTION_SYMBOL].delete(item);
                return;
              }
            }
            // Fallback for old method
            target[SUBSCRIPTION_SYMBOL].delete(callback);
          }
        };
      }

      return target[prop];
    },

    set(target, prop, value) {
      target[prop] = value;
      return true;
    },
  };
}

/**
 * Create the Model proxy system
 * @param {object} $APP - App instance with models, events, SubscriptionManager
 * @returns {Proxy} Model proxy
 */
export function createModel($APP) {
  let Model;
  let instanceProxyHandler;
  let reactiveArrayPrototype;

  /**
   * Auto-subscribe to included relationships so changes propagate
   * @param {object} row - The row with loaded relationships
   * @param {string} modelName - Name of the model
   * @param {Array<string>} includes - Relationship names that were included
   */
  const autoSubscribeRelationships = (row, modelName, includes) => {
    if (!row || !includes?.length || !$APP.models?.[modelName]) return;

    const modelDef = $APP.models[modelName];
    const unsubscribers = [];

    for (const relationName of includes) {
      const relDef = modelDef[relationName];
      if (!relDef || !relDef.targetModel) continue;

      const targetModel = relDef.targetModel;

      if (relDef.belongs) {
        // Single foreign key: subscribe to that record
        // row[relationName] could be the ID or the loaded object
        const relData = row[relationName];
        const relId = typeof relData === "object" ? relData?.id : relData;
        if (relId) {
          subscribeToRelated(
            targetModel,
            { id: relId },
            row,
            relationName,
            unsubscribers,
          );
        }
      } else if (relDef.belongs_many) {
        // Array of foreign keys or loaded objects
        const relArray = row[relationName] || [];
        for (const item of relArray) {
          const itemId = typeof item === "object" ? item?.id : item;
          if (itemId) {
            subscribeToRelated(
              targetModel,
              { id: itemId },
              row,
              relationName,
              unsubscribers,
            );
          }
        }
      } else if (relDef.many || relDef.one) {
        // Reverse relationship: subscribe to targetModel where foreignKey = row.id
        const foreignKey =
          relDef.targetForeignKey || \`\${modelName.toLowerCase()}Id\`;
        subscribeToRelated(
          targetModel,
          { [foreignKey]: row.id },
          row,
          relationName,
          unsubscribers,
        );
      }
    }

    // Store unsubscribers on the row for cleanup
    if (unsubscribers.length > 0) {
      row[RELATIONSHIP_SUBS_SYMBOL] = unsubscribers;
    }
  };

  /**
   * Subscribe to a related model and update parent row when changes occur
   */
  const subscribeToRelated = (
    targetModel,
    where,
    parentRow,
    relationName,
    unsubscribers,
  ) => {
    if (!$APP.SubscriptionManager) return;

    $APP.SubscriptionManager.subscribe(targetModel, where, (event) => {
      const { action, record } = event;

      if (action === "update" || action === "edit") {
        // Update the relationship data in parent row
        updateRelationshipData(parentRow, relationName, record);
      } else if (action === "delete" || action === "remove") {
        // Remove from relationship if it's an array
        removeFromRelationship(parentRow, relationName, record);
      }
    })
      .then((unsubscribe) => {
        if (unsubscribe) {
          unsubscribers.push(unsubscribe);
        }
      })
      .catch((err) => {
        console.error("Failed to subscribe to relationship:", err);
      });
  };

  /**
   * Update relationship data when a related record changes
   */
  const updateRelationshipData = (parentRow, relationName, updatedRecord) => {
    const currentData = parentRow[relationName];

    if (Array.isArray(currentData)) {
      // Find and update the record in the array
      const index = currentData.findIndex(
        (item) => String(item?.id || item) === String(updatedRecord.id),
      );
      if (index > -1) {
        // Create new array with updated item for change detection
        const newArray = [...currentData];
        newArray[index] = updatedRecord;
        parentRow[relationName] = newArray;
      }
    } else if (currentData && typeof currentData === "object") {
      // Single relationship - replace with updated data
      if (String(currentData.id) === String(updatedRecord.id)) {
        parentRow[relationName] = updatedRecord;
      }
    }
  };

  /**
   * Remove a deleted record from relationship array
   */
  const removeFromRelationship = (parentRow, relationName, deletedRecord) => {
    const currentData = parentRow[relationName];

    if (Array.isArray(currentData)) {
      const newArray = currentData.filter(
        (item) => String(item?.id || item) !== String(deletedRecord.id),
      );
      if (newArray.length !== currentData.length) {
        parentRow[relationName] = newArray;
      }
    } else if (currentData && typeof currentData === "object") {
      if (String(currentData.id) === String(deletedRecord.id)) {
        parentRow[relationName] = null;
      }
    }
  };

  const handleModelRequest = async ({ modelName, action, payload }) => {
    const result = await Model.request(action, modelName, payload);
    if (action === "ADD_MANY" && result && Array.isArray(result.results)) {
      result.results.forEach((res) => {
        if (res.status === "fulfilled" && res.value) {
          res.value = proxifyRow(res.value, modelName);
        }
      });
      return result;
    }
    if (action.includes("MANY")) {
      if (payload.opts.object) return result;
      const opts = payload.opts || {};
      if (result?.items) {
        // Extract pagination info from result
        const paginationInfo = {
          total: result.total,
          limit: result.limit,
          offset: result.offset,
          count: result.count,
        };
        // Proxify items with pagination metadata attached to the array
        const reactiveItems = proxifyMultipleRows(
          result.items,
          modelName,
          opts,
          paginationInfo,
        );
        // Auto-subscribe for each row if includes provided
        if (opts.includes?.length) {
          reactiveItems.forEach((row) =>
            autoSubscribeRelationships(row, modelName, opts.includes),
          );
        }
        // Return the reactive array directly (pagination info is on the array itself)
        return reactiveItems;
      }
      const proxified = proxifyMultipleRows(result, modelName, opts);
      // Auto-subscribe for each row if includes provided
      if (opts.includes?.length) {
        proxified.forEach((row) =>
          autoSubscribeRelationships(row, modelName, opts.includes),
        );
      }
      return proxified;
    }
    if (["ADD", "EDIT"].includes(action)) {
      if (result[0]) return [result[0], null];
      return [null, proxifyRow(result[1], modelName)];
    }

    const proxifiedResult = proxifyRow(result, modelName);
    // Auto-subscribe if includes provided for single record
    if (payload.opts?.includes?.length && proxifiedResult) {
      autoSubscribeRelationships(
        proxifiedResult,
        modelName,
        payload.opts.includes,
      );
    }
    return proxifiedResult;
  };

  const getMethodRegistry = (modelName) => [
    {
      type: "static",
      name: "get",
      handler: (idOrOpts, opts = {}) =>
        handleModelRequest({
          modelName,
          action: "GET",
          payload: ["string", "number"].includes(typeof idOrOpts)
            ? { id: idOrOpts, opts }
            : { opts: idOrOpts },
        }),
    },
    {
      type: "static",
      name: "getAll",
      handler: (opts = {}) =>
        handleModelRequest({
          modelName,
          action: "GET_MANY",
          payload: { opts },
        }),
    },
    {
      type: "static",
      name: "add",
      handler: (row, opts) =>
        handleModelRequest({
          modelName,
          action: "ADD",
          payload: { row, opts },
        }),
    },
    {
      type: "static",
      name: "addMany",
      handler: (rows, opts) =>
        handleModelRequest({
          modelName,
          action: "ADD_MANY",
          payload: { rows, opts },
        }),
    },
    {
      type: "static",
      name: "remove",
      handler: (id) => Model.request("REMOVE", modelName, { id }),
    },
    {
      type: "static",
      name: "removeAll",
      handler: (where) =>
        Model.request("REMOVE_MANY", modelName, { opts: { where } }),
    },
    {
      type: "static",
      name: "edit",
      handler: (row) =>
        handleModelRequest({
          modelName,
          action: "EDIT",
          payload: { row },
        }),
    },
    {
      type: "static",
      name: "editAll",
      handler: (where, updates) =>
        Model.request("EDIT_MANY", modelName, { opts: { where, updates } }),
    },
    {
      type: "static",
      name: "upsert",
      handler: (row, opts) =>
        handleModelRequest({
          modelName,
          action: row?.id ? "EDIT" : "ADD",
          payload: { row, opts },
        }),
    },
    { type: "dynamic", prefix: "getBy", action: "GET" },
    { type: "dynamic", prefix: "getAllBy", action: "GET_MANY" },
    { type: "dynamic", prefix: "editAllBy", action: "EDIT_MANY" },
    { type: "dynamic", prefix: "editBy", action: "EDIT" },
    { type: "dynamic", prefix: "removeBy", action: "REMOVE" },
    { type: "dynamic", prefix: "removeAllBy", action: "REMOVE_MANY" },
  ];

  const proxifyRow = (row, modelName) => {
    if (!row || typeof row !== "object" || row.errors) return row;

    // If row already exists in cache, create NEW object (immutable update for change detection)
    if (Model[modelName].rows[row.id]) {
      const existingRow = Model[modelName].rows[row.id];
      // Create NEW object with merged data instead of mutating
      const updatedRow = { ...existingRow, ...row };
      updatedRow._modelName = modelName;

      // Replace in cache with new object
      Model[modelName].rows[row.id] = updatedRow;

      // Transfer and trigger subscriptions with the NEW object reference
      const subscriptions = existingRow[SUBSCRIPTION_SYMBOL];
      if (subscriptions && subscriptions.size > 0) {
        updatedRow[SUBSCRIPTION_SYMBOL] = subscriptions;
        subscriptions.forEach(({ callback }) => {
          try {
            callback(updatedRow);
          } catch (err) {
            console.error(
              "Error in row subscription callback (manual update):",
              err,
            );
          }
        });
      }
      // Return proxy wrapping the NEW object
      return new Proxy(updatedRow, instanceProxyHandler);
    }

    // New row: cache it, set up listener, and return new proxy
    Model[modelName].rows[row.id] = row;

    Model[modelName].on(\`get:\${row.id}\`, (data) => {
      const rowInstance = Model[modelName].rows[row.id];
      // Get subscriptions *before* potentially deleting the row
      const subscriptions = rowInstance
        ? rowInstance[SUBSCRIPTION_SYMBOL]
        : undefined;

      if (data === undefined) {
        // Data is gone, notify subscribers and delete from cache
        delete Model[modelName].rows[row.id];

        if (subscriptions && subscriptions.size > 0) {
          subscriptions.forEach(({ callback }) => {
            try {
              callback(undefined); // Signal deletion
            } catch (err) {
              console.error(
                "Error in row subscription callback (deletion):",
                err,
              );
            }
          });
          subscriptions.clear();
        }
        return;
      }

      // Data updated, merge changes
      const { id: _, ...newRow } = data;
      Object.assign(rowInstance, newRow);

      // Notify subscribers of the update
      if (subscriptions && subscriptions.size > 0) {
        subscriptions.forEach(({ callback }) => {
          try {
            callback(rowInstance); // Pass the updated row instance
          } catch (err) {
            console.error("Error in row subscription callback (update):", err);
          }
        });
      }
    });

    row._modelName = modelName;
    const proxified = new Proxy(
      Model[modelName].rows[row.id],
      instanceProxyHandler,
    );

    return proxified;
  };

  /**
   * Proxifies multiple rows and returns a ReactiveRowSet for query-level reactivity.
   * @param {Array<object>} rows - The array of row data.
   * @param {string} modelName - The name of the model.
   * @param {object} [opts={}] - The original query options.
   * @param {object} [paginationInfo=null] - Pagination metadata {total, limit, offset, count}.
   * @returns {ReactiveRowSet | Array}
   */
  const proxifyMultipleRows = (
    rows,
    modelName,
    opts = {},
    paginationInfo = null,
  ) => {
    if (!Array.isArray(rows)) return rows;

    // Create the individual proxified rows
    const proxifiedRows = rows.map((row) => proxifyRow(row, modelName));

    // Augment the array with reactive capabilities
    Object.setPrototypeOf(proxifiedRows, reactiveArrayPrototype);

    // Initialize reactive properties on the instance
    proxifiedRows.modelName = modelName;
    proxifiedRows.opts = opts;
    proxifiedRows.subscriptions = new Set();
    proxifiedRows.queryUnsubscribe = null;

    // Attach pagination info if provided
    if (paginationInfo) {
      proxifiedRows.total = paginationInfo.total;
      proxifiedRows.limit = paginationInfo.limit;
      proxifiedRows.offset = paginationInfo.offset;
      proxifiedRows.count = paginationInfo.count;
    }

    return proxifiedRows;
  };

  const uncapitalize = (str) => {
    if (typeof str !== "string" || !str) return str;
    return str.charAt(0).toLowerCase() + str.slice(1);
  };

  const modelApiCache = new Map();

  Model = new Proxy(
    {},
    {
      get(target, prop, receiver) {
        if (prop in target) return Reflect.get(target, prop, receiver);
        if (modelApiCache.has(prop)) return modelApiCache.get(prop);
        const modelName = prop;
        if (!(prop in $APP.models)) {
          throw new Error(\`Model \${modelName} does not exist in models\`);
        }
        const modelSchema = $APP.models[modelName];
        const methodRegistry = getMethodRegistry(modelName, modelSchema);
        const modelApi = new Proxy(
          Object.assign(Object.create(ModelType.prototype), {
            name: modelName,
          }),
          {
            get(target, methodName, modelReceiver) {
              if (methodName in target)
                return Reflect.get(target, methodName, modelReceiver);
              for (const definition of methodRegistry) {
                if (
                  definition.type === "static" &&
                  definition.name === methodName
                )
                  return definition.handler;

                if (
                  definition.type === "dynamic" &&
                  methodName.startsWith(definition.prefix)
                ) {
                  const property = methodName.slice(definition.prefix.length);
                  if (!property) continue;

                  const propertyKey = uncapitalize(property);

                  if (!(propertyKey in modelSchema))
                    throw new Error(
                      \`Property '\${propertyKey}' not found in model '\${modelName}'\`,
                    );

                  return (value, row = null) => {
                    const payload = {
                      opts: { where: { [propertyKey]: value } },
                    };
                    if (row) payload.opts.row = row;

                    return handleModelRequest({
                      modelName,
                      action: definition.action,
                      payload,
                    });
                  };
                }
              }
              throw new Error(
                \`Method '\${methodName}' not found in model '\${modelName}'\`,
              );
            },
          },
        );
        createEventHandler(modelApi, { getter: false });
        modelApi.rows = {};
        modelApiCache.set(prop, modelApi);
        return modelApi;
      },
    },
  );

  // Initialize the handlers that need Model reference
  instanceProxyHandler = createInstanceProxyHandler(Model, $APP);
  reactiveArrayPrototype = createReactiveArrayPrototype(proxifyRow, $APP);

  // Attach utility methods
  Model.proxifyRow = proxifyRow;
  Model.proxifyMultipleRows = proxifyMultipleRows;
  Model.ModelType = ModelType;

  return Model;
}

export default { createModel, ModelType };
`,mimeType:"text/javascript"},"/$app/model/adapter-base.js":{content:`/**
 * @file Database Adapter Base Class
 * @description Abstract base class that all database adapters must extend
 */

/**
 * @typedef {Object} QueryOptions
 * @property {number} [limit] - Maximum number of records to return
 * @property {number} [offset] - Number of records to skip
 * @property {string|Array<{field: string, direction: 'ASC'|'DESC'}>} [order] - Sort order
 * @property {Object} [where] - Filter conditions
 * @property {Array<string>} [includes] - Relationships to load
 * @property {boolean} [recursive] - Load nested relationships
 */

/**
 * Abstract base class for database adapters
 * All adapters should extend this class and implement its methods
 */
export class DatabaseAdapterBase {
  constructor({ name, version, models, system, onConnected }) {
    this.name = name;
    this.version = version;
    this.models = models;
    this.system = system;
    this.onConnected = onConnected;
  }

  /**
   * Initialize the database connection
   * @returns {Promise<void>}
   * @abstract
   */
  async init() {
    throw new Error("init() must be implemented by adapter");
  }

  /**
   * Get a single record by ID
   * @param {string} model - Model name
   * @param {string|number} id - Record ID
   * @param {QueryOptions} [options={}] - Query options
   * @returns {Promise<Object|null>} The record or null if not found
   * @abstract
   */
  async get(model, id, options = {}) {
    throw new Error("get() must be implemented by adapter");
  }

  /**
   * Get multiple records
   * @param {string} model - Model name
   * @param {QueryOptions} [options={}] - Query options
   * @returns {Promise<Array<Object>>} Array of records
   * @abstract
   */
  async getAll(model, options = {}) {
    throw new Error("getAll() must be implemented by adapter");
  }

  /**
   * Add a new record
   * @param {string} model - Model name
   * @param {Object} data - Record data
   * @returns {Promise<Object>} The created record with ID
   * @abstract
   */
  async add(model, data) {
    throw new Error("add() must be implemented by adapter");
  }

  /**
   * Add multiple records in a batch
   * @param {string} model - Model name
   * @param {Array<Object>} dataArray - Array of records to create
   * @returns {Promise<Array<Object>>} Array of created records
   */
  async addMany(model, dataArray) {
    const results = [];
    for (const data of dataArray) {
      results.push(await this.add(model, data));
    }
    return results;
  }

  /**
   * Update an existing record
   * @param {string} model - Model name
   * @param {string|number} id - Record ID
   * @param {Object} data - Updated data
   * @returns {Promise<Object>} The updated record
   * @abstract
   */
  async edit(model, id, data) {
    throw new Error("edit() must be implemented by adapter");
  }

  /**
   * Delete a record
   * @param {string} model - Model name
   * @param {string|number} id - Record ID
   * @returns {Promise<boolean>} True if deleted successfully
   * @abstract
   */
  async remove(model, id) {
    throw new Error("remove() must be implemented by adapter");
  }

  /**
   * Count records matching criteria
   * @param {string} model - Model name
   * @param {QueryOptions} [options={}] - Query options (where clause)
   * @returns {Promise<number>} Count of matching records
   * @abstract
   */
  async count(model, options = {}) {
    throw new Error("count() must be implemented by adapter");
  }

  /**
   * Execute operations within a transaction
   * @param {Function} callback - Async function to execute in transaction
   * @returns {Promise<*>} Result of the callback
   * @abstract
   */
  async transaction(callback) {
    throw new Error("transaction() must be implemented by adapter");
  }

  /**
   * Close the database connection
   * @returns {Promise<void>}
   * @abstract
   */
  async close() {
    throw new Error("close() must be implemented by adapter");
  }

  /**
   * Export all data from this adapter
   * @returns {Promise<Object>} Data dump object
   */
  async exportData() {
    return {};
  }

  /**
   * Import data into this adapter
   * @param {Object} dump - Data dump object
   * @param {Object} options - Import options
   * @param {boolean} options.keepIndex - Whether to preserve original IDs
   * @returns {Promise<void>}
   */
  async importData(dump, options = {}) {}

  /**
   * Get system model manager if supported
   * @returns {Object|null}
   */
  getSystemModelManager() {
    return null;
  }

  /**
   * Get adapter metadata
   * @returns {Object} Metadata about the adapter
   */
  getMetadata() {
    return {
      name: this.constructor.name,
      type: "unknown",
      version: this.version,
      models: Object.keys(this.models || {}),
      system: this.system,
    };
  }

  // ============================================
  // Hook System - Call these from concrete adapters
  // ============================================

  /**
   * Run beforeAdd hook if defined in schema
   * @param {string} model - Model name
   * @param {Object} data - Record data
   * @returns {Promise<Object>} Modified data
   */
  async runBeforeAdd(model, data) {
    const schema = this.models?.[model];
    if (schema?.$hooks?.beforeAdd) {
      return await schema.$hooks.beforeAdd(data, {
        model,
        adapter: this,
        operation: "add",
      });
    }
    return data;
  }

  /**
   * Run afterAdd hook if defined in schema
   * @param {string} model - Model name
   * @param {Object} result - Created record
   * @returns {Promise<Object>} Result (unchanged)
   */
  async runAfterAdd(model, result) {
    const schema = this.models?.[model];
    if (schema?.$hooks?.afterAdd) {
      await schema.$hooks.afterAdd(result, {
        model,
        adapter: this,
        operation: "add",
      });
    }
    return result;
  }

  /**
   * Run beforeEdit hook if defined in schema
   * @param {string} model - Model name
   * @param {Object} data - Update data (should include id)
   * @returns {Promise<Object>} Modified data
   */
  async runBeforeEdit(model, data) {
    const schema = this.models?.[model];
    if (schema?.$hooks?.beforeEdit) {
      return await schema.$hooks.beforeEdit(data, {
        model,
        adapter: this,
        operation: "edit",
      });
    }
    return data;
  }

  /**
   * Run afterEdit hook if defined in schema
   * @param {string} model - Model name
   * @param {Object} result - Updated record
   * @returns {Promise<Object>} Result (unchanged)
   */
  async runAfterEdit(model, result) {
    const schema = this.models?.[model];
    if (schema?.$hooks?.afterEdit) {
      await schema.$hooks.afterEdit(result, {
        model,
        adapter: this,
        operation: "edit",
      });
    }
    return result;
  }

  /**
   * Run beforeRemove hook if defined in schema
   * @param {string} model - Model name
   * @param {string|number} id - Record ID
   * @param {Object} record - Record being deleted
   * @returns {Promise<boolean>} False to cancel deletion
   */
  async runBeforeRemove(model, id, record) {
    const schema = this.models?.[model];
    if (schema?.$hooks?.beforeRemove) {
      const result = await schema.$hooks.beforeRemove(record, {
        model,
        adapter: this,
        operation: "remove",
        id,
      });
      // Return false to cancel deletion
      if (result === false) return false;
    }
    return true;
  }

  /**
   * Run afterRemove hook if defined in schema
   * @param {string} model - Model name
   * @param {string|number} id - Deleted record ID
   * @param {Object} record - Deleted record data
   */
  async runAfterRemove(model, id, record) {
    const schema = this.models?.[model];
    if (schema?.$hooks?.afterRemove) {
      await schema.$hooks.afterRemove(record, {
        model,
        adapter: this,
        operation: "remove",
        id,
      });
    }
  }

  /**
   * Strip immutable fields from update data
   * Call this in edit() before validation
   * @param {string} model - Model name
   * @param {Object} data - Update data
   * @returns {Object} Data with immutable fields removed
   */
  stripImmutableFields(model, data) {
    const schema = this.models?.[model];
    if (!schema) return data;

    const result = { ...data };
    for (const [field, prop] of Object.entries(schema)) {
      if (field.startsWith("$")) continue; // Skip special keys like $hooks
      if (prop?.immutable && field in result && field !== "id") {
        delete result[field];
      }
    }
    return result;
  }
}

/**
 * Validate adapter implementation
 * @param {DatabaseAdapterBase} adapter - Adapter instance to validate
 * @throws {Error} If adapter doesn't implement required methods
 */
export function validateAdapter(adapter) {
  const requiredMethods = [
    "init",
    "get",
    "getAll",
    "add",
    "edit",
    "remove",
    "count",
    "transaction",
    "close",
  ];

  const missing = requiredMethods.filter(
    (method) => typeof adapter[method] !== "function",
  );

  if (missing.length > 0) {
    throw new Error(
      \`Adapter \${adapter.constructor.name} is missing required methods: \${missing.join(", ")}\`,
    );
  }

  return true;
}

export default DatabaseAdapterBase;
`,mimeType:"text/javascript"},"/$app/model-indexeddb/system-model-manager.js":{content:`/**
 * @file System Model Manager
 * @description Manages system models (App, User, Device) for local-first applications
 */

export class SystemModelManager {
  /**
   * @param {Object} db - Database adapter instance
   * @param {Object} [options={}] - Configuration options
   * @param {Function} [options.eventEmitter] - Function to emit events
   * @param {Function} [options.getBackendUser] - Function to get backend user
   * @param {Function} [options.importData] - Function to import data
   */
  constructor(db, options = {}) {
    this.db = db;
    this.MODELS = { APP: "App", USER: "User", DEVICE: "Device" };

    // Injectable dependencies
    this.eventEmitter = options.eventEmitter || (() => {});
    this.getBackendUser = options.getBackendUser || (() => null);
    this.setBackendUser = options.setBackendUser || (() => {});
    this.importData = options.importData || (() => {});
  }

  /**
   * Generate RSA-OAEP key pair for encryption
   * @returns {Promise<{publicKey: string, privateKey: string}>}
   * @private
   */
  async generateKeyPair() {
    const keyPair = await self.crypto.subtle.generateKey(
      {
        name: "RSA-OAEP",
        modulusLength: 2048,
        publicExponent: new Uint8Array([1, 0, 1]),
        hash: "SHA-256",
      },
      true,
      ["encrypt", "decrypt"],
    );

    const publicKey = await self.crypto.subtle.exportKey(
      "spki",
      keyPair.publicKey,
    );
    const privateKey = await self.crypto.subtle.exportKey(
      "pkcs8",
      keyPair.privateKey,
    );

    return {
      publicKey: btoa(String.fromCharCode(...new Uint8Array(publicKey))),
      privateKey: btoa(String.fromCharCode(...new Uint8Array(privateKey))),
    };
  }

  /**
   * Get current active app
   * @returns {Promise<Object|null>}
   */
  async getApp() {
    const { items } = await this.db.getAll(this.MODELS.APP, {
      where: { active: true },
      limit: 1,
    });
    return items.length > 0 ? items[0] : null;
  }

  /**
   * Get current active user for an app
   * @param {Object} _app - App object
   * @returns {Promise<Object|null>}
   */
  async getUser(_app) {
    const backendUser = this.getBackendUser();
    if (backendUser) return backendUser;

    const app = _app || (await this.getApp());
    const currentBackendUser = this.getBackendUser();

    if (currentBackendUser && currentBackendUser.appId !== app.id) {
      this.setBackendUser(null);
    }

    if (!this.getBackendUser()) {
      let puser = await this.db.get(this.MODELS.USER, {
        appId: app.id,
        active: true,
      });
      if (!puser) {
        puser = await this.createUserEntry({ app });
      }
      const { privateKey, active, ...user } = puser;
      this.setBackendUser(user);
    }
    return this.getBackendUser();
  }

  /**
   * Get device for user
   * @param {Object} options
   * @param {Object} options.app - App object
   * @param {Object} options.user - User object
   * @returns {Promise<Object|null>}
   */
  async getDevice({ app: _app, user: _user } = {}) {
    const app = _app || (await this.getApp());
    const user = _user || (await this.getUser(app));
    if (!user) throw new Error("User not found");
    const device = await this.db.get(this.MODELS.DEVICE, {
      userId: user.id,
      active: true,
    });
    return device || null;
  }

  /**
   * Create new app entry
   * @param {Object} options
   * @param {number} options.timestamp - Creation timestamp
   * @param {string} options.id - App ID
   * @param {number} options.version - App version
   * @returns {Promise<Object>}
   */
  async createAppEntry({
    timestamp = Date.now(),
    id = timestamp.toString(),
    version = 1,
  } = {}) {
    const app = {
      id,
      version,
      active: true,
    };

    await this.db.add(this.MODELS.APP, app);
    await this.eventEmitter("APP:CREATED", { app });
    return app;
  }

  /**
   * Create user entry for app
   * @param {Object} options
   * @param {Object} options.app - App object
   * @param {Object} options.device - Device data
   * @param {Object} options.user - User data
   * @returns {Promise<Object>}
   */
  async createUserEntry({ app: _app, device, user } = {}) {
    const app = _app || (await this.getApp());
    if (!user) {
      const existingUsers = await this.db.getAll(this.MODELS.USER, {
        where: {
          active: true,
          appId: app.id,
        },
        limit: 1,
      });
      const existingUser = existingUsers.length > 0 ? existingUsers[0] : null;

      if (existingUser) {
        existingUser.privateKey = null;
        const existingDevices = await this.db.getAll(this.MODELS.DEVICE, {
          where: {
            userId: existingUser.id,
            active: true,
          },
          limit: 1,
        });
        const existingDevice =
          existingDevices.length > 0 ? existingDevices[0] : null;
        if (!existingDevice) await this.db.add(this.MODELS.DEVICE, device);
        return existingUser;
      }
    }

    const { publicKey, privateKey } = await this.generateKeyPair();
    const newUser = user || {
      id: user?.id,
      name: user?.name || "Local User",
      publicKey,
      privateKey,
      appId: app.id,
      active: true,
    };
    await this.db.add(this.MODELS.USER, newUser);

    const newDevice = device || {
      userId: newUser.id,
      appId: app.id,
      active: true,
    };
    await this.db.add(this.MODELS.DEVICE, newDevice);
    newUser.privateKey = null;
    return newUser;
  }

  /**
   * List all apps
   * @returns {Promise<Array>}
   */
  async listApps() {
    return await this.db.getAll(this.MODELS.APP);
  }

  /**
   * Select app by ID
   * @param {string} appId - App ID to select
   * @returns {Promise<Object>}
   */
  async selectApp(appId) {
    const currentApp = await this.getApp();
    if (currentApp && currentApp.id !== appId) {
      await this.db.edit(this.MODELS.APP, currentApp.id, {
        active: false,
      });
    }

    await this.db.edit(this.MODELS.APP, appId, {
      active: true,
    });

    return await this.db.get(this.MODELS.APP, appId);
  }

  /**
   * Migrate data to database
   * @param {Object} data - Data to migrate
   * @param {Object} opts - Migration options
   * @param {boolean} opts.skipDynamicCheck - Skip dynamic model check
   */
  async migrateData(data, app) {
    const appsData = Object.entries(data || {});
    if (appsData.length) {
      const dump = {};
      for (const [modelName, entries] of appsData) {
        dump[modelName] = entries;
      }
      console.error({ dump, app });
      this.importData({ dump, app });

      await this.db.edit(this.MODELS.APP, app.id, {
        migrationTimestamp: Date.now(),
      });
    }
  }
}

export default SystemModelManager;
`,mimeType:"text/javascript"},"/$app/admin/views/layout.js":{content:`import Router from "/$app/router/index.js";
import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";
import { getSidebarItems } from "../plugins.js";
import { capitalize, getModelNames } from "../utils/model-utils.js";

export default {
  tag: "admin-layout",
  style: true,
  properties: {
    currentRoute: T.object({ sync: Router }),
    sidebarCollapsed: T.boolean({ defaultValue: false, sync: "local" }),
  },

  handleSidebarToggle(e) {
    this.sidebarCollapsed = e.detail.collapsed;
  },

  isActive(path) {
    const currentPath = this.currentRoute?.path || window.location.pathname;
    if (path === "/admin") {
      return currentPath === "/admin";
    }
    return currentPath === path || currentPath.startsWith(\`\${path}/\`);
  },

  isModelActive(modelName) {
    const currentPath = this.currentRoute?.path || window.location.pathname;
    return currentPath.includes(\`/admin/models/\${modelName}\`);
  },

  getBreadcrumbs() {
    const path = this.currentRoute?.path || window.location.pathname;
    const parts = path.split("/").filter(Boolean);
    const breadcrumbs = [{ text: "Admin", href: "/admin" }];

    if (parts.length > 1) {
      if (parts[1] === "models" && parts[2]) {
        breadcrumbs.push({ text: "Models", href: null });
        breadcrumbs.push({
          text: capitalize(parts[2]),
          href: \`/admin/models/\${parts[2]}\`,
        });
        if (parts[3]) {
          breadcrumbs.push({ text: parts[3] === "new" ? "New" : "Edit", href: null });
        }
      } else {
        breadcrumbs.push({ text: capitalize(parts[1]), href: null });
      }
    } else {
      breadcrumbs.push({ text: "Dashboard", href: null });
    }

    return breadcrumbs;
  },

  render() {
    const models = getModelNames();
    const sidebarItems = getSidebarItems();
    const breadcrumbs = this.getBreadcrumbs();
    const isDashboard = this.isActive("/admin") && !this.currentRoute?.path?.includes("/models");

    return html\`
      <div class="admin-wrapper">
        <uix-sidebar
          ?collapsed=\${this.sidebarCollapsed}
          @toggle=\${this.handleSidebarToggle}
        >
          <div slot="header" class="sidebar-brand">
            <uix-icon name="shield" size="28"></uix-icon>
            <span class="sidebar-title">Admin</span>
          </div>

          <uix-menu variant="sidebar">
            <li>
              <uix-link
                href="/admin"
                icon="layout-dashboard"
                class=\${isDashboard ? "active" : ""}
              >Dashboard</uix-link>
            </li>

            <li>
              <details open>
                <summary>
                  <uix-icon name="database"></uix-icon>
                  <span>Models</span>
                  <uix-icon name="chevron-right"></uix-icon>
                </summary>
                <ul>
                  \${models.map(
                    (model) => html\`
                      <li>
                        <uix-link
                          href="/admin/models/\${model}"
                          class=\${this.isModelActive(model) ? "active" : ""}
                        >\${capitalize(model)}</uix-link>
                      </li>
                    \`,
                  )}
                </ul>
              </details>
            </li>

            \${sidebarItems.length > 0
              ? html\`
                  <li class="divider"></li>
                  \${sidebarItems.map(
                    (item) => html\`
                      <li>
                        <uix-link
                          href=\${item.href}
                          icon=\${item.icon}
                          class=\${this.isActive(item.href) ? "active" : ""}
                        >\${item.label}</uix-link>
                      </li>
                    \`,
                  )}
                \`
              : ""}
          </uix-menu>

          <div slot="footer">
            <uix-darkmode></uix-darkmode>
          </div>
        </uix-sidebar>

        <div class="admin-main">
          <uix-navbar variant="bordered">
            <div slot="start">
              <uix-breadcrumbs separator=">" .items=\${breadcrumbs}></uix-breadcrumbs>
            </div>

            <div slot="end" class="topbar-right">
              <uix-link icon="search" title="Search"></uix-link>
              <uix-link icon="bell" title="Notifications"></uix-link>
              <uix-link icon="settings" title="Settings"></uix-link>
              <uix-avatar size="sm"></uix-avatar>
            </div>
          </uix-navbar>

          <main class="admin-content">
            \${this.currentRoute.component}
          </main>
        </div>
      </div>
    \`;
  },
};
`,mimeType:"text/javascript"},"/$app/admin/utils/model-utils.js":{content:`import $APP from "/$app.js";

/**
 * Get schema fields for a model
 * @param {string} modelName - Name of the model
 * @returns {Array} Array of field definitions
 */
export const getModelSchema = (modelName) => {
  const schema = $APP.models[modelName];
  if (!schema) return [];

  return Object.entries(schema)
    .filter(([key]) => !key.startsWith("$") && !key.startsWith("_"))
    .map(([key, def]) => ({
      name: key,
      type: def.type?.name || "string",
      required: def.required || false,
      defaultValue: def.defaultValue,
      enum: def.enum,
      relationship: def.relationship,
      targetModel: def.targetModel,
      immutable: def.immutable,
      index: def.index,
      label: def.label || key,
      placeholder: def.placeholder,
      rows: def.rows,
      attribute: def.attribute,
    }));
};

/**
 * Convert plural model name to singular
 * @param {string} pluralName - Plural form (e.g., "users", "categories")
 * @returns {string} Singular form (e.g., "user", "category")
 */
export const getSingularName = (pluralName) => {
  if (!pluralName) return pluralName;
  if (pluralName.endsWith("ies")) return \`\${pluralName.slice(0, -3)}y\`;
  if (pluralName.endsWith("ses")) return pluralName.slice(0, -2);
  if (pluralName.endsWith("es")) return pluralName.slice(0, -2);
  if (pluralName.endsWith("s")) return pluralName.slice(0, -1);
  return pluralName;
};

/**
 * Capitalize first letter
 * @param {string} str - Input string
 * @returns {string} Capitalized string
 */
export const capitalize = (str) => {
  if (!str) return str;
  return str.charAt(0).toUpperCase() + str.slice(1);
};

/**
 * Get all model names from $APP.models
 * @returns {Array<string>} Array of model names
 */
export const getModelNames = () => {
  if (!$APP.models) return [];
  return Object.keys($APP.models).filter(
    (name) => !name.startsWith("$") && !name.startsWith("_"),
  );
};

/**
 * Get display columns for a model (prioritized for table view)
 * @param {string} modelName - Name of the model
 * @param {number} maxColumns - Maximum columns to return
 * @returns {Array<string>} Array of column names
 */
export const getDisplayColumns = (modelName, maxColumns = 6) => {
  const schema = getModelSchema(modelName);
  if (!schema.length) return ["id"];

  // Priority fields to show first
  const priority = [
    "id",
    "name",
    "title",
    "slug",
    "email",
    "username",
    "status",
    "category",
    "createdAt",
  ];

  const sorted = [...schema].sort((a, b) => {
    const aIndex = priority.indexOf(a.name);
    const bIndex = priority.indexOf(b.name);
    if (aIndex === -1 && bIndex === -1) return 0;
    if (aIndex === -1) return 1;
    if (bIndex === -1) return -1;
    return aIndex - bIndex;
  });

  return sorted.slice(0, maxColumns).map((f) => f.name);
};

/**
 * Get field definition by name
 * @param {string} modelName - Name of the model
 * @param {string} fieldName - Name of the field
 * @returns {object|null} Field definition or null
 */
export const getFieldDef = (modelName, fieldName) => {
  const schema = $APP.models[modelName];
  if (!schema) return null;
  return schema[fieldName] || null;
};

/**
 * Check if a model has a specific field
 * @param {string} modelName - Name of the model
 * @param {string} fieldName - Name of the field
 * @returns {boolean}
 */
export const hasField = (modelName, fieldName) => {
  return getFieldDef(modelName, fieldName) !== null;
};

/**
 * Get relationship fields for a model
 * @param {string} modelName - Name of the model
 * @returns {Array} Array of relationship field definitions
 */
export const getRelationshipFields = (modelName) => {
  const schema = getModelSchema(modelName);
  return schema.filter(
    (field) =>
      field.relationship &&
      ["belongs", "many", "one", "belongs_many"].includes(field.relationship),
  );
};

/**
 * Get the primary display field for a model (for showing in selects, etc.)
 * @param {string} modelName - Name of the model
 * @returns {string} Field name to use for display
 */
export const getPrimaryDisplayField = (modelName) => {
  const schema = getModelSchema(modelName);
  const displayFields = ["name", "title", "username", "email", "label"];

  for (const field of displayFields) {
    if (schema.some((f) => f.name === field)) {
      return field;
    }
  }

  // Fallback to first string field that's not id
  const stringField = schema.find(
    (f) => f.name !== "id" && f.type === "string",
  );
  return stringField?.name || "id";
};
`,mimeType:"text/javascript"},"/$app/admin/views/layout.css":{content:`admin-layout{display:block;width:100%;height:100vh;overflow:hidden}.admin-wrapper{display:flex;width:100%;height:100%}.admin-main{flex:1;display:flex;flex-direction:column;min-width:0;background:var(--color-background, #f9fafb)}.admin-content{flex:1;overflow-y:auto;padding:1.5rem}.topbar-right{display:flex;align-items:center;gap:.5rem}.sidebar-brand{display:flex;align-items:center;gap:.75rem}.sidebar-title{font-size:1.25rem;font-weight:700;text-transform:uppercase;letter-spacing:.05em}uix-sidebar[collapsed] .sidebar-title{display:none}@media (max-width: 768px){.admin-content{padding:1rem}}
`,mimeType:"text/css"},"/$app/uix/navigation/sidebar.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

export default {
  tag: "uix-sidebar",
  style: true,
  shadow: true,
  properties: {
    position: T.string({
      defaultValue: "left",
      enum: ["left", "right"],
    }),
    collapsed: T.boolean(false),
    collapsible: T.boolean(true),
  },

  toggle() {
    if (this.collapsible) {
      this.collapsed = !this.collapsed;
      this.emit("toggle", { collapsed: this.collapsed });
    }
  },

  render() {
    return html\`
      <div part="header" class="sidebar-header">
        <slot name="header"></slot>
        \${
          this.collapsible
            ? html\`
              <button
                part="toggle"
                class="sidebar-toggle"
                @click=\${this.toggle}
                aria-label=\${this.collapsed ? "Expand sidebar" : "Collapse sidebar"}
              >
                <uix-icon
                  name=\${
                    this.collapsed
                      ? this.position === "left"
                        ? "chevron-right"
                        : "chevron-left"
                      : this.position === "left"
                        ? "chevron-left"
                        : "chevron-right"
                  }
                ></uix-icon>
              </button>
            \`
            : ""
        }
      </div>

      <div part="content" class="sidebar-content">
        <slot></slot>
      </div>

      <div part="footer" class="sidebar-footer">
        <slot name="footer"></slot>
      </div>
    \`;
  },
};

/**
 * Sidebar Component
 *
 * @component
 * @category navigation
 * @tag uix-sidebar
 *
 * A simple collapsible sidebar container. Use with uix-menu for navigation.
 *
 * @slot header - Content for the sidebar header (logo, brand)
 * @slot default - Main sidebar content (navigation, uix-menu)
 * @slot footer - Content for the sidebar footer (user info, settings)
 *
 * @example
 * // Basic sidebar with menu
 * \`\`\`html
 * <uix-sidebar>
 *   <div slot="header">
 *     <uix-icon name="shield"></uix-icon>
 *     <span>Admin</span>
 *   </div>
 *
 *   <uix-menu variant="sidebar">
 *     <li><uix-link href="/dashboard" icon="layout-dashboard">Dashboard</uix-link></li>
 *     <li><uix-link href="/users" icon="users">Users</uix-link></li>
 *     <li><uix-link href="/settings" icon="settings">Settings</uix-link></li>
 *   </uix-menu>
 *
 *   <div slot="footer">
 *     <uix-darkmode></uix-darkmode>
 *   </div>
 * </uix-sidebar>
 * \`\`\`
 *
 * @example
 * // Collapsible sidebar
 * \`\`\`html
 * <uix-sidebar collapsible ?collapsed=\${this.collapsed} @toggle=\${this.handleToggle}>
 *   <div slot="header">My App</div>
 *   <uix-menu variant="sidebar">
 *     <li><uix-link href="/" icon="house">Home</uix-link></li>
 *   </uix-menu>
 * </uix-sidebar>
 * \`\`\`
 *
 * @example
 * // With accordion menu
 * \`\`\`html
 * <uix-sidebar>
 *   <uix-menu variant="sidebar">
 *     <li><uix-link href="/home" icon="house">Home</uix-link></li>
 *     <li>
 *       <details open>
 *         <summary><uix-icon name="database"></uix-icon> Models</summary>
 *         <ul>
 *           <li><uix-link href="/models/users">Users</uix-link></li>
 *           <li><uix-link href="/models/posts">Posts</uix-link></li>
 *         </ul>
 *       </details>
 *     </li>
 *   </uix-menu>
 * </uix-sidebar>
 * \`\`\`
 */
`,mimeType:"text/javascript"},"/$app/uix/display/icon.js":{content:`import T from "/$app/types/index.js";
import { settings } from "/$app/view/index.js";
import { unsafeHTML } from "/npm/lit-html/directives/unsafe-html.js";

const Icons = new Map();
export default {
  tag: "uix-icon",
  style: true,
  static: { Icons },
  properties: {
    name: T.string(),
    svg: T.string(),
    solid: T.boolean(),
    size: T.string(),
    color: T.string({
      enum: [
        "primary",
        "secondary",
        "success",
        "danger",
        "warning",
        "info",
        "inverse",
      ],
    }),
  },
  async getIcon(name) {
    if (Icons.has(name)) this.svg = Icons.get(name);
    else {
      try {
        const response = await fetch(\`\${settings.iconFontFamily}/\${name}.svg\`);
        if (response.ok) {
          const svgElement = await response.text();
          Icons.set(name, svgElement);
          this.svg = svgElement;
        } else {
          console.error(\`Failed to fetch icon: \${name}\`);
        }
      } catch (error) {
        console.error(\`Error fetching icon: \${name}\`, error);
      }
    }
  },
  willUpdate({ changedProps }) {
    if (changedProps.has("name")) this.getIcon(this.name);
  },
  connected() {
    this.getIcon(this.name);
  },
  render() {
    return !this.svg ? null : unsafeHTML(this.svg);
  },
};

/**
 * Copyright (c) Alan Carlos Meira Leal
 *
 * Icon Component
 *
 * @component
 * @category media
 * @tag uix-icon
 *
 * Displays an SVG icon fetched dynamically from the configured icon font family.
 * Supports various sizes, semantic colors, and solid/outline styles.
 *
 * @property {string} name - The name of the icon to display (e.g., "home", "user", "settings")
 * @property {string} size - The size of the icon (xs, sm, md, lg, xl, 2xl, 3xl)
 * @property {string} color - Semantic color (primary, secondary, success, danger, warning, info, inverse)
 * @property {boolean} solid - Whether to use the solid/filled version of the icon style
 *
 * @example Basic Usage
 * \`\`\`html
 * <uix-icon name="house"></uix-icon>
 * \`\`\`
 *
 * @example All Sizes
 * \`\`\`html
 * * <uix-icon name="star" size="xs"></uix-icon>
 *
 * * <uix-icon name="star" size="sm"></uix-icon>
 *
 * * <uix-icon name="star" size="md"></uix-icon>
 *
 * * <uix-icon name="star" size="lg"></uix-icon>
 *
 * * <uix-icon name="star" size="xl"></uix-icon>
 *
 * * <uix-icon name="star" size="2xl"></uix-icon>
 *
 * * <uix-icon name="star" size="3xl"></uix-icon>
 *
 * * <uix-icon name="star" size="4xl"></uix-icon>
 * \`\`\`
 *
 * @example With Semantic Colors
 * \`\`\`html
 * <uix-icon name="circle-check" color="success" size="lg"></uix-icon>
 * <uix-icon name="exclamation-circle" color="danger" size="lg"></uix-icon>
 * <uix-icon name="info-circle" color="info" size="lg"></uix-icon>
 * \`\`\`
 *
 * @example Solid Style
 * \`\`\`html
 * * <uix-icon name="heart" size="xl" color="danger"></uix-icon>
 *
 * * <uix-icon name="heart" size="xl" color="danger" solid></uix-icon>
 * \`\`\`
 */
`,mimeType:"text/javascript"},"/$app/uix/navigation/menu.js":{content:`import T from "/$app/types/index.js";

export default {
  tag: "uix-menu",
  properties: {
    size: T.string({
      defaultValue: "md",
      enum: ["sm", "md", "lg"],
    }),
    variant: T.string({
      defaultValue: "default",
      enum: ["default", "bordered", "compact", "flush", "sidebar"],
    }),
    rounded: T.boolean(true),
    bordered: T.boolean(true),
  },
  style: true,
};

/**
 * Menu Component
 *
 * @component
 * @category navigation
 * @tag uix-menu
 *
 * A vertical menu list for navigation or actions. Can be used with uix-dropdown for dropdown menus.
 *
 * @example
 * // Basic menu
 * \`\`\`html
 * <uix-menu>
 *   <li role="menuitem"><a href="#home">Home</a></li>
 *   <li role="menuitem"><a href="#about">About</a></li>
 *   <li role="menuitem"><a href="#services">Services</a></li>
 *   <li role="menuitem"><a href="#contact">Contact</a></li>
 * </uix-menu>
 * \`\`\`
 *
 * @example
 * // With icons
 * \`\`\`html
 * <uix-menu>
 *   <li role="menuitem">
 *     <a href="#profile">
 *       <uix-icon name="user"></uix-icon>
 *       Profile
 *     </a>
 *   </li>
 *   <li role="menuitem">
 *     <a href="#settings">
 *       <uix-icon name="settings"></uix-icon>
 *       Settings
 *     </a>
 *   </li>
 *   <li role="menuitem">
 *     <a href="#help">
 *       <uix-icon name="circle-help"></uix-icon>
 *       Help
 *     </a>
 *   </li>
 *   <li role="separator" class="divider"></li>
 *   <li role="menuitem">
 *     <a href="#logout">
 *       <uix-icon name="log-out"></uix-icon>
 *       Logout
 *     </a>
 *   </li>
 * </uix-menu>
 * \`\`\`
 *
 * @example
 * // Bordered variant
 * \`\`\`html
 * <uix-menu variant="bordered">
 *   <li role="menuitem"><a href="#dashboard">Dashboard</a></li>
 *   <li role="menuitem"><a href="#reports">Reports</a></li>
 *   <li role="menuitem"><a href="#analytics">Analytics</a></li>
 * </uix-menu>
 * \`\`\`
 *
 * @example
 * // Compact variant
 * \`\`\`html
 * <uix-menu variant="compact" size="sm">
 *   <li role="menuitem"><a href="#item1">Item 1</a></li>
 *   <li role="menuitem"><a href="#item2">Item 2</a></li>
 *   <li role="menuitem"><a href="#item3">Item 3</a></li>
 * </uix-menu>
 * \`\`\`
 *
 * @example
 * // Size variants
 * \`\`\`html
 * <div style="display: flex; gap: 2rem;">
 *   <uix-menu size="sm">
 *     <li role="menuitem"><a href="#">Small</a></li>
 *     <li role="menuitem"><a href="#">Menu</a></li>
 *   </uix-menu>
 *
 *   <uix-menu size="md">
 *     <li role="menuitem"><a href="#">Medium</a></li>
 *     <li role="menuitem"><a href="#">Menu</a></li>
 *   </uix-menu>
 *
 *   <uix-menu size="lg">
 *     <li role="menuitem"><a href="#">Large</a></li>
 *     <li role="menuitem"><a href="#">Menu</a></li>
 *   </uix-menu>
 * </div>
 * \`\`\`
 *
 * @example
 * // In a dropdown
 * \`\`\`html
 * <uix-button popovertarget="actions-menu">Actions</uix-button>
 * <uix-dropdown id="actions-menu">
 *   <a href="#edit">Edit</a>
 *   <a href="#duplicate">Duplicate</a>
 *   <a href="#archive">Archive</a>
 *   <hr>
 *   <a href="#delete" class="text-error">Delete</a>
 * </uix-dropdown>
 * \`\`\`
 *
 * @example
 * // With nested submenus
 * \`\`\`html
 * <uix-menu>
 *   <li role="menuitem"><a href="#home">Home</a></li>
 *   <li role="menuitem">
 *     <details>
 *       <summary>Products</summary>
 *       <ul>
 *         <li><a href="#laptops">Laptops</a></li>
 *         <li><a href="#phones">Phones</a></li>
 *         <li><a href="#tablets">Tablets</a></li>
 *       </ul>
 *     </details>
 *   </li>
 *   <li role="menuitem"><a href="#about">About</a></li>
 * </uix-menu>
 * \`\`\`
 *
 * @example
 * // With active state
 * \`\`\`html
 * <uix-menu>
 *   <li role="menuitem"><a href="#dashboard">Dashboard</a></li>
 *   <li role="menuitem"><a href="#projects" class="active">Projects</a></li>
 *   <li role="menuitem"><a href="#team">Team</a></li>
 *   <li role="menuitem"><a href="#settings">Settings</a></li>
 * </uix-menu>
 * \`\`\`
 */
`,mimeType:"text/javascript"},"/$app/uix/display/link.js":{content:`/**
 * App Link Component
 * Core link component for navigation and routing
 * Popup behaviors (tooltip, dropdown, etc.) moved to separate uix components
 */

import Router from "/$app/router/index.js";
import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

export default {
  tag: "uix-link",
  style: true,
  shadow: true,
  properties: {
    content: T.object(),
    external: T.boolean(),
    skipRoute: T.boolean(),
    hideLabel: T.boolean(),
    disabled: T.boolean(),
    name: T.string(),
    alt: T.string(),
    label: T.string(),
    type: T.string(),
    href: T.string(),
    related: T.string(),
    icon: T.string(),
    click: T.function(),
    confirmation: T.string(),
    popovertarget: T.string(),
    popovertargetaction: T.string(),
  },
  _handlePopoverTarget(e) {
    if (!this.popovertarget) return false;

    const target = document.getElementById(this.popovertarget);
    if (!target || typeof target.toggle !== "function") return false;

    e.preventDefault();
    e.stopPropagation();

    // Get the actual button/anchor element from shadow DOM
    const triggerElement = this.shadowRoot.querySelector("button, a");

    const action = this.popovertargetaction || "toggle";
    if (action === "toggle") {
      target.toggle(triggerElement);
    } else if (action === "show") {
      target._open(triggerElement);
    } else if (action === "hide") {
      target._close();
    }

    return true;
  },

  _defaultOnClick(e) {
    // Prevent any action if disabled
    if (this.disabled) {
      e.preventDefault();
      e.stopImmediatePropagation();
      return;
    }

    // Handle popover target first
    if (this._handlePopoverTarget(e)) {
      return;
    }

    if (e.ctrlKey || e.metaKey || e.shiftKey || e.button === 1) {
      return;
    }
    const link = e.currentTarget;
    const localLink =
      this.href && link.origin === window.location.origin && !this.external;
    // Prevent default for local links
    if (!this.href || localLink) {
      e.preventDefault();
    }
    // Handle local routing
    if (localLink && !this.skipRoute) {
      const path = [link.pathname, link.search].filter(Boolean).join("");
      Router.go(path);
      return;
    }
    // Handle custom click handler
    if (this.click && this.type !== "submit") {
      if (this.confirmation) {
        if (window.confirm(this.confirmation)) {
          this.click(e);
        }
      } else {
        this.click(e);
      }
      e.stopImmediatePropagation();
    }
  },
  render() {
    const content = html\`
      \${this.icon ? html\`<uix-icon name=\${this.icon} part="icon"></uix-icon>\` : null}
      <slot></slot>
      \${this.hideLabel ? null : this.label}
    \`;
    const useButton = !this.href && this.popovertarget;

    if (useButton) {
      return html\`
        <button
          part="anchor"
          @click=\${this._defaultOnClick}
          name=\${this.name || this.label || this.alt}
          aria-disabled=\${this.disabled ? "true" : "false"}
          ?disabled=\${this.disabled}
          type="button"
        >
          \${content}
        </button>
      \`;
    }

    return html\`
      <a
        part="anchor"
        href=\${this.disabled ? undefined : this.href || "#"}
        @click=\${this._defaultOnClick}
        related=\${this.related}
        name=\${this.name || this.label || this.alt}
        alt=\${this.alt || this.label || this.name}
        aria-disabled=\${this.disabled ? "true" : "false"}
        ?disabled=\${this.disabled}
      >
        \${content}
      </a>
    \`;
  },
};
`,mimeType:"text/javascript"},"/$app/uix/display/avatar.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

export default {
  tag: "uix-avatar",
  properties: {
    src: T.string(),
    name: T.string(),
    alt: T.string(),
    size: T.string({
      defaultValue: "md",
      enum: ["xs", "sm", "md", "lg", "xl"],
    }),
    shape: T.string({
      defaultValue: "circle",
      enum: ["circle", "square", "rounded"],
    }),
    status: T.string({
      enum: ["online", "offline", "busy", "away"],
    }),
  },
  style: true,
  render() {
    const initials = this.getInitials(this.name);
    const hasImage = !!this.src;
    const hasStatus = !!this.status;

    return html\`
        \${
          hasImage
            ? html\`
              <img
                src="\${this.src}"
                alt="\${this.alt || this.name || "Avatar"}"
                part="image"
                @error=\${this.handleImageError.bind(this)}
              />
            \`
            : html\`
              <div class="uix-avatar__initials" part="initials">
                \${initials}
              </div>
            \`
        }
        \${
          hasStatus
            ? html\`
              <div
                class="uix-avatar__status uix-avatar__status--\${this.status}"
                part="status"
                role="status"
                aria-label="\${this.status}"
              ></div>
            \`
            : ""
        }
    \`;
  },

  getInitials(name) {
    if (!name) return "?";

    const parts = name.trim().split(/\\s+/);
    if (parts.length === 1) {
      return parts[0].substring(0, 2).toUpperCase();
    }

    return (parts[0][0] + parts[parts.length - 1][0]).toUpperCase();
  },

  handleImageError(e) {
    // On image load error, hide the image and show initials
    e.target.style.display = "none";
    const container = e.target.parentElement;
    const initials = this.getInitials(this.name);
    const initialsDiv = document.createElement("div");
    initialsDiv.className = "uix-avatar__initials";
    initialsDiv.setAttribute("part", "initials");
    initialsDiv.textContent = initials;
    container.appendChild(initialsDiv);
  },
};
/**
 * Avatar Component
 *
 * @component
 * @category display
 * @tag uix-avatar
 *
 * A flexible avatar component that displays user profile images, initials,
 * or fallback icons. Supports status indicators and multiple shapes/sizes.
 *
 * @example Image Avatar
 * \`\`\`html
 * <uix-avatar
 *   src="/path/to/image.jpg"
 *   name="John Doe"
 *   alt="Profile picture"
 * ></uix-avatar>
 * \`\`\`
 *
 * @example Initials Avatar
 * Automatically generates initials from name when no image provided
 * \`\`\`html
 * <uix-avatar name="Jane Smith"></uix-avatar>
 * <uix-avatar name="Bob"></uix-avatar>
 * \`\`\`
 *
 * @example Avatar Sizes
 * \`\`\`html
 * <div class="flex gap-4 items-center">
 *   <uix-avatar name="XS" size="xs"></uix-avatar>
 *   <uix-avatar name="SM" size="sm"></uix-avatar>
 *   <uix-avatar name="MD" size="md"></uix-avatar>
 *   <uix-avatar name="LG" size="lg"></uix-avatar>
 *   <uix-avatar name="XL" size="xl"></uix-avatar>
 * </div>
 * \`\`\`
 *
 * @example Avatar Shapes
 * \`\`\`html
 * <uix-avatar name="C" shape="circle"></uix-avatar>
 * <uix-avatar name="S" shape="square"></uix-avatar>
 * <uix-avatar name="R" shape="rounded"></uix-avatar>
 * \`\`\`
 *
 * @example Status Indicator
 * \`\`\`html
 * <uix-avatar name="John" status="online"></uix-avatar>
 * <uix-avatar name="Jane" status="offline"></uix-avatar>
 * <uix-avatar name="Bob" status="busy"></uix-avatar>
 * <uix-avatar name="Alice" status="away"></uix-avatar>
 * \`\`\`
 *
 * @example Combined Features
 * \`\`\`html
 * <uix-avatar
 *   src="/profile.jpg"
 *   name="John Doe"
 *   size="lg"
 *   shape="rounded"
 *   status="online"
 * ></uix-avatar>
 * \`\`\`
 */
`,mimeType:"text/javascript"},"/$app/uix/utility/darkmode.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";
export default {
  tag: "uix-darkmode",
  icons: ["moon", "sun"],
  properties: {
    width: T.string({ defaultValue: "fit" }),
    compact: T.boolean(),
    darkmode: T.boolean({
      sync: "local",
      defaultValue: true,
    }),
    icon: T.string(),
  },

  click(e) {
    e.stopPropagation();
    this.darkmode = !this.darkmode;
    this.icon = this.darkmode ? "sun" : "moon";
  },
  willUpdate({ changedProps }) {
    if (changedProps.has("darkmode"))
      document.documentElement.classList.toggle("dark");
  },
  connected() {
    this.icon = this.darkmode ? "sun" : "moon";
    if (this.darkmode) document.documentElement.classList.add("dark");
    this.on("button#click", this.click.bind(this));
  },
  render() {
    return this.compact
      ? html\`<button>
        <uix-icon ghost name=\${this.icon} class="w-7 h-7 cursor-pointer shrink-0"></uix-icon>
        </button>
        \`
      : html\`<button class="cursor-pointer w-full flex items-center p-2 rounded-md hover:bg-surface-lighter text-left text-sm gap-2">
              <uix-icon name=\${this.icon} class="w-5 h-5 mr-3 shrink-0"></uix-icon>
              <span>\${this.darkmode ? "Light Mode" : "Dark Mode"}</span>
              <div class="ml-auto w-10 h-5 \${
                this.darkmode ? "bg-red-700" : "bg-gray-600"
              } rounded-full flex items-center p-1 transition-colors">
                  <div class="w-4 h-4 bg-white rounded-full transform transition-transform \${
                    this.darkmode ? "translate-x-4" : ""
                  }"></div>
              </div>
          </button>\`;
  },
};
`,mimeType:"text/javascript"},"/$app/uix/navigation/navbar.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

export default {
  tag: "uix-navbar",
  properties: {
    fixed: T.string({
      defaultValue: "none",
      enum: ["none", "top", "bottom"],
    }),
    variant: T.string({
      defaultValue: "default",
      enum: ["default", "bordered", "floating"],
    }),
    transparent: T.boolean(false),
    mobileMenuOpen: T.boolean(false),
    direction: T.string({
      enum: ["vertical", "horizontal"],
      defaultValue: "horizontal",
    }),
  },
  style: true,
  shadow: true,

  toggleMobileMenu() {
    this.mobileMenuOpen = !this.mobileMenuOpen;
    this.emit("menu-toggle", { open: this.mobileMenuOpen });
  },

  render() {
    return html\`
      <nav part="container" class="navbar \${this.mobileMenuOpen ? "menu-open" : ""}" role="navigation" direction=\${this.direction}>
        <div part="inner" class="navbar-container" direction=\${this.direction}>
          <div part="brand" class="navbar-brand">
            <slot name="brand"></slot>
          </div>

          <button
            part="toggle"
            class="navbar-toggle"
            @click=\${this.toggleMobileMenu}
            aria-label="Toggle navigation"
            aria-expanded=\${this.mobileMenuOpen}
          >
            <uix-icon name=\${this.mobileMenuOpen ? "x" : "menu"}></uix-icon>
          </button>
          <div part="menu" class="navbar-menu \${this.mobileMenuOpen ? "active" : ""}" direction=\${this.direction} justify="space-between">
            <div part="start" class="navbar-start">
              <slot name="start"></slot>
            </div>
            <div part="center" class="navbar-center">
              <slot name="center"></slot>
            </div>
            <div part="end" class="navbar-end">
              <slot name="end"></slot>
            </div>
          </div>
        </div>
      </nav>
    \`;
  },
};

/**
 * Navbar Component
 *
 * @component
 * @category navigation
 * @tag uix-navbar
 *
 * A responsive navigation bar with support for branding, links, and actions.
 *
 * @slot brand - Logo or brand content (left side on desktop)
 * @slot start - Navigation items (left side after brand on desktop)
 * @slot center - Centered navigation items
 * @slot end - Navigation items (right side on desktop)
 *
 * @example
 * // Basic navbar
 * \`\`\`html
 * <uix-navbar>
 *   <div slot="brand">
 *     <strong>MyApp</strong>
 *   </div>
 *   <div slot="start">
 *     <a href="#home">Home</a>
 *     <a href="#about">About</a>
 *     <a href="#services">Services</a>
 *   </div>
 *   <div slot="end">
 *     <uix-button variant="primary" size="sm">Sign Up</uix-button>
 *   </div>
 * </uix-navbar>
 * \`\`\`
 *
 * @example
 * // With logo
 * \`\`\`html
 * <uix-navbar>
 *   <div slot="brand">
 *     <img src="/logo.svg" alt="Logo" style="height: 2rem;">
 *   </div>
 *   <div slot="start">
 *     <a href="#products">Products</a>
 *     <a href="#pricing">Pricing</a>
 *     <a href="#docs">Docs</a>
 *   </div>
 *   <div slot="end">
 *     <a href="#login">Login</a>
 *     <uix-button variant="primary">Get Started</uix-button>
 *   </div>
 * </uix-navbar>
 * \`\`\`
 *
 * @example
 * // Fixed to top
 * \`\`\`html
 * <uix-navbar fixed="top">
 *   <div slot="brand">
 *     <strong>Fixed Top</strong>
 *   </div>
 *   <div slot="center">
 *     <a href="#home">Home</a>
 *     <a href="#features">Features</a>
 *     <a href="#contact">Contact</a>
 *   </div>
 * </uix-navbar>
 * \`\`\`
 *
 * @example
 * // Fixed to bottom
 * \`\`\`html
 * <uix-navbar fixed="bottom">
 *   <div slot="center">
 *     <a href="#home"><uix-icon name="house"></uix-icon> Home</a>
 *     <a href="#search"><uix-icon name="search"></uix-icon> Search</a>
 *     <a href="#profile"><uix-icon name="user"></uix-icon> Profile</a>
 *   </div>
 * </uix-navbar>
 * \`\`\`
 *
 * @example
 * // Bordered variant
 * \`\`\`html
 * <uix-navbar variant="bordered">
 *   <div slot="brand">MyApp</div>
 *   <div slot="start">
 *     <a href="#dashboard">Dashboard</a>
 *     <a href="#projects">Projects</a>
 *   </div>
 * </uix-navbar>
 * \`\`\`
 *
 * @example
 * // Floating variant
 * \`\`\`html
 * <uix-navbar variant="floating">
 *   <div slot="brand">MyApp</div>
 *   <div slot="center">
 *     <a href="#home">Home</a>
 *     <a href="#about">About</a>
 *     <a href="#contact">Contact</a>
 *   </div>
 * </uix-navbar>
 * \`\`\`
 *
 * @example
 * // Transparent navbar
 * \`\`\`html
 * <uix-navbar transparent>
 *   <div slot="brand" style="color: white;">
 *     <strong>Transparent Nav</strong>
 *   </div>
 *   <div slot="end">
 *     <uix-button ghost>Login</uix-button>
 *   </div>
 * </uix-navbar>
 * \`\`\`
 *
 * @example
 * // With dropdown menu
 * \`\`\`html
 * <uix-navbar>
 *   <div slot="brand">MyApp</div>
 *   <div slot="start">
 *     <a href="#home">Home</a>
 *     <uix-button popovertarget="products-menu">
 *       Products <uix-icon name="chevron-down"></uix-icon>
 *     </uix-button>
 *     <uix-dropdown id="products-menu">
 *       <a href="#product1">Product 1</a>
 *       <a href="#product2">Product 2</a>
 *       <a href="#product3">Product 3</a>
 *     </uix-dropdown>
 *   </div>
 *   <div slot="end">
 *     <uix-avatar popovertarget="user-menu" size="sm" initials="JD"></uix-avatar>
 *     <uix-dropdown id="user-menu">
 *       <a href="#profile">Profile</a>
 *       <a href="#settings">Settings</a>
 *       <a href="#logout">Logout</a>
 *     </uix-dropdown>
 *   </div>
 * </uix-navbar>
 * \`\`\`
 *
 * @example
 * // With search
 * \`\`\`html
 * <uix-navbar>
 *   <div slot="brand">MyApp</div>
 *   <div slot="center">
 *     <uix-input
 *       type="search"
 *       placeholder="Search..."
 *       size="sm"
 *       style="width: 300px;"
 *     ></uix-input>
 *   </div>
 *   <div slot="end">
 *     <uix-button ghost size="sm">
 *       <uix-icon name="bell"></uix-icon>
 *     </uix-button>
 *   </div>
 * </uix-navbar>
 * \`\`\`
 */
`,mimeType:"text/javascript"},"/$app/uix/navigation/breadcrumbs.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

export default {
  tag: "uix-breadcrumbs",
  properties: {
    separator: T.string({
      defaultValue: "/",
      enum: ["/", ">", "\u2192", "\xB7", "|"],
    }),
    size: T.string({
      defaultValue: "md",
      enum: ["sm", "md", "lg"],
    }),
    items: T.array([]),
  },
  style: true,
  shadow: false,

  connected() {
    this._parseItems();
  },

  updated() {
    this._parseItems();
  },

  _parseItems() {
    // Parse items from children only on first render
    if (this.items.length === 0) {
      const itemElements = Array.from(
        this.querySelectorAll(":scope > a, :scope > span"),
      );
      if (itemElements.length > 0) {
        this.items = itemElements.map((item, index) => ({
          text: item.textContent,
          href: item.getAttribute("href"),
          isLast: index === itemElements.length - 1,
        }));
        // Remove original children since we'll render them
        itemElements.forEach((el) => el.remove());
      }
    }
  },

  render() {
    return html\`
      <nav part="container" class="breadcrumbs" aria-label="Breadcrumb">
        <ol part="list" class="breadcrumbs-list">
          \${this.items.map(
            (item, index) => html\`
              <li class="breadcrumbs-item">
                \${
                  item.href
                    ? html\`<uix-link href=\${item.href}>\${item.text}</uix-link>\`
                    : html\`<span class="current">\${item.text}</span>\`
                }
                \${
                  index < this.items.length - 1
                    ? html\`<span class="separator">\${this.separator}</span>\`
                    : ""
                }
              </li>
            \`,
          )}
        </ol>
      </nav>
    \`;
  },
};

/**
 * Breadcrumbs Component
 *
 * @component
 * @category navigation
 * @tag uix-breadcrumbs
 *
 * Breadcrumb navigation showing the current page's location within the site hierarchy.
 *
 * @example
 * // Basic breadcrumbs
 * \`\`\`html
 * <uix-breadcrumbs>
 *   <a href="/">Home</a>
 *   <a href="/products">Products</a>
 *   <span>Laptop</span>
 * </uix-breadcrumbs>
 * \`\`\`
 *
 * @example
 * // Different separators
 * \`\`\`html
 * <div style="display: flex; flex-direction: column; gap: 1rem;">
 *   <uix-breadcrumbs separator="/">
 *     <a href="/">Home</a>
 *     <a href="/docs">Docs</a>
 *     <span>Components</span>
 *   </uix-breadcrumbs>
 *
 *   <uix-breadcrumbs separator=">">
 *     <a href="/">Home</a>
 *     <a href="/docs">Docs</a>
 *     <span>Components</span>
 *   </uix-breadcrumbs>
 *
 *   <uix-breadcrumbs separator="\u2192">
 *     <a href="/">Home</a>
 *     <a href="/docs">Docs</a>
 *     <span>Components</span>
 *   </uix-breadcrumbs>
 *
 *   <uix-breadcrumbs separator="\xB7">
 *     <a href="/">Home</a>
 *     <a href="/docs">Docs</a>
 *     <span>Components</span>
 *   </uix-breadcrumbs>
 * </div>
 * \`\`\`
 *
 * @example
 * // Size variants
 * \`\`\`html
 * <div style="display: flex; flex-direction: column; gap: 1rem;">
 *   <uix-breadcrumbs size="sm">
 *     <a href="/">Home</a>
 *     <a href="/products">Products</a>
 *     <span>Item</span>
 *   </uix-breadcrumbs>
 *
 *   <uix-breadcrumbs size="md">
 *     <a href="/">Home</a>
 *     <a href="/products">Products</a>
 *     <span>Item</span>
 *   </uix-breadcrumbs>
 *
 *   <uix-breadcrumbs size="lg">
 *     <a href="/">Home</a>
 *     <a href="/products">Products</a>
 *     <span>Item</span>
 *   </uix-breadcrumbs>
 * </div>
 * \`\`\`
 *
 * @example
 * // With icons
 * \`\`\`html
 * <uix-breadcrumbs>
 *   <a href="/">
 *     <uix-icon name="house"></uix-icon>
 *     Home
 *   </a>
 *   <a href="/settings">
 *     <uix-icon name="settings"></uix-icon>
 *     Settings
 *   </a>
 *   <span>
 *     <uix-icon name="user"></uix-icon>
 *     Profile
 *   </span>
 * </uix-breadcrumbs>
 * \`\`\`
 *
 * @example
 * // Deep navigation
 * \`\`\`html
 * <uix-breadcrumbs>
 *   <a href="/">Home</a>
 *   <a href="/docs">Documentation</a>
 *   <a href="/docs/components">Components</a>
 *   <a href="/docs/components/navigation">Navigation</a>
 *   <span>Breadcrumbs</span>
 * </uix-breadcrumbs>
 * \`\`\`
 */
`,mimeType:"text/javascript"},"/$app/admin/views/model-list.js":{content:`import T from "/$app/types/index.js";
import $APP from "/$app.js";
import { html } from "/npm/lit-html";
import { keyed } from "/npm/lit-html/directives/keyed.js";
import {
  capitalize,
  getDisplayColumns,
  getModelSchema,
  getSingularName,
} from "../utils/model-utils.js";
import { getModelActions, getPluginModals } from "../plugins.js";

export default {
  tag: "admin-model-list",
  style: true,
  dataQuery: true,
  properties: {
    rows: T.array(),
    model: T.string(),
    selectedRow: T.object(),
    selectedColumns: T.array({ sync: "local", scope: "model" }),
    viewMode: T.string({ defaultValue: "list", enum: ["list", "board"] }),
    groupByField: T.string({ sync: "local", scope: "model", defaultValue: "" }),
    modalOpen: T.boolean({ defaultValue: false }),
    confirmDelete: T.boolean({ defaultValue: false }),
    searchQuery: T.string({ defaultValue: "" }),
    pluginModal: T.string({ defaultValue: "" }),
  },

  connected() {
    if (!this.selectedColumns || this.selectedColumns.length === 0) {
      this.selectedColumns = getDisplayColumns(this.model);
    }
  },

  getColumns() {
    const schema = getModelSchema(this.model);
    return this.selectedColumns
      .map((colName) => {
        const field = schema.find((f) => f.name === colName);
        return {
          name: colName,
          label: field?.label || capitalize(colName),
          type: field?.type || "string",
          sortable: true,
        };
      })
      .filter(Boolean);
  },

  getGroupableFields() {
    const schema = getModelSchema(this.model);
    const groupable = schema.filter((f) => {
      const type = f.type?.toLowerCase() || "";
      return (
        f.enum ||
        type === "enum" ||
        type === "belongs" ||
        type === "string" ||
        type === "boolean"
      );
    });
    return groupable.sort((a, b) => {
      const aScore = a.enum ? 0 : a.type === "belongs" ? 1 : 2;
      const bScore = b.enum ? 0 : b.type === "belongs" ? 1 : 2;
      return aScore - bScore;
    });
  },

  openCreateForm() {
    this.selectedRow = {};
    this.modalOpen = true;
  },

  openEditForm(row) {
    this.selectedRow = { ...row };
    this.modalOpen = true;
  },

  closeModal() {
    this.modalOpen = false;
    this.selectedRow = null;
    this.confirmDelete = false;
  },

  openPluginModal(name) {
    this.pluginModal = name;
  },

  closePluginModal() {
    this.pluginModal = "";
  },

  handlePluginAction(action) {
    const context = {
      model: this.model,
      rows: this.rows,
      openModal: (name) => this.openPluginModal(name),
      refresh: () => this.dispatchEvent(new CustomEvent("refresh")),
    };
    action.handler(context);
  },

  async handleFormSubmit(e) {
    const data = e.detail;

    try {
      let error, result;
      if (data.id) {
        [error, result] = await $APP.Model[this.model].edit(data);
      } else {
        [error, result] = await $APP.Model[this.model].add(data);
      }

      if (error) {
        // Pass errors to form for display
        const form = this.querySelector("admin-model-form uix-form");
        form?.setErrors(error);
        return;
      }

      this.closeModal();
      this.dispatchEvent(new CustomEvent("refresh"));
    } catch (error) {
      console.error("Error saving:", error);
      alert(\`Error: \${error.message}\`);
    }
  },

  async handleDelete() {
    if (!this.selectedRow?.id) return;

    try {
      await $APP.Model[this.model].remove(this.selectedRow.id);
      this.closeModal();
      this.dispatchEvent(new CustomEvent("refresh"));
    } catch (error) {
      console.error("Error deleting:", error);
      alert(\`Error: \${error.message}\`);
    }
  },

  toggleColumn(column) {
    if (column === "id") return;
    const current = [...(this.selectedColumns || [])];
    const index = current.indexOf(column);
    if (index === -1) {
      current.push(column);
    } else {
      current.splice(index, 1);
    }
    this.selectedColumns = current;
  },

  filterRows(rows) {
    if (!this.searchQuery) return rows;
    const query = this.searchQuery.toLowerCase();
    return rows.filter((row) =>
      Object.values(row).some((val) =>
        String(val).toLowerCase().includes(query),
      ),
    );
  },

  render() {
    const { rows, model, selectedRow, modalOpen, confirmDelete } = this;
    const modelName = getSingularName(model);
    const schema = getModelSchema(model);
    const columns = this.getColumns();
    const filteredRows = this.filterRows(rows || []);

    return html\`
      <div class="admin-model-list">
        <!-- Header -->
        <div class="admin-model-list-header">
          <div>
            <h1 class="admin-model-list-title">\${capitalize(model)}</h1>
            <p class="admin-model-list-count">\${filteredRows.length} records</p>
          </div>

          <div class="admin-model-list-actions">
            <!-- Column Selector -->
            <uix-dropdown>
              <uix-button slot="trigger" ghost>
                <uix-icon name="columns-3" size="18"></uix-icon>
                Columns
              </uix-button>
              <div class="admin-dropdown-content">
                \${schema.map(
                  (field) => html\`
                    <label class="admin-dropdown-item">
                      <uix-checkbox
                        ?checked=\${this.selectedColumns?.includes(field.name)}
                        ?disabled=\${field.name === "id"}
                        @change=\${() => this.toggleColumn(field.name)}
                      ></uix-checkbox>
                      <span>\${field.label || field.name}</span>
                    </label>
                  \`,
                )}
              </div>
            </uix-dropdown>

            <!-- Group By Field Selector (Board Mode) -->
            \${
              this.viewMode === "board"
                ? html\`
                  <uix-dropdown>
                    <uix-button slot="trigger" ghost>
                      <uix-icon name="layers" size="18"></uix-icon>
                      \${
                        this.groupByField
                          ? capitalize(this.groupByField)
                          : "No Grouping"
                      }
                    </uix-button>
                    <div class="admin-dropdown-content">
                      <button
                        class="admin-dropdown-item \${!this.groupByField ? "active" : ""}"
                        @click=\${() => (this.groupByField = "")}
                      >
                        <uix-icon name="layout-grid" size="16"></uix-icon>
                        No Grouping
                      </button>
                      \${this.getGroupableFields().map(
                        (field) => html\`
                          <button
                            class="admin-dropdown-item \${this.groupByField === field.name ? "active" : ""}"
                            @click=\${() => (this.groupByField = field.name)}
                          >
                            <uix-icon
                              name=\${field.enum ? "list-filter" : field.type === "belongs" ? "link" : "type"}
                              size="16"
                            ></uix-icon>
                            \${field.label || capitalize(field.name)}
                          </button>
                        \`,
                      )}
                    </div>
                  </uix-dropdown>
                \`
                : ""
            }

            <!-- View Mode Toggle -->
            <div class="admin-view-toggle">
              <uix-button
                ghost
                size="sm"
                ?primary=\${this.viewMode === "list"}
                @click=\${() => (this.viewMode = "list")}
              >
                <uix-icon name="list" size="18"></uix-icon>
              </uix-button>
              <uix-button
                ghost
                size="sm"
                ?primary=\${this.viewMode === "board"}
                @click=\${() => (this.viewMode = "board")}
              >
                <uix-icon name="kanban" size="18"></uix-icon>
              </uix-button>
            </div>

            <!-- Import/Export -->
            <admin-import .model=\${model}></admin-import>
            <admin-export .model=\${model} .rows=\${rows}></admin-export>

            <!-- Plugin Actions -->
            \${getModelActions(model).map(
              (action) => html\`
                <uix-button ghost @click=\${() => this.handlePluginAction(action)}>
                  <uix-icon name=\${action.icon || "plug"} size="18"></uix-icon>
                  \${action.label}
                </uix-button>
              \`,
            )}

            <!-- New Button -->
            <uix-button primary @click=\${this.openCreateForm}>
              <uix-icon name="plus" size="20"></uix-icon>
              New \${capitalize(modelName)}
            </uix-button>
          </div>
        </div>

        <!-- Search -->
        <div class="admin-model-list-search">
          <uix-input
            w-full
            type="search"
            placeholder="Search..."
            icon="search"
            .value=\${this.searchQuery}
            @input=\${(e) => (this.searchQuery = e.target.value)}
          ></uix-input>
        </div>

        <!-- Content Area -->
        \${
          this.viewMode === "board"
            ? html\`
              <admin-board
                .model=\${model}
                .rows=\${filteredRows}
                .groupByField=\${this.groupByField}
                @select-item=\${(e) => this.openEditForm(e.detail)}
                @new-item=\${(e) => {
                  this.selectedRow = e.detail || {};
                  this.modalOpen = true;
                }}
              ></admin-board>
            \`
            : html\`
                <uix-data-table
                  .data-query=\${{ model, key: "rows" }}
                  .columns=\${columns}
                  .selectRow=\${(row) => this.openEditForm(row)}
                ></uix-data-table>
            \`
        }
 
        <!-- Edit/Create Modal -->
        <uix-modal
          ?open=\${modalOpen}
          @modal-close=\${this.closeModal}
        >
          <div slot="header">
            \${
              selectedRow?.id
                ? html\`Edit \${capitalize(modelName)} <span class="admin-modal-id">#\${selectedRow.id}</span>\`
                : html\`New \${capitalize(modelName)}\`
            }
          </div>
          \${
            modalOpen
              ? keyed(
                  selectedRow,
                  html\`
                  <admin-model-form
                    .model=\${model}
                    .row=\${selectedRow}
                    @form-submit=\${this.handleFormSubmit}
                  ></admin-model-form>
                \`,
                )
              : ""
          }
          <div slot="footer">
            <uix-button ghost @click=\${this.closeModal}>
              Cancel
            </uix-button>
            \${
              selectedRow?.id
                ? html\`
                <uix-button danger ghost @click=\${() => (this.confirmDelete = true)}>
                  <uix-icon name="trash" size="18"></uix-icon>
                  Delete
                </uix-button>
              \`
                : ""
            }
            <uix-button primary @click=\${() => this.querySelector("admin-model-form")?.submit()}>
              <uix-icon name=\${selectedRow?.id ? "save" : "plus"} size="18"></uix-icon>
              \${selectedRow?.id ? "Save" : "Create"}
            </uix-button>
          </div>
        </uix-modal>

        <!-- Delete Confirmation Modal -->
        <uix-modal
          ?open=\${confirmDelete}
          @modal-close=\${() => (this.confirmDelete = false)}
          size="sm"
        >
          <div slot="header">Delete \${capitalize(modelName)}?</div>
          <div class="admin-delete-confirm">
            <div class="admin-delete-icon">
              <uix-icon name="alert-triangle" size="24"></uix-icon>
            </div>
            <div>
              <p class="admin-delete-text">This action cannot be undone.</p>
            </div>
          </div>
          <div slot="footer">
            <uix-button ghost @click=\${() => (this.confirmDelete = false)}>
              Cancel
            </uix-button>
            <uix-button danger @click=\${this.handleDelete}>
              <uix-icon name="trash" size="18"></uix-icon>
              Delete
            </uix-button>
          </div>
        </uix-modal>

        <!-- Plugin Modals -->
        \${Object.entries(getPluginModals()).map(
          ([name, config]) => html\`
            <uix-modal
              ?open=\${this.pluginModal === name}
              @modal-close=\${() => this.closePluginModal()}
              @close-modal=\${() => this.closePluginModal()}
              @refresh=\${() => {
                this.closePluginModal();
                this.dispatchEvent(new CustomEvent("refresh"));
              }}
              size="lg"
            >
              <div slot="header">\${config.title || capitalize(name.replace(/-/g, " "))}</div>
              \${this.pluginModal === name ? config.component({ model, context: this }) : ""}
            </uix-modal>
          \`,
        )}
      </div>
    \`;
  },
};
`,mimeType:"text/javascript"},"/$app/uix/navigation/menu.css":{content:`:where(.uix-menu,uix-menu){display:flex;flex-direction:column;list-style:none;margin:0;padding:.25rem 0;box-shadow:var(--menu-shadow, 0 2px 8px rgba(0, 0, 0, .1));&[size=sm]{--menu-item-font-size: var(--text-sm, .875rem);--menu-item-padding: .375rem .75rem;--menu-item-gap: .5rem}&[size=md]{--menu-item-font-size: var(--text-sm, .875rem);--menu-item-padding: .5rem .75rem;--menu-item-gap: .75rem}&[size=lg]{--menu-item-font-size: var(--text-base, 1rem);--menu-item-padding: .625rem 1rem;--menu-item-gap: 1rem}>li[role=menuitem]{list-style:none;margin:0;padding:0;>a,>button{display:block;width:100%;padding:var(--menu-item-padding, .5rem .75rem);font-size:var(--menu-item-font-size, var(--text-sm, .875rem));color:var(--dropdown-color, var(--text-color, default));text-decoration:none;background-color:transparent;border:none;cursor:pointer;transition:background-color .15s ease,color .15s ease;text-align:left;white-space:nowrap;&:hover{background-color:var(--color-primary, #fabd2f);color:var(--color-inverse, #282828)}&:active{background-color:var(--color-primary, #fabd2f);color:var(--color-inverse, #282828)}}}>li[role=separator]{height:1px;background-color:var(--panel-border, var(--dropdown-separator, #504945));margin:.25rem 0;padding:0}&[variant=bordered]::part(container){border-width:2px}&[variant=compact]{--menu-item-padding: .375rem .5rem}&:not([rounded])::part(container){border-radius:0}&:not([bordered])::part(container){border:none}&[variant=sidebar]{box-shadow:none;background:transparent;padding:var(--sidebar-nav-padding, 0);gap:var(--sidebar-nav-gap, .25rem);>li{list-style:none;margin:0;padding:0;>a,>uix-link,>button{display:flex;align-items:center;gap:var(--sidebar-item-gap, .75rem);width:100%;padding:var(--sidebar-item-padding, .75rem 1rem);border-radius:var(--sidebar-item-border-radius, .5rem);color:var(--sidebar-item-color, var(--text-muted, #6b7280));font-weight:var(--sidebar-item-font-weight, 500);font-size:var(--menu-item-font-size, inherit);text-decoration:none;background:transparent;border:none;cursor:pointer;text-align:left;transition:background-color .2s ease,color .2s ease;&:hover{background-color:var(--sidebar-item-hover-background, #f5f5f5);color:var(--sidebar-item-hover-color, var(--text-color, #1a1a1a))}&.active,&[aria-current=page]{background-color:var(--sidebar-item-active-background, #000000);color:var(--sidebar-item-active-color, #ffffff);font-weight:var(--sidebar-item-active-font-weight, 600)}}}>li.divider,>li[role=separator]{height:0;padding-top:var(--sidebar-section-padding, 1rem);margin-top:var(--sidebar-section-margin, .5rem);border-top:1px solid var(--sidebar-border-color, var(--color-border, #e5e7eb));background:none}details{summary{display:flex;align-items:center;gap:var(--sidebar-item-gap, .75rem);padding:var(--sidebar-item-padding, .75rem 1rem);border-radius:var(--sidebar-item-border-radius, .5rem);color:var(--sidebar-item-color, var(--text-muted, #6b7280));font-weight:var(--sidebar-item-font-weight, 500);cursor:pointer;list-style:none;transition:background-color .2s ease,color .2s ease;&::-webkit-details-marker{display:none}&:hover{background-color:var(--sidebar-item-hover-background, #f5f5f5);color:var(--sidebar-item-hover-color, var(--text-color, #1a1a1a))}uix-icon:last-child{margin-left:auto;transition:transform .2s ease}}&[open] summary uix-icon:last-child{transform:rotate(90deg)}>ul{list-style:none;margin:0;padding:0;padding-inline:var(--sidebar-item-padding, .25rem);display:flex;flex-direction:column;gap:var(--sidebar-item-gap, .75rem);>li{>a,>uix-link{display:flex;align-items:center;gap:var(--sidebar-item-gap, .75rem);padding:var(--sidebar-nested-item-padding, .5rem 1rem);border-radius:var(--sidebar-item-border-radius, .5rem);color:var(--sidebar-item-color, var(--text-muted, #6b7280));font-size:var(--sidebar-nested-item-font-size, .875rem);text-decoration:none;transition:background-color .2s ease,color .2s ease;&:hover{background-color:var(--sidebar-item-hover-background, #f5f5f5);color:var(--sidebar-item-hover-color, var(--text-color, #1a1a1a))}&.active,&[aria-current=page]{background-color:var(--sidebar-item-hover-background, #e5e5e5);color:var(--sidebar-item-hover-color, #000000);font-weight:600}}}}}}}
`,mimeType:"text/css"},"/$app/uix/navigation/sidebar.css":{content:`uix-sidebar{display:flex;flex-direction:column;width:var(--sidebar-width, 256px);height:100%;background-color:var(--sidebar-background, var(--color-surface, #ffffff));border-right-width:var(--sidebar-border-width, 1px);border-right-style:solid;border-right-color:var(--sidebar-border-color, var(--color-border, #e5e7eb));box-shadow:var(--sidebar-shadow, none);overflow:hidden;transition:width .3s ease;&[position=right]{border-right:none;border-left-width:var(--sidebar-border-width, 1px);border-left-style:solid;border-left-color:var(--sidebar-border-color, var(--color-border, #e5e7eb))}&[collapsed]{width:var(--sidebar-collapsed-width, 80px)}@media (max-width: 768px){position:fixed;top:0;bottom:0;z-index:1000;transform:translate(-100%);&[position=left]{left:0}&[position=right]{right:0;transform:translate(100%)}&[open]{transform:translate(0)}}@media (min-width: 769px){position:relative;transform:none}}uix-sidebar::part(header){display:flex;align-items:center;justify-content:space-between;padding:var(--sidebar-header-padding, 1rem);background:var(--sidebar-header-background, transparent);border-bottom-width:var(--sidebar-header-border-width, var(--sidebar-border-width, 1px));border-bottom-style:solid;border-bottom-color:var(--sidebar-border-color, var(--color-border, #e5e7eb));min-height:var(--sidebar-header-min-height, auto);flex-shrink:0}uix-sidebar::part(toggle){display:flex;align-items:center;justify-content:center;width:2rem;height:2rem;padding:0;border:none;background:var(--sidebar-toggle-background, transparent);color:var(--sidebar-toggle-color, var(--text-muted, #6b7280));cursor:pointer;border-radius:var(--sidebar-toggle-border-radius, .5rem);transition:background-color .2s ease,color .2s ease;flex-shrink:0}uix-sidebar::part(toggle):hover{background-color:var(--sidebar-toggle-hover-background, var(--color-hover, #f5f5f5));color:var(--sidebar-toggle-hover-color, var(--text-color, #1a1a1a))}uix-sidebar::part(content){flex:1;overflow-y:auto;overflow-x:hidden;padding:var(--sidebar-content-padding, .5rem 0)}uix-sidebar::part(footer){padding:var(--sidebar-footer-padding, 1rem);background:var(--sidebar-footer-background, transparent);border-top-width:var(--sidebar-footer-border-width, var(--sidebar-border-width, 1px));border-top-style:solid;border-top-color:var(--sidebar-border-color, var(--color-border, #e5e7eb));flex-shrink:0}uix-sidebar::part(footer):empty{display:none}uix-sidebar[collapsed]::part(header){justify-content:center;padding:var(--sidebar-header-padding, 1rem) .5rem}uix-sidebar{&[collapsed]{.sidebar-label,.sidebar-title,.sidebar-text{opacity:0;width:0;overflow:hidden;white-space:nowrap}[slot=header] span:not(.icon),[slot=footer] span:not(.icon){opacity:0;width:0;overflow:hidden}}.sidebar-nav{display:flex;flex-direction:column;gap:var(--sidebar-nav-gap, .25rem);padding:var(--sidebar-nav-padding, 0 .75rem)}.sidebar-nav-item,.sidebar-item{display:flex;align-items:center;gap:var(--sidebar-item-gap, .75rem);padding:var(--sidebar-item-padding, .75rem 1rem);border-radius:var(--sidebar-item-border-radius, .5rem);color:var(--sidebar-item-color, var(--text-muted, #6b7280));font-weight:var(--sidebar-item-font-weight, 500);text-decoration:none;cursor:pointer;background:transparent;border:none;width:100%;text-align:left;font-size:inherit;font-family:inherit;transition:background-color .2s ease,color .2s ease;&:hover{background-color:var(--sidebar-item-hover-background, #f5f5f5);color:var(--sidebar-item-hover-color, var(--text-color, #1a1a1a))}&.active,&[aria-current=page]{background-color:var(--sidebar-item-active-background, #000000);color:var(--sidebar-item-active-color, #ffffff);font-weight:var(--sidebar-item-active-font-weight, 600)}}.sidebar-section{padding-top:var(--sidebar-section-padding, 1rem);margin-top:var(--sidebar-section-margin, .5rem);border-top:1px solid var(--sidebar-border-color, var(--color-border, #e5e7eb))}.sidebar-section-title{padding:var(--sidebar-section-title-padding, .5rem 1rem);font-size:var(--text-xs, .75rem);font-weight:var(--sidebar-section-title-font-weight, 600);text-transform:uppercase;letter-spacing:.05em;color:var(--text-muted, #6b7280)}.sidebar-nested{padding-left:var(--sidebar-nested-indent, 1rem)}.sidebar-nested-item{padding:var(--sidebar-nested-item-padding, .5rem 1rem);font-size:var(--sidebar-nested-item-font-size, .875rem)}}
`,mimeType:"text/css"},"/$app/uix/display/avatar.css":{content:`:where(.uix-avatar,uix-avatar){--avatar-size: 2.5rem;--avatar-background: var(--color-surface);--avatar-color: var(--color-inverse);--avatar-border-radius: 50%;--status-size: .75rem;--status-border-width: 2px;width:var(--avatar-size);height:var(--avatar-size);position:relative;display:flex;align-items:center;justify-content:center;overflow:hidden;border-radius:var(--avatar-border-radius);background-color:var(--avatar-background);color:var(--avatar-color);&[size=xs]{--avatar-size: 1.5rem;--status-size: .5rem;--status-border-width: 1px}&[size=sm]{--avatar-size: 2rem;--status-size: .625rem;--status-border-width: 2px}&[size=md]{--avatar-size: 2.5rem;--status-size: .75rem}&[size=lg]{--avatar-size: 3.5rem;--status-size: 1rem}&[size=xl]{--avatar-size: 5rem;--status-size: 1.25rem;--status-border-width: 3px}&[shape=circle]{--avatar-border-radius: 50%}&[shape=square]{--avatar-border-radius: 0}&[shape=rounded]{--avatar-border-radius: var(--radius-md, .375rem)}img{width:100%;height:100%;object-fit:cover;border-radius:var(--avatar-border-radius)}}.uix-avatar__initials{font-size:calc(var(--avatar-size) / 2.5);font-weight:var(--font-semibold, 600);line-height:1;text-transform:uppercase;user-select:none;color:var(--avatar-color)}.uix-avatar__status{position:absolute;bottom:0;right:0;width:var(--status-size);height:var(--status-size);border-radius:50%;border:var(--status-border-width) solid var(--color-primary);box-sizing:border-box}.uix-avatar__status--online{background-color:var(--color-success)}.uix-avatar__status--offline{background-color:var(--color-muted)}.uix-avatar__status--busy{background-color:var(--color-danger)}.uix-avatar__status--away{background-color:var(--color-warning)}
`,mimeType:"text/css"},"/$app/uix/navigation/navbar.css":{content:`:where(.uix-navbar,uix-navbar){display:flex;&::part(container){display:flex;flex-grow:1;background-color:var(--navbar-background, var(--color-surface));border-bottom:1px solid var(--navbar-border-color, var(--color-primary));box-shadow:var(--navbar-shadow, none)}&::part(inner){display:flex;align-items:center;justify-content:space-between;flex:1;padding:var( --navbar-padding, var(--spacing-md, .75rem) var(--spacing-lg, 1rem) );max-width:var(--navbar-max-width, 100%);margin:0 auto}&::part(brand){display:flex;align-items:center;gap:var(--navbar-brand-gap, .75rem);font-size:var(--navbar-brand-font-size, var(--text-xl, 1.25rem));font-weight:var(--navbar-brand-font-weight, var(--font-bold, 700));color:var(--navbar-brand-color, var(--color-primary))}&::part(toggle){display:none;align-items:center;justify-content:center;width:2.5rem;height:2.5rem;padding:0;border:none;background:none;color:var(--navbar-toggle-color, var(--color-primary));cursor:pointer;border-radius:var(--radius-md);transition:background-color .2s ease;&:hover{background-color:var( --navbar-toggle-hover-background, var(--color-hover) )}}&::part(menu){display:flex;align-items:center;flex:1;gap:var(--navbar-menu-gap, 2rem);flex-direction:var(--flex-direction)}&::part(start),&::part(center),&::part(end){display:flex;align-items:center;gap:var(--navbar-items-gap, 1.5rem)}&::part(center){flex:1;justify-content:center}&::part(end){justify-content:flex-end}&[fixed=top]::part(container){position:fixed;top:0;left:0;right:0;z-index:1000}&[fixed=bottom]::part(container){position:fixed;bottom:0;left:0;right:0;z-index:1000}&[variant=bordered]::part(container){border-bottom-width:2px}&[variant=floating]::part(container){margin:var(--spacing-md, .75rem);border-radius:var(--radius-lg);border:1px solid var(--color-primary);box-shadow:0 2px 8px #0000001a}&[transparent]::part(container){background-color:transparent;border-bottom-color:transparent;box-shadow:none}&[direction=horizontal]::part(start){margin-left:var(--navbar-start-margin, 2rem)}&[direction=vertical]::part(inner){flex-direction:column}@media (max-width: 768px){&::part(toggle){display:flex}&::part(menu){position:fixed;top:calc(var(--navbar-height, 4rem));left:0;right:0;flex-direction:var(--flex-direction);align-items:stretch;background-color:var(--navbar-background, var(--color-surface));border-top:1px solid var(--navbar-border-color, var(--color-primary));padding:var(--spacing-md, .75rem);gap:0;max-height:0;overflow:hidden;transition:max-height .3s ease;&.active{max-height:calc(100vh - var(--navbar-height, 4rem))}}&::part(start),&::part(center),&::part(end){flex-direction:var(--flex-direction);align-items:stretch;gap:.5rem;margin:0}&::part(start){padding-bottom:var(--spacing-md, .75rem);border-bottom:1px solid var(--color-primary)}&::part(center){padding:var(--spacing-md, .75rem) 0;border-bottom:1px solid var(--color-primary)}&::part(end){padding-top:var(--spacing-md, .75rem)}}}
`,mimeType:"text/css"},"/$app/uix/navigation/breadcrumbs.css":{content:`:where(.uix-breadcrumbs,uix-breadcrumbs){display:block;.breadcrumbs{padding:0}.breadcrumbs-list{display:flex;align-items:center;gap:var(--breadcrumbs-gap, .5rem);list-style:none;margin:0;padding:0;flex-wrap:wrap}.breadcrumbs-item{display:flex;align-items:center;gap:var(--breadcrumbs-gap, .5rem);uix-link{color:var(--breadcrumbs-link-color, var(--text-muted, #6b7280));font-size:var(--breadcrumbs-font-size, var(--text-sm, .875rem));&:hover{color:var(--breadcrumbs-link-hover-color, var(--color-primary))}}.current{color:var(--breadcrumbs-current-color, var(--text-color));font-size:var(--breadcrumbs-font-size, var(--text-sm, .875rem));font-weight:var(--font-semibold, 600)}.separator{color:var(--breadcrumbs-separator-color, var(--text-muted, #9ca3af));font-size:var(--breadcrumbs-font-size, var(--text-sm, .875rem))}}&[size=sm]{--breadcrumbs-font-size: var(--text-xs, .75rem);--breadcrumbs-gap: .375rem}&[size=md]{--breadcrumbs-font-size: var(--text-sm, .875rem);--breadcrumbs-gap: .5rem}&[size=lg]{--breadcrumbs-font-size: var(--text-base, 1rem);--breadcrumbs-gap: .625rem}}
`,mimeType:"text/css"},"/$app/admin/views/model-list.css":{content:`.admin-model-list{padding:var(--admin-list-padding, 2rem)}.admin-model-list-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:var(--admin-list-header-margin, 1.5rem)}.admin-model-list-title{font-size:var(--admin-list-title-size, 1.875rem);font-weight:900;text-transform:uppercase;margin:0}.admin-model-list-count{color:var(--admin-list-count-color, #6b7280);margin:0}.admin-model-list-actions{display:flex;align-items:center;gap:var(--admin-list-actions-gap, 1rem)}.admin-view-toggle{display:flex;border:2px solid var(--admin-toggle-border, #000);border-radius:var(--admin-toggle-radius, .5rem);overflow:hidden}.admin-view-toggle uix-button{border-radius:0}.admin-dropdown-content{padding:var(--admin-dropdown-padding, .5rem);max-height:var(--admin-dropdown-max-height, 16rem);overflow-y:auto}.admin-dropdown-item{display:flex;align-items:center;gap:.5rem;width:100%;padding:var(--admin-dropdown-item-padding, .5rem .75rem);border:none;background:none;border-radius:var(--admin-dropdown-item-radius, .5rem);cursor:pointer;text-align:left;font-size:.875rem;transition:background-color .15s ease}.admin-dropdown-item:hover{background:var(--admin-dropdown-item-hover, #f3f4f6)}.admin-dropdown-item.active{background:var(--admin-dropdown-item-active, #f3f4f6);font-weight:700}.admin-model-list-search{margin-bottom:var(--admin-list-search-margin, 1.5rem);max-width:var(--admin-list-search-width, 28rem)}.admin-table-card{overflow:hidden}.admin-table-scroll{overflow-x:auto}.admin-table{width:100%;border-collapse:collapse}.admin-table thead{background:var(--admin-table-header-bg, #f3f4f6);border-bottom:3px solid var(--admin-table-border, #000)}.admin-table th{padding:var(--admin-table-cell-padding, .75rem 1rem);text-align:left;font-size:.875rem;font-weight:900;text-transform:uppercase;letter-spacing:.025em}.admin-table tbody tr{cursor:pointer;transition:background-color .15s ease;border-bottom:1px solid var(--admin-table-row-border, #e5e7eb)}.admin-table tbody tr:hover{background:var(--admin-table-row-hover, #f9fafb)}.admin-table td{padding:var(--admin-table-cell-padding, .75rem 1rem);font-size:.875rem}.admin-table-actions-col{text-align:right;width:1%;white-space:nowrap}.admin-table-empty{padding:var(--admin-table-empty-padding, 3rem);text-align:center;color:var(--admin-table-empty-color, #6b7280)}.admin-table-empty uix-icon{margin:0 auto 1rem;opacity:.5}.admin-table-empty-title{font-size:1.125rem;font-weight:500;margin:0 0 .25rem}.admin-table-empty-text{font-size:.875rem;margin:0}.admin-delete-confirm{display:flex;align-items:center;gap:1rem;margin-bottom:1rem}.admin-delete-icon{padding:.75rem;background:var(--admin-delete-icon-bg, #fee2e2);border-radius:9999px;color:var(--admin-delete-icon-color, #dc2626)}.admin-delete-title{font-weight:900;font-size:1.125rem;margin:0}.admin-delete-text{color:var(--admin-delete-text-color, #6b7280);font-size:.875rem;margin:0}.admin-modal-id{font-weight:400;color:var(--text-muted, #6b7280);font-size:.875em}.admin-modal-footer{display:flex;gap:1rem}.admin-modal-footer uix-button{flex:1}
`,mimeType:"text/css"},"/$app/uix/display/link.css":{content:`:where(.uix-link,uix-link){display:inline-flex;align-items:center;justify-content:var(--link-justify-content, center);width:var(--link-width, auto);flex-direction:var(--link-direction, row);gap:var(--link-gap, var(--spacing-xs, .25rem));box-sizing:border-box;font-family:inherit;font-size:var(--link-font-size, var(--text-sm, .875rem));font-weight:var(--link-font-weight, 600);line-height:var(--link-line-height, 1.5);text-decoration:var(--link-text-decoration, none);color:var(--link-color, var(--text-color, inherit));cursor:pointer;&[vertical]::part(anchor){display:flex;flex-direction:column}&::part(anchor){display:inline-flex;align-items:center;justify-content:var(--link-justify-content, left);width:100%;height:100%;gap:var(--link-gap, var(--spacing-xs, .25rem));flex-direction:var(--link-direction, row);padding:var(--link-padding-y, var(--spacing-sm, .5rem)) var(--link-padding-x, var(--spacing-md, .75rem));font-family:inherit;font-size:inherit;font-weight:inherit;line-height:inherit;text-decoration:var(--link-text-decoration, none);color:inherit;cursor:pointer;transition:var( --link-transition, color .2s ease, opacity .2s ease, transform .1s ease );&:hover{color:var(--link-hover-color, var(--link-color));text-decoration:var( --link-hover-text-decoration, var(--link-text-decoration, none) );opacity:var(--link-hover-opacity, .9)}&:active{color:var(--link-active-color, var(--link-color));transform:var(--link-active-transform, scale(.98))}&:focus-visible{outline:2px solid var(--color-primary-dark, #d79921);outline-offset:2px}&:visited{color:var(--link-visited-color, var(--link-color))}&[disabled],&[aria-disabled=true]{opacity:var(--link-disabled-opacity, .5);cursor:not-allowed;pointer-events:none}}&::part(icon){display:inline-flex;align-items:center;justify-content:center;width:var(--link-icon-size, 1.25rem);height:var(--link-icon-size, 1.25rem);color:var(--link-icon-color, currentColor);flex-shrink:0}&[underline]{--link-text-decoration: underline}&[underline=hover]{--link-text-decoration: none;--link-hover-text-decoration: underline}&[variant=primary]{--link-color: var(--color-primary);--link-hover-color: var(--color-primary-dark);--link-active-color: var(--color-primary-darker)}&[variant=secondary]{--link-color: var(--color-secondary);--link-hover-color: var(--color-secondary-dark);--link-active-color: var(--color-secondary-darker)}&[variant=muted]{--link-color: var(--text-muted);--link-hover-color: var(--text-color)}&[size=xs]{--link-font-size: var(--text-xs, .75rem);--link-padding-y: .2rem;--link-padding-x: .4rem;--link-gap: .125rem;--link-icon-size: .75em}&[size=sm]{--link-font-size: var(--text-sm, .875rem);--link-padding-y: .25rem;--link-padding-x: .5rem;--link-gap: .25rem;--link-icon-size: .875em}&[size=md]{--link-font-size: var(--text-base, 1rem);--link-padding-y: .5rem;--link-padding-x: .75rem;--link-gap: .375rem;--link-icon-size: 1em}&[size=lg]{--link-font-size: var(--text-lg, 1.125rem);--link-padding-y: .75rem;--link-padding-x: 1rem;--link-gap: .5rem;--link-icon-size: 1.125em}&[size=xl]{--link-font-size: var(--text-xl, 1.25rem);--link-padding-y: 1rem;--link-padding-x: 1.25rem;--link-gap: .625rem;--link-icon-size: 1.25em}&[compact]{--link-padding-x: 0;--link-padding-y: 0}&[w-full],&[wfull]{width:100%;display:flex}}
`,mimeType:"text/css"},"/$app/uix/display/icon.css":{content:`:where(.uix-icon,uix-icon){display:inline-block;vertical-align:middle;--icon-size: calc(var(--spacing, .25rem) * 4);width:var(--icon-size);height:var(--icon-size);svg{height:inherit;width:inherit}&[solid]{stroke:currentColor;fill:currentColor}&[color=primary]{color:var(--color-primary)}&[color=secondary]{color:var(--color-secondary)}&[color=success]{color:var(--color-success)}&[color=danger]{color:var(--color-danger)}&[color=warning]{color:var(--color-warning)}&[color=info]{color:var(--color-info)}&[color=inverse]{color:var(--color-inverse)}&[size=xs]{--icon-size: calc(var(--spacing, .25rem) * 3)}&[size=sm]{--icon-size: calc(var(--spacing, .25rem) * 4)}&[size=md]{--icon-size: calc(var(--spacing, .25rem) * 6)}&[size=lg]{--icon-size: calc(var(--spacing, .25rem) * 10)}&[size=xl]{--icon-size: calc(var(--spacing, .25rem) * 14)}&[size="2xl"]{--icon-size: calc(var(--spacing, .25rem) * 24)}&[size="3xl"]{--icon-size: calc(var(--spacing, .25rem) * 36)}&[size="4xl"]{--icon-size: calc(var(--spacing, .25rem) * 48)}}
`,mimeType:"text/css"},"/$app/uix/display/button.js":{content:`import T from "/$app/types/index.js";

export default {
  tag: "uix-button",
  properties: {
    variant: T.string(),
    primary: T.boolean(),
    secondary: T.boolean(),
    danger: T.boolean(),
    success: T.boolean(),
    ghost: T.boolean(),
    outline: T.boolean(),
    border: T.boolean(),
    size: T.string({
      defaultValue: "md",
      enum: ["xs", "sm", "md", "lg", "xl"],
    }),
    wFull: T.boolean(false),
  },
  extends: "uix-link",
  style: true,
};

/**
 * Button Component
 *
 * @component
 * @category display
 * @tag uix-button
 *
 * A flexible button component for user actions. Supports multiple variants,
 * sizes, icons, and states. Extends uix-link for navigation functionality.
 *
 * @example Basic Button
 * \`\`\`html
 * <uix-button>Click me</uix-button>
 * \`\`\`
 *
 * @example Button Variants
 * Different visual styles for various action types
 * \`\`\`html
 * <div class="flex flex-col gap-2 items-center">
 *  <uix-button>Default</uix-button>
 *  <uix-button primary>Primary</uix-button>
 *  <uix-button secondary>Secondary</uix-button>
 *  <uix-button success>Success</uix-button>
 *  <uix-button danger>Danger</uix-button>
 * </div>
 * \`\`\`
 *
 * @example Button Styles
 * Different style treatments
 * \`\`\`html
 * <div class="flex flex-col gap-2 items-center">
 *  <uix-button primary>Solid</uix-button>
 *  <uix-button danger ghost>Ghost</uix-button>
 *  <uix-button secondary outline>Outline</uix-button>
 *  <uix-button primary border>Border</uix-button>
 * </div>
 * \`\`\`
 *
 * @example Button Sizes
 * \`\`\`html
 * <div class="flex flex-col gap-2 items-center">
 *  <uix-button size="xs">Extra Small</uix-button>
 *  <uix-button size="sm">Small</uix-button>
 *  <uix-button size="md">Medium</uix-button>
 *  <uix-button size="lg">Large</uix-button>
 *  <uix-button size="xl">Extra Large</uix-button>
 * </div>
 * \`\`\`
 *
 * @example Disabled Button
 * \`\`\`html
 * <uix-button disabled>Cannot Click</uix-button>
 * \`\`\`
 *
 * @example With Click Handler
 * \`\`\`javascript
 * import { html } from "/npm/lit-html";
 *
 * export default {
 *   tag: "my-component",
 *
 *   handleClick() {
 *     alert("Button clicked!");
 *   },
 *
 *   render() {
 *     return html\`
 *       <uix-button
 *         primary
 *         @click=\${this.handleClick.bind(this)}
 *       >
 *         Click me
 *       </uix-button>
 *     \`;
 *   }
 * };
 * \`\`\`
 *
 * @example As Link
 * \`\`\`html
 * <uix-button href="/dashboard">Go to Dashboard</uix-button>
 * \`\`\`
 */
`,mimeType:"text/javascript"},"/$app/uix/overlay/dropdown.js":{content:`import T from "/$app/types/index.js";

export default {
  style: true,
  extends: "uix-popover-controller",
  tag: "uix-dropdown",
  properties: {
    autoClose: T.boolean(true),
  },

  connected() {
    this.setAttribute("role", "menu");
    this.addEventListener("click", this._handleMenuClick);
  },

  disconnected() {
    this.removeEventListener("click", this._handleMenuClick);
  },

  _handleMenuClick(e) {
    if (!this.autoClose) return;

    // Close dropdown when a menu item (link or button) is clicked
    const target = e.target;
    const link = target.closest("a, button");

    // Don't close if it's a button that triggers another popover
    if (link && !link.closest("[popovertarget]")) {
      this._close();
    }
  },
};

/**
 * Copyright (c) Alan Carlos Meira Leal
 *
 * UIX Dropdown Component
 * Shows dropdown menu using custom popover system.
 * Extends uix-popover-controller for positioning and state management.
 *
 * @extends uix-popover-controller
 * @slot - Default slot for dropdown menu items
 *
 * @property {string} position - Positioning relative to trigger (inherited from popover-controller)
 * @property {boolean} autoClose - Auto-close when menu item is clicked (default true)
 *
 * @example Basic Dropdown
 * \`\`\`html
 * <uix-button popovertarget="menu5">Toggle Menu</uix-button>
<uix-dropdown id="menu5">
    <div class="dropdown-header">Settings</div>
    <a href="/profile">Profile</a>
    <a href="/preferences">Preferences</a>
    <hr>
    <div class="dropdown-header">Account</div>
    <a href="/logout">Logout</a>
  </uix-dropdown>

 * \`\`\`
 *
 * @example Different Positions
 * \`\`\`html
 * <uix-button popovertarget="dropdown1">Bottom Menu</uix-button>
 * <uix-dropdown id="dropdown1" position="bottom">

 *     <uix-nav-item
 *        href="/item1"
 *        label="Item 1"></uix-nav-item>
 *     <uix-nav-item
 *        href="/item2"
 *        label="Item 2"></uix-nav-item>
 * </uix-dropdown>
 *
 * <uix-button popovertarget="dropdown2">Top Menu</uix-button>
 * <uix-dropdown id="dropdown2" position="top">
 *     <uix-nav-item
 *        href="/item1"
 *        label="Item 1"></uix-nav-item>
 *     <uix-nav-item
 *        href="/item2"
 *        label="Item 2"></uix-nav-item>
 * </uix-dropdown>
 *
 * <uix-button popovertarget="dropdown3">Right-Aligned Menu</uix-button>
 * <uix-dropdown id="dropdown3" position="right">
 *     <uix-nav-item
 *        href="/item1"
 *        label="Item 1"></uix-nav-item>
 *     <uix-nav-item
 *        href="/item2"
 *        label="Item 2"></uix-nav-item>
 * </uix-dropdown>
 * \`\`\`
 *
 * @example With Custom Content
 * \`\`\`html
 * <uix-button popovertarget="products-menu">
 *   Products <uix-icon name="chevron-down"></uix-icon>
 * </uix-button>
 * <uix-dropdown id="products-menu" position="bottom-left">
 *   <a href="/product1">Product 1</a>
 *   <a href="/product2">Product 2</a>
 *   <hr>
 *   <a href="/all-products">View All</a>
 * </uix-dropdown>
 * \`\`\`
 */
`,mimeType:"text/javascript"},"/$app/uix/form/checkbox.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

const generateId = () => \`uix-checkbox-\${Math.random().toString(36).slice(2, 9)}\`;

export default {
  tag: "uix-checkbox",
  properties: {
    id: T.string(),
    label: T.string(),
    checked: T.boolean(false),
    value: T.string(""),
    name: T.string(""),
    disabled: T.boolean(false),
    required: T.boolean(false),
    indeterminate: T.boolean(false),
    size: T.string({
      defaultValue: "md",
      enum: ["xs", "sm", "md", "lg", "xl"],
    }),
    variant: T.string({
      defaultValue: "primary",
      enum: ["primary", "secondary", "success", "warning", "error"],
    }),
  },
  style: true,
  shadow: false,
  formAssociated: true,

  connected() {
    if (!this._internals) {
      this._internals = this.attachInternals();
    }
    this._updateFormValue();
    if (!this.id && !this._checkboxId) {
      this._checkboxId = generateId();
    }
  },

  get checkboxId() {
    return this.id || this._checkboxId || (this._checkboxId = generateId());
  },

  updated({ changedProps }) {
    if (changedProps.has("checked")) {
      this._updateFormValue();
    }
    // Handle indeterminate state
    if (changedProps.has("indeterminate")) {
      const input =
        this.shadowRoot?.querySelector("input") || this.querySelector("input");
      if (input) {
        input.indeterminate = this.indeterminate;
      }
    }
  },

  _updateFormValue() {
    if (this._internals) {
      this._internals.setFormValue(this.checked ? this.value || "on" : null);
    }
  },

  handleChange(e) {
    this.checked = e.target.checked;
    this.indeterminate = false;
    this._updateFormValue();
    this.emit("change", { checked: this.checked, value: this.value });
  },

  render() {
    const id = this.checkboxId;
    return html\`
      <input
        type="checkbox"
        id=\${id}
        class="checkbox"
        ?checked=\${this.checked}
        .indeterminate=\${this.indeterminate}
        value=\${this.value}
        name=\${this.name}
        ?disabled=\${this.disabled}
        ?required=\${this.required}
        @change=\${this.handleChange.bind(this)}
      />
      \${this.label ? html\`<uix-label inline for=\${id} text=\${this.label} ?required=\${this.required}></uix-label>\` : ""}
    \`;
  },
};

/**
 * Checkbox Component
 *
 * @component
 * @category form
 * @tag uix-checkbox
 *
 * A checkbox input for boolean selections with label support.
 *
 * @example
 * // Basic checkbox
 * \`\`\`html
 * <uix-checkbox label="Accept terms and conditions"></uix-checkbox>
 * \`\`\`
 *
 * @example
 * // Checked by default
 * \`\`\`html
 * <uix-checkbox checked label="Subscribe to newsletter"></uix-checkbox>
 * \`\`\`
 *
 * @example
 * // Size variants
 * \`\`\`html
 * <div style="display: flex; flex-direction: column; gap: 0.5rem;">
 *   <uix-checkbox size="xs" label="Extra small"></uix-checkbox>
 *   <uix-checkbox size="sm" label="Small"></uix-checkbox>
 *   <uix-checkbox size="md" checked label="Medium"></uix-checkbox>
 *   <uix-checkbox size="lg" label="Large"></uix-checkbox>
 *   <uix-checkbox size="xl" label="Extra large"></uix-checkbox>
 * </div>
 * \`\`\`
 *
 * @example
 * // Color variants
 * \`\`\`html
 * <div style="display: flex; flex-direction: column; gap: 0.5rem;">
 *   <uix-checkbox variant="primary" checked label="Primary"></uix-checkbox>
 *   <uix-checkbox variant="secondary" checked label="Secondary"></uix-checkbox>
 *   <uix-checkbox variant="success" checked label="Success"></uix-checkbox>
 *   <uix-checkbox variant="warning" checked label="Warning"></uix-checkbox>
 *   <uix-checkbox variant="error" checked label="Error"></uix-checkbox>
 * </div>
 * \`\`\`
 *
 * @example
 * // Indeterminate state
 * \`\`\`html
 * <uix-checkbox indeterminate label="Select all"></uix-checkbox>
 * \`\`\`
 *
 * @example
 * // Disabled state
 * \`\`\`html
 * <div style="display: flex; flex-direction: column; gap: 0.5rem;">
 *   <uix-checkbox disabled label="Disabled unchecked"></uix-checkbox>
 *   <uix-checkbox checked disabled label="Disabled checked"></uix-checkbox>
 * </div>
 * \`\`\`
 *
 * @example
 * // With event handling
 * \`\`\`js
 * html\`<uix-checkbox
 *   .checked=\${this.agreed}
 *   @change=\${(e) => this.agreed = e.detail.checked}
 *   label="I agree to the terms"
 * ></uix-checkbox>\`
 * \`\`\`
 *
 * @example
 * // In a form
 * \`\`\`html
 * <form>
 *   <uix-checkbox name="newsletter" value="yes" label="Subscribe to newsletter"></uix-checkbox>
 *   <uix-checkbox name="terms" value="accepted" required label="Accept terms"></uix-checkbox>
 *   <button type="submit">Submit</button>
 * </form>
 * \`\`\`
 */
`,mimeType:"text/javascript"},"/$app/uix/form/input.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

const generateId = () => \`uix-input-\${Math.random().toString(36).slice(2, 9)}\`;

export default {
  tag: "uix-input",
  properties: {
    label: T.string(),
    name: T.string(),
    id: T.string(),
    value: T.string(""),
    placeholder: T.string(""),
    type: T.string({
      defaultValue: "text",
      enum: ["text", "email", "tel", "url", "search", "password"],
    }),
    size: T.string({
      enum: ["xs", "sm", "md", "lg", "xl"],
    }),
    disabled: T.boolean(false),
    readonly: T.boolean(false),
    required: T.boolean(false),
    error: T.boolean(false),
    fullWidth: T.boolean(false),
    variant: T.string({
      defaultValue: "default",
      enum: ["default", "primary", "secondary", "success", "warning", "error"],
    }),
  },
  style: true,
  shadow: false,

  connected() {
    if (!this.id && !this._inputId) {
      this._inputId = generateId();
    }
  },

  getInputId() {
    return this.id || this._inputId || (this._inputId = generateId());
  },

  handleInput(e) {
    this.value = e.target.value;
    this.emit("input", { value: this.value });
  },

  handleChange(e) {
    this.value = e.target.value;
    this.emit("change", { value: this.value });
  },

  render() {
    const id = this.getInputId();
    return html\`
      \${this.label ? html\`<uix-label for=\${id} text=\${this.label} ?required=\${this.required}></uix-label>\` : ""}
      <input
        id=\${id}
        name=\${this.name ?? id}
        class="input"
        type=\${this.type}
        value=\${this.value}
        placeholder=\${this.placeholder}
        ?disabled=\${this.disabled}
        ?readonly=\${this.readonly}
        ?required=\${this.required}
        @input=\${this.handleInput.bind(this)}
        @change=\${this.handleChange.bind(this)}
      />
    \`;
  },
};

/**
 * Input Component
 *
 * @component
 * @category form
 * @tag uix-input
 *
 * Text input field with size variants matching button sizes for use in uix-join
 *
 * @example
 * // Basic input
 * \`\`\`html
 * <uix-input placeholder="Enter text..."></uix-input>
 * \`\`\`
 *
 * @example
 * // With sizes
 * \`\`\`html
 * <div style="display: flex; flex-direction: column; gap: 0.5rem;">
 *   <uix-input size="xs" placeholder="Extra small"></uix-input>
 *   <uix-input size="sm" placeholder="Small"></uix-input>
 *   <uix-input size="md" placeholder="Medium"></uix-input>
 *   <uix-input size="lg" placeholder="Large"></uix-input>
 *   <uix-input size="xl" placeholder="Extra large"></uix-input>
 * </div>
 * \`\`\`
 *
 * @example
 * // Different input types
 * \`\`\`html
 * <div style="display: flex; flex-direction: column; gap: 0.5rem;">
 *   <uix-input type="text" placeholder="Text"></uix-input>
 *   <uix-input type="email" placeholder="Email"></uix-input>
 *   <uix-input type="tel" placeholder="Phone"></uix-input>
 *   <uix-input type="url" placeholder="URL"></uix-input>
 *   <uix-input type="search" placeholder="Search"></uix-input>
 *   <uix-input type="password" placeholder="Password"></uix-input>
 * </div>
 * \`\`\`
 *
 * @example
 * // In button group with uix-join
 * \`\`\`html
 * <uix-join>
 *   <uix-input placeholder="Search..." size="md"></uix-input>
 *   <uix-button variant="primary" size="md">Search</uix-button>
 * </uix-join>
 * \`\`\`
 *
 * @example
 * // With binding
 * \`\`\`js
 * html\`<uix-input
 *   .value=\${this.searchQuery}
 *   @input=\${(e) => this.searchQuery = e.detail.value}
 *   placeholder="Search..."
 * ></uix-input>\`
 * \`\`\`
 *
 * @example
 * // States
 * \`\`\`html
 * <div style="display: flex; flex-direction: column; gap: 0.5rem;">
 *   <uix-input placeholder="Normal"></uix-input>
 *   <uix-input placeholder="Disabled" disabled></uix-input>
 *   <uix-input placeholder="Readonly" value="Read only text" readonly></uix-input>
 *   <uix-input placeholder="Required" required></uix-input>
 * </div>
 * \`\`\`
 */
`,mimeType:"text/javascript"},"/$app/admin/views/export.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";
import $APP from "/$app.js";

const convertToCSV = (data) => {
  if (!data || data.length === 0) return "";

  const headers = Object.keys(data[0]);
  const rows = data.map((obj) =>
    headers
      .map((header) => {
        const value = obj[header];
        if (value === null || value === undefined) return '""';
        if (typeof value === "object") return \`"\${JSON.stringify(value).replace(/"/g, '""')}"\`;
        const str = String(value);
        if (str.includes(",") || str.includes("\\n") || str.includes('"')) {
          return \`"\${str.replace(/"/g, '""')}"\`;
        }
        return str;
      })
      .join(","),
  );

  return [headers.join(","), ...rows].join("\\n");
};

const downloadFile = (content, fileName, mimeType) => {
  const blob = new Blob([content], { type: mimeType });
  const link = document.createElement("a");
  link.href = URL.createObjectURL(blob);
  link.download = fileName;
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
  URL.revokeObjectURL(link.href);
};

export default {
  tag: "admin-export",
  style: true,
  properties: {
    model: T.string(),
    rows: T.array(),
    exporting: T.boolean({ defaultValue: false }),
  },

  async exportData(format) {
    this.exporting = true;

    try {
      let data = this.rows;
      if (!data || data.length === 0) {
        data = await $APP.Model[this.model].getAll();
      }

      if (!data || data.length === 0) {
        alert("No data to export");
        this.exporting = false;
        return;
      }

      const timestamp = new Date().toISOString().split("T")[0];
      const fileName = \`\${this.model}-\${timestamp}\`;

      if (format === "CSV") {
        const csvContent = convertToCSV(data);
        downloadFile(csvContent, \`\${fileName}.csv\`, "text/csv;charset=utf-8");
      } else if (format === "JSON") {
        const jsonContent = JSON.stringify(data, null, 2);
        downloadFile(jsonContent, \`\${fileName}.json\`, "application/json");
      }
    } catch (error) {
      console.error("Export error:", error);
      alert(\`Export failed: \${error.message}\`);
    }

    this.exporting = false;
  },

  render() {
    return html\`
      <uix-button popovertarget="export-\${this.model}" ghost ?disabled=\${this.exporting}>
        <uix-icon name="download" size="18"></uix-icon>
        \${this.exporting ? "Exporting..." : "Export"}
      </uix-button>
      <uix-dropdown id="export-\${this.model}">
        <div class="admin-export-options">
          \${["CSV", "JSON"].map(
            (format) => html\`
              <button
                class="admin-export-option"
                @click=\${() => this.exportData(format)}
              >
                \${format}
              </button>
            \`,
          )}
        </div>
      </uix-dropdown>
    \`;
  },
};
`,mimeType:"text/javascript"},"/$app/uix/overlay/modal.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

export default {
  tag: "uix-modal",
  properties: {
    open: T.boolean(false),
    closeOnEscape: T.boolean(true),
    closeOnBackdropClick: T.boolean(true),
    size: T.string({ defaultValue: "md", enum: ["sm", "md", "lg", "xl"] }),
  },
  style: true,
  shadow: true,
  firstUpdated() {
    this.dialog = this.shadowRoot.querySelector("dialog");
    this.dialog.addEventListener("close", () => {
      this.open = false;
      this.emit("modal-close", { returnValue: this.dialog.returnValue });
    });
    this.dialog.addEventListener("cancel", (e) => {
      if (!this.closeOnEscape) {
        e.preventDefault();
      } else {
        this.emit("modal-cancel");
      }
    });
    this.dialog.addEventListener("click", (e) => {
      if (this.closeOnBackdropClick && e.target === this.dialog) {
        const rect = this.dialog.getBoundingClientRect();
        const isInDialog =
          rect.top <= e.clientY &&
          e.clientY <= rect.top + rect.height &&
          rect.left <= e.clientX &&
          e.clientX <= rect.left + rect.width;

        if (!isInDialog) this.close();
      }
    });

    const closeLinks = this.querySelectorAll("[data-close]");
    closeLinks.forEach((link) => {
      link.addEventListener("click", this.close.bind(this));
    });
  },
  updated({ changedProps }) {
    if (changedProps.has("open") && this.dialog) {
      if (this.open && !this.dialog.open) {
        this.showModal();
      } else if (!this.open && this.dialog.open) {
        this.dialog.close();
      }
    }
  },
  showModal() {
    if (this.dialog && !this.dialog.open) {
      this.dialog.showModal();
      this.open = true;
      this.emit("modal-open");
    }
  },
  show() {
    if (this.dialog && !this.dialog.open) {
      this.dialog.show();
      this.open = true;
      this.emit("modal-open");
    }
  },
  close(returnValue) {
    if (this.dialog?.open) {
      this.dialog.close(returnValue);
      this.open = false;
    }
  },
  render() {
    return html\`
      <slot name="trigger" @click=\${this.showModal.bind(this)}></slot>
      <dialog part="dialog">
        <div part="header" class="modal-header">
          <slot name="header"></slot>
          <button
            part="close-button"
            class="modal-close-button"
            @click=\${() => this.close()}
            aria-label="Close"
          >
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>
        <div part="body" class="modal-body">
          <slot></slot>
        </div>
        <slot part="footer" class="modal-footer" name="footer"></slot>
      </dialog>
    \`;
  },
};

/**
 * Modal Component
 *
 * @component
 * @category overlay
 * @tag uix-modal
 *
 * Modal dialog using native HTML dialog API with flexible trigger options
 *
 * @example
 * // Pattern 1: Modal with trigger button in slot
 * \`\`\`html
 * <uix-modal>
 *   <button slot="trigger">Open Modal</button>
 *   <h2 slot="header">Modal Title</h2>
 *   <p>Modal content goes here...</p>
 *   <div slot="footer">
 *     <uix-button data-close>Cancel</uix-button>
 *     <uix-button variant="primary">Confirm</uix-button>
 *   </div>
 * </uix-modal>
 * \`\`\`
 *
 * @example
 * // Pattern 2: Modal opened from external button
 * \`\`\`js
 * html\`<button @click=\${() => document.querySelector('#myModal').showModal()}>
 *   Open Modal
 * </button>
 *
 * <uix-modal id="myModal">
 *   <h2 slot="header">Delete Item</h2>
 *   <p>Are you sure you want to delete this item?</p>
 *   <div slot="footer">
 *     <uix-button @click=\${(e) => e.target.closest('uix-modal').close()}>
 *       Cancel
 *     </uix-button>
 *     <uix-button variant="danger" @click=\${this.handleDelete}>
 *       Delete
 *     </uix-button>
 *   </div>
 * </uix-modal>\`
 * \`\`\`
 *
 * @example
 *  Pattern 3: Controlled modal with open property
 * \`\`\`js
 * html\`<uix-modal
 *   .open=\${this.isModalOpen}
 *   @modal-close=\${() => this.isModalOpen = false}
 * >
 *   <h2 slot="header">Settings</h2>
 *   <p>Modal content...</p>
 *   <div slot="footer">
 *     <uix-button @click=\${() => this.isModalOpen = false}>Close</uix-button>
 *   </div>
 * </uix-modal>\`
 * \`\`\`
 *
 * @example
 * // With options
 * \`\`\`js
 * html\`<uix-modal
 *   .closeOnEscape=\${false}
 *   .closeOnBackdropClick=\${false}
 *   @modal-close=\${this.handleClose}
 * >
 *   <h2 slot="header">Important Notice</h2>
 *   <p>This modal cannot be closed by clicking outside or pressing Escape.</p>
 *   <div slot="footer">
 *     <uix-button @click=\${(e) => e.target.closest('uix-modal').close('confirmed')}>
 *       I Understand
 *     </uix-button>
 *   </div>
 * </uix-modal>\`
 * \`\`\`
 */
`,mimeType:"text/javascript"},"/$app/admin/views/import.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";
import $APP from "/$app.js";
import { getModelSchema } from "../utils/model-utils.js";

const readFile = (file) => {
  return new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.onload = (event) => resolve(event.target.result);
    reader.onerror = (error) => reject(error);
    reader.readAsText(file);
  });
};

const parseCSV = (csvData) => {
  const rows = csvData.trim().split("\\n");
  if (rows.length === 0) return [];

  const headers = rows[0].split(",").map((h) => h.trim().replace(/^"|"$/g, ""));

  return rows
    .slice(1)
    .map((row) => {
      const values = [];
      let current = "";
      let inQuotes = false;

      for (const char of row) {
        if (char === '"') {
          inQuotes = !inQuotes;
        } else if (char === "," && !inQuotes) {
          values.push(current.trim());
          current = "";
        } else {
          current += char;
        }
      }
      values.push(current.trim());

      return headers.reduce((object, header, index) => {
        let value = values[index] || "";
        value = value.replace(/^"|"$/g, "");
        object[header] = value;
        return object;
      }, {});
    })
    .filter((row) => Object.values(row).some((value) => value));
};

export default {
  tag: "admin-import",
  style: true,
  properties: {
    model: T.string(),
    modalOpen: T.boolean({ defaultValue: false }),
    fileType: T.string({ defaultValue: "" }),
    parsedData: T.array({ defaultValue: [] }),
    importing: T.boolean({ defaultValue: false }),
    csvFields: T.array({ defaultValue: [] }),
    fieldMapping: T.object({ defaultValue: {} }),
  },

  async handleFileSelect(e, fileType) {
    const file = e.target.files[0];
    if (!file) return;

    try {
      const content = await readFile(file);
      let data = [];

      if (fileType === "CSV") {
        data = parseCSV(content);
        if (data.length > 0) {
          this.csvFields = Object.keys(data[0]);
          const schema = getModelSchema(this.model);
          const mapping = {};
          schema.forEach((field) => {
            const match = this.csvFields.find(
              (csvField) => csvField.toLowerCase() === field.name.toLowerCase(),
            );
            if (match) {
              mapping[field.name] = match;
            }
          });
          this.fieldMapping = mapping;
        }
      } else if (fileType === "JSON") {
        data = JSON.parse(content);
        if (!Array.isArray(data)) {
          data = [data];
        }
      }

      this.parsedData = data;
      this.fileType = fileType;
      this.modalOpen = true;
    } catch (error) {
      console.error("Error parsing file:", error);
      alert(\`Error parsing file: \${error.message}\`);
    }

    e.target.value = "";
  },

  updateMapping(modelField, csvField) {
    this.fieldMapping = { ...this.fieldMapping, [modelField]: csvField };
  },

  async handleImport() {
    this.importing = true;
    let successCount = 0;
    let errorCount = 0;

    try {
      const data =
        this.fileType === "CSV"
          ? this.parsedData.map((row) => this.mapCsvRow(row))
          : this.parsedData;

      for (const item of data) {
        try {
          await $APP.Model[this.model].add(item);
          successCount++;
        } catch (error) {
          console.error("Error importing row:", error);
          errorCount++;
        }
      }

      alert(
        \`Import complete! \${successCount} records imported\${errorCount > 0 ? \`, \${errorCount} failed\` : ""}.\`,
      );
      this.closeModal();
    } catch (error) {
      console.error("Import error:", error);
      alert(\`Import failed: \${error.message}\`);
    }

    this.importing = false;
  },

  mapCsvRow(row) {
    const result = {};
    Object.entries(this.fieldMapping).forEach(([modelField, csvField]) => {
      if (csvField && row[csvField] !== undefined) {
        result[modelField] = row[csvField];
      }
    });
    return result;
  },

  closeModal() {
    this.modalOpen = false;
    this.parsedData = [];
    this.csvFields = [];
    this.fieldMapping = {};
    this.fileType = "";
  },

  render() {
    const schema = getModelSchema(this.model);

    return html\`
      <!-- Import Dropdown -->
      <uix-button popovertarget="import-\${this.model}" ghost>
        <uix-icon name="upload" size="18"></uix-icon>
        Import
      </uix-button>
      <uix-dropdown id="import-\${this.model}">
        <div class="admin-import-options">
          \${["CSV", "JSON"].map(
            (type) => html\`
              <label class="admin-import-option">
                \${type}
                <input
                  type="file"
                  accept=".\${type.toLowerCase()}"
                  @change=\${(e) => this.handleFileSelect(e, type)}
                  class="admin-import-file-input"
                />
              </label>
            \`,
          )}
        </div>
      </uix-dropdown>

      <!-- Import Modal -->
      <uix-modal
        ?open=\${this.modalOpen}
        @close=\${this.closeModal}
        title="Import \${this.fileType} - \${this.parsedData.length} records"
      >
        \${this.modalOpen
          ? html\`
              <div class="admin-import-content">
                \${this.fileType === "CSV" && this.csvFields.length > 0
                  ? html\`
                      <div class="admin-import-mapping">
                        <h3 class="admin-import-mapping-title">Map CSV columns to model fields:</h3>
                        <div class="admin-import-mapping-list">
                          \${schema
                            .filter((f) => f.name !== "id")
                            .map(
                              (field) => html\`
                                <div class="admin-import-mapping-row">
                                  <span class="admin-import-field-name">\${field.label || field.name}</span>
                                  <span class="admin-import-arrow">\u2192</span>
                                  <uix-select
                                    .value=\${this.fieldMapping[field.name] || ""}
                                    placeholder="-- Skip --"
                                    .options=\${this.csvFields.map((csvField) => ({
                                      value: csvField,
                                      label: csvField,
                                    }))}
                                    @change=\${(e) =>
                                      this.updateMapping(field.name, e.target.value)}
                                  ></uix-select>
                                </div>
                              \`,
                            )}
                        </div>
                      </div>
                    \`
                  : html\`
                      <div class="admin-import-preview">
                        <h3 class="admin-import-preview-title">Preview:</h3>
                        <pre class="admin-import-preview-code">\${JSON.stringify(this.parsedData.slice(0, 3), null, 2)}</pre>
                        \${this.parsedData.length > 3
                          ? html\`<p class="admin-import-preview-more">
                              ... and \${this.parsedData.length - 3} more records
                            </p>\`
                          : ""}
                      </div>
                    \`}
              </div>

              <div slot="footer" class="admin-import-footer">
                <uix-button ghost @click=\${this.closeModal}>
                  Cancel
                </uix-button>
                <uix-button
                  primary
                  @click=\${this.handleImport}
                  ?disabled=\${this.importing}
                >
                  \${this.importing ? "Importing..." : \`Import \${this.parsedData.length} records\`}
                </uix-button>
              </div>
            \`
          : ""}
      </uix-modal>
    \`;
  },
};
`,mimeType:"text/javascript"},"/$app/uix/display/data-table.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

export default {
  tag: "uix-data-table",
  style: true,
  properties: {
    "data-query": T.object(),
    columns: T.array(),
    rows: T.array(),
    selectRow: T.function(),
    emptyMessage: T.string({ defaultValue: "No data" }),
    // Pagination state
    page: T.number({ defaultValue: 1 }),
    limit: T.number({ defaultValue: 10 }),
    total: T.number({ defaultValue: 0 }),
    showPagination: T.boolean({ defaultValue: true }),
    // Sorting
    sortBy: T.string(),
    sortDir: T.string({ defaultValue: "asc" }),
  },

  handleDataLoaded(e) {
    const { total, limit, offset } = e.detail;
    this.total = total;
    this.limit = limit;
    this.offset = offset;
    this.totalPages = Math.ceil(this.total / this.limit) || 1;
  },

  handlePageChange(e) {
    const newPage = e.detail.page;
    this.page = newPage;
    // Update data-query to trigger re-fetch via uix-table
    this["data-query"] = {
      ...this["data-query"],
      limit: this.limit,
      offset: (newPage - 1) * this.limit,
    };
  },
  render() {
    return html\`
      <uix-table
        .data-query=\${{ ...this["data-query"], limit: this.limit }}
        .columns=\${this.columns}
        .selectRow=\${this.selectRow}
        @dataLoaded=\${this.handleDataLoaded}
      ></uix-table>
      \${
        this.showPagination && this.totalPages > 1
          ? html\`
            <uix-pagination
              .current=\${this.page}
              .total=\${this.totalPages}
              @change=\${this.handlePageChange}
            ></uix-pagination>
          \`
          : ""
      }
    \`;
  },
};
`,mimeType:"text/javascript"},"/$app/icon-lucide/lucide/layout-dashboard.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><rect width="7" height="9" x="3" y="3" rx="1"/><rect width="7" height="5" x="14" y="3" rx="1"/><rect width="7" height="9" x="14" y="12" rx="1"/><rect width="7" height="5" x="3" y="16" rx="1"/></g></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/package.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="m7.5 4.27l9 5.15M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/><path d="m3.3 7l8.7 5l8.7-5M12 22V12"/></g></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/palette.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="13.5" cy="6.5" r=".5" fill="currentColor"/><circle cx="17.5" cy="10.5" r=".5" fill="currentColor"/><circle cx="8.5" cy="7.5" r=".5" fill="currentColor"/><circle cx="6.5" cy="12.5" r=".5" fill="currentColor"/><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688c0-.437-.18-.835-.437-1.125c-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2"/></g></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/database.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M3 5v14a9 3 0 0 0 18 0V5"/><path d="M3 12a9 3 0 0 0 18 0"/></g></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/chevron-right.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 18l6-6l-6-6"/></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/chevron-left.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m15 18l-6-6l6-6"/></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/shield.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"/></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/sun.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="4"/><path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/></g></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/menu.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 12h16M4 6h16M4 18h16"/></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/search.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21l-4.3-4.3"/></g></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/bell.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9m4.3 13a1.94 1.94 0 0 0 3.4 0"/></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/settings.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2"/><circle cx="12" cy="12" r="3"/></g></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/puzzle.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.439 7.85c-.049.322.059.648.289.878l1.568 1.568c.47.47.706 1.087.706 1.704s-.235 1.233-.706 1.704l-1.611 1.611a.98.98 0 0 1-.837.276c-.47-.07-.802-.48-.968-.925a2.501 2.501 0 1 0-3.214 3.214c.446.166.855.497.925.968a.98.98 0 0 1-.276.837l-1.61 1.61a2.4 2.4 0 0 1-1.705.707a2.4 2.4 0 0 1-1.704-.706l-1.568-1.568a1.03 1.03 0 0 0-.877-.29c-.493.074-.84.504-1.02.968a2.5 2.5 0 1 1-3.237-3.237c.464-.18.894-.527.967-1.02a1.03 1.03 0 0 0-.289-.877l-1.568-1.568A2.4 2.4 0 0 1 1.998 12c0-.617.236-1.234.706-1.704L4.23 8.77c.24-.24.581-.353.917-.303c.515.077.877.528 1.073 1.01a2.5 2.5 0 1 0 3.259-3.259c-.482-.196-.933-.558-1.01-1.073c-.05-.336.062-.676.303-.917l1.525-1.525A2.4 2.4 0 0 1 12 1.998c.617 0 1.234.236 1.704.706l1.568 1.568c.23.23.556.338.877.29c.493-.074.84-.504 1.02-.968a2.5 2.5 0 1 1 3.237 3.237c-.464.18-.894.527-.967 1.02Z"/></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/columns-3.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M9 3v18m6-18v18"/></g></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/list.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"/></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/kanban.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 5v11m6-11v6m6-6v14"/></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/trash.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 6h18m-2 0v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6m3 0V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/plus.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14m-7-7v14"/></svg>',mimeType:"image/svg+xml"},"/$app/uix/display/button.css":{content:`:where(.uix-button,uix-button){display:inline-flex;align-items:center;justify-content:center;width:var(--button-width, fit-content);white-space:nowrap;box-sizing:border-box;&::part(anchor){border:0;background:transparent;color:var(--button-color, var(--text-color, inherit));text-decoration:none;display:flex;align-items:center;justify-content:center;width:100%;height:100%;font-family:inherit;font-size:inherit;line-height:inherit;padding:var(--button-padding-y, .5rem) var(--button-padding-x, 1rem)}font-family:inherit;font-weight:var(--button-font-weight, 700);font-size:var(--button-font-size, .875rem);line-height:var(--button-line-height, 1.5);text-align:center;gap:var(--button-gap, .5rem);border-radius:var(--button-border-radius, var(--radius-md, .375rem));border:var(--button-border-size, 0) solid var(--button-border-color, transparent);box-shadow:var(--button-shadow, none);text-decoration:none;padding:var(--spacing-sm, .5rem) var(--spacing-md, .75rem);cursor:pointer;text-transform:var(--button-text-transform, none);transition:var( --button-transition, transform .1s ease-in-out, background-color .2s ease-in-out, border-color .2s ease-in-out, box-shadow .15s ease-in-out, color .2s ease-in-out );background:transparent;user-select:none;background-color:var(--button-background, #000);color:var(--button-color, #fff);&:focus-visible{outline:2px solid var(--color-primary-dark);outline-offset:2px}&:not([disabled]):not([aria-disabled=true]):hover{background-color:var(--button-hover-background, var(--color-primary-dark));border-color:var( --button-hover-border-color, var(--button-border-color, transparent) );color:var(--button-hover-color, var(--button-color));box-shadow:var(--button-hover-shadow, var(--button-shadow, none));transform:translate(var(--button-hover-translate-x, 0),var(--button-hover-translate-y, 0))}&:not([disabled]):not([aria-disabled=true]):active{background-color:var( --button-active-background, var(--color-primary-darker) );box-shadow:var(--button-active-shadow, var(--button-shadow, none));transform:translate(var(--button-active-translate-x, 0),var(--button-active-translate-y, 0)) scale(.97)}&:not([variant],[primary],[secondary],[danger],[success],[warning]){--button-color: #fff;--button-background: #000;--button-border-color: #000;--button-hover-background: #222;--button-active-background: #222}&[primary],&[variant=primary]{--button-background: var(--color-primary);--button-border-color: var(--color-primary);--button-hover-background: var(--color-primary-dark);--button-active-background: var(--color-primary-darker)}&[secondary],&[variant=secondary]{--button-background: var(--color-secondary);--button-border-color: var(--color-secondary);--button-hover-background: var(--color-secondary-dark);--button-active-background: var(--color-secondary-darker)}&[danger],&[variant=danger]{--button-background: var(--color-danger);--button-border-color: var(--color-danger);--button-hover-background: var(--color-danger-dark);--button-active-background: var(--color-danger-darker)}&[success],&[variant=success]{--button-background: var(--color-success);--button-border-color: var(--color-success);--button-hover-background: var(--color-success-dark);--button-active-background: var(--color-success-darker)}&[warning],&[variant=warning]{--button-background: var(--color-warning);--button-border-color: var(--color-warning);--button-hover-background: var(--color-warning-dark);--button-active-background: var(--color-warning-darker)}&[bordered]{--button-border-size: 1px}&[outline]{--button-background: transparent;--button-border-size: 1px;--button-color: var(--text-color);--button-hover-color: var(--color-surface-lighter);&[primary]{--button-border-color: var(--color-primary-dark);--button-hover-background: var(--color-primary);--button-hover-border-color: var(--color-primary)}&[secondary]{--button-border-color: var(--color-secondary-dark);--button-hover-background: var(--color-secondary);--button-hover-border-color: var(--color-secondary)}&[danger]{--button-border-color: var(--color-danger-dark);--button-hover-background: var(--color-danger);--button-hover-border-color: var(--color-danger)}&[success]{--button-border-color: var(--color-success-dark);--button-hover-background: var(--color-success);--button-hover-border-color: var(--color-success)}}&[ghost]{--button-background: transparent;--button-border-color: transparent;--button-color: var(--text-color);--button-hover-background: var(--color-surface-light);--button-hover-color: var(--text-color);&[primary]{--button-hover-background: color-mix( in srgb, var(--color-primary), transparent 85% );--button-hover-color: var(--color-primary-darker)}&[secondary]{--button-hover-background: color-mix( in srgb, var(--color-secondary), transparent 85% );--button-hover-color: var(--color-secondary-darker)}&[danger]{--button-hover-background: color-mix( in srgb, var(--color-danger), transparent 85% );--button-hover-color: var(--color-danger-darker)}&[success]{--button-hover-background: color-mix( in srgb, var(--color-success), transparent 85% );--button-hover-color: var(--color-success-darker)}}&[size=xs]{--button-padding-y: .2rem;--button-padding-x: .5rem;--button-font-size: .6rem;--button-line-height: 1rem;--button-gap: .25rem}&[size=sm]{--button-padding-y: .3rem;--button-padding-x: .8rem;--button-font-size: .8rem;--button-line-height: 1.25rem;--button-gap: .375rem}&[size=md]{--button-padding-y: .4rem;--button-padding-x: 1.25rem;--button-font-size: .9rem;--button-line-height: 1.5rem;--button-gap: .5rem}&[size=lg]{--button-padding-y: .5rem;--button-padding-x: 1.5rem;--button-font-size: 1.1rem;--button-line-height: 1.75rem;--button-gap: .625rem}&[size=xl]{--button-padding-y: .625rem;--button-padding-x: 2rem;--button-font-size: 1.25rem;--button-line-height: 2rem;--button-gap: .75rem}&[w-full],&[wfull]{width:100%;display:flex}}
`,mimeType:"text/css"},"/$app/uix/overlay/modal.css":{content:`:where(.uix-modal,uix-modal){display:inline-block;&::part(dialog){background:var(--modal-background, #ffffff);border:var(--modal-border-width, 1px) solid var(--modal-border-color, #e5e7eb);border-radius:var(--modal-border-radius, .75rem);box-shadow:var(--modal-shadow, 0 25px 50px -12px rgb(0 0 0 / .25));padding:0;width:var(--modal-width, 90vw);max-width:var(--modal-max-width, 600px);color:var(--modal-color, #1a1a1a);&::backdrop{background:var(--modal-overlay, rgba(0, 0, 0, .5));backdrop-filter:blur(2px)}}&[size=sm]{--modal-max-width: 400px}&[size=md]{--modal-max-width: 600px}&[size=lg]{--modal-max-width: 800px}&[size=xl]{--modal-max-width: 1000px}@media (max-width: 639px){&::part(dialog){width:100%;max-width:100%;height:100%;max-height:100%;margin:0;border-radius:0;border:none;box-shadow:none}&::part(body){max-height:none;flex:1;overflow-y:auto}}&::part(header){display:flex;align-items:center;justify-content:space-between;padding:var(--modal-header-padding, 1.25rem 1.5rem);border-bottom:var(--modal-header-border-width, 1px) solid var(--modal-border-color, #e5e7eb);background:var(--modal-header-background, transparent);font-size:var(--modal-header-font-size, 1.125rem);font-weight:var(--modal-header-font-weight, 700);color:var(--modal-header-color, #1a1a1a);&:empty{display:none}}&::part(close-button){display:flex;align-items:center;justify-content:center;width:2rem;height:2rem;padding:0;border:none;background:transparent;color:var(--modal-close-color, #6b7280);cursor:pointer;border-radius:.375rem;transition:background-color .15s,color .15s;flex-shrink:0;&:hover{background:var(--modal-close-hover-bg, #f3f4f6);color:var(--modal-close-hover-color, #1a1a1a)}}&::part(body){padding:var(--modal-body-padding, 1.5rem);color:var(--modal-body-color, #4b5563);font-size:var(--text-base, 1rem);line-height:1.5;overflow-y:auto;max-height:60vh}&::part(footer),[slot=footer]{padding:var(--modal-footer-padding, 1rem 1.5rem);border-top:var(--modal-footer-border-width, 1px) solid var(--modal-border-color, #e5e7eb);background:var(--modal-footer-background, #f9fafb);&:empty{display:none}}[slot=trigger]{cursor:pointer}[slot=footer]{display:flex;gap:.75rem;justify-content:flex-end;align-items:center}}
`,mimeType:"text/css"},"/$app/uix/form/input.css":{content:`:where(.uix-input,uix-input){display:inline-block;width:var(--input-width, auto);box-sizing:border-box;.input-label{display:block;font-size:var(--input-label-font-size, var(--text-sm, .875rem));font-weight:var(--input-label-font-weight, var(--font-semibold, 600));margin-bottom:var(--input-label-margin, .5rem);color:var(--input-label-color, var(--text-color, #1a1a1a));letter-spacing:var(--input-label-letter-spacing, 0);text-transform:var(--input-label-text-transform, none)}.input-required{color:var(--color-danger, #ef4444);margin-left:.25rem}input{width:100%;height:var(--input-height, 3rem);padding:var(--input-padding-y, .5rem) var(--input-padding-x, .75rem);font-size:var(--input-font-size, var(--text-sm, .9rem));font-weight:var(--input-font-weight, var(--font-normal, 400));line-height:var(--input-line-height, 1.5rem);font-family:inherit;color:var(--input-color, var(--text-color, inherit));box-sizing:border-box;background:var(--input-background, var(--color-surface-light, #ffffff));border:var(--input-border-width, 1px) solid var(--input-border-color, var(--color-surface, #e5e7eb));border-radius:var(--input-border-radius, var(--radius-md, .375rem));box-shadow:var(--input-shadow, none);outline:none;transition:var( --input-transition, border-color .2s ease, background-color .2s ease, box-shadow .15s ease );&::placeholder{color:var(--input-placeholder-color, var(--text-muted, #9ca3af));opacity:1}&:hover:not(:focus):not(:disabled){border-color:var(--input-hover-border-color, var(--color-primary-light))}&:focus{border-color:var(--input-focus-border-color, var(--color-primary));background:var(--input-focus-background, var(--input-background));box-shadow:var(--input-focus-shadow, 0 0 0 3px rgba(250, 189, 47, .1))}&:disabled{opacity:var(--input-disabled-opacity, .6);background:var(--input-disabled-background, var(--color-surface-dark));color:var(--input-disabled-color, var(--text-muted));cursor:not-allowed}&:read-only{background:var(--input-readonly-background, var(--color-surface-dark));cursor:default}}&[size=xs]{--input-height: 1.5rem;--input-padding-y: .2rem;--input-padding-x: .5rem;--input-font-size: var(--text-xs, .75rem);--input-line-height: 1rem;--input-icon-size: .75rem}&[size=sm]{--input-height: 2rem;--input-padding-y: .3rem;--input-padding-x: .6rem;--input-font-size: var(--text-sm, .875rem);--input-line-height: 1.25rem;--input-icon-size: .875rem}&[size=md]{--input-height: 2.5rem;--input-padding-y: .5rem;--input-padding-x: .75rem;--input-font-size: var(--text-base, 1rem);--input-line-height: 1.5rem;--input-icon-size: 1rem}&[size=lg]{--input-height: 3rem;--input-padding-y: .625rem;--input-padding-x: 1rem;--input-font-size: var(--text-lg, 1.125rem);--input-line-height: 1.75rem;--input-icon-size: 1.25rem}&[size=xl]{--input-height: 3.5rem;--input-padding-y: .75rem;--input-padding-x: 1.25rem;--input-font-size: var(--text-xl, 1.25rem);--input-line-height: 2rem;--input-icon-size: 1.5rem}&[required] input{border-left:3px solid var(--input-required-color, var(--color-warning))}&[error]{--input-border-color: var(--color-danger);--input-focus-border-color: var(--color-danger);--input-focus-shadow: 0 0 0 3px rgba(251, 73, 52, .1)}&[success]{--input-border-color: var(--color-success);--input-focus-border-color: var(--color-success);--input-focus-shadow: 0 0 0 3px rgba(34, 197, 94, .1)}&[variant=primary]{--input-border-color: var(--color-primary);--input-focus-border-color: var(--color-primary)}&[variant=secondary]{--input-border-color: var(--color-secondary);--input-focus-border-color: var(--color-secondary)}&[variant=success]{--input-border-color: var(--color-success);--input-focus-border-color: var(--color-success);--input-focus-shadow: 0 0 0 3px rgba(34, 197, 94, .1)}&[variant=warning]{--input-border-color: var(--color-warning);--input-focus-border-color: var(--color-warning);--input-focus-shadow: 0 0 0 3px rgba(249, 115, 22, .1)}&[variant=error]{--input-border-color: var(--color-danger);--input-focus-border-color: var(--color-danger);--input-focus-shadow: 0 0 0 3px rgba(251, 73, 52, .1)}&[w-full],&[wfull]{width:100%;display:block}&:has(.uix-icon){position:relative;.uix-icon{position:absolute;top:50%;transform:translateY(-50%);right:var(--input-icon-offset, .75rem);width:var(--input-icon-size, 1rem);height:var(--input-icon-size, 1rem);color:var(--input-icon-color, var(--text-muted));pointer-events:none}input{padding-right:calc(var(--input-icon-size, 1rem) + var(--input-icon-offset, .75rem) * 2)}}&:has(.uix-icon[left]){.uix-icon{left:var(--input-icon-offset, .75rem);right:auto}input{padding-left:calc(var(--input-icon-size, 1rem) + var(--input-icon-offset, .75rem) * 2);padding-right:var(--input-padding-x, .75rem)}}}
`,mimeType:"text/css"},"/$app/uix/overlay/popover-controller.js":{content:`import T from "/$app/types/index.js";

export default {
  tag: "uix-popover-controller",
  i18n: {},
  properties: {
    position: T.string("bottom-left"),
    open: T.boolean(false),
    offset: T.number(4),
  },
  style: true,

  connected() {
    this._triggerElement = null;
    this._boundDocumentClick = this._handleDocumentClick.bind(this);

    // Set initial state
    if (!this.open) {
      this.style.display = "none";
    }
  },

  disconnected() {
    this._removeDocumentListener();
    this._stopPositionTracking();
  },

  _calculatePosition(triggerElement) {
    if (!triggerElement) return { top: 0, left: 0 };

    const triggerRect = triggerElement.getBoundingClientRect();
    const popoverRect = this.getBoundingClientRect();
    const offset = this.offset || 4;

    let top = 0;
    let left = 0;

    const position = this.position || "bottom-left";

    // Vertical positioning
    if (position.includes("bottom")) {
      top = triggerRect.bottom + offset;
    } else if (position.includes("top")) {
      top = triggerRect.top - popoverRect.height - offset;
    } else {
      // Default to bottom
      top = triggerRect.bottom + offset;
    }

    // Horizontal positioning
    if (
      position.includes("left") ||
      position === "bottom" ||
      position === "top"
    ) {
      left = triggerRect.left;
    } else if (position.includes("right")) {
      left = triggerRect.right - popoverRect.width;
    } else if (position === "left") {
      left = triggerRect.left - popoverRect.width - offset;
    } else if (position === "right") {
      left = triggerRect.right + offset;
    } else {
      left = triggerRect.left;
    }

    // Keep within viewport
    const viewportWidth = window.innerWidth;
    const viewportHeight = window.innerHeight;

    if (left + popoverRect.width > viewportWidth) {
      left = viewportWidth - popoverRect.width - 8;
    }
    if (left < 8) {
      left = 8;
    }
    if (top + popoverRect.height > viewportHeight) {
      top = viewportHeight - popoverRect.height - 8;
    }
    if (top < 8) {
      top = 8;
    }

    return { top, left };
  },

  _updatePosition() {
    if (!this._triggerElement) return;

    const pos = this._calculatePosition(this._triggerElement);
    this.style.top = \`\${pos.top}px\`;
    this.style.left = \`\${pos.left}px\`;
  },

  _open(triggerElement) {
    if (this.open) return;

    this._triggerElement = triggerElement;
    this.open = true;
    this.style.display = "";
    this.setAttribute("data-open", "");

    // Start position tracking loop
    this._startPositionTracking();

    this._addDocumentListener();

    this.dispatchEvent(new CustomEvent("popover-open", { bubbles: true }));
  },

  _close() {
    if (!this.open) return;

    this.open = false;
    this.style.display = "none";
    this.removeAttribute("data-open");
    this._removeDocumentListener();
    this._stopPositionTracking();
    this._triggerElement = null;

    this.dispatchEvent(new CustomEvent("popover-close", { bubbles: true }));
  },

  toggle(triggerElement) {
    if (this.open) {
      this._close();
    } else {
      this._open(triggerElement);
    }
  },

  _addDocumentListener() {
    // Use capture phase to handle clicks before they bubble
    document.addEventListener("click", this._boundDocumentClick, true);
  },

  _removeDocumentListener() {
    document.removeEventListener("click", this._boundDocumentClick, true);
  },

  _startPositionTracking() {
    // Use requestAnimationFrame to continuously update position
    this._trackingFrame = null;

    const track = () => {
      if (this.open && this._triggerElement) {
        this._updatePosition();
        this._trackingFrame = requestAnimationFrame(track);
      }
    };

    // Start tracking
    this._trackingFrame = requestAnimationFrame(track);
  },

  _stopPositionTracking() {
    if (this._trackingFrame) {
      cancelAnimationFrame(this._trackingFrame);
      this._trackingFrame = null;
    }
  },

  _handleDocumentClick(e) {
    // Don't close if clicking inside the popover
    if (this.contains(e.target)) {
      return;
    }

    // Don't close if clicking the trigger element or its shadow host
    if (this._triggerElement) {
      // Check if click is on the trigger element itself
      if (this._triggerElement.contains(e.target)) {
        return;
      }

      // Check if click is on the shadow host (uix-button/uix-link)
      const shadowHost = this._triggerElement.getRootNode()?.host;
      if (
        shadowHost &&
        (shadowHost === e.target || shadowHost.contains(e.target))
      ) {
        return;
      }
    }

    // Close popover
    this._close();
  },
};

/**
 * Copyright (c) Alan Carlos Meira Leal
 *
 * UIX Popover Controller
 * Base component for popover-style overlays (dropdown, tooltip, etc.)
 * Handles positioning, open/close state, and click-outside behavior.
 *
 * @slot - Default slot for popover content
 *
 * @property {string} position - Positioning relative to trigger (top, bottom, left, right, top-left, top-right, bottom-left, bottom-right)
 * @property {boolean} open - Current open state
 * @property {number} offset - Distance in pixels from trigger (default 4)
 *
 * @fires popover-open - Fired when popover opens
 * @fires popover-close - Fired when popover closes
 *
 * @example Extending this component
 * \`\`\`javascript
 * export default {
 *   extends: "uix-popover-controller",
 *   // Add your custom behavior
 * }
 * \`\`\`
 */
`,mimeType:"text/javascript"},"/$app/uix/form/checkbox.css":{content:`:where(.uix-checkbox,uix-checkbox){display:inline-flex;align-items:center;gap:var(--checkbox-gap, .5rem);&:has(.checkbox:disabled){cursor:not-allowed;opacity:.6}.checkbox{appearance:none;width:var(--checkbox-size, 1.5rem);height:var(--checkbox-size, 1.5rem);border:var(--checkbox-border-width, 2px) solid var(--checkbox-border-color, var(--color-primary));border-radius:var(--checkbox-border-radius, var(--radius-md, .375rem));background-color:var(--checkbox-background-color, var(--color-surface));box-shadow:var(--checkbox-shadow, none);cursor:pointer;transition:background-color .2s ease,border-color .2s ease,box-shadow .2s ease,transform .1s ease;position:relative;flex-shrink:0;&:hover:not(:disabled){border-color:var(--checkbox-hover-border-color, var(--color-primary))}&:checked{background-color:var(--checkbox-checked-background-color, var(--color-primary));border-color:var(--checkbox-checked-border-color, var(--color-primary));&:after{content:"";position:absolute;left:30%;top:10%;width:30%;height:60%;border:solid white;border-width:0 2px 2px 0;transform:rotate(45deg)}}&:indeterminate{background-color:var(--checkbox-checked-background-color, var(--color-primary));border-color:var(--checkbox-checked-border-color, var(--color-primary));&:after{content:"";position:absolute;left:20%;top:45%;width:60%;height:2px;background-color:#fff}}&:focus-visible{outline:2px solid var(--checkbox-focus-outline-color, var(--color-primary));outline-offset:2px}&:disabled{cursor:not-allowed;background-color:var(--checkbox-disabled-background-color, var(--color-subtle))}}.checkbox-label{color:var(--checkbox-label-color, var(--text-color));font-size:var(--checkbox-label-font-size, var(--text-base, 1rem));font-weight:var(--checkbox-label-font-weight, var(--font-medium, 500));line-height:var(--leading-normal, 1.5);cursor:pointer;user-select:none}.checkbox-required{color:var(--color-danger, #ef4444);margin-left:.25rem}&[size=xs]{--checkbox-size: 1rem;--checkbox-label-font-size: var(--text-xs, .75rem);--checkbox-gap: .375rem}&[size=sm]{--checkbox-size: 1.25rem;--checkbox-label-font-size: var(--text-sm, .875rem);--checkbox-gap: .5rem}&[size=md]{--checkbox-size: 1.5rem;--checkbox-label-font-size: var(--text-base, 1rem);--checkbox-gap: .5rem}&[size=lg]{--checkbox-size: 1.75rem;--checkbox-label-font-size: var(--text-lg, 1.125rem);--checkbox-gap: .625rem}&[size=xl]{--checkbox-size: 2rem;--checkbox-label-font-size: var(--text-xl, 1.25rem);--checkbox-gap: .75rem}&[variant=primary] .checkbox:checked,&[variant=primary] .checkbox:indeterminate{--checkbox-checked-background-color: var(--color-primary);--checkbox-checked-border-color: var(--color-primary)}&[variant=secondary] .checkbox:checked,&[variant=secondary] .checkbox:indeterminate{--checkbox-checked-background-color: var(--color-secondary);--checkbox-checked-border-color: var(--color-secondary)}&[variant=success] .checkbox:checked,&[variant=success] .checkbox:indeterminate{--checkbox-checked-background-color: var(--color-success);--checkbox-checked-border-color: var(--color-success)}&[variant=warning] .checkbox:checked,&[variant=warning] .checkbox:indeterminate{--checkbox-checked-background-color: var(--color-warning);--checkbox-checked-border-color: var(--color-warning)}&[variant=error] .checkbox:checked,&[variant=error] .checkbox:indeterminate{--checkbox-checked-background-color: var(--color-danger);--checkbox-checked-border-color: var(--color-danger)}}
`,mimeType:"text/css"},"/$app/admin/views/export.css":{content:`.admin-export-options{padding:var(--admin-export-options-padding, .25rem)}.admin-export-option{display:block;width:100%;padding:var(--admin-export-option-padding, .5rem 1rem);border:none;background:none;text-align:left;cursor:pointer;transition:background-color .15s ease}.admin-export-option:hover{background:var(--admin-export-option-hover, #f3f4f6)}.admin-export-option:first-child{border-radius:.5rem .5rem 0 0}.admin-export-option:last-child{border-radius:0 0 .5rem .5rem}
`,mimeType:"text/css"},"/$app/admin/views/import.css":{content:`.admin-import-options{padding:var(--admin-import-options-padding, .25rem)}.admin-import-option{display:block;padding:var(--admin-import-option-padding, .5rem 1rem);cursor:pointer;transition:background-color .15s ease}.admin-import-option:hover{background:var(--admin-import-option-hover, #f3f4f6)}.admin-import-option:first-child{border-radius:.5rem .5rem 0 0}.admin-import-option:last-child{border-radius:0 0 .5rem .5rem}.admin-import-file-input{display:none}.admin-import-content{margin-bottom:var(--admin-import-content-margin, 1rem)}.admin-import-mapping{margin-bottom:var(--admin-import-mapping-margin, 1.5rem)}.admin-import-mapping-title{font-weight:700;margin:0 0 1rem}.admin-import-mapping-list{display:flex;flex-direction:column;gap:var(--admin-import-mapping-gap, 1rem)}.admin-import-mapping-row{display:flex;align-items:center;gap:var(--admin-import-mapping-row-gap, 1rem)}.admin-import-field-name{width:var(--admin-import-field-name-width, 8rem);font-weight:500}.admin-import-arrow{color:var(--admin-import-arrow-color, #9ca3af)}.admin-import-mapping-row uix-select{flex:1}.admin-import-preview{margin-bottom:var(--admin-import-preview-margin, 1.5rem)}.admin-import-preview-title{font-weight:700;margin:0 0 .5rem}.admin-import-preview-code{padding:var(--admin-import-preview-code-padding, 1rem);background:var(--admin-import-preview-code-bg, #f3f4f6);border-radius:var(--admin-import-preview-code-radius, .75rem);font-size:.875rem;overflow-x:auto;max-height:var(--admin-import-preview-max-height, 16rem);margin:0}.admin-import-preview-more{font-size:.875rem;color:var(--admin-import-preview-more-color, #6b7280);margin:.5rem 0 0}.admin-import-footer{display:flex;justify-content:flex-end;gap:var(--admin-import-footer-gap, 1rem)}
`,mimeType:"text/css"},"/$app/uix/display/data-table.css":{content:`:where(.uix-data-table,uix-data-table){display:block;width:var(--data-table-width, 100%);uix-pagination{margin-top:var(--data-table-pagination-margin, 1rem);justify-content:var(--data-table-pagination-justify, flex-end)}}.uix-data-table__empty{padding:var(--data-table-empty-padding, 2rem);text-align:center;color:var(--data-table-empty-color, #6b7280)}
`,mimeType:"text/css"},"/$app/icon-lucide/lucide/download.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4m4-5l5 5l5-5m-5 5V3"/></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/upload.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4m14-7l-5-5l-5 5m5-5v12"/></svg>',mimeType:"image/svg+xml"},"/$app/uix/display/table.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

const TypesRenderers = {
  [String]: (content) => content,
  [Boolean]: (content) =>
    content ? html\`<uix-icon name="check"></uix-icon>\` : null,
};

export default {
  tag: "uix-table",
  style: true,
  dataQuery: true,
  properties: {
    columns: T.array({ defaultValue: [] }),
    rows: T.array({ defaultValue: [] }),
    selectRow: T.function(),
  },
  render() {
    return html\`
      <table>
        <thead>
          <tr>
            \${this.columns.map(
              (column) => html\`
                <th>\${column.name || column.label || column}</th>
              \`,
            )}
          </tr>
        </thead>
        <tbody>
          \${this.rows?.map(
            (row) => html\`
              <tr
                class=\${this.selectRow ? "clickable" : ""}
                @click=\${this.selectRow ? (e) => this.selectRow(row, e) : null}
              >
                \${this.columns.map((column) => {
                  const name = typeof column === "string" ? column : column.name;
                  const columnType =
                    typeof column === "string" ? "string" : column.type;
                  return html\`
                    <td>
                      \${TypesRenderers[columnType]?.call(null, row[name]) ??
                      row[name]}
                    </td>
                  \`;
                })}
              </tr>
            \`,
          )}
        </tbody>
      </table>
    \`;
  },
};
`,mimeType:"text/javascript"},"/$app/uix/overlay/popover-controller.css":{content:`:where(.uix-popover-controller,uix-popover-controller){position:fixed;z-index:10000;display:none;&[data-open]{display:flex;flex-direction:column}}
`,mimeType:"text/css"},"/$app/uix/overlay/dropdown.css":{content:`:where(.uix-dropdown,uix-dropdown){&[data-open]{display:flex;flex-direction:column;min-width:var(--dropdown-min-width, 200px);max-width:var(--dropdown-max-width, 400px);background:var(--color-surface-darker, #282828);color:var(--text-color, default);padding:var(--spacing-xs, .25rem);gap:2px}&[variant=elevated][data-open]{background:var(--color-surface-light, #3c3836)}&[variant=primary][data-open]{background:var(--color-primary, #fabd2f);color:var(--color-surface-darker, #282828)}&[variant=card][data-open]{background:var(--color-surface-dark, #32302f)}&[rounded][data-open]{border-radius:var(--radius-md, .375rem)}&[bordered][data-open]{border:1px solid var(--color-surface, #504945)}&[shadow][data-open]{box-shadow:0 8px 16px #0000004d,0 2px 4px #0003}>*{padding:var(--spacing-sm, .5rem) var(--spacing-md, .75rem);color:inherit;text-decoration:none;display:block;border-radius:var(--radius-sm, .25rem);transition:background-color .15s ease,color .15s ease;cursor:pointer;white-space:nowrap;font-size:var(--text-sm, .875rem);line-height:1.5;&:hover{background-color:var( --color-surface-dark, rgba(255, 255, 255, .1) )}&:focus{background-color:var( --color-surface-dark, rgba(255, 255, 255, .1) );outline:2px solid var(--color-primary, #fabd2f);outline-offset:-2px}&:active{background-color:var(--color-primary, #fabd2f);color:var(--color-surface-darker, #282828)}&:disabled,&[disabled]{opacity:.5;cursor:not-allowed;pointer-events:none}uix-icon{margin-right:var(--spacing-xs, .25rem);vertical-align:middle}>*{pointer-events:none}}>hr{border:none;border-top:1px solid var(--color-surface-dark, rgba(80, 73, 69, .5));margin:var(--spacing-xs, .25rem) 0;padding:0}>.dropdown-header,>[role=heading]{padding:var(--spacing-xs, .25rem) var(--spacing-md, .75rem);font-size:var(--text-xs, .75rem);font-weight:600;color:var(--text-muted, #a89984);text-transform:uppercase;letter-spacing:.05em;cursor:default;&:hover{background-color:transparent}}}
`,mimeType:"text/css"},"/$app/uix/display/table.css":{content:`:where(.uix-table,uix-table){display:block;width:100%;table{width:100%;border-collapse:separate;border-spacing:0;border:var(--table-border-width, 1px) solid var(--table-border-color, #e5e7eb);border-radius:var(--table-border-radius, .5rem);box-shadow:var(--table-shadow, none);overflow:hidden}thead{background-color:var(--table-header-background, #f9fafb)}th{padding:var(--table-cell-padding, 1rem);text-align:left;font-weight:var(--table-header-font-weight, 600);font-size:var(--table-header-font-size, .75rem);text-transform:var(--table-header-text-transform, uppercase);color:var(--table-header-color, #374151);letter-spacing:.05em;border-bottom:var(--table-border-width, 1px) solid var(--table-border-color, #e5e7eb)}tbody tr{background-color:var(--table-row-background, #ffffff);transition:background-color .15s ease}tbody tr:hover{background-color:var(--table-row-hover-background, #f3f4f6)}tbody tr.clickable{cursor:pointer}td{padding:var(--table-cell-padding, 1rem);font-size:var(--table-cell-font-size, .875rem);color:var(--table-cell-color, #4b5563);border-bottom:1px solid var(--table-border-color, #e5e7eb)}tbody tr:last-child td{border-bottom:none}}
`,mimeType:"text/css"},"/$app/bundler/views/ui.js":{content:`import Bundler from "/$app/bundler/index.js";
import T from "/$app/types/index.js";
import $APP from "/$app.js";
import { html } from "/npm/lit-html";

$APP.define("credentials-manager", {
  dataQuery: true,
  properties: {
    row: T.object(),
  },
  render() {
    if (!this.row)
      return html\`<div class="bundler-loading">Loading credentials...</div>\`;

    return html\`
      <uix-card shadow="none" borderWidth="0">
        <h2 slot="header">GitHub Credentials</h2>
        <div class="bundler-form-grid">
          <uix-input
            label="Owner"
            .value=\${this.row.owner}
            @change=\${(e) => (this.row.owner = e.target.value)}
          ></uix-input>
          <uix-input
            label="Repository"
            .value=\${this.row.repo}
            @change=\${(e) => (this.row.repo = e.target.value)}
          ></uix-input>
          <uix-input
            label="Branch"
            .value=\${this.row.branch}
            @change=\${(e) => (this.row.branch = e.target.value)}
          ></uix-input>
          <uix-input
            label="GitHub Token"
            type="password"
            .value=\${this.row.token}
            @change=\${(e) => (this.row.token = e.target.value)}
          ></uix-input>
        </div>
        <div slot="footer">
          <uix-button
            @click=\${() => $APP.Model.bundler_credentials.edit({ ...this.row })}
            label="Save Credentials"
          ></uix-button>
        </div>
      </uix-card>
    \`;
  },
});

$APP.define("cloudflare-credentials-manager", {
  dataQuery: true,
  properties: {
    row: T.object(),
  },
  render() {
    if (!this.row)
      return html\`<div class="bundler-loading">Loading credentials...</div>\`;
    if (!this.row.cloudflare) this.row.cloudflare = {};
    return html\`
      <uix-card shadow="none" borderWidth="0">
        <h2 slot="header">Cloudflare Credentials</h2>
        <div class="bundler-form-grid">
          <uix-input
            label="Account ID"
            .value=\${this.row.cloudflare.accountId}
            @change=\${(e) => (this.row.cloudflare.accountId = e.target.value)}
          ></uix-input>
          <uix-input
            label="Pages Project Name"
            .value=\${this.row.cloudflare.projectName}
            @change=\${(e) => (this.row.cloudflare.projectName = e.target.value)}
          ></uix-input>
          <uix-input
            class="bundler-full-width"
            label="API Token"
            type="password"
            .value=\${this.row.cloudflare.apiToken}
            @change=\${(e) => (this.row.cloudflare.apiToken = e.target.value)}
          ></uix-input>
        </div>
        <p class="bundler-help-text">
          The bundler will automatically create a Cloudflare Pages project if one with the given name doesn't exist.
        </p>
        <div slot="footer">
          <uix-button
            @click=\${() => $APP.Model.bundler_credentials.edit({ ...this.row, cloudflare: this.row.cloudflare })}
            label="Save Cloudflare Credentials"
          ></uix-button>
        </div>
      </uix-card>
    \`;
  },
});

$APP.define("release-creator", {
  properties: {
    version: T.string(\`v\${new Date().toISOString().slice(0, 10)}\`),
    notes: T.string(""),
    deployMode: T.string("hybrid"),
    deployTarget: T.string("github"),
    isDeploying: T.boolean(false),
  },

  getTargetOptions() {
    const targets = Bundler.getTargets();
    return targets.map((t) => ({
      value: t.name,
      label: t.label,
    }));
  },

  getModeOptions() {
    // When cloudflare target is selected, only worker mode makes sense
    if (this.deployTarget === "cloudflare") {
      return [{ value: "worker", label: "Cloudflare Workers" }];
    }
    return [
      { value: "spa", label: "SPA" },
      { value: "ssg", label: "SSG" },
      { value: "hybrid", label: "Hybrid" },
    ];
  },

  needsCredentials() {
    // ZIP, TAR.GZ, and localhost don't need credentials
    return !["zip", "targz", "localhost"].includes(this.deployTarget);
  },

  async handleDeploy() {
    if (this.isDeploying) return;

    this.isDeploying = true;
    const credentials = await $APP.Model.bundler_credentials.get("singleton");

    // Validate credentials for targets that need them
    if (this.needsCredentials()) {
      if (this.deployTarget === "cloudflare") {
        if (
          !credentials?.cloudflare?.apiToken ||
          !credentials?.cloudflare?.accountId ||
          !credentials?.cloudflare?.projectName
        ) {
          alert(
            "Please provide your Cloudflare Account ID, API Token, and a Project Name before deploying.",
          );
          this.isDeploying = false;
          return;
        }
      } else if (this.deployTarget === "github") {
        if (!credentials || !credentials.token) {
          alert("Please provide a GitHub token before deploying.");
          this.isDeploying = false;
          return;
        }
      }
    }
    const release = {
      version: this.version,
      notes: this.notes,
      status: "pending",
      deployedAt: Date.now(),
      deployType: this.deployMode,
      deployTarget: this.deployTarget,
    };
    try {
      const [error, newRelease] =
        await $APP.Model.bundler_releases.add(release);
      const result = await Bundler.deploy({
        ...credentials,
        mode: this.deployMode,
        target: this.deployTarget,
        version: this.version,
      });
      await $APP.Model.bundler_releases.edit({
        ...newRelease,
        status: "success",
        result,
      });

      const targetLabel =
        Bundler.getTargets().find((t) => t.name === this.deployTarget)?.label ||
        this.deployTarget;
      alert(\`Deployment to \${targetLabel} successful!\`);
    } catch (error) {
      console.error(\`Deployment failed:\`, { error });
      console.trace();
      alert(\`Deployment failed: \${error.message}\`);
      if (release?._id) {
        await $APP.Model.bundler_releases.add({
          ...release,
          status: "failed",
          error: error.message,
        });
      }
    } finally {
      this.isDeploying = false;
    }
  },

  render() {
    const targetOptions = this.getTargetOptions();
    const modeOptions = this.getModeOptions();

    // Auto-switch to worker mode when cloudflare is selected
    if (this.deployTarget === "cloudflare" && this.deployMode !== "worker") {
      this.deployMode = "worker";
    }
    // Switch away from worker mode when not cloudflare
    if (this.deployTarget !== "cloudflare" && this.deployMode === "worker") {
      this.deployMode = "hybrid";
    }

    return html\`
      <uix-card shadow="none" borderWidth="0">
        <h2 slot="header">New Release</h2>
        <div class="bundler-form">
          <uix-input
            label="Version"
            .value=\${this.version}
            @change=\${(e) => (this.version = e.target.value)}
          ></uix-input>
          <uix-textarea
            label="Release Notes"
            .value=\${this.notes}
            @change=\${(e) => (this.notes = e.target.value)}
          ></uix-textarea>
          <uix-checkbox
            ?checked=\${!!$APP.settings.obfuscate}
            @change=\${(e) => ($APP.settings.obfuscate = e.target.checked)}
            label="Obfuscate"
          ></uix-checkbox>
        </div>
        <div class="bundler-deploy-row">
          <uix-select
            label="Build Mode"
            value=\${this.deployMode}
            .options=\${modeOptions}
            @change=\${(e) => (this.deployMode = e.target.value)}
          >
          </uix-select>
          <uix-select
            label="Deploy Target"
            value=\${this.deployTarget}
            .options=\${targetOptions}
            @change=\${(e) => (this.deployTarget = e.target.value)}
          >
          </uix-select>
          <uix-button
            @click=\${() => this.handleDeploy()}
            label=\${this.isDeploying ? \`Deploying...\` : "Deploy"}
            ?disabled=\${this.isDeploying}
          ></uix-button>
        </div>
        \${
          !this.needsCredentials()
            ? html\`<p class="bundler-help-text">This target downloads directly to your browser - no credentials needed.</p>\`
            : ""
        }
      </uix-card>
    \`;
  },
});

$APP.define("release-history", {
  dataQuery: true,
  properties: {
    rows: T.array(),
    limit: T.number(0),
  },
  render() {
    let sortedRows = this.rows?.length
      ? [...this.rows].sort(
          (a, b) => new Date(b.deployedAt) - new Date(a.deployedAt),
        )
      : [];

    if (this.limit > 0) {
      sortedRows = sortedRows.slice(0, this.limit);
    }

    return html\`
      <uix-card shadow="none" borderWidth="0">
        <h2 slot="header">Release History</h2>
        <div class="bundler-releases">
          \${
            sortedRows.length > 0
              ? sortedRows.map(
                  (release) => html\`
                  <div class="bundler-release bundler-release-\${release.status}">
                    <div class="bundler-release-row">
                      <span class="bundler-release-version">\${release.version}</span>
                      <span class="bundler-release-status">\${release.status}</span>
                      \${
                        release.deployType
                          ? html\`<span class="bundler-release-type">\${release.deployType.toUpperCase()}</span>\`
                          : ""
                      }
                      \${
                        release.deployTarget
                          ? html\`<span class="bundler-release-target">\${release.deployTarget}</span>\`
                          : ""
                      }
                      <span class="bundler-release-date">\${new Date(release.deployedAt).toLocaleString()}</span>
                    </div>
                    \${
                      release.notes
                        ? html\`<p class="bundler-release-notes">\${release.notes}</p>\`
                        : ""
                    }
                  </div>
                \`,
                )
              : html\`<p class="bundler-empty">No releases yet.</p>\`
          }
        </div>
      </uix-card>
    \`;
  },
});

$APP.define("settings-editor", {
  properties: {
    _settings: T.object(null),
  },
  connected() {
    this._settings = $APP.settings;
  },
  async handleSave() {
    try {
      await $APP.settings.set(this._settings);
      alert("Settings saved successfully!");
    } catch (error) {
      console.error("Failed to save settings:", error);
      alert("Error saving settings. Check the console for details.");
    }
  },
  render() {
    if (!this._settings) {
      return html\`<div class="bundler-loading">Loading settings...</div>\`;
    }
    return html\`
      <uix-card shadow="none" borderWidth="0">
        <h2 slot="header">App Settings</h2>
        <div class="bundler-form-grid">
          <uix-input
            label="App Name"
            .value=\${this._settings.name}
            @change=\${(e) => (this._settings.name = e.target.value)}
          ></uix-input>
          <uix-input
            label="Short Name"
            .value=\${this._settings.short_name}
            @change=\${(e) => (this._settings.short_name = e.target.value)}
          ></uix-input>
          <uix-input
            label="Emoji Icon"
            .value=\${this._settings.emojiIcon}
            @change=\${(e) => (this._settings.emojiIcon = e.target.value)}
          ></uix-input>
          <uix-input
            label="Icon"
            .value=\${this._settings.icon}
            @change=\${(e) => (this._settings.icon = e.target.value)}
          ></uix-input>
          <uix-input
            label="Start URL"
            .value=\${this._settings.url}
            @change=\${(e) => (this._settings.url = e.target.value)}
          ></uix-input>
          <uix-input
            label="Theme Color"
            type="color"
            .value=\${this._settings.theme_color}
            @change=\${(e) => (this._settings.theme_color = e.target.value)}
          ></uix-input>
          <uix-input
            class="bundler-full-width"
            label="Open Graph Image URL"
            .value=\${this._settings.og_image}
            @change=\${(e) => (this._settings.og_image = e.target.value)}
          ></uix-input>
          <uix-textarea
            class="bundler-full-width"
            label="Description"
            .value=\${this._settings.description}
            @change=\${(e) => (this._settings.description = e.target.value)}
          ></uix-textarea>
        </div>
        <div slot="footer">
          <uix-button
            @click=\${this.handleSave.bind(this)}
            label="Save Settings"
          ></uix-button>
        </div>
      </uix-card>
    \`;
  },
});

export default {
  tag: "bundler-ui",
  style: true,
  properties: {
    activeTab: T.number(0),
    releaseStats: T.object({
      defaultValue: {
        total: 0,
        success: 0,
        failed: 0,
        pending: 0,
        lastDeploy: null,
      },
    }),
    releases: T.array(),
  },

  async connected() {
    await this.loadStats();
  },

  async loadStats() {
    try {
      const releases = await $APP.Model.bundler_releases.getAll();
      this.releases = releases || [];
      this.releaseStats = {
        total: this.releases.length,
        success: this.releases.filter((r) => r.status === "success").length,
        failed: this.releases.filter((r) => r.status === "failed").length,
        pending: this.releases.filter((r) => r.status === "pending").length,
        lastDeploy:
          this.releases.length > 0
            ? [...this.releases].sort(
                (a, b) => new Date(b.deployedAt) - new Date(a.deployedAt),
              )[0]?.deployedAt
            : null,
      };
    } catch (error) {
      console.error("Failed to load release stats:", error);
    }
  },

  formatDate(date) {
    if (!date) return "Never";
    return new Date(date).toLocaleDateString();
  },

  render() {
    return html\`
      <div class="bundler-ui">
        <h1 class="bundler-page-title">Release Manager</h1>
        <uix-tabs .activeTab=\${this.activeTab} @tab-change=\${(e) => (this.activeTab = e.detail)}>
          <button slot="tab"><uix-icon name="layout-dashboard"></uix-icon> Dashboard</button>
          <button slot="tab"><uix-icon name="settings"></uix-icon> Settings</button>
          <button slot="tab"><uix-icon name="rocket"></uix-icon> Deploy</button>
          <button slot="tab"><uix-icon name="key"></uix-icon> Credentials</button>

          <div slot="panel">\${this.renderDashboard()}</div>
          <div slot="panel">\${this.renderSettings()}</div>
          <div slot="panel">\${this.renderDeploy()}</div>
          <div slot="panel">\${this.renderCredentials()}</div>
        </uix-tabs>
      </div>
    \`;
  },

  renderDashboard() {
    return html\`
      <div class="bundler-dashboard">
        <div class="bundler-stats-grid">
          <uix-card shadow="none" borderWidth="0">
            <uix-stat title="Total Releases" value=\${this.releaseStats.total} centered>
              <uix-icon slot="figure" name="package" size="xl"></uix-icon>
            </uix-stat>
          </uix-card>
          <uix-card shadow="none" borderWidth="0">
            <uix-stat title="Successful" value=\${this.releaseStats.success} variant="success" centered>
              <uix-icon slot="figure" name="circle-check" size="xl"></uix-icon>
            </uix-stat>
          </uix-card>
          <uix-card shadow="none" borderWidth="0">
            <uix-stat title="Failed" value=\${this.releaseStats.failed} variant="danger" centered>
              <uix-icon slot="figure" name="circle-x" size="xl"></uix-icon>
            </uix-stat>
          </uix-card>
          <uix-card shadow="none" borderWidth="0">
            <uix-stat title="Last Deploy" value=\${this.formatDate(this.releaseStats.lastDeploy)} centered>
              <uix-icon slot="figure" name="clock" size="xl"></uix-icon>
            </uix-stat>
          </uix-card>
        </div>

        <uix-card shadow="none" borderWidth="0">
          <h3 slot="header">Quick Actions</h3>
          <div class="bundler-quick-actions">
            <uix-button @click=\${() => (this.activeTab = 2)}>
              <uix-icon name="rocket"></uix-icon> Deploy Now
            </uix-button>
            <uix-button @click=\${() => (this.activeTab = 1)}>
              <uix-icon name="settings"></uix-icon> Settings
            </uix-button>
            <uix-button @click=\${() => this.loadStats()}>
              <uix-icon name="refresh-cw"></uix-icon> Refresh
            </uix-button>
          </div>
        </uix-card>

        <release-history
          .data-query=\${{ model: "bundler_releases", order: "-deployedAt", key: "rows", limit: 10 }}
        ></release-history>
      </div>
    \`;
  },

  renderSettings() {
    return html\`
      <div class="bundler-tab-content">
        <settings-editor></settings-editor>
      </div>
    \`;
  },

  renderDeploy() {
    return html\`
      <div class="bundler-tab-content bundler-deploy-content">
        <release-creator></release-creator>
        <release-history
          .data-query=\${{ model: "bundler_releases", order: "-deployedAt", key: "rows", limit: 10 }}
        ></release-history>
      </div>
    \`;
  },

  renderCredentials() {
    return html\`
      <div class="bundler-tab-content bundler-credentials-content">
        <credentials-manager
          .data-query=\${{ model: "bundler_credentials", id: "singleton", key: "row" }}
        ></credentials-manager>
        <cloudflare-credentials-manager
          .data-query=\${{ model: "bundler_credentials", id: "singleton", key: "row" }}
        ></cloudflare-credentials-manager>
      </div>
    \`;
  },
};
`,mimeType:"text/javascript"},"/$app/bundler/views/ui.css":{content:`.bundler-ui{display:flex;flex-direction:column;gap:1.5rem;padding:1.5rem;min-height:100%}.bundler-page-title{font-size:2rem;font-weight:800;color:var(--text-color, #111);margin:0}.bundler-tab-content{display:flex;flex-direction:column;gap:1.5rem}.bundler-deploy-content{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem}@media (max-width: 1024px){.bundler-deploy-content{grid-template-columns:1fr}}.bundler-credentials-content{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem}@media (max-width: 1024px){.bundler-credentials-content{grid-template-columns:1fr}}.bundler-dashboard{display:flex;flex-direction:column;gap:1.5rem}.bundler-stats-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem}@media (max-width: 1024px){.bundler-stats-grid{grid-template-columns:repeat(2,1fr)}}@media (max-width: 640px){.bundler-stats-grid{grid-template-columns:1fr}}.bundler-quick-actions{display:flex;gap:1rem;flex-wrap:wrap}.bundler-form{display:flex;flex-direction:column;gap:1rem}.bundler-form-grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem}@media (max-width: 640px){.bundler-form-grid{grid-template-columns:1fr}}.bundler-full-width{grid-column:span 2}@media (max-width: 640px){.bundler-full-width{grid-column:span 1}}.bundler-deploy-row{display:flex;align-items:flex-end;gap:1rem;margin-top:1rem}.bundler-deploy-row uix-select{flex:1}.bundler-help-text{font-size:.875rem;color:var(--text-muted, #6b7280);margin:.5rem 0 0}.bundler-loading{text-align:center;padding:1rem;color:var(--text-muted, #6b7280)}.bundler-empty{text-align:center;padding:1rem;color:var(--text-muted, #6b7280);margin:0}.bundler-releases{display:flex;flex-direction:column;gap:.75rem}.bundler-release{padding:.75rem;border-radius:var(--radius-md, .375rem)}.bundler-release-success{background:var(--color-success-lighter, #d1fae5)}.bundler-release-failed{background:var(--color-danger-lighter, #fee2e2)}.bundler-release-pending{background:var(--color-warning-lighter, #fef3c7)}.bundler-release-row{display:flex;align-items:center;gap:.75rem;flex-wrap:wrap}.bundler-release-version{font-weight:600;color:var(--text-color, #111)}.bundler-release-status{font-size:.875rem}.bundler-release-type{font-size:.75rem;font-family:monospace;padding:.125rem .5rem;background:var(--color-surface, #fff);border-radius:var(--radius-sm, .25rem);color:var(--text-muted, #6b7280)}.bundler-release-date{font-size:.875rem;color:var(--text-muted, #6b7280);margin-left:auto}.bundler-release-notes{font-size:.875rem;color:var(--text-color, #374151);margin:.5rem 0 0}
`,mimeType:"text/css"},"/$app/uix/navigation/tabs.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

export default {
  tag: "uix-tabs",
  properties: {
    activeTab: T.number(0),
    variant: T.string({
      defaultValue: "default",
      enum: ["default", "pills", "underline"],
    }),
    vertical: T.boolean(),
  },
  style: true,
  shadow: true,

  firstUpdated() {
    const slot = this.shadowRoot.querySelector("slot[name=panel]");
    slot.addEventListener("slotchange", () => {
      this.updateActivePanels();
    });
  },

  updateActivePanels() {
    const panelSlot = this.shadowRoot.querySelector("slot[name=panel]");
    const tabSlot = this.shadowRoot.querySelector("slot[name=tab]");

    if (!panelSlot) return;

    const panels = panelSlot.assignedNodes({ flatten: true });
    const tabs = tabSlot?.assignedElements() || [];

    // Update panel visibility
    if (panels.length > 1) {
      panels.forEach((panel, index) => {
        if (index === this.activeTab) {
          panel.removeAttribute("hide");
        } else {
          panel.setAttribute("hide", "");
        }
      });
    }

    // Update tab active state
    tabs.forEach((tab, index) => {
      if (index === this.activeTab) {
        tab.setAttribute("active", "");
      } else {
        tab.removeAttribute("active");
      }
    });
  },

  selectTab(e) {
    const clickedElement = e.target;
    const slot = clickedElement.assignedSlot;
    if (slot && slot.name === "tab") {
      const tabs = slot.assignedElements();
      const index = tabs.indexOf(clickedElement);
      this.activeTab = index;
      this.updateActivePanels();
      this.emit("tab-change", index);
    }
  },

  render() {
    return html\`
        <div
          part="tab-list"
          role="tablist"
          aria-orientation=\${this.vertical ? "vertical" : "horizontal"}
        >
          <slot name="tab" part="tab" @click=\${this.selectTab.bind(this)}></slot>
        </div>
        <slot part="tab-panel" name="panel" part="panel"></slot>
     
    \`;
  },
};

/**
 * Tabs Component
 *
 * @component
 * @category navigation
 * @tag uix-tabs
 *
 * Accessible tabs with keyboard navigation and flexible content
 *
 * @example
 * // Pattern 1: Static tabs with multiple panels (each panel rendered separately)
 * \`\`\`html
 * <uix-tabs activeTab=2>
 *   <button slot="tab">Profile</button>
 *   <button slot="tab">Settings</button>
 *   <button slot="tab">Account</button>
 *
 *   <div slot="panel">Profile content...</div>
 *   <div slot="panel">Settings content...</div>
 *   <div slot="panel">Account content...</div>
 * </uix-tabs>
 * \`\`\`
 *
 * @example
 * // Pattern 2: Dynamic tabs with single panel (content switches based on active tab)
 * \`\`\`js
 * html\`<uix-tabs>
 *   \${sections.map(section => html\`
 *     <button slot="tab">
 *       <uix-icon name=\${section.icon}></uix-icon>
 *       \${section.label}
 *     </button>
 *   \`)}
 *   <div slot="panel">
 *     \${sections[this.activeTab].render()}
 *   </div>
 * </uix-tabs>\`
 * \`\`\`
 * @example
 * // With variants
 *
 * \`\`\`html
 * <uix-tabs variant="pills">
 *   <button slot="tab">Tab 1</button>
 *   <button slot="tab">Tab 2</button>
 *   <div slot="panel">Panel 1</div>
 *   <div slot="panel">Panel 2</div>
 * </uix-tabs>
 * \`\`\`
 *
 * @example
 * // Vertical orientation
 * \`\`\`html
 * <uix-tabs vertical variant="underline">
 *   <button slot="tab">Navigation</button>
 *   <button slot="tab">Content</button>
 *   <div slot="panel">Nav content</div>
 *   <div slot="panel">Main content</div>
 * </uix-tabs>
 * \`\`\`
 * @example
 * // Controlled with property binding
 * \`\`\`js
 * html\`<uix-tabs .activeTab=\${this.currentTab} @tab-change=\${this.handleTabChange}>
 *   <button slot="tab">First</button>
 *   <button slot="tab">Second</button>
 *   <div slot="panel">First panel</div>
 *   <div slot="panel">Second panel</div>
 * </uix-tabs>\`
 */
`,mimeType:"text/javascript"},"/$app/uix/layout/card.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

export default {
  extends: "uix-container",
  i18n: {},
  style: true,
  shadow: true,
  properties: {
    borderWidth: T.string({
      defaultValue: "1",
      enum: ["none", "1", "2", "3"],
    }),
    borderStyle: T.string({
      defaultValue: "solid",
      enum: ["solid", "dashed", "dotted"],
    }),
    shadow: T.string({
      defaultValue: "none",
      enum: ["none", "sm", "md", "lg"],
    }),
    hover: T.boolean({
      defaultValue: false,
    }),
    gap: T.string({
      defaultValue: "md",
      enum: ["none", "xs", "sm", "md", "lg", "xl"],
    }),
  },
  render() {
    return html\`
      <slot name="header" part="header"></slot>
      <slot part="body"><slot></slot></slot>
      
      <slot part="footer" name="footer"></slot>
    \`;
  },
};

/**
 * Copyright (c) Alan Carlos Meira Leal
 *
 * Card Component
 *
 * @component
 * @category layout
 * @tag uix-card
 *
 * A versatile container component for displaying grouped content with optional
 * header and footer sections. Supports different variants and padding options.
 *
 * @slot header - Optional header content
 * @slot - Default slot for card body content
 * @slot footer - Optional footer content
 * @part header - The card header container
 * @part body - The card body container
 * @part footer - The card footer container
 *
 * @example Basic Card
 * \`\`\`html
 * <uix-card>
 *   <h3 slot="header">Card Title</h3>
 *   <p>Card content goes here...</p>
 * </uix-card>
 * \`\`\`
 *
 * @example Card with Footer
 * \`\`\`html
 * <uix-card>
 *   <header slot="header"><h3 class="flex">User Profile</h3></header>
 *   <article>
 *     <p>John Doe</p>
 *     <p>Software Engineer</p>
 *   </article>
 *   <footer slot="footer">
 *     <uix-button primary>Edit</uix-button>
 *     <uix-button>Cancel</uix-button>
 *   </footer>
 * </uix-card>
 * \`\`\`
 *
 * @example Card Variants
 * \`\`\`html
 * <div class="flex flex-row gap-2">
 *  <uix-card variant="default">Default Card</uix-card>
 *  <uix-card variant="elevated">Elevated Card</uix-card>
 * </div>
 * \`\`\`
 *
 * @example Card Padding Options
 * \`\`\`html
 * <div class="flex flex-row gap-2">
 *  <uix-card padding="none">No Padding</uix-card>
 *  <uix-card padding="sm">Small Padding</uix-card>
 *  <uix-card padding="md">Medium Padding</uix-card>
 *  <uix-card padding="lg">Large Padding</uix-card>
 * </div>
 * \`\`\`
 */
`,mimeType:"text/javascript"},"/$app/uix/display/stat.js":{content:`import T from "/$app/types/index.js";
import { html, nothing } from "/npm/lit-html";

export default {
  tag: "uix-stat",
  properties: {
    title: T.string(""),
    value: T.any(""),
    desc: T.string(""),
    size: T.string({
      defaultValue: "md",
      enum: ["sm", "md", "lg"],
    }),
    variant: T.string({
      defaultValue: "default",
      enum: [
        "default",
        "primary",
        "secondary",
        "success",
        "danger",
        "warning",
        "info",
      ],
    }),
    centered: T.boolean(false),
  },
  style: true,
  shadow: true,

  render() {
    return html\`
      <div part="figure">
        <slot name="figure"></slot>
      </div>
      <div part="body">
        \${this.title ? html\`<div part="title">\${this.title}</div>\` : nothing}
        \${this.value !== "" ? html\`<div part="value">\${this.value}</div>\` : nothing}
        <div part="desc">
          \${this.desc ? this.desc : html\`<slot></slot>\`}
        </div>
      </div>
    \`;
  },
};

/**
 * Stat Component
 *
 * @component
 * @category display
 * @tag uix-stat
 *
 * Display statistics with title, value, and description in a clean format.
 * Supports icons/figures and works great when grouped with uix-join.
 *
 * @slot default - Description content below the value
 * @slot figure - Icon, avatar, or image to display alongside the stat
 *
 * @part figure - Container for the figure slot
 * @part body - Container for title, value, and description
 * @part title - The stat title/label
 * @part value - The main stat value (hero element)
 * @part desc - Description text below the value
 *
 * @example
 * // Basic stat
 * \`\`\`html
 * <uix-stat title="Total Users" value="1,234"></uix-stat>
 * \`\`\`
 *
 * @example
 * // With description
 * \`\`\`html
 * <uix-stat title="Downloads" value="31K" desc="Jan 1st - Feb 1st"></uix-stat>
 * \`\`\`
 *
 * @example
 * // With icon figure
 * \`\`\`html
 * <uix-stat title="Total Likes" value="25.6K" variant="primary">
 *   <uix-icon slot="figure" name="heart" size="lg"></uix-icon>
 *   21% more than last month
 * </uix-stat>
 * \`\`\`
 *
 * @example
 * // With colored variants
 * \`\`\`html
 * <uix-stat title="Active" value="85" variant="success">\u2191 12%</uix-stat>
 * <uix-stat title="Errors" value="3" variant="danger">\u2193 5%</uix-stat>
 * \`\`\`
 *
 * @example
 * // Grouped stats with uix-join
 * \`\`\`html
 * <uix-join>
 *   <uix-stat title="Downloads" value="31K">Jan 1st - Feb 1st</uix-stat>
 *   <uix-stat title="New Users" value="4,200">\u2191 400 (22%)</uix-stat>
 *   <uix-stat title="New Registers" value="1,200">\u2193 90 (14%)</uix-stat>
 * </uix-join>
 * \`\`\`
 *
 * @example
 * // Stats with icons grouped
 * \`\`\`html
 * <uix-join>
 *   <uix-stat title="Total Likes" value="25.6K" variant="primary">
 *     <uix-icon slot="figure" name="heart"></uix-icon>
 *     21% more than last month
 *   </uix-stat>
 *   <uix-stat title="Page Views" value="2.6M" variant="secondary">
 *     <uix-icon slot="figure" name="zap"></uix-icon>
 *     21% more than last month
 *   </uix-stat>
 * </uix-join>
 * \`\`\`
 *
 * @example
 * // Centered stats
 * \`\`\`html
 * <uix-join>
 *   <uix-stat title="Passed" value="85" variant="success" centered></uix-stat>
 *   <uix-stat title="Failed" value="3" variant="danger" centered></uix-stat>
 *   <uix-stat title="Pending" value="12" variant="warning" centered></uix-stat>
 * </uix-join>
 * \`\`\`
 */
`,mimeType:"text/javascript"},"/$app/icon-lucide/lucide/circle-x.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m15 9l-6 6m0-6l6 6"/></g></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/circle-check.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m9 12l2 2l4-4"/></g></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/key.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="m15.5 7.5l2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4m2-2l-9.6 9.6"/><circle cx="7.5" cy="15.5" r="5.5"/></g></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/clock.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></g></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/refresh-cw.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M3 12a9 9 0 0 1 9-9a9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5m5 4a9 9 0 0 1-9 9a9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></g></svg>',mimeType:"image/svg+xml"},"/$app/icon-lucide/lucide/rocket.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09M12 15l-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.4 22.4 0 0 1-4 2"/><path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0m1 7v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"/></g></svg>',mimeType:"image/svg+xml"},"/$app/uix/form/textarea.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

const generateId = () => \`uix-textarea-\${Math.random().toString(36).slice(2, 9)}\`;

export default {
  tag: "uix-textarea",
  properties: {
    label: T.string(),
    id: T.string(),
    value: T.string(""),
    placeholder: T.string(""),
    rows: T.number({ defaultValue: 4 }),
    cols: T.number({ defaultValue: 50 }),
    size: T.string({
      defaultValue: "md",
      enum: ["xs", "sm", "md", "lg", "xl"],
    }),
    disabled: T.boolean(false),
    readonly: T.boolean(false),
    required: T.boolean(false),
    maxlength: T.number({ defaultValue: null }),
    minlength: T.number({ defaultValue: null }),
    resize: T.string({
      defaultValue: "vertical",
      enum: ["none", "both", "horizontal", "vertical"],
    }),
    error: T.boolean(false),
    fullWidth: T.boolean(false),
    variant: T.string({
      defaultValue: "default",
      enum: ["default", "primary", "secondary", "success", "warning", "error"],
    }),
    name: T.string(),
  },
  style: true,
  shadow: false,
  formAssociated: true,

  connected() {
    if (!this._internals) {
      this._internals = this.attachInternals();
    }
    this._internals.setFormValue(this.value);
    if (!this.id && !this._textareaId) {
      this._textareaId = generateId();
    }
  },

  get textareaId() {
    return this.id || this._textareaId || (this._textareaId = generateId());
  },

  handleInput(e) {
    this.value = e.target.value;
    this._internals?.setFormValue(this.value);
    this.emit("input", { value: this.value });
  },

  handleChange(e) {
    this.value = e.target.value;
    this._internals?.setFormValue(this.value);
    this.emit("change", { value: this.value });
  },

  render() {
    const id = this.textareaId;
    const attrs = {};
    if (this.maxlength !== null) attrs.maxlength = this.maxlength;
    if (this.minlength !== null) attrs.minlength = this.minlength;

    return html\`
      \${this.label ? html\`<uix-label for=\${id} text=\${this.label} ?required=\${this.required}></uix-label>\` : ""}
      <textarea
        id=\${id}
        class="textarea"
        name=\${this.name}
        value=\${this.value}
        placeholder=\${this.placeholder}
        rows=\${this.rows}
        cols=\${this.cols}
        ?disabled=\${this.disabled}
        ?readonly=\${this.readonly}
        ?required=\${this.required}
        @input=\${this.handleInput.bind(this)}
        @change=\${this.handleChange.bind(this)}
      ></textarea>
    \`;
  },
};

/**
 * Textarea Component
 *
 * @component
 * @category form
 * @tag uix-textarea
 *
 * Multi-line text input field with size variants and resize options.
 *
 * @example
 * // Basic textarea
 * \`\`\`html
 * <uix-textarea placeholder="Enter your message..."></uix-textarea>
 * \`\`\`
 *
 * @example
 * // With custom rows
 * \`\`\`html
 * <uix-textarea rows="8" placeholder="Long message..."></uix-textarea>
 * \`\`\`
 *
 * @example
 * // Size variants
 * \`\`\`html
 * <div style="display: flex; flex-direction: column; gap: 0.5rem;">
 *   <uix-textarea size="xs" placeholder="Extra small" rows="2"></uix-textarea>
 *   <uix-textarea size="sm" placeholder="Small" rows="3"></uix-textarea>
 *   <uix-textarea size="md" placeholder="Medium" rows="4"></uix-textarea>
 *   <uix-textarea size="lg" placeholder="Large" rows="5"></uix-textarea>
 *   <uix-textarea size="xl" placeholder="Extra large" rows="6"></uix-textarea>
 * </div>
 * \`\`\`
 *
 * @example
 * // Resize options
 * \`\`\`html
 * <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
 *   <uix-textarea resize="none" placeholder="No resize"></uix-textarea>
 *   <uix-textarea resize="vertical" placeholder="Vertical resize"></uix-textarea>
 *   <uix-textarea resize="horizontal" placeholder="Horizontal resize"></uix-textarea>
 *   <uix-textarea resize="both" placeholder="Both resize"></uix-textarea>
 * </div>
 * \`\`\`
 *
 * @example
 * // With character limit
 * \`\`\`html
 * <uix-textarea maxlength="200" placeholder="Max 200 characters"></uix-textarea>
 * \`\`\`
 *
 * @example
 * // States
 * \`\`\`html
 * <div style="display: flex; flex-direction: column; gap: 0.5rem;">
 *   <uix-textarea placeholder="Normal"></uix-textarea>
 *   <uix-textarea placeholder="Disabled" disabled></uix-textarea>
 *   <uix-textarea placeholder="Readonly" value="Read only text" readonly></uix-textarea>
 *   <uix-textarea placeholder="Required" required></uix-textarea>
 * </div>
 * \`\`\`
 *
 * @example
 * // With binding
 * \`\`\`js
 * html\`<uix-textarea
 *   .value=\${this.message}
 *   @input=\${(e) => this.message = e.detail.value}
 *   placeholder="Type your message..."
 * ></uix-textarea>\`
 * \`\`\`
 */
`,mimeType:"text/javascript"},"/$app/uix/form/select.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

const generateId = () => \`uix-select-\${Math.random().toString(36).slice(2, 9)}\`;

export default {
  tag: "uix-select",
  style: true,
  formAssociated: true,
  properties: {
    id: T.string(),
    value: T.string(),
    disabled: T.boolean(),
    required: T.boolean(),
    placeholder: T.string(),
    name: T.string(),
    label: T.string(),
    options: T.array({ defaultValue: [] }),
    variant: T.string({
      defaultValue: "default",
      enum: ["default", "primary", "secondary", "success", "warning", "error"],
    }),
  },
  formResetCallback() {
    const $select = this.querySelector("select");
    if ($select) {
      $select.value = this._defaultValue || "";
      this.value = $select.value;
    }
  },
  formDisabledCallback(disabled) {
    const $select = this.querySelector("select");
    if ($select) $select.disabled = disabled;
  },
  formStateRestoreCallback(state) {
    const $select = this.querySelector("select");
    if ($select) $select.value = state;
    this.value = state;
  },
  reportValidity() {
    const $select = this.querySelector("select");
    if (!$select) return true;
    const validity = $select.reportValidity() !== false;
    $select?.classList.toggle("input-error", !validity);
    return validity;
  },
  connected() {
    if (!this._internals) {
      this._internals = this.attachInternals();
    }
    this._defaultValue = this.value;
    if (!this.id && !this._selectId) {
      this._selectId = generateId();
    }
  },

  get selectId() {
    return this.id || this._selectId || (this._selectId = generateId());
  },

  _onInput(e) {
    this.value = e.target.value;
    this._internals?.setFormValue(this.value);
  },

  _onChange(e) {
    this.value = e.target.value;
    this._internals?.setFormValue(this.value);
  },

  render() {
    const { value, disabled, required, placeholder, name, label, options } = this;
    const id = this.selectId;
    return html\`
        \${label ? html\`<uix-label for=\${id} text=\${label} ?required=\${required}></uix-label>\` : ""}
        <div class="select-wrapper">
          <select
            id=\${id}
            name=\${name || ""}
            value=\${value || ""}
            ?disabled=\${disabled}
            ?required=\${required}
            @input=\${this._onInput.bind(this)}
            @change=\${this._onChange.bind(this)}
          >
            \${
              placeholder && !value
                ? html\`<option value="" disabled selected hidden>
                  \${placeholder}
                </option>\`
                : ""
            }
            \${options.map(
              (option) => html\`
                <option
                  value=\${option.value ?? option}
                  ?selected=\${(option.value ?? option) === this.value}
                >
                  \${option.label ?? option}
                </option>
              \`,
            )}
          </select>
          <uix-icon name="chevron-down" class="select-arrow"></uix-icon>
        </div>
    \`;
  },
};

/**
 * Copyright (c) Alan Carlos Meira Leal
 *
 * Select Component
 *
 * @component
 * @category form
 * @tag uix-select
 *
 * A native select dropdown with consistent styling. Accepts an options array
 * and integrates with HTML forms.
 *
 * @example Basic Select
 * \`\`\`html
 * <uix-select
 *   value="option2"
 *   options='["Option 1", "Option 2", "Option 3"]'
 * ></uix-select>
 * \`\`\`
 *
 * @example With Label and Placeholder
 * \`\`\`html
 * <uix-select
 *   label="Choose Color"
 *   placeholder="Select a color..."
 *   options='[
 *     { "value": "red", "label": "Red" },
 *     { "value": "green", "label": "Green" },
 *     { "value": "blue", "label": "Blue" }
 *   ]'
 * ></uix-select>
 * \`\`\`
 *
 * @example In a Form
 * \`\`\`html
 * <form>
 *   <uix-select
 *     name="country"
 *     label="Country"
 *     required
 *     options='["USA", "UK", "Canada"]'
 *   ></uix-select>
 * </form>
 * \`\`\`
 *
 * @example Disabled State
 * \`\`\`html
 * <uix-select
 *   disabled
 *   value="disabled"
 *   options='["This select is disabled"]'
 * ></uix-select>
 * \`\`\`
 */
`,mimeType:"text/javascript"},"/$app/uix/form/label.js":{content:`import T from "/$app/types/index.js";
import { html } from "/npm/lit-html";

export default {
  tag: "uix-label",
  properties: {
    for: T.string(),
    text: T.string(),
    required: T.boolean(false),
    inline: T.boolean(false),
  },
  style: true,
  shadow: false,

  render() {
    return html\`
      <label class="label" for=\${this.for || ""}>\${this.text}\${this.required ? html\`<span class="label-required">*</span>\` : ""}</label>
    \`;
  },
};

/**
 * Label Component
 *
 * @component
 * @category form
 * @tag uix-label
 *
 * A form label with consistent styling and required indicator support.
 *
 * @example
 * // Basic label
 * \`\`\`html
 * <uix-label for="username">Username</uix-label>
 * <uix-input id="username"></uix-input>
 * \`\`\`
 *
 * @example
 * // Required label
 * \`\`\`html
 * <uix-label for="email" required>Email</uix-label>
 * <uix-input id="email" required></uix-input>
 * \`\`\`
 */
`,mimeType:"text/javascript"},"/$app/uix/navigation/tabs.css":{content:`:where(.uix-tabs,uix-tabs){display:flex;flex-direction:column;width:100%;border:var(--tabs-border-width, 0) solid var(--tabs-border-color, transparent);border-radius:var(--tabs-border-radius, 0);box-shadow:var(--tabs-shadow, none);background:var(--tabs-background, transparent);overflow:hidden;&::part(tab-list){display:flex;flex-direction:row;background:var(--tabs-list-background, transparent);border-bottom:1px solid var(--tabs-list-border-color, var(--color-surface-dark));overflow-x:auto;scrollbar-width:none;flex-shrink:0}[slot=tab]{flex:1;display:flex;align-items:center;justify-content:center;white-space:nowrap;cursor:pointer;position:relative;gap:var(--tabs-tab-gap, var(--spacing-xs, .25rem));padding:var(--tabs-tab-padding, var(--spacing-md, .75rem) var(--spacing-lg, 1rem));font-family:inherit;font-size:var(--tabs-tab-font-size, var(--text-sm, .875rem));font-weight:var(--tabs-tab-font-weight, var(--font-medium, 500));text-transform:var(--tabs-tab-text-transform, none);letter-spacing:var(--tabs-tab-letter-spacing, normal);color:var(--tabs-tab-color, var(--text-muted));background:var(--tabs-tab-background, transparent);border:none;border-bottom:var(--tabs-tab-border-width, 2px) solid transparent;outline:none;transition:color .2s ease,background-color .2s ease,border-color .2s ease;&:hover{color:var(--tabs-tab-color-hover, var(--color-primary-light));background:var(--tabs-tab-background-hover, var(--color-surface-dark))}&:focus-visible{background:var(--tabs-tab-background-hover, var(--color-surface-dark))}&[active]{color:var(--tabs-tab-color-active, var(--text-color));background:var(--tabs-tab-background-active, transparent);border-bottom-color:var(--tabs-tab-border-active, var(--color-primary))}&[disabled]{opacity:.5;cursor:not-allowed;pointer-events:none}}&::part(tab-panel){display:flex;width:100%;min-height:0;overflow-y:auto;background:var(--tabs-panel-background, transparent)}[slot=panel]{min-height:0;overflow-y:auto;padding:var(--tabs-panel-padding, var(--spacing-lg, 1rem));flex-grow:1;animation:fadeIn .2s ease-in-out;&[hide]{display:none}}&[vertical]{flex-direction:row;height:100%;&::part(tab-list){flex-direction:column;border-bottom:none;border-right:1px solid var(--tabs-list-border-color, var(--color-surface-dark));min-width:150px}[slot=tab]{justify-content:flex-start;border-bottom:none;border-right:var(--tabs-tab-border-width, 2px) solid transparent;&[active]{border-color:transparent;border-right-color:var(--tabs-tab-border-active, var(--color-primary))}}}}@keyframes fadeIn{0%{opacity:0;transform:translateY(2px)}to{opacity:1;transform:translateY(0)}}
`,mimeType:"text/css"},"/$app/uix/layout/container.js":{content:`/**
 * UIX Container Component
 * Generic container component with padding, overflow, and variant support
 */

import T from "/$app/types/index.js";

export default {
  style: true,
  properties: {
    padding: T.string({
      defaultValue: "md",
      enum: ["none", "sm", "md", "lg"],
    }),
    overflow: T.string({
      enum: ["visible", "hidden", "auto", "scroll"],
    }),
    variant: T.string({
      defaultValue: "default",
      enum: ["default", "filled", "outlined", "elevated"],
    }),
  },
};
`,mimeType:"text/javascript"},"/$app/uix/display/stat.css":{content:`:where(.uix-stat,uix-stat){display:inline-flex;align-items:flex-start;gap:var(--spacing-md, .75rem);padding:var(--spacing-lg, 1rem);position:relative;&::part(figure){display:flex;align-items:center;justify-content:center;flex-shrink:0;order:1;&:empty{display:none}}&::part(body){display:flex;flex-direction:column;gap:var(--spacing-xs, .25rem);flex:1;min-width:0}&::part(title){font-size:var(--text-sm, .875rem);font-weight:var(--font-normal, 400);color:var(--text-color);opacity:.7;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}&::part(value){font-size:var(--text-3xl, 1.875rem);font-weight:var(--font-extrabold, 800);color:var(--text-color);line-height:var(--leading-tight, 1.2);white-space:nowrap}&::part(desc){font-size:var(--text-sm, .875rem);color:var(--text-color);opacity:.6;&:empty{display:none}}&[size=sm]{&::part(value){font-size:var(--text-xl, 1.25rem)}&::part(title),&::part(desc){font-size:var(--text-xs, .75rem)}}&[size=lg]{&::part(value){font-size:var(--text-5xl, 3rem)}&::part(title),&::part(desc){font-size:var(--text-base, 1rem)}}&[variant=primary]::part(value){color:var(--color-primary)}&[variant=secondary]::part(value){color:var(--color-secondary)}&[variant=success]::part(value){color:var(--color-success)}&[variant=danger]::part(value){color:var(--color-danger)}&[variant=warning]::part(value){color:var(--color-warning)}&[variant=info]::part(value){color:var(--color-info)}&[centered]{flex-direction:column;align-items:center;text-align:center;justify-content:center;&::part(figure){order:0;margin-bottom:var(--spacing-sm, .5rem)}&::part(body){align-items:center}::slotted([slot="figure"]){width:2.5rem;height:2.5rem}}}:where(.uix-join){>uix-stat{flex:1;position:relative;border-radius:0}&:not([orientation=vertical])>uix-stat+uix-stat:before{content:"";position:absolute;left:0;top:15%;height:70%;border-left:1px solid var(--color-surface-dark, rgba(255, 255, 255, .1))}&[orientation=vertical]>uix-stat+uix-stat:before{content:"";position:absolute;top:0;left:15%;width:70%;border-top:1px solid var(--color-surface-dark, rgba(255, 255, 255, .1))}>uix-stat+uix-stat{margin-left:0;margin-top:0}}
`,mimeType:"text/css"},"/$app/uix/form/textarea.css":{content:`:where(.uix-textarea,uix-textarea){display:inline-block;width:var(--textarea-width, 100%);box-sizing:border-box;.textarea-label{display:block;font-size:var(--input-label-font-size, var(--text-sm, .875rem));font-weight:var(--input-label-font-weight, var(--font-semibold, 600));margin-bottom:var(--input-label-margin, .5rem);color:var(--input-label-color, var(--text-color, #1a1a1a));letter-spacing:var(--input-label-letter-spacing, 0);text-transform:var(--input-label-text-transform, none)}.textarea-required{color:var(--color-danger, #ef4444);margin-left:.25rem}textarea{width:100%;min-height:var(--textarea-min-height, 6rem);padding:var(--input-padding-y, .5rem) var(--input-padding-x, .75rem);box-sizing:border-box;background:var(--input-background, var(--color-surface-light, #ffffff));border:var(--input-border-width, 1px) solid var(--input-border-color, var(--color-surface, #e5e7eb));border-radius:var(--input-border-radius, var(--radius-md, .375rem));box-shadow:var(--input-shadow, none);transition:var( --input-transition, border-color .2s ease, background-color .2s ease, box-shadow .15s ease );font-size:var(--input-font-size, var(--text-sm, .9rem));font-weight:var(--input-font-weight, var(--font-normal, 400));line-height:var(--textarea-line-height, var(--leading-normal, 1.5));font-family:inherit;color:var(--input-text, var(--input-color, var(--text-color, inherit)));outline:none;resize:var(--textarea-resize, vertical);&::placeholder{color:var(--input-placeholder, var(--input-placeholder-color, var(--text-muted, #9ca3af)));opacity:1}&:hover:not(:focus):not(:disabled){border-color:var(--input-hover-border-color, var(--color-primary-light))}&:focus{border-color:var(--input-focus-border-color, var(--color-primary));background:var(--input-focus-background, var(--input-background));box-shadow:var(--input-focus-shadow, 0 0 0 3px rgba(250, 189, 47, .1))}&:disabled{opacity:var(--input-disabled-opacity, .6);background:var(--input-disabled-background, var(--color-surface-dark));color:var(--input-disabled-color, var(--text-muted));cursor:not-allowed}&:read-only{background:var(--input-readonly-background, var(--color-surface-dark));cursor:default}}&[size=xs]{--input-padding-y: .25rem;--input-padding-x: .5rem;--input-font-size: var(--text-xs, .75rem);--textarea-min-height: 3rem}&[size=sm]{--input-padding-y: .375rem;--input-padding-x: .625rem;--input-font-size: var(--text-sm, .875rem);--textarea-min-height: 4.5rem}&[size=md]{--input-padding-y: .5rem;--input-padding-x: .75rem;--input-font-size: var(--text-base, 1rem);--textarea-min-height: 6rem}&[size=lg]{--input-padding-y: .625rem;--input-padding-x: 1rem;--input-font-size: var(--text-lg, 1.125rem);--textarea-min-height: 7.5rem}&[size=xl]{--input-padding-y: .75rem;--input-padding-x: 1.25rem;--input-font-size: var(--text-xl, 1.25rem);--textarea-min-height: 9rem}&[resize=none] textarea{resize:none}&[resize=both] textarea{resize:both}&[resize=horizontal] textarea{resize:horizontal}&[resize=vertical] textarea{resize:vertical}&[required] textarea{border-left:3px solid var(--input-required-color, var(--color-warning))}&[error]{--input-border-color: var(--color-danger);--input-focus-border-color: var(--color-danger);--input-focus-shadow: 0 0 0 3px rgba(251, 73, 52, .1)}&[success]{--input-border-color: var(--color-success);--input-focus-border-color: var(--color-success);--input-focus-shadow: 0 0 0 3px rgba(34, 197, 94, .1)}&[variant=primary]{--input-border-color: var(--color-primary);--input-focus-border-color: var(--color-primary)}&[variant=secondary]{--input-border-color: var(--color-secondary);--input-focus-border-color: var(--color-secondary)}&[variant=success]{--input-border-color: var(--color-success);--input-focus-border-color: var(--color-success);--input-focus-shadow: 0 0 0 3px rgba(34, 197, 94, .1)}&[variant=warning]{--input-border-color: var(--color-warning);--input-focus-border-color: var(--color-warning);--input-focus-shadow: 0 0 0 3px rgba(249, 115, 22, .1)}&[variant=error]{--input-border-color: var(--color-danger);--input-focus-border-color: var(--color-danger);--input-focus-shadow: 0 0 0 3px rgba(251, 73, 52, .1)}&[w-full],&[wfull]{width:100%;display:block}}
`,mimeType:"text/css"},"/$app/uix/form/select.css":{content:`:where(.uix-select,uix-select){display:inline-block;width:var(--select-width, auto);box-sizing:border-box;.select-label{display:block;font-size:var(--input-label-font-size, var(--text-sm, .875rem));font-weight:var(--input-label-font-weight, var(--font-semibold, 600));margin-bottom:var(--input-label-margin, .5rem);color:var(--input-label-color, var(--text-color, #1a1a1a));letter-spacing:var(--input-label-letter-spacing, 0);text-transform:var(--input-label-text-transform, none)}.select-required{color:var(--color-danger, #ef4444);margin-left:.25rem}.select-wrapper{position:relative;background:var(--select-background, var(--input-background, var(--color-surface-light, #ffffff)));border:var(--select-border-width, var(--input-border-width, 1px)) solid var(--select-border-color, var(--input-border-color, var(--color-surface, #e5e7eb)));border-radius:var(--select-border-radius, var(--input-border-radius, var(--radius-md, .375rem)));box-shadow:var(--select-shadow, var(--input-shadow, none));transition:var( --select-transition, border-color .2s ease, background-color .2s ease, box-shadow .15s ease, transform .15s ease );&:hover:not(:focus-within){border-color:var(--select-hover-border-color, var(--input-hover-border-color, var(--color-primary-light)))}&:focus-within{border-color:var(--select-focus-border-color, var(--input-focus-border-color, var(--color-primary)));box-shadow:var(--select-focus-shadow, var(--input-focus-shadow, 0 0 0 3px rgba(250, 189, 47, .1)))}}select{appearance:none;-webkit-appearance:none;-moz-appearance:none;width:100%;height:var(--select-height, var(--input-height, 3rem));padding:var(--select-padding-y, var(--input-padding-y, .5rem)) var(--select-padding-x, var(--input-padding-x, .75rem));padding-right:calc(var(--select-padding-x, var(--input-padding-x, .75rem)) + var(--select-arrow-size, 1rem) + .5rem);font-size:var(--select-font-size, var(--input-font-size, var(--text-sm, .875rem)));font-weight:var(--select-font-weight, var(--input-font-weight, var(--font-normal, 400)));font-family:inherit;line-height:var(--select-line-height, 1.5);color:var(--select-color, var(--input-text, var(--text-color, inherit)));background:transparent;border:none;outline:none;cursor:pointer;box-sizing:border-box;transition:var(--select-transition, background-color .2s ease);option{background:var(--select-option-background, var(--color-surface-light));color:var(--select-option-color, var(--text-color));padding:var(--spacing-xs, .25rem);&:checked{background:var(--select-option-checked-background, var(--color-primary));color:var(--select-option-checked-color, var(--color-inverse))}}&::placeholder{color:var(--select-placeholder, var(--input-placeholder, var(--text-muted, #9ca3af)));opacity:1}&:focus{outline:none}}.select-wrapper .select-arrow{position:absolute;right:var(--select-padding-x, var(--input-padding-x, .75rem));top:50%;transform:translateY(-50%);width:var(--select-arrow-size, 1rem);height:var(--select-arrow-size, 1rem);color:var(--select-arrow-color, var(--input-icon, var(--text-muted)));pointer-events:none;opacity:.7;transition:opacity .2s ease,transform .2s ease}.select-wrapper:focus-within .select-arrow{opacity:1}&:has(select:disabled){.select-wrapper{opacity:var(--select-disabled-opacity, .6);cursor:not-allowed}select{background:var(--select-disabled-background, var(--input-disabled-background, var(--color-surface-dark)));color:var(--select-disabled-color, var(--text-muted));cursor:not-allowed}.select-wrapper .select-arrow{opacity:.4}}&[size=xs]{--select-height: 1.5rem;--select-padding-y: .2rem;--select-padding-x: .5rem;--select-font-size: var(--text-xs, .75rem);--select-arrow-size: .75rem}&[size=sm]{--select-height: 2rem;--select-padding-y: .3rem;--select-padding-x: .6rem;--select-font-size: var(--text-sm, .875rem);--select-arrow-size: .875rem}&[size=md]{--select-height: 2.5rem;--select-padding-y: .5rem;--select-padding-x: .75rem;--select-font-size: var(--text-base, 1rem);--select-arrow-size: 1rem}&[size=lg]{--select-height: 3rem;--select-padding-y: .625rem;--select-padding-x: 1rem;--select-font-size: var(--text-lg, 1.125rem);--select-arrow-size: 1.25rem}&[size=xl]{--select-height: 3.5rem;--select-padding-y: .75rem;--select-padding-x: 1.25rem;--select-font-size: var(--text-xl, 1.25rem);--select-arrow-size: 1.5rem}&[required] .select-wrapper{border-left:3px solid var(--select-required-color, var(--color-warning))}&[error]{--select-border-color: var(--input-border-error, var(--color-danger));--select-focus-border-color: var(--input-border-error, var(--color-danger));--select-focus-shadow: 0 0 0 3px rgba(251, 73, 52, .1)}&[success]{--select-border-color: var(--color-success);--select-focus-border-color: var(--color-success);--select-focus-shadow: 0 0 0 3px rgba(34, 197, 94, .1)}&[variant=primary]{--select-border-color: var(--color-primary);--select-focus-border-color: var(--color-primary)}&[variant=secondary]{--select-border-color: var(--color-secondary);--select-focus-border-color: var(--color-secondary)}&[variant=success]{--select-border-color: var(--color-success);--select-focus-border-color: var(--color-success);--select-focus-shadow: 0 0 0 3px rgba(34, 197, 94, .1)}&[variant=warning]{--select-border-color: var(--color-warning);--select-focus-border-color: var(--color-warning);--select-focus-shadow: 0 0 0 3px rgba(249, 115, 22, .1)}&[variant=error]{--select-border-color: var(--input-border-error, var(--color-danger));--select-focus-border-color: var(--input-border-error, var(--color-danger));--select-focus-shadow: 0 0 0 3px rgba(251, 73, 52, .1)}&[w-full],&[wfull]{width:100%;display:block}}
`,mimeType:"text/css"},"/$app/uix/form/label.css":{content:`:where(.uix-label,uix-label){display:block;.label{display:block;font-size:var(--label-font-size, var(--text-sm, .875rem));font-weight:var(--label-font-weight, var(--font-semibold, 600));margin-bottom:var(--label-margin, .5rem);color:var(--label-color, var(--text-color, #1a1a1a));letter-spacing:var(--label-letter-spacing, 0);text-transform:var(--label-text-transform, none);line-height:var(--label-line-height, 1.4);cursor:pointer}.label-required{color:var(--color-danger, #ef4444);margin-left:.25rem}&[inline]{display:inline;.label{display:inline;margin-bottom:0}}&[size=xs]{--label-font-size: var(--text-xs, .75rem)}&[size=sm]{--label-font-size: var(--text-sm, .875rem)}&[size=md]{--label-font-size: var(--text-base, 1rem)}&[size=lg]{--label-font-size: var(--text-lg, 1.125rem)}&[size=xl]{--label-font-size: var(--text-xl, 1.25rem)}}
`,mimeType:"text/css"},"/$app/icon-lucide/lucide/chevron-down.svg":{content:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m6 9l6 6l6-6"/></svg>',mimeType:"image/svg+xml"},"/$app/uix/layout/container.css":{content:`:where(.uix-container,uix-container){display:block;box-sizing:border-box;background:var(--container-background, var(--color-surface-lighter));border:1px solid var(--container-border-color, var(--color-surface-dark));border-radius:var(--container-border-radius, var(--radius-md, .375rem));overflow:var(--container-overflow, visible);&[padding=none]{padding:0}&[padding=sm]{padding:var(--spacing-sm, .5rem)}&[padding=md]{padding:var(--spacing-md, .75rem) var(--spacing-lg, 1rem)}&[padding=lg]{padding:var(--spacing-lg, 1rem) var(--spacing-xl, 1.5rem)}&[overflow=visible]{--container-overflow: visible}&[overflow=hidden]{--container-overflow: hidden}&[overflow=auto]{--container-overflow: auto}&[overflow=scroll]{--container-overflow: scroll}&[variant=default]{--container-background: inherit;--container-border-color: var(--color-surface-dark)}&[variant=filled]{--container-background: var(--color-surface-light);--container-border-color: var(--color-surface)}&[variant=outlined]{--container-background: transparent;--container-border-color: var(--color-surface)}&[variant=elevated]{--container-background: var(--color-surface-lighter);--container-border-color: var(--color-surface-dark);box-shadow:0 1px 3px #0000001f,0 1px 2px #0000003d;&:hover{box-shadow:0 3px 6px #00000029,0 3px 6px #0000003b;transition:box-shadow .3s ease}}}
`,mimeType:"text/css"},"/$app/uix/layout/card.css":{content:`:where(.uix-card,uix-card){display:flex;flex-direction:column;overflow:hidden;&::part(body){display:flex;flex-direction:column;flex:1;background:var(--card-background, inherit)}>[slot=header]{margin:0;display:flex;padding:var( --card-header-padding, var(--spacing-md, .75rem) var(--spacing-lg, 1rem) );border-bottom-width:var(--card-header-border-width, 0);border-bottom-style:solid;border-bottom-color:var( --card-header-border-color, var(--card-border-primary, #504945) );background:var(--card-header-background-color, inherit)}>[slot=footer]{display:flex;padding:var( --card-footer-padding, var(--spacing-md, .75rem) var(--spacing-lg, 1rem) );border-top-width:var(--card-footer-border-width, 0);border-top-style:var(--card-footer-border-style, solid);border-top-color:var( --card-footer-border-color, var(--color-surface, #504945) );background:var(--card-footer-background-color, inherit);flex-direction:row;gap:var(--spacing-sm, .5rem);align-items:center;justify-content:flex-end}&[style*=--card-gradient-from]::part(body){background:linear-gradient(135deg,var(--card-gradient-from),var(--card-gradient-to, var(--card-gradient-from)))}&[padding=none]::part(body){padding:0}&[padding=sm]::part(body){padding:var(--spacing-sm, .5rem)}&[padding=md]::part(body){padding:var(--spacing-md, .75rem) var(--spacing-lg, 1rem)}&[padding=lg]::part(body){padding:var(--spacing-lg, 1rem) var(--spacing-xl, 1.5rem)}&[borderWidth=none]{border-width:0}&[borderWidth="1"]{border-width:1px}&[borderWidth="2"]{border-width:2px}&[borderWidth="3"]{border-width:3px}&[borderStyle=solid]{border-style:solid}&[borderStyle=dashed]{border-style:dashed}&[borderStyle=dotted]{border-style:dotted}&[gap=none]::part(body){gap:0}&[gap=xs]::part(body){gap:var(--spacing-xs, .25rem)}&[gap=sm]::part(body){gap:var(--spacing-sm, .5rem)}&[gap=md]::part(body){gap:var(--spacing-md, .75rem)}&[gap=lg]::part(body){gap:var(--spacing-lg, 1rem)}&[gap=xl]::part(body){gap:var(--spacing-xl, 1.5rem)}&[shadow=sm]{box-shadow:var(--shadow-sm, 0 1px 2px 0 rgba(0, 0, 0, .05))}&[shadow=md]{box-shadow:var( --shadow-md, 0 4px 6px -1px rgba(0, 0, 0, .1), 0 2px 4px -1px rgba(0, 0, 0, .06) )}&[shadow=lg]{box-shadow:var( --shadow-lg, 0 10px 15px -3px rgba(0, 0, 0, .1), 0 4px 6px -2px rgba(0, 0, 0, .05) )}&[hover]{transition:all .2s ease;cursor:pointer;&:hover{border-color:var(--card-border-hover, #83a598)}&[shadow=sm]:hover{box-shadow:var( --shadow-md, 0 4px 6px -1px rgba(0, 0, 0, .1), 0 2px 4px -1px rgba(0, 0, 0, .06) )}&[shadow=md]:hover{box-shadow:var( --shadow-lg, 0 10px 15px -3px rgba(0, 0, 0, .1), 0 4px 6px -2px rgba(0, 0, 0, .05) )}&[shadow=lg]:hover{box-shadow:var( --shadow-xl, 0 20px 25px -5px rgba(0, 0, 0, .1), 0 10px 10px -5px rgba(0, 0, 0, .04) )}}}
`,mimeType:"text/css"},"/lit-html":{content:`export*from"/lit-html@3.3.1/es2022/lit-html.mjs";
`,mimeType:"application/javascript"},"/lit-html@3.3.1/es2022/lit-html.mjs":{content:`var M=globalThis,b=M.trustedTypes,P=b?b.createPolicy("lit-html",{createHTML:e=>e}):void 0,w="$lit$",d=\`lit$\${Math.random().toFixed(9).slice(2)}$\`,S="?"+d,X=\`<\${S}>\`,c=document,f=()=>c.createComment(""),y=e=>e===null||typeof e!="object"&&typeof e!="function",I=Array.isArray,R=e=>I(e)||typeof e?.[Symbol.iterator]=="function",E=\`[ 	
\\f\\r]\`,H=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,L=/-->/g,O=/>/g,u=RegExp(\`>|\${E}(?:([^\\\\s"'>=/]+)(\${E}*=\${E}*(?:[^ 	
\\f\\r"'\\\`<>=]|("|')|))|$)\`,"g"),W=/'/g,j=/"/g,D=/^(?:script|style|textarea|title)$/i,B=e=>(t,...i)=>({_$litType$:e,strings:t,values:i}),Y=B(1),tt=B(2),et=B(3),m=Symbol.for("lit-noChange"),a=Symbol.for("lit-nothing"),V=new WeakMap,g=c.createTreeWalker(c,129);function k(e,t){if(!I(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return P!==void 0?P.createHTML(t):t}var z=(e,t)=>{let i=e.length-1,n=[],s,r=t===2?"<svg>":t===3?"<math>":"",h=H;for(let l=0;l<i;l++){let o=e[l],N,A,$=-1,_=0;for(;_<o.length&&(h.lastIndex=_,A=h.exec(o),A!==null);)_=h.lastIndex,h===H?A[1]==="!--"?h=L:A[1]!==void 0?h=O:A[2]!==void 0?(D.test(A[2])&&(s=RegExp("</"+A[2],"g")),h=u):A[3]!==void 0&&(h=u):h===u?A[0]===">"?(h=s??H,$=-1):A[1]===void 0?$=-2:($=h.lastIndex-A[2].length,N=A[1],h=A[3]===void 0?u:A[3]==='"'?j:W):h===j||h===W?h=u:h===L||h===O?h=H:(h=u,s=void 0);let p=h===u&&e[l+1].startsWith("/>")?" ":"";r+=h===H?o+X:$>=0?(n.push(N),o.slice(0,$)+w+o.slice($)+d+p):o+d+($===-2?l:p)}return[k(e,r+(e[i]||"<?>")+(t===2?"</svg>":t===3?"</math>":"")),n]},U=class K{constructor({strings:t,_$litType$:i},n){let s;this.parts=[];let r=0,h=0,l=t.length-1,o=this.parts,[N,A]=z(t,i);if(this.el=K.createElement(N,n),g.currentNode=this.el.content,i===2||i===3){let $=this.el.content.firstChild;$.replaceWith(...$.childNodes)}for(;(s=g.nextNode())!==null&&o.length<l;){if(s.nodeType===1){if(s.hasAttributes())for(let $ of s.getAttributeNames())if($.endsWith(w)){let _=A[h++],p=s.getAttribute($).split(d),T=/([.?@])?(.*)/.exec(_);o.push({type:1,index:r,name:T[2],strings:p,ctor:T[1]==="."?Z:T[1]==="?"?q:T[1]==="@"?G:x}),s.removeAttribute($)}else $.startsWith(d)&&(o.push({type:6,index:r}),s.removeAttribute($));if(D.test(s.tagName)){let $=s.textContent.split(d),_=$.length-1;if(_>0){s.textContent=b?b.emptyScript:"";for(let p=0;p<_;p++)s.append($[p],f()),g.nextNode(),o.push({type:2,index:++r});s.append($[_],f())}}}else if(s.nodeType===8)if(s.data===S)o.push({type:2,index:r});else{let $=-1;for(;($=s.data.indexOf(d,$+1))!==-1;)o.push({type:7,index:r}),$+=d.length-1}r++}}static createElement(t,i){let n=c.createElement("template");return n.innerHTML=t,n}};function v(e,t,i=e,n){if(t===m)return t;let s=n!==void 0?i._$Co?.[n]:i._$Cl,r=y(t)?void 0:t._$litDirective$;return s?.constructor!==r&&(s?._$AO?.(!1),r===void 0?s=void 0:(s=new r(e),s._$AT(e,i,n)),n!==void 0?(i._$Co??=[])[n]=s:i._$Cl=s),s!==void 0&&(t=v(e,s._$AS(e,t.values),s,n)),t}var F=class{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){let{el:{content:t},parts:i}=this._$AD,n=(e?.creationScope??c).importNode(t,!0);g.currentNode=n;let s=g.nextNode(),r=0,h=0,l=i[0];for(;l!==void 0;){if(r===l.index){let o;l.type===2?o=new C(s,s.nextSibling,this,e):l.type===1?o=new l.ctor(s,l.name,l.strings,this,e):l.type===6&&(o=new J(s,this,e)),this._$AV.push(o),l=i[++h]}r!==l?.index&&(s=g.nextNode(),r++)}return g.currentNode=c,n}p(e){let t=0;for(let i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}},C=class Q{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,i,n,s){this.type=2,this._$AH=a,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=n,this.options=s,this._$Cv=s?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode,i=this._$AM;return i!==void 0&&t?.nodeType===11&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=v(this,t,i),y(t)?t===a||t==null||t===""?(this._$AH!==a&&this._$AR(),this._$AH=a):t!==this._$AH&&t!==m&&this._(t):t._$litType$!==void 0?this.$(t):t.nodeType!==void 0?this.T(t):R(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==a&&y(this._$AH)?this._$AA.nextSibling.data=t:this.T(c.createTextNode(t)),this._$AH=t}$(t){let{values:i,_$litType$:n}=t,s=typeof n=="number"?this._$AC(t):(n.el===void 0&&(n.el=U.createElement(k(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===s)this._$AH.p(i);else{let r=new F(s,this),h=r.u(this.options);r.p(i),this.T(h),this._$AH=r}}_$AC(t){let i=V.get(t.strings);return i===void 0&&V.set(t.strings,i=new U(t)),i}k(t){I(this._$AH)||(this._$AH=[],this._$AR());let i=this._$AH,n,s=0;for(let r of t)s===i.length?i.push(n=new Q(this.O(f()),this.O(f()),this,this.options)):n=i[s],n._$AI(r),s++;s<i.length&&(this._$AR(n&&n._$AB.nextSibling,s),i.length=s)}_$AR(t=this._$AA.nextSibling,i){for(this._$AP?.(!1,!0,i);t!==this._$AB;){let n=t.nextSibling;t.remove(),t=n}}setConnected(t){this._$AM===void 0&&(this._$Cv=t,this._$AP?.(t))}},x=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,i,n,s){this.type=1,this._$AH=a,this._$AN=void 0,this.element=e,this.name=t,this._$AM=n,this.options=s,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=a}_$AI(e,t=this,i,n){let s=this.strings,r=!1;if(s===void 0)e=v(this,e,t,0),r=!y(e)||e!==this._$AH&&e!==m,r&&(this._$AH=e);else{let h=e,l,o;for(e=s[0],l=0;l<s.length-1;l++)o=v(this,h[i+l],t,l),o===m&&(o=this._$AH[l]),r||=!y(o)||o!==this._$AH[l],o===a?e=a:e!==a&&(e+=(o??"")+s[l+1]),this._$AH[l]=o}r&&!n&&this.j(e)}j(e){e===a?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},Z=class extends x{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===a?void 0:e}},q=class extends x{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==a)}},G=class extends x{constructor(e,t,i,n,s){super(e,t,i,n,s),this.type=5}_$AI(e,t=this){if((e=v(this,e,t,0)??a)===m)return;let i=this._$AH,n=e===a&&i!==a||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,s=e!==a&&(i===a||n);n&&this.element.removeEventListener(this.name,this,i),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}},J=class{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){v(this,e)}},it={M:w,P:d,A:S,C:1,L:z,R:F,D:R,V:v,I:C,H:x,N:q,U:G,B:Z,F:J},st=M.litHtmlPolyfillSupport;st?.(U,C),(M.litHtmlVersions??=[]).push("3.3.1");var nt=(e,t,i)=>{let n=i?.renderBefore??t,s=n._$litPart$;if(s===void 0){let r=i?.renderBefore??null;n._$litPart$=s=new C(t.insertBefore(f(),r),r,void 0,i??{})}return s._$AI(e),s};export{it as _$LH,Y as html,et as mathml,m as noChange,a as nothing,nt as render,tt as svg};/*! Bundled license information:

lit-html/lit-html.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
*/
`,mimeType:"application/javascript"},"/fflate":{content:`export*from"/fflate@0.8.2/es2022/fflate.mjs";
`,mimeType:"application/javascript"},"/fflate@0.8.2/es2022/fflate.mjs":{content:`var zn={},ei=function(n,t,i,e,r){var a=new Worker(zn[t]||(zn[t]=URL.createObjectURL(new Blob([n+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return a.onmessage=function(s){var o=s.data,c=o.$e$;if(c){var u=new Error(c[0]);u.code=c[1],u.stack=c[2],r(u,null)}else r(null,o)},a.postMessage(i,e),a},k=Uint8Array,N=Uint16Array,At=Int32Array,vt=new k([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),dt=new k([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Tt=new k([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),kn=function(n,t){for(var i=new N(31),e=0;e<31;++e)i[e]=t+=1<<n[e-1];for(var r=new At(i[30]),e=1;e<30;++e)for(var a=i[e];a<i[e+1];++a)r[a]=a-i[e]<<5|e;return{b:i,r}},Sn=kn(vt,2),Pt=Sn.b,Vt=Sn.r;Pt[28]=258,Vt[258]=28;var Mn=kn(dt,0),xn=Mn.b,tn=Mn.r,Et=new N(32768);for(T=0;T<32768;++T)it=(T&43690)>>1|(T&21845)<<1,it=(it&52428)>>2|(it&13107)<<2,it=(it&61680)>>4|(it&3855)<<4,Et[T]=((it&65280)>>8|(it&255)<<8)>>1;var it,T,J=function(n,t,i){for(var e=n.length,r=0,a=new N(t);r<e;++r)n[r]&&++a[n[r]-1];var s=new N(t);for(r=1;r<t;++r)s[r]=s[r-1]+a[r-1]<<1;var o;if(i){o=new N(1<<t);var c=15-t;for(r=0;r<e;++r)if(n[r])for(var u=r<<4|n[r],h=t-n[r],f=s[n[r]-1]++<<h,l=f|(1<<h)-1;f<=l;++f)o[Et[f]>>c]=u}else for(o=new N(e),r=0;r<e;++r)n[r]&&(o[r]=Et[s[n[r]-1]++]>>15-n[r]);return o},et=new k(288);for(T=0;T<144;++T)et[T]=8;var T;for(T=144;T<256;++T)et[T]=9;var T;for(T=256;T<280;++T)et[T]=7;var T;for(T=280;T<288;++T)et[T]=8;var T,gt=new k(32);for(T=0;T<32;++T)gt[T]=5;var T,In=J(et,9,0),Cn=J(et,9,1),Un=J(gt,5,0),An=J(gt,5,1),Xt=function(n){for(var t=n[0],i=1;i<n.length;++i)n[i]>t&&(t=n[i]);return t},_=function(n,t,i){var e=t/8|0;return(n[e]|n[e+1]<<8)>>(t&7)&i},Zt=function(n,t){var i=t/8|0;return(n[i]|n[i+1]<<8|n[i+2]<<16)>>(t&7)},yt=function(n){return(n+7)/8|0},O=function(n,t,i){return(t==null||t<0)&&(t=0),(i==null||i>n.length)&&(i=n.length),new k(n.subarray(t,i))},ri={UnexpectedEOF:0,InvalidBlockType:1,InvalidLengthLiteral:2,InvalidDistance:3,StreamFinished:4,NoStreamHandler:5,InvalidHeader:6,NoCallback:7,InvalidUTF8:8,ExtraFieldTooLong:9,InvalidDate:10,FilenameTooLong:11,StreamFinishing:12,InvalidZipData:13,UnknownCompressionMethod:14},Tn=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],v=function(n,t,i){var e=new Error(t||Tn[n]);if(e.code=n,Error.captureStackTrace&&Error.captureStackTrace(e,v),!i)throw e;return e},$t=function(n,t,i,e){var r=n.length,a=e?e.length:0;if(!r||t.f&&!t.l)return i||new k(0);var s=!i,o=s||t.i!=2,c=t.i;s&&(i=new k(r*3));var u=function(Ct){var Ut=i.length;if(Ct>Ut){var pt=new k(Math.max(Ut*2,Ct));pt.set(i),i=pt}},h=t.f||0,f=t.p||0,l=t.b||0,z=t.l,m=t.d,w=t.m,d=t.n,b=r*8;do{if(!z){h=_(n,f,1);var M=_(n,f+1,3);if(f+=3,M)if(M==1)z=Cn,m=An,w=9,d=5;else if(M==2){var S=_(n,f,31)+257,y=_(n,f+10,15)+4,$=S+_(n,f+5,31)+1;f+=14;for(var E=new k($),x=new k(19),p=0;p<y;++p)x[Tt[p]]=_(n,f+p*3,7);f+=y*3;for(var g=Xt(x),I=(1<<g)-1,V=J(x,g,1),p=0;p<$;){var W=V[_(n,f,I)];f+=W&15;var D=W>>4;if(D<16)E[p++]=D;else{var C=0,q=0;for(D==16?(q=3+_(n,f,3),f+=2,C=E[p-1]):D==17?(q=3+_(n,f,7),f+=3):D==18&&(q=11+_(n,f,127),f+=7);q--;)E[p++]=C}}var X=E.subarray(0,S),U=E.subarray(S);w=Xt(X),d=Xt(U),z=J(X,w,1),m=J(U,d,1)}else v(1);else{var D=yt(f)+4,Z=n[D-4]|n[D-3]<<8,G=D+Z;if(G>r){c&&v(0);break}o&&u(l+Z),i.set(n.subarray(D,G),l),t.b=l+=Z,t.p=f=G*8,t.f=h;continue}if(f>b){c&&v(0);break}}o&&u(l+131072);for(var ut=(1<<w)-1,B=(1<<d)-1,nt=f;;nt=f){var C=z[Zt(n,f)&ut],R=C>>4;if(f+=C&15,f>b){c&&v(0);break}if(C||v(2),R<256)i[l++]=R;else if(R==256){nt=f,z=null;break}else{var j=R-254;if(R>264){var p=R-257,K=vt[p];j=_(n,f,(1<<K)-1)+Pt[p],f+=K}var P=m[Zt(n,f)&B],ct=P>>4;P||v(3),f+=P&15;var U=xn[ct];if(ct>3){var K=dt[ct];U+=Zt(n,f)&(1<<K)-1,f+=K}if(f>b){c&&v(0);break}o&&u(l+131072);var lt=l+j;if(l<U){var Kt=a-U,Qt=Math.min(U,lt);for(Kt+l<0&&v(3);l<Qt;++l)i[l]=e[Kt+l]}for(;l<lt;++l)i[l]=i[l-U]}}t.l=z,t.p=nt,t.b=l,t.f=h,z&&(h=1,t.m=w,t.d=m,t.n=d)}while(!h);return l!=i.length&&s?O(i,0,l):i.subarray(0,l)},tt=function(n,t,i){i<<=t&7;var e=t/8|0;n[e]|=i,n[e+1]|=i>>8},mt=function(n,t,i){i<<=t&7;var e=t/8|0;n[e]|=i,n[e+1]|=i>>8,n[e+2]|=i>>16},Nt=function(n,t){for(var i=[],e=0;e<n.length;++e)n[e]&&i.push({s:e,f:n[e]});var r=i.length,a=i.slice();if(!r)return{t:rt,l:0};if(r==1){var s=new k(i[0].s+1);return s[i[0].s]=1,{t:s,l:1}}i.sort(function($,E){return $.f-E.f}),i.push({s:-1,f:25001});var o=i[0],c=i[1],u=0,h=1,f=2;for(i[0]={s:-1,f:o.f+c.f,l:o,r:c};h!=r-1;)o=i[i[u].f<i[f].f?u++:f++],c=i[u!=h&&i[u].f<i[f].f?u++:f++],i[h++]={s:-1,f:o.f+c.f,l:o,r:c};for(var l=a[0].s,e=1;e<r;++e)a[e].s>l&&(l=a[e].s);var z=new N(l+1),m=Lt(i[h-1],z,0);if(m>t){var e=0,w=0,d=m-t,b=1<<d;for(a.sort(function(E,x){return z[x.s]-z[E.s]||E.f-x.f});e<r;++e){var M=a[e].s;if(z[M]>t)w+=b-(1<<m-z[M]),z[M]=t;else break}for(w>>=d;w>0;){var S=a[e].s;z[S]<t?w-=1<<t-z[S]++-1:++e}for(;e>=0&&w;--e){var y=a[e].s;z[y]==t&&(--z[y],++w)}m=t}return{t:new k(z),l:m}},Lt=function(n,t,i){return n.s==-1?Math.max(Lt(n.l,t,i+1),Lt(n.r,t,i+1)):t[n.s]=i},nn=function(n){for(var t=n.length;t&&!n[--t];);for(var i=new N(++t),e=0,r=n[0],a=1,s=function(c){i[e++]=c},o=1;o<=t;++o)if(n[o]==r&&o!=t)++a;else{if(!r&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(r),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(r);a=1,r=n[o]}return{c:i.subarray(0,e),n:t}},bt=function(n,t){for(var i=0,e=0;e<t.length;++e)i+=n[e]*t[e];return i},en=function(n,t,i){var e=i.length,r=yt(t+2);n[r]=e&255,n[r+1]=e>>8,n[r+2]=n[r]^255,n[r+3]=n[r+1]^255;for(var a=0;a<e;++a)n[r+a+4]=i[a];return(r+4+e)*8},rn=function(n,t,i,e,r,a,s,o,c,u,h){tt(t,h++,i),++r[256];for(var f=Nt(r,15),l=f.t,z=f.l,m=Nt(a,15),w=m.t,d=m.l,b=nn(l),M=b.c,S=b.n,y=nn(w),$=y.c,E=y.n,x=new N(19),p=0;p<M.length;++p)++x[M[p]&31];for(var p=0;p<$.length;++p)++x[$[p]&31];for(var g=Nt(x,7),I=g.t,V=g.l,W=19;W>4&&!I[Tt[W-1]];--W);var D=u+5<<3,C=bt(r,et)+bt(a,gt)+s,q=bt(r,l)+bt(a,w)+s+14+3*W+bt(x,I)+2*x[16]+3*x[17]+7*x[18];if(c>=0&&D<=C&&D<=q)return en(t,h,n.subarray(c,c+u));var X,U,Z,G;if(tt(t,h,1+(q<C)),h+=2,q<C){X=J(l,z,0),U=l,Z=J(w,d,0),G=w;var ut=J(I,V,0);tt(t,h,S-257),tt(t,h+5,E-1),tt(t,h+10,W-4),h+=14;for(var p=0;p<W;++p)tt(t,h+3*p,I[Tt[p]]);h+=3*W;for(var B=[M,$],nt=0;nt<2;++nt)for(var R=B[nt],p=0;p<R.length;++p){var j=R[p]&31;tt(t,h,ut[j]),h+=I[j],j>15&&(tt(t,h,R[p]>>5&127),h+=R[p]>>12)}}else X=In,U=et,Z=Un,G=gt;for(var p=0;p<o;++p){var K=e[p];if(K>255){var j=K>>18&31;mt(t,h,X[j+257]),h+=U[j+257],j>7&&(tt(t,h,K>>23&31),h+=vt[j]);var P=K&31;mt(t,h,Z[P]),h+=G[P],P>3&&(mt(t,h,K>>5&8191),h+=dt[P])}else mt(t,h,X[K]),h+=U[K]}return mt(t,h,X[256]),h+U[256]},En=new At([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),rt=new k(0),$n=function(n,t,i,e,r,a){var s=a.z||n.length,o=new k(e+s+5*(1+Math.ceil(s/7e3))+r),c=o.subarray(e,o.length-r),u=a.l,h=(a.r||0)&7;if(t){h&&(c[0]=a.r>>3);for(var f=En[t-1],l=f>>13,z=f&8191,m=(1<<i)-1,w=a.p||new N(32768),d=a.h||new N(m+1),b=Math.ceil(i/3),M=2*b,S=function(Ft){return(n[Ft]^n[Ft+1]<<b^n[Ft+2]<<M)&m},y=new At(25e3),$=new N(288),E=new N(32),x=0,p=0,g=a.i||0,I=0,V=a.w||0,W=0;g+2<s;++g){var D=S(g),C=g&32767,q=d[D];if(w[C]=q,d[D]=C,V<=g){var X=s-g;if((x>7e3||I>24576)&&(X>423||!u)){h=rn(n,c,0,y,$,E,p,I,W,g-W,h),I=x=p=0,W=g;for(var U=0;U<286;++U)$[U]=0;for(var U=0;U<30;++U)E[U]=0}var Z=2,G=0,ut=z,B=C-q&32767;if(X>2&&D==S(g-B))for(var nt=Math.min(l,X)-1,R=Math.min(32767,g),j=Math.min(258,X);B<=R&&--ut&&C!=q;){if(n[g+Z]==n[g+Z-B]){for(var K=0;K<j&&n[g+K]==n[g+K-B];++K);if(K>Z){if(Z=K,G=B,K>nt)break;for(var P=Math.min(B,K-2),ct=0,U=0;U<P;++U){var lt=g-B+U&32767,Kt=w[lt],Qt=lt-Kt&32767;Qt>ct&&(ct=Qt,q=lt)}}}C=q,q=w[C],B+=C-q&32767}if(G){y[I++]=268435456|Vt[Z]<<18|tn[G];var Ct=Vt[Z]&31,Ut=tn[G]&31;p+=vt[Ct]+dt[Ut],++$[257+Ct],++E[Ut],V=g+Z,++x}else y[I++]=n[g],++$[n[g]]}}for(g=Math.max(g,V);g<s;++g)y[I++]=n[g],++$[n[g]];h=rn(n,c,u,y,$,E,p,I,W,g-W,h),u||(a.r=h&7|c[h/8|0]<<3,h-=7,a.h=d,a.p=w,a.i=g,a.w=V)}else{for(var g=a.w||0;g<s+u;g+=65535){var pt=g+65535;pt>=s&&(c[h/8|0]=u,pt=s),h=en(c,h+1,n.subarray(g,pt))}a.i=s}return O(o,0,e+yt(h)+r)},Dn=function(){for(var n=new Int32Array(256),t=0;t<256;++t){for(var i=t,e=9;--e;)i=(i&1&&-306674912)^i>>>1;n[t]=i}return n}(),wt=function(){var n=-1;return{p:function(t){for(var i=n,e=0;e<t.length;++e)i=Dn[i&255^t[e]]^i>>>8;n=i},d:function(){return~n}}},Gt=function(){var n=1,t=0;return{p:function(i){for(var e=n,r=t,a=i.length|0,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)r+=e+=i[s];e=(e&65535)+15*(e>>16),r=(r&65535)+15*(r>>16)}n=e,t=r},d:function(){return n%=65521,t%=65521,(n&255)<<24|(n&65280)<<8|(t&255)<<8|t>>8}}},ht=function(n,t,i,e,r){if(!r&&(r={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),s=new k(a.length+n.length);s.set(a),s.set(n,a.length),n=s,r.w=a.length}return $n(n,t.level==null?6:t.level,t.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+t.mem,i,e,r)},Dt=function(n,t){var i={};for(var e in n)i[e]=n[e];for(var e in t)i[e]=t[e];return i},Wn=function(n,t,i){for(var e=n(),r=n.toString(),a=r.slice(r.indexOf("[")+1,r.lastIndexOf("]")).replace(/\\s+/g,"").split(","),s=0;s<e.length;++s){var o=e[s],c=a[s];if(typeof o=="function"){t+=";"+c+"=";var u=o.toString();if(o.prototype)if(u.indexOf("[native code]")!=-1){var h=u.indexOf(" ",8)+1;t+=u.slice(h,u.indexOf("(",h))}else{t+=u;for(var f in o.prototype)t+=";"+c+".prototype."+f+"="+o.prototype[f].toString()}else t+=u}else i[c]=o}return t},Bt=[],ai=function(n){var t=[];for(var i in n)n[i].buffer&&t.push((n[i]=new n[i].constructor(n[i])).buffer);return t},qn=function(n,t,i,e){if(!Bt[i]){for(var r="",a={},s=n.length-1,o=0;o<s;++o)r=Wn(n[o],r,a);Bt[i]={c:Wn(n[s],r,a),e:a}}var c=Dt({},Bt[i].e);return ei(Bt[i].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",i,c,ai(c),e)},zt=function(){return[k,N,At,vt,dt,Tt,Pt,xn,Cn,An,Et,Tn,J,Xt,_,Zt,yt,O,v,$t,xt,at,an]},kt=function(){return[k,N,At,vt,dt,Tt,Vt,tn,In,et,Un,gt,Et,En,rt,J,tt,mt,Nt,Lt,nn,bt,en,rn,yt,O,$n,ht,Wt,at]},Kn=function(){return[on,hn,A,wt,Dn]},Qn=function(){return[un,Zn]},Vn=function(){return[fn,A,Gt]},Xn=function(){return[cn]},at=function(n){return postMessage(n,[n.buffer])},an=function(n){return n&&{out:n.size&&new k(n.size),dictionary:n.dictionary}},St=function(n,t,i,e,r,a){var s=qn(i,e,r,function(o,c){s.terminate(),a(o,c)});return s.postMessage([n,t],t.consume?[n.buffer]:[]),function(){s.terminate()}},Y=function(n){return n.ondata=function(t,i){return postMessage([t,i],[t.buffer])},function(t){t.data.length?(n.push(t.data[0],t.data[1]),postMessage([t.data[0].length])):n.flush()}},Mt=function(n,t,i,e,r,a,s){var o,c=qn(n,e,r,function(u,h){u?(c.terminate(),t.ondata.call(t,u)):Array.isArray(h)?h.length==1?(t.queuedSize-=h[0],t.ondrain&&t.ondrain(h[0])):(h[1]&&c.terminate(),t.ondata.call(t,u,h[0],h[1])):s(h)});c.postMessage(i),t.queuedSize=0,t.push=function(u,h){t.ondata||v(5),o&&t.ondata(v(4,0,1),null,!!h),t.queuedSize+=u.length,c.postMessage([u,o=h],[u.buffer])},t.terminate=function(){c.terminate()},a&&(t.flush=function(){c.postMessage([])})},L=function(n,t){return n[t]|n[t+1]<<8},Q=function(n,t){return(n[t]|n[t+1]<<8|n[t+2]<<16|n[t+3]<<24)>>>0},sn=function(n,t){return Q(n,t)+Q(n,t+4)*4294967296},A=function(n,t,i){for(;i;++t)n[t]=i,i>>>=8},on=function(n,t){var i=t.filename;if(n[0]=31,n[1]=139,n[2]=8,n[8]=t.level<2?4:t.level==9?2:0,n[9]=3,t.mtime!=0&&A(n,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),i){n[3]=8;for(var e=0;e<=i.length;++e)n[e+10]=i.charCodeAt(e)}},un=function(n){(n[0]!=31||n[1]!=139||n[2]!=8)&&v(6,"invalid gzip data");var t=n[3],i=10;t&4&&(i+=(n[10]|n[11]<<8)+2);for(var e=(t>>3&1)+(t>>4&1);e>0;e-=!n[i++]);return i+(t&2)},Zn=function(n){var t=n.length;return(n[t-4]|n[t-3]<<8|n[t-2]<<16|n[t-1]<<24)>>>0},hn=function(n){return 10+(n.filename?n.filename.length+1:0)},fn=function(n,t){var i=t.level,e=i==0?0:i<6?1:i==9?3:2;if(n[0]=120,n[1]=e<<6|(t.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,t.dictionary){var r=Gt();r.p(t.dictionary),A(n,2,r.d())}},cn=function(n,t){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&v(6,"invalid zlib data"),(n[1]>>5&1)==+!t&&v(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function ft(n,t){return typeof n=="function"&&(t=n,n={}),this.ondata=t,n}var F=function(){function n(t,i){if(typeof t=="function"&&(i=t,t={}),this.ondata=i,this.o=t||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new k(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,i){this.ondata(ht(t,this.o,0,0,this.s),i)},n.prototype.push=function(t,i){this.ondata||v(5),this.s.l&&v(4);var e=t.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var r=new k(e&-32768);r.set(this.b.subarray(0,this.s.z)),this.b=r}var a=this.b.length-this.s.z;this.b.set(t.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(t.subarray(a),32768),this.s.z=t.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(t,this.s.z),this.s.z+=t.length;this.s.l=i&1,(this.s.z>this.s.w+8191||i)&&(this.p(this.b,i||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||v(5),this.s.l&&v(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}(),Nn=function(){function n(t,i){Mt([kt,function(){return[Y,F]}],this,ft.call(this,t,i),function(e){var r=new F(e.data);onmessage=Y(r)},6,1)}return n}();function Ln(n,t,i){return i||(i=t,t={}),typeof i!="function"&&v(7),St(n,t,[kt],function(e){return at(Wt(e.data[0],e.data[1]))},0,i)}function Wt(n,t){return ht(n,t||{},0,0)}var H=function(){function n(t,i){typeof t=="function"&&(i=t,t={}),this.ondata=i;var e=t&&t.dictionary&&t.dictionary.subarray(-32768);this.s={i:0,b:e?e.length:0},this.o=new k(32768),this.p=new k(0),e&&this.o.set(e)}return n.prototype.e=function(t){if(this.ondata||v(5),this.d&&v(4),!this.p.length)this.p=t;else if(t.length){var i=new k(this.p.length+t.length);i.set(this.p),i.set(t,this.p.length),this.p=i}},n.prototype.c=function(t){this.s.i=+(this.d=t||!1);var i=this.s.b,e=$t(this.p,this.s,this.o);this.ondata(O(e,i,this.s.b),this.d),this.o=O(e,this.s.b-32768),this.s.b=this.o.length,this.p=O(this.p,this.s.p/8|0),this.s.p&=7},n.prototype.push=function(t,i){this.e(t),this.c(i)},n}(),ln=function(){function n(t,i){Mt([zt,function(){return[Y,H]}],this,ft.call(this,t,i),function(e){var r=new H(e.data);onmessage=Y(r)},7,0)}return n}();function pn(n,t,i){return i||(i=t,t={}),typeof i!="function"&&v(7),St(n,t,[zt],function(e){return at(xt(e.data[0],an(e.data[1])))},1,i)}function xt(n,t){return $t(n,{i:2},t&&t.out,t&&t.dictionary)}var Ht=function(){function n(t,i){this.c=wt(),this.l=0,this.v=1,F.call(this,t,i)}return n.prototype.push=function(t,i){this.c.p(t),this.l+=t.length,F.prototype.push.call(this,t,i)},n.prototype.p=function(t,i){var e=ht(t,this.o,this.v&&hn(this.o),i&&8,this.s);this.v&&(on(e,this.o),this.v=0),i&&(A(e,e.length-8,this.c.d()),A(e,e.length-4,this.l)),this.ondata(e,i)},n.prototype.flush=function(){F.prototype.flush.call(this)},n}(),Gn=function(){function n(t,i){Mt([kt,Kn,function(){return[Y,F,Ht]}],this,ft.call(this,t,i),function(e){var r=new Ht(e.data);onmessage=Y(r)},8,1)}return n}();function Bn(n,t,i){return i||(i=t,t={}),typeof i!="function"&&v(7),St(n,t,[kt,Kn,function(){return[Rt]}],function(e){return at(Rt(e.data[0],e.data[1]))},2,i)}function Rt(n,t){t||(t={});var i=wt(),e=n.length;i.p(n);var r=ht(n,t,hn(t),8),a=r.length;return on(r,t),A(r,a-8,i.d()),A(r,a-4,e),r}var jt=function(){function n(t,i){this.v=1,this.r=0,H.call(this,t,i)}return n.prototype.push=function(t,i){if(H.prototype.e.call(this,t),this.r+=t.length,this.v){var e=this.p.subarray(this.v-1),r=e.length>3?un(e):4;if(r>e.length){if(!i)return}else this.v>1&&this.onmember&&this.onmember(this.r-e.length);this.p=e.subarray(r),this.v=0}H.prototype.c.call(this,i),this.s.f&&!this.s.l&&!i&&(this.v=yt(this.s.p)+9,this.s={i:0},this.o=new k(0),this.push(new k(0),i))},n}(),Hn=function(){function n(t,i){var e=this;Mt([zt,Qn,function(){return[Y,H,jt]}],this,ft.call(this,t,i),function(r){var a=new jt(r.data);a.onmember=function(s){return postMessage(s)},onmessage=Y(a)},9,0,function(r){return e.onmember&&e.onmember(r)})}return n}();function Rn(n,t,i){return i||(i=t,t={}),typeof i!="function"&&v(7),St(n,t,[zt,Qn,function(){return[Jt]}],function(e){return at(Jt(e.data[0],e.data[1]))},3,i)}function Jt(n,t){var i=un(n);return i+8>n.length&&v(6,"invalid gzip data"),$t(n.subarray(i,-8),{i:2},t&&t.out||new k(Zn(n)),t&&t.dictionary)}var vn=function(){function n(t,i){this.c=Gt(),this.v=1,F.call(this,t,i)}return n.prototype.push=function(t,i){this.c.p(t),F.prototype.push.call(this,t,i)},n.prototype.p=function(t,i){var e=ht(t,this.o,this.v&&(this.o.dictionary?6:2),i&&4,this.s);this.v&&(fn(e,this.o),this.v=0),i&&A(e,e.length-4,this.c.d()),this.ondata(e,i)},n.prototype.flush=function(){F.prototype.flush.call(this)},n}(),si=function(){function n(t,i){Mt([kt,Vn,function(){return[Y,F,vn]}],this,ft.call(this,t,i),function(e){var r=new vn(e.data);onmessage=Y(r)},10,1)}return n}();function oi(n,t,i){return i||(i=t,t={}),typeof i!="function"&&v(7),St(n,t,[kt,Vn,function(){return[dn]}],function(e){return at(dn(e.data[0],e.data[1]))},4,i)}function dn(n,t){t||(t={});var i=Gt();i.p(n);var e=ht(n,t,t.dictionary?6:2,4);return fn(e,t),A(e,e.length-4,i.d()),e}var _t=function(){function n(t,i){H.call(this,t,i),this.v=t&&t.dictionary?2:1}return n.prototype.push=function(t,i){if(H.prototype.e.call(this,t),this.v){if(this.p.length<6&&!i)return;this.p=this.p.subarray(cn(this.p,this.v-1)),this.v=0}i&&(this.p.length<4&&v(6,"invalid zlib data"),this.p=this.p.subarray(0,-4)),H.prototype.c.call(this,i)},n}(),jn=function(){function n(t,i){Mt([zt,Xn,function(){return[Y,H,_t]}],this,ft.call(this,t,i),function(e){var r=new _t(e.data);onmessage=Y(r)},11,0)}return n}();function Jn(n,t,i){return i||(i=t,t={}),typeof i!="function"&&v(7),St(n,t,[zt,Xn,function(){return[Ot]}],function(e){return at(Ot(e.data[0],an(e.data[1])))},5,i)}function Ot(n,t){return $t(n.subarray(cn(n,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var gn=function(){function n(t,i){this.o=ft.call(this,t,i)||{},this.G=jt,this.I=H,this.Z=_t}return n.prototype.i=function(){var t=this;this.s.ondata=function(i,e){t.ondata(i,e)}},n.prototype.push=function(t,i){if(this.ondata||v(5),this.s)this.s.push(t,i);else{if(this.p&&this.p.length){var e=new k(this.p.length+t.length);e.set(this.p),e.set(t,this.p.length)}else this.p=t;this.p.length>2&&(this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(this.o):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(this.o):new this.Z(this.o),this.i(),this.s.push(this.p,i),this.p=null)}},n}(),ui=function(){function n(t,i){gn.call(this,t,i),this.queuedSize=0,this.G=Hn,this.I=ln,this.Z=jn}return n.prototype.i=function(){var t=this;this.s.ondata=function(i,e,r){t.ondata(i,e,r)},this.s.ondrain=function(i){t.queuedSize-=i,t.ondrain&&t.ondrain(i)}},n.prototype.push=function(t,i){this.queuedSize+=t.length,gn.prototype.push.call(this,t,i)},n}();function hi(n,t,i){return i||(i=t,t={}),typeof i!="function"&&v(7),n[0]==31&&n[1]==139&&n[2]==8?Rn(n,t,i):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?pn(n,t,i):Jn(n,t,i)}function fi(n,t){return n[0]==31&&n[1]==139&&n[2]==8?Jt(n,t):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?xt(n,t):Ot(n,t)}var yn=function(n,t,i,e){for(var r in n){var a=n[r],s=t+r,o=e;Array.isArray(a)&&(o=Dt(e,a[1]),a=a[0]),a instanceof k?i[s]=[a,o]:(i[s+="/"]=[new k(0),o],yn(a,s,i,e))}},_n=typeof TextEncoder<"u"&&new TextEncoder,mn=typeof TextDecoder<"u"&&new TextDecoder,On=0;try{mn.decode(rt,{stream:!0}),On=1}catch{}var Yn=function(n){for(var t="",i=0;;){var e=n[i++],r=(e>127)+(e>223)+(e>239);if(i+r>n.length)return{s:t,r:O(n,i-1)};r?r==3?(e=((e&15)<<18|(n[i++]&63)<<12|(n[i++]&63)<<6|n[i++]&63)-65536,t+=String.fromCharCode(55296|e>>10,56320|e&1023)):r&1?t+=String.fromCharCode((e&31)<<6|n[i++]&63):t+=String.fromCharCode((e&15)<<12|(n[i++]&63)<<6|n[i++]&63):t+=String.fromCharCode(e)}},ci=function(){function n(t){this.ondata=t,On?this.t=new TextDecoder:this.p=rt}return n.prototype.push=function(t,i){if(this.ondata||v(5),i=!!i,this.t){this.ondata(this.t.decode(t,{stream:!0}),i),i&&(this.t.decode().length&&v(8),this.t=null);return}this.p||v(4);var e=new k(this.p.length+t.length);e.set(this.p),e.set(t,this.p.length);var r=Yn(e),a=r.s,s=r.r;i?(s.length&&v(8),this.p=null):this.p=s,this.ondata(a,i)},n}(),li=function(){function n(t){this.ondata=t}return n.prototype.push=function(t,i){this.ondata||v(5),this.d&&v(4),this.ondata(st(t),this.d=i||!1)},n}();function st(n,t){if(t){for(var i=new k(n.length),e=0;e<n.length;++e)i[e]=n.charCodeAt(e);return i}if(_n)return _n.encode(n);for(var r=n.length,a=new k(n.length+(n.length>>1)),s=0,o=function(f){a[s++]=f},e=0;e<r;++e){if(s+5>a.length){var c=new k(s+8+(r-e<<1));c.set(a),a=c}var u=n.charCodeAt(e);u<128||t?o(u):u<2048?(o(192|u>>6),o(128|u&63)):u>55295&&u<57344?(u=65536+(u&1047552)|n.charCodeAt(++e)&1023,o(240|u>>18),o(128|u>>12&63),o(128|u>>6&63),o(128|u&63)):(o(224|u>>12),o(128|u>>6&63),o(128|u&63))}return O(a,0,s)}function bn(n,t){if(t){for(var i="",e=0;e<n.length;e+=16384)i+=String.fromCharCode.apply(null,n.subarray(e,e+16384));return i}else{if(mn)return mn.decode(n);var r=Yn(n),a=r.s,i=r.r;return i.length&&v(8),a}}var Fn=function(n){return n==1?3:n<6?2:n==9?1:0},Pn=function(n,t){return t+30+L(n,t+26)+L(n,t+28)},ti=function(n,t,i){var e=L(n,t+28),r=bn(n.subarray(t+46,t+46+e),!(L(n,t+8)&2048)),a=t+46+e,s=Q(n,t+20),o=i&&s==4294967295?ni(n,a):[s,Q(n,t+24),Q(n,t+42)],c=o[0],u=o[1],h=o[2];return[L(n,t+10),c,u,r,a+L(n,t+30)+L(n,t+32),h]},ni=function(n,t){for(;L(n,t)!=1;t+=4+L(n,t+2));return[sn(n,t+12),sn(n,t+4),sn(n,t+20)]},ot=function(n){var t=0;if(n)for(var i in n){var e=n[i].length;e>65535&&v(9),t+=e+4}return t},It=function(n,t,i,e,r,a,s,o){var c=e.length,u=i.extra,h=o&&o.length,f=ot(u);A(n,t,s!=null?33639248:67324752),t+=4,s!=null&&(n[t++]=20,n[t++]=i.os),n[t]=20,t+=2,n[t++]=i.flag<<1|(a<0&&8),n[t++]=r&&8,n[t++]=i.compression&255,n[t++]=i.compression>>8;var l=new Date(i.mtime==null?Date.now():i.mtime),z=l.getFullYear()-1980;if((z<0||z>119)&&v(10),A(n,t,z<<25|l.getMonth()+1<<21|l.getDate()<<16|l.getHours()<<11|l.getMinutes()<<5|l.getSeconds()>>1),t+=4,a!=-1&&(A(n,t,i.crc),A(n,t+4,a<0?-a-2:a),A(n,t+8,i.size)),A(n,t+12,c),A(n,t+14,f),t+=16,s!=null&&(A(n,t,h),A(n,t+6,i.attrs),A(n,t+10,s),t+=14),n.set(e,t),t+=c,f)for(var m in u){var w=u[m],d=w.length;A(n,t,+m),A(n,t+2,d),n.set(w,t+4),t+=4+d}return h&&(n.set(o,t),t+=h),t},wn=function(n,t,i,e,r){A(n,t,101010256),A(n,t+8,i),A(n,t+10,i),A(n,t+12,e),A(n,t+16,r)},qt=function(){function n(t){this.filename=t,this.c=wt(),this.size=0,this.compression=0}return n.prototype.process=function(t,i){this.ondata(null,t,i)},n.prototype.push=function(t,i){this.ondata||v(5),this.c.p(t),this.size+=t.length,i&&(this.crc=this.c.d()),this.process(t,i||!1)},n}(),pi=function(){function n(t,i){var e=this;i||(i={}),qt.call(this,t),this.d=new F(i,function(r,a){e.ondata(null,r,a)}),this.compression=8,this.flag=Fn(i.level)}return n.prototype.process=function(t,i){try{this.d.push(t,i)}catch(e){this.ondata(e,null,i)}},n.prototype.push=function(t,i){qt.prototype.push.call(this,t,i)},n}(),vi=function(){function n(t,i){var e=this;i||(i={}),qt.call(this,t),this.d=new Nn(i,function(r,a,s){e.ondata(r,a,s)}),this.compression=8,this.flag=Fn(i.level),this.terminate=this.d.terminate}return n.prototype.process=function(t,i){this.d.push(t,i)},n.prototype.push=function(t,i){qt.prototype.push.call(this,t,i)},n}(),di=function(){function n(t){this.ondata=t,this.u=[],this.d=1}return n.prototype.add=function(t){var i=this;if(this.ondata||v(5),this.d&2)this.ondata(v(4+(this.d&1)*8,0,1),null,!1);else{var e=st(t.filename),r=e.length,a=t.comment,s=a&&st(a),o=r!=t.filename.length||s&&a.length!=s.length,c=r+ot(t.extra)+30;r>65535&&this.ondata(v(11,0,1),null,!1);var u=new k(c);It(u,0,t,e,o,-1);var h=[u],f=function(){for(var d=0,b=h;d<b.length;d++){var M=b[d];i.ondata(null,M,!1)}h=[]},l=this.d;this.d=0;var z=this.u.length,m=Dt(t,{f:e,u:o,o:s,t:function(){t.terminate&&t.terminate()},r:function(){if(f(),l){var d=i.u[z+1];d?d.r():i.d=1}l=1}}),w=0;t.ondata=function(d,b,M){if(d)i.ondata(d,b,M),i.terminate();else if(w+=b.length,h.push(b),M){var S=new k(16);A(S,0,134695760),A(S,4,t.crc),A(S,8,w),A(S,12,t.size),h.push(S),m.c=w,m.b=c+w+16,m.crc=t.crc,m.size=t.size,l&&m.r(),l=1}else l&&f()},this.u.push(m)}},n.prototype.end=function(){var t=this;if(this.d&2){this.ondata(v(4+(this.d&1)*8,0,1),null,!0);return}this.d?this.e():this.u.push({r:function(){t.d&1&&(t.u.splice(-1,1),t.e())},t:function(){}}),this.d=3},n.prototype.e=function(){for(var t=0,i=0,e=0,r=0,a=this.u;r<a.length;r++){var s=a[r];e+=46+s.f.length+ot(s.extra)+(s.o?s.o.length:0)}for(var o=new k(e+22),c=0,u=this.u;c<u.length;c++){var s=u[c];It(o,t,s,s.f,s.u,-s.c-2,i,s.o),t+=46+s.f.length+ot(s.extra)+(s.o?s.o.length:0),i+=s.b}wn(o,t,this.u.length,e,i),this.ondata(null,o,!0),this.d=2},n.prototype.terminate=function(){for(var t=0,i=this.u;t<i.length;t++){var e=i[t];e.t()}this.d=2},n}();function gi(n,t,i){i||(i=t,t={}),typeof i!="function"&&v(7);var e={};yn(n,"",e,t);var r=Object.keys(e),a=r.length,s=0,o=0,c=a,u=new Array(a),h=[],f=function(){for(var d=0;d<h.length;++d)h[d]()},l=function(d,b){Yt(function(){i(d,b)})};Yt(function(){l=i});var z=function(){var d=new k(o+22),b=s,M=o-s;o=0;for(var S=0;S<c;++S){var y=u[S];try{var $=y.c.length;It(d,o,y,y.f,y.u,$);var E=30+y.f.length+ot(y.extra),x=o+E;d.set(y.c,x),It(d,s,y,y.f,y.u,$,o,y.m),s+=16+E+(y.m?y.m.length:0),o=x+$}catch(p){return l(p,null)}}wn(d,s,u.length,M,b),l(null,d)};a||z();for(var m=function(d){var b=r[d],M=e[b],S=M[0],y=M[1],$=wt(),E=S.length;$.p(S);var x=st(b),p=x.length,g=y.comment,I=g&&st(g),V=I&&I.length,W=ot(y.extra),D=y.level==0?0:8,C=function(q,X){if(q)f(),l(q,null);else{var U=X.length;u[d]=Dt(y,{size:E,crc:$.d(),c:X,f:x,m:I,u:p!=b.length||I&&g.length!=V,compression:D}),s+=30+p+W+U,o+=76+2*(p+W)+(V||0)+U,--a||z()}};if(p>65535&&C(v(11,0,1),null),!D)C(null,S);else if(E<16e4)try{C(null,Wt(S,y))}catch(q){C(q,null)}else h.push(Ln(S,y,C))},w=0;w<c;++w)m(w);return f}function yi(n,t){t||(t={});var i={},e=[];yn(n,"",i,t);var r=0,a=0;for(var s in i){var o=i[s],c=o[0],u=o[1],h=u.level==0?0:8,f=st(s),l=f.length,z=u.comment,m=z&&st(z),w=m&&m.length,d=ot(u.extra);l>65535&&v(11);var b=h?Wt(c,u):c,M=b.length,S=wt();S.p(c),e.push(Dt(u,{size:c.length,crc:S.d(),c:b,f,m,u:l!=s.length||m&&z.length!=w,o:r,compression:h})),r+=30+l+d+M,a+=76+2*(l+d)+(w||0)+M}for(var y=new k(a+22),$=r,E=a-r,x=0;x<e.length;++x){var f=e[x];It(y,f.o,f,f.f,f.u,f.c.length);var p=30+f.f.length+ot(f.extra);y.set(f.c,f.o+p),It(y,r,f,f.f,f.u,f.c.length,f.o,f.m),r+=16+p+(f.m?f.m.length:0)}return wn(y,r,e.length,E,$),y}var ii=function(){function n(){}return n.prototype.push=function(t,i){this.ondata(null,t,i)},n.compression=0,n}(),mi=function(){function n(){var t=this;this.i=new H(function(i,e){t.ondata(null,i,e)})}return n.prototype.push=function(t,i){try{this.i.push(t,i)}catch(e){this.ondata(e,null,i)}},n.compression=8,n}(),bi=function(){function n(t,i){var e=this;i<32e4?this.i=new H(function(r,a){e.ondata(null,r,a)}):(this.i=new ln(function(r,a,s){e.ondata(r,a,s)}),this.terminate=this.i.terminate)}return n.prototype.push=function(t,i){this.i.terminate&&(t=O(t,0)),this.i.push(t,i)},n.compression=8,n}(),wi=function(){function n(t){this.onfile=t,this.k=[],this.o={0:ii},this.p=rt}return n.prototype.push=function(t,i){var e=this;if(this.onfile||v(5),this.p||v(4),this.c>0){var r=Math.min(this.c,t.length),a=t.subarray(0,r);if(this.c-=r,this.d?this.d.push(a,!this.c):this.k[0].push(a),t=t.subarray(r),t.length)return this.push(t,i)}else{var s=0,o=0,c=void 0,u=void 0;this.p.length?t.length?(u=new k(this.p.length+t.length),u.set(this.p),u.set(t,this.p.length)):u=this.p:u=t;for(var h=u.length,f=this.c,l=f&&this.d,z=function(){var b,M=Q(u,o);if(M==67324752){s=1,c=o,m.d=null,m.c=0;var S=L(u,o+6),y=L(u,o+8),$=S&2048,E=S&8,x=L(u,o+26),p=L(u,o+28);if(h>o+30+x+p){var g=[];m.k.unshift(g),s=2;var I=Q(u,o+18),V=Q(u,o+22),W=bn(u.subarray(o+30,o+=30+x),!$);I==4294967295?(b=E?[-2]:ni(u,o),I=b[0],V=b[1]):E&&(I=-1),o+=p,m.c=I;var D,C={name:W,compression:y,start:function(){if(C.ondata||v(5),!I)C.ondata(null,rt,!0);else{var q=e.o[y];q||C.ondata(v(14,"unknown compression type "+y,1),null,!1),D=I<0?new q(W):new q(W,I,V),D.ondata=function(G,ut,B){C.ondata(G,ut,B)};for(var X=0,U=g;X<U.length;X++){var Z=U[X];D.push(Z,!1)}e.k[0]==g&&e.c?e.d=D:D.push(rt,!0)}},terminate:function(){D&&D.terminate&&D.terminate()}};I>=0&&(C.size=I,C.originalSize=V),m.onfile(C)}return"break"}else if(f){if(M==134695760)return c=o+=12+(f==-2&&8),s=3,m.c=0,"break";if(M==33639248)return c=o-=4,s=3,m.c=0,"break"}},m=this;o<h-4;++o){var w=z();if(w==="break")break}if(this.p=rt,f<0){var d=s?u.subarray(0,c-12-(f==-2&&8)-(Q(u,c-16)==134695760&&4)):u.subarray(0,o);l?l.push(d,!!s):this.k[+(s==2)].push(d)}if(s&2)return this.push(u.subarray(o),i);this.p=u.subarray(o)}i&&(this.c&&v(13),this.p=null)},n.prototype.register=function(t){this.o[t.compression]=t},n}(),Yt=typeof queueMicrotask=="function"?queueMicrotask:typeof setTimeout=="function"?setTimeout:function(n){n()};function zi(n,t,i){i||(i=t,t={}),typeof i!="function"&&v(7);var e=[],r=function(){for(var d=0;d<e.length;++d)e[d]()},a={},s=function(d,b){Yt(function(){i(d,b)})};Yt(function(){s=i});for(var o=n.length-22;Q(n,o)!=101010256;--o)if(!o||n.length-o>65558)return s(v(13,0,1),null),r;var c=L(n,o+8);if(c){var u=c,h=Q(n,o+16),f=h==4294967295||u==65535;if(f){var l=Q(n,o-12);f=Q(n,l)==101075792,f&&(u=c=Q(n,l+32),h=Q(n,l+48))}for(var z=t&&t.filter,m=function(d){var b=ti(n,h,f),M=b[0],S=b[1],y=b[2],$=b[3],E=b[4],x=b[5],p=Pn(n,x);h=E;var g=function(V,W){V?(r(),s(V,null)):(W&&(a[$]=W),--c||s(null,a))};if(!z||z({name:$,size:S,originalSize:y,compression:M}))if(!M)g(null,O(n,p,p+S));else if(M==8){var I=n.subarray(p,p+S);if(y<524288||S>.8*y)try{g(null,xt(I,{out:new k(y)}))}catch(V){g(V,null)}else e.push(pn(I,{size:y},g))}else g(v(14,"unknown compression type "+M,1),null);else g(null,null)},w=0;w<u;++w)m(w)}else s(null,{});return r}function ki(n,t){for(var i={},e=n.length-22;Q(n,e)!=101010256;--e)(!e||n.length-e>65558)&&v(13);var r=L(n,e+8);if(!r)return{};var a=Q(n,e+16),s=a==4294967295||r==65535;if(s){var o=Q(n,e-12);s=Q(n,o)==101075792,s&&(r=Q(n,o+32),a=Q(n,o+48))}for(var c=t&&t.filter,u=0;u<r;++u){var h=ti(n,a,s),f=h[0],l=h[1],z=h[2],m=h[3],w=h[4],d=h[5],b=Pn(n,d);a=w,(!c||c({name:m,size:l,originalSize:z,compression:f}))&&(f?f==8?i[m]=xt(n.subarray(b,b+l),{out:new k(z)}):v(14,"unknown compression type "+f):i[m]=O(n,b,b+l))}return i}export{Gn as AsyncCompress,ui as AsyncDecompress,Nn as AsyncDeflate,Hn as AsyncGunzip,Gn as AsyncGzip,ln as AsyncInflate,bi as AsyncUnzipInflate,jn as AsyncUnzlib,vi as AsyncZipDeflate,si as AsyncZlib,Ht as Compress,ci as DecodeUTF8,gn as Decompress,F as Deflate,li as EncodeUTF8,ri as FlateErrorCode,jt as Gunzip,Ht as Gzip,H as Inflate,wi as Unzip,mi as UnzipInflate,ii as UnzipPassThrough,_t as Unzlib,di as Zip,pi as ZipDeflate,qt as ZipPassThrough,vn as Zlib,Bn as compress,Rt as compressSync,hi as decompress,fi as decompressSync,Ln as deflate,Wt as deflateSync,Rn as gunzip,Jt as gunzipSync,Bn as gzip,Rt as gzipSync,pn as inflate,xt as inflateSync,bn as strFromU8,st as strToU8,zi as unzip,ki as unzipSync,Jn as unzlib,Ot as unzlibSync,gi as zip,yi as zipSync,oi as zlib,dn as zlibSync};
`,mimeType:"application/javascript"},"/lit-html/directives/keyed.js":{content:`import"/lit-html@3.3.1/es2022/directive-helpers.mjs";import"/lit-html@3.3.1/es2022/directive.mjs";import"/lit-html@3.3.1/es2022/lit-html.mjs";export*from"/lit-html@3.3.1/es2022/directives/keyed.mjs";
`,mimeType:"application/javascript"},"/lit-html/static.js":{content:`import"/lit-html@3.3.1/es2022/lit-html.mjs";export*from"/lit-html@3.3.1/es2022/static.mjs";
`,mimeType:"application/javascript"},"/lit-html@3.3.1/es2022/directive.mjs":{content:`var i={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},s=t=>(...e)=>({_$litDirective$:t,values:e}),T=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,r){this._$Ct=t,this._$AM=e,this._$Ci=r}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}};export{T as Directive,i as PartType,s as directive};/*! Bundled license information:

lit-html/directive.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
*/
`,mimeType:"application/javascript"},"/lit-html@3.3.1/es2022/static.mjs":{content:`import{html as p,svg as S,mathml as v}from"./lit-html.mjs";var n=Symbol.for(""),d=t=>{if(t?.r===n)return t?._$litStatic$},_=t=>({_$litStatic$:t,r:n}),g=(t,...a)=>({_$litStatic$:a.reduce((s,i,o)=>s+(e=>{if(e._$litStatic$!==void 0)return e._$litStatic$;throw Error(\`Value passed to 'literal' function must be a 'literal' result: \${e}. Use 'unsafeStatic' to pass non-literal values, but
            take care to ensure page security.\`)})(i)+t[o+1],t[0]),r:n}),m=new Map,u=t=>(a,...s)=>{let i=s.length,o,e,l=[],c=[],$,r=0,f=!1;for(;r<i;){for($=a[r];r<i&&(e=s[r],(o=d(e))!==void 0);)$+=o+a[++r],f=!0;r!==i&&c.push(e),l.push($),r++}if(r===i&&l.push(a[i]),f){let h=l.join("$$lit$$");(a=m.get(h))===void 0&&(l.raw=l,m.set(h,a=l)),s=c}return t(a,...s)},w=u(p),b=u(S),y=u(v);export{w as html,g as literal,y as mathml,b as svg,_ as unsafeStatic,u as withStatic};/*! Bundled license information:

lit-html/static.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
*/
`,mimeType:"application/javascript"},"/lit-html@3.3.1/es2022/directive-helpers.mjs":{content:`import{_$LH as n}from"./lit-html.mjs";var{I:m}=n,v=e=>e===null||typeof e!="object"&&typeof e!="function",p={HTML:1,SVG:2,MATHML:3},d=(e,t)=>t===void 0?e?._$litType$!==void 0:e?._$litType$===t,u=e=>e?._$litType$?.h!=null,f=e=>e?._$litDirective$!==void 0,c=e=>e?._$litDirective$,T=e=>e.strings===void 0,_=()=>document.createComment(""),P=(e,t,i)=>{let a=e._$AA.parentNode,l=t===void 0?e._$AB:t._$AA;if(i===void 0){let r=a.insertBefore(_(),l),$=a.insertBefore(_(),l);i=new m(r,$,e,e.options)}else{let r=i._$AB.nextSibling,$=i._$AM,o=$!==e;if(o){let s;i._$AQ?.(e),i._$AM=e,i._$AP!==void 0&&(s=e._$AU)!==$._$AU&&i._$AP(s)}if(r!==l||o){let s=i._$AA;for(;s!==r;){let A=s.nextSibling;a.insertBefore(s,l),s=A}}}return i},g=(e,t,i=e)=>(e._$AI(t,i),e),y={},C=(e,t=y)=>e._$AH=t,R=e=>e._$AH,B=e=>{e._$AR(),e._$AA.remove()},H=e=>{e._$AR()};export{p as TemplateResultType,H as clearPart,R as getCommittedValue,c as getDirectiveClass,P as insertPart,u as isCompiledTemplateResult,f as isDirectiveResult,v as isPrimitive,T as isSingleExpression,d as isTemplateResult,B as removePart,g as setChildPartValue,C as setCommittedValue};/*! Bundled license information:

lit-html/directive-helpers.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
*/
`,mimeType:"application/javascript"},"/lit-html@3.3.1/es2022/directives/keyed.mjs":{content:`import{nothing as s}from"../lit-html.mjs";import{directive as i,Directive as o}from"../directive.mjs";import{setCommittedValue as a}from"../directive-helpers.mjs";var m=i(class extends o{constructor(){super(...arguments),this.key=s}render(t,e){return this.key=t,e}update(t,[e,r]){return e!==this.key&&(a(t),this.key=e),r}});export{m as keyed};/*! Bundled license information:

lit-html/directives/keyed.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
*/
`,mimeType:"application/javascript"},"/lit-html/directives/unsafe-html.js":{content:`import"/lit-html@3.3.1/es2022/directive.mjs";import"/lit-html@3.3.1/es2022/lit-html.mjs";export*from"/lit-html@3.3.1/es2022/directives/unsafe-html.mjs";
`,mimeType:"application/javascript"},"/lit-html@3.3.1/es2022/directives/unsafe-html.mjs":{content:`import{nothing as t,noChange as s}from"../lit-html.mjs";import{Directive as n,PartType as a,directive as o}from"../directive.mjs";var i=class extends n{constructor(r){if(super(r),this.it=t,r.type!==a.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(r){if(r===t||r==null)return this._t=void 0,this.it=r;if(r===s)return r;if(typeof r!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(r===this.it)return this._t;this.it=r;let e=[r];return e.raw=e,this._t={_$litType$:this.constructor.resultType,strings:e,values:[]}}};i.directiveName="unsafeHTML",i.resultType=1;var c=o(i);export{i as UnsafeHTMLDirective,c as unsafeHTML};/*! Bundled license information:

lit-html/directives/unsafe-html.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
*/
`,mimeType:"application/javascript"},"/@codemirror/lang-javascript":{content:`import"/@codemirror/autocomplete@^6.0.0?target=es2022";import"/@codemirror/language@^6.6.0?target=es2022";import"/@codemirror/state@^6.0.0?target=es2022";import"/@codemirror/view@^6.17.0?target=es2022";import"/@lezer/common@^1.0.0?target=es2022";import"/@lezer/javascript@^1.0.0?target=es2022";export*from"/@codemirror/lang-javascript@6.2.4/es2022/lang-javascript.mjs";
`,mimeType:"application/javascript"},"/@codemirror/state":{content:`import"/@marijn/find-cluster-break@^1.0.0?target=es2022";export*from"/@codemirror/state@6.5.2/es2022/state.mjs";
`,mimeType:"application/javascript"},"/@codemirror/lang-html":{content:`import"/@codemirror/lang-css@^6.0.0?target=es2022";import"/@codemirror/lang-javascript@^6.0.0?target=es2022";import"/@codemirror/language@^6.4.0?target=es2022";import"/@codemirror/state@^6.0.0?target=es2022";import"/@codemirror/view@^6.17.0?target=es2022";import"/@lezer/html@^1.3.12?target=es2022";export*from"/@codemirror/lang-html@6.4.11/es2022/lang-html.mjs";
`,mimeType:"application/javascript"},"/@codemirror/lang-javascript@6.2.4/es2022/lang-javascript.mjs":{content:'import{parser as M}from"/@lezer/javascript@^1.0.0?target=es2022";import{syntaxTree as h,LRLanguage as R,indentNodeProp as _,continuedIndent as $,flatIndent as Z,delimitedIndent as z,foldNodeProp as H,foldInside as W,defineLanguageFacet as q,sublanguageProp as T,LanguageSupport as G}from"/@codemirror/language@^6.6.0?target=es2022";import{EditorSelection as K}from"/@codemirror/state@^6.0.0?target=es2022";import{EditorView as Q}from"/@codemirror/view@^6.17.0?target=es2022";import{snippetCompletion as c,ifNotIn as U,completeFromList as Y}from"/@codemirror/autocomplete@^6.0.0?target=es2022";import{NodeWeakMap as ee,IterMode as te}from"/@lezer/common@^1.0.0?target=es2022";var x=[c("function ${name}(${params}) {\\n	${}\\n}",{label:"function",detail:"definition",type:"keyword"}),c("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\\n	${}\\n}",{label:"for",detail:"loop",type:"keyword"}),c("for (let ${name} of ${collection}) {\\n	${}\\n}",{label:"for",detail:"of loop",type:"keyword"}),c("do {\\n	${}\\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),c("while (${}) {\\n	${}\\n}",{label:"while",detail:"loop",type:"keyword"}),c(`try {\n	\\${}\n} catch (\\${error}) {\n	\\${}\n}`,{label:"try",detail:"/ catch block",type:"keyword"}),c("if (${}) {\\n	${}\\n}",{label:"if",detail:"block",type:"keyword"}),c(`if (\\${}) {\n	\\${}\n} else {\n	\\${}\n}`,{label:"if",detail:"/ else block",type:"keyword"}),c(`class \\${name} {\n	constructor(\\${params}) {\n		\\${}\n	}\n}`,{label:"class",detail:"definition",type:"keyword"}),c(\'import {${names}} from "${module}"\\n${}\',{label:"import",detail:"named",type:"keyword"}),c(\'import ${name} from "${module}"\\n${}\',{label:"import",detail:"default",type:"keyword"})],C=x.concat([c("interface ${name} {\\n	${}\\n}",{label:"interface",detail:"definition",type:"keyword"}),c("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),c("enum ${name} {\\n	${}\\n}",{label:"enum",detail:"definition",type:"keyword"})]),J=new ee,X=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function y(e){return(n,a)=>{let t=n.node.getChild("VariableDefinition");return t&&a(t,e),!0}}var ne=["FunctionDeclaration"],ae={FunctionDeclaration:y("function"),ClassDeclaration:y("class"),ClassExpression:()=>!0,EnumDeclaration:y("constant"),TypeAliasDeclaration:y("type"),NamespaceDeclaration:y("namespace"),VariableDefinition(e,n){e.matchContext(ne)||n(e,"variable")},TypeDefinition(e,n){n(e,"type")},__proto__:null};function I(e,n){let a=J.get(n);if(a)return a;let t=[],o=!0;function i(r,l){let p=e.sliceString(r.from,r.to);t.push({label:p,type:l})}return n.cursor(te.IncludeAnonymous).iterate(r=>{if(o)o=!1;else if(r.name){let l=ae[r.name];if(l&&l(r,i)||X.has(r.name))return!1}else if(r.to-r.from>8192){for(let l of I(e,r.node))t.push(l);return!1}}),J.set(n,t),t}var b=/^[\\w$\\xa1-\\uffff][\\w$\\d\\xa1-\\uffff]*$/,w=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName","JSXText","JSXAttributeValue","JSXOpenTag","JSXCloseTag","JSXSelfClosingTag",".","?."];function D(e){let n=h(e.state).resolveInner(e.pos,-1);if(w.indexOf(n.name)>-1)return null;let a=n.name=="VariableName"||n.to-n.from<20&&b.test(e.state.sliceDoc(n.from,n.to));if(!a&&!e.explicit)return null;let t=[];for(let o=n;o;o=o.parent)X.has(o.name)&&(t=t.concat(I(e.state.doc,o)));return{options:t,from:a?n.from:e.pos,validFor:b}}function v(e,n,a){var t;let o=[];for(;;){let i=n.firstChild,r;if(i?.name=="VariableName")return o.push(e(i)),{path:o.reverse(),name:a};if(i?.name=="MemberExpression"&&((t=r=i.lastChild)===null||t===void 0?void 0:t.name)=="PropertyName")o.push(e(r)),n=i;else return null}}function E(e){let n=t=>e.state.doc.sliceString(t.from,t.to),a=h(e.state).resolveInner(e.pos,-1);return a.name=="PropertyName"?v(n,a.parent,n(a)):(a.name=="."||a.name=="?.")&&a.parent.name=="MemberExpression"?v(n,a.parent,""):w.indexOf(a.name)>-1?null:a.name=="VariableName"||a.to-a.from<20&&b.test(n(a))?{path:[],name:n(a)}:a.name=="MemberExpression"?v(n,a,""):e.explicit?{path:[],name:""}:null}function oe(e,n){let a=[],t=new Set;for(let o=0;;o++){for(let r of(Object.getOwnPropertyNames||Object.keys)(e)){if(!/^[a-zA-Z_$\\xaa-\\uffdc][\\w$\\xaa-\\uffdc]*$/.test(r)||t.has(r))continue;t.add(r);let l;try{l=e[r]}catch{continue}a.push({label:r,type:typeof l=="function"?/^[A-Z]/.test(r)?"class":n?"function":"method":n?"variable":"property",boost:-o})}let i=Object.getPrototypeOf(e);if(!i)return a;e=i}}function re(e){let n=new Map;return a=>{let t=E(a);if(!t)return null;let o=e;for(let r of t.path)if(o=o[r],!o)return null;let i=n.get(o);return i||n.set(o,i=oe(o,!t.path.length)),{from:a.pos-t.name.length,options:i,validFor:b}}}var m=R.define({name:"javascript",parser:M.configure({props:[_.add({IfStatement:$({except:/^\\s*({|else\\b)/}),TryStatement:$({except:/^\\s*({|catch\\b|finally\\b)/}),LabeledStatement:Z,SwitchBody:e=>{let n=e.textAfter,a=/^\\s*\\}/.test(n),t=/^\\s*(case|default)\\b/.test(n);return e.baseIndent+(a?0:t?1:2)*e.unit},Block:z({closing:"}"}),ArrowFunction:e=>e.baseIndent+e.unit,"TemplateString BlockComment":()=>null,"Statement Property":$({except:/^\\s*{/}),JSXElement(e){let n=/^\\s*<\\//.test(e.textAfter);return e.lineIndent(e.node.from)+(n?0:e.unit)},JSXEscape(e){let n=/\\s*\\}/.test(e.textAfter);return e.lineIndent(e.node.from)+(n?0:e.unit)},"JSXOpenTag JSXSelfClosingTag"(e){return e.column(e.node.from)+e.unit}}),H.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":W,BlockComment(e){return{from:e.from+2,to:e.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","\'",\'"\',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\\s*(?:case |default:|\\{|\\}|<\\/)$/,wordChars:"$"}}),A={test:e=>/^JSX/.test(e.name),facet:q({commentTokens:{block:{open:"{/*",close:"*/}"}}})},O=m.configure({dialect:"ts"},"typescript"),L=m.configure({dialect:"jsx",props:[T.add(e=>e.isTop?[A]:void 0)]}),N=m.configure({dialect:"jsx ts",props:[T.add(e=>e.isTop?[A]:void 0)]},"typescript"),P=e=>({label:e,type:"keyword"}),j="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(P),ie=j.concat(["declare","implements","private","protected","public"].map(P));function le(e={}){let n=e.jsx?e.typescript?N:L:e.typescript?O:m,a=e.typescript?C.concat(ie):x.concat(j);return new G(n,[m.data.of({autocomplete:U(w,Y(a))}),m.data.of({autocomplete:D}),e.jsx?B:[]])}function se(e){for(;;){if(e.name=="JSXOpenTag"||e.name=="JSXSelfClosingTag"||e.name=="JSXFragmentTag")return e;if(e.name=="JSXEscape"||!e.parent)return null;e=e.parent}}function F(e,n,a=e.length){for(let t=n?.firstChild;t;t=t.nextSibling)if(t.name=="JSXIdentifier"||t.name=="JSXBuiltin"||t.name=="JSXNamespacedName"||t.name=="JSXMemberExpression")return e.sliceString(t.from,Math.min(t.to,a));return""}var ce=typeof navigator=="object"&&/Android\\b/.test(navigator.userAgent),B=Q.inputHandler.of((e,n,a,t,o)=>{if((ce?e.composing:e.compositionStarted)||e.state.readOnly||n!=a||t!=">"&&t!="/"||!m.isActiveAt(e.state,n,-1))return!1;let i=o(),{state:r}=i,l=r.changeByRange(p=>{var u;let{head:s}=p,f=h(r).resolveInner(s-1,-1),g;if(f.name=="JSXStartTag"&&(f=f.parent),!(r.doc.sliceString(s-1,s)!=t||f.name=="JSXAttributeValue"&&f.to>s)){if(t==">"&&f.name=="JSXFragmentTag")return{range:p,changes:{from:s,insert:"</>"}};if(t=="/"&&f.name=="JSXStartCloseTag"){let d=f.parent,S=d.parent;if(S&&d.from==s-2&&((g=F(r.doc,S.firstChild,s))||((u=S.firstChild)===null||u===void 0?void 0:u.name)=="JSXFragmentTag")){let k=`${g}>`;return{range:K.cursor(s+k.length,-1),changes:{from:s,insert:k}}}}else if(t==">"){let d=se(f);if(d&&d.name=="JSXOpenTag"&&!/^\\/?>|^<\\//.test(r.doc.sliceString(s,s+2))&&(g=F(r.doc,d,s)))return{range:p,changes:{from:s,insert:`</${g}>`}}}}return{range:p}});return l.changes.empty?!1:(e.dispatch([i,r.update(l,{userEvent:"input.complete",scrollIntoView:!0})]),!0)});function pe(e,n){return n||(n={parserOptions:{ecmaVersion:2019,sourceType:"module"},env:{browser:!0,node:!0,es6:!0,es2015:!0,es2017:!0,es2020:!0},rules:{}},e.getRules().forEach((a,t)=>{var o;!((o=a.meta.docs)===null||o===void 0)&&o.recommended&&(n.rules[t]=2)})),a=>{let{state:t}=a,o=[];for(let{from:i,to:r}of m.findRegions(t)){let l=t.doc.lineAt(i),p={line:l.number-1,col:i-l.from,pos:i};for(let u of e.verify(t.sliceDoc(i,r),n))o.push(fe(u,t.doc,p))}return o}}function V(e,n,a,t){return a.line(e+t.line).from+n+(e==1?t.col-1:-1)}function fe(e,n,a){let t=V(e.line,e.column,n,a),o={from:t,to:e.endLine!=null&&e.endColumn!=1?V(e.endLine,e.endColumn,n,a):t,message:e.message,source:e.ruleId?"eslint:"+e.ruleId:"eslint",severity:e.severity==1?"warning":"error"};if(e.fix){let{range:i,text:r}=e.fix,l=i[0]+a.pos-t,p=i[1]+a.pos-t;o.actions=[{name:"fix",apply(u,s){u.dispatch({changes:{from:s+l,to:s+p,insert:r},scrollIntoView:!0})}}]}return o}export{B as autoCloseTags,E as completionPath,pe as esLint,le as javascript,m as javascriptLanguage,L as jsxLanguage,D as localCompletionSource,re as scopeCompletionSource,x as snippets,N as tsxLanguage,O as typescriptLanguage,C as typescriptSnippets};\n',mimeType:"application/javascript"},"/@codemirror/state@6.5.2/es2022/state.mjs":{content:'import{findClusterBreak as ie}from"/@marijn/find-cluster-break@^1.0.0?target=es2022";var p=class Ht{lineAt(t){if(t<0||t>this.length)throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);return this.lineInner(t,!1,1,0)}line(t){if(t<1||t>this.lines)throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);return this.lineInner(t,!0,1,0)}replace(t,e,n){[t,e]=D(this,t,e);let i=[];return this.decompose(0,t,i,2),n.length&&n.decompose(0,n.length,i,3),this.decompose(e,this.length,i,1),Y.from(i,this.length-(e-t)+n.length)}append(t){return this.replace(this.length,this.length,t)}slice(t,e=this.length){[t,e]=D(this,t,e);let n=[];return this.decompose(t,e,n,0),Y.from(n,e-t)}eq(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;let e=this.scanIdentical(t,1),n=this.length-this.scanIdentical(t,-1),i=new j(this),r=new j(t);for(let h=e,o=e;;){if(i.next(h),r.next(h),h=0,i.lineBreak!=r.lineBreak||i.done!=r.done||i.value!=r.value)return!1;if(o+=i.value.length,i.done||o>=n)return!0}}iter(t=1){return new j(this,t)}iterRange(t,e=this.length){return new Pt(this,t,e)}iterLines(t,e){let n;if(t==null)n=this.iter();else{e==null&&(e=this.lines+1);let i=this.line(t).from;n=this.iterRange(i,Math.max(i,e==this.lines+1?this.length:e<=1?0:this.line(e-1).to))}return new Et(n)}toString(){return this.sliceString(0)}toJSON(){let t=[];return this.flatten(t),t}constructor(){}static of(t){if(t.length==0)throw new RangeError("A document must have at least one line");return t.length==1&&!t[0]?Ht.empty:t.length<=32?new I(t):Y.from(I.split(t,[]))}},I=class M extends p{constructor(t,e=se(t)){super(),this.text=t,this.length=e}get lines(){return this.text.length}get children(){return null}lineInner(t,e,n,i){for(let r=0;;r++){let h=this.text[r],o=i+h.length;if((e?n:o)>=t)return new Mt(i,o,n,h);i=o+1,n++}}decompose(t,e,n,i){let r=t<=0&&e>=this.length?this:new M(bt(this.text,t,e),Math.min(e,this.length)-Math.max(0,t));if(i&1){let h=n.pop(),o=Z(r.text,h.text.slice(),0,r.length);if(o.length<=32)n.push(new M(o,h.length+r.length));else{let a=o.length>>1;n.push(new M(o.slice(0,a)),new M(o.slice(a)))}}else n.push(r)}replace(t,e,n){if(!(n instanceof M))return super.replace(t,e,n);[t,e]=D(this,t,e);let i=Z(this.text,Z(n.text,bt(this.text,0,t)),e),r=this.length+n.length-(e-t);return i.length<=32?new M(i,r):Y.from(M.split(i,[]),r)}sliceString(t,e=this.length,n=`\n`){[t,e]=D(this,t,e);let i="";for(let r=0,h=0;r<=e&&h<this.text.length;h++){let o=this.text[h],a=r+o.length;r>t&&h&&(i+=n),t<a&&e>r&&(i+=o.slice(Math.max(0,t-r),e-r)),r=a+1}return i}flatten(t){for(let e of this.text)t.push(e)}scanIdentical(){return 0}static split(t,e){let n=[],i=-1;for(let r of t)n.push(r),i+=r.length+1,n.length==32&&(e.push(new M(n,i)),n=[],i=-1);return i>-1&&e.push(new M(n,i)),e}},Y=class V extends p{constructor(t,e){super(),this.children=t,this.length=e,this.lines=0;for(let n of t)this.lines+=n.lines}lineInner(t,e,n,i){for(let r=0;;r++){let h=this.children[r],o=i+h.length,a=n+h.lines-1;if((e?a:o)>=t)return h.lineInner(t,e,n,i);i=o+1,n=a+1}}decompose(t,e,n,i){for(let r=0,h=0;h<=e&&r<this.children.length;r++){let o=this.children[r],a=h+o.length;if(t<=a&&e>=h){let l=i&((h<=t?1:0)|(a>=e?2:0));h>=t&&a<=e&&!l?n.push(o):o.decompose(t-h,e-h,n,l)}h=a+1}}replace(t,e,n){if([t,e]=D(this,t,e),n.lines<this.lines)for(let i=0,r=0;i<this.children.length;i++){let h=this.children[i],o=r+h.length;if(t>=r&&e<=o){let a=h.replace(t-r,e-r,n),l=this.lines-h.lines+a.lines;if(a.lines<l>>4&&a.lines>l>>6){let c=this.children.slice();return c[i]=a,new V(c,this.length-(e-t)+n.length)}return super.replace(r,o,a)}r=o+1}return super.replace(t,e,n)}sliceString(t,e=this.length,n=`\n`){[t,e]=D(this,t,e);let i="";for(let r=0,h=0;r<this.children.length&&h<=e;r++){let o=this.children[r],a=h+o.length;h>t&&r&&(i+=n),t<a&&e>h&&(i+=o.sliceString(t-h,e-h,n)),h=a+1}return i}flatten(t){for(let e of this.children)e.flatten(t)}scanIdentical(t,e){if(!(t instanceof V))return 0;let n=0,[i,r,h,o]=e>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;i+=e,r+=e){if(i==h||r==o)return n;let a=this.children[i],l=t.children[r];if(a!=l)return n+a.scanIdentical(l,e);n+=a.length+1}}static from(t,e=t.reduce((n,i)=>n+i.length+1,-1)){let n=0;for(let g of t)n+=g.lines;if(n<32){let g=[];for(let d of t)d.flatten(g);return new I(g,e)}let i=Math.max(32,n>>5),r=i<<1,h=i>>1,o=[],a=0,l=-1,c=[];function f(g){let d;if(g.lines>r&&g instanceof V)for(let x of g.children)f(x);else g.lines>h&&(a>h||!a)?(u(),o.push(g)):g instanceof I&&a&&(d=c[c.length-1])instanceof I&&g.lines+d.lines<=32?(a+=g.lines,l+=g.length+1,c[c.length-1]=new I(d.text.concat(g.text),d.length+1+g.length)):(a+g.lines>i&&u(),a+=g.lines,l+=g.length+1,c.push(g))}function u(){a!=0&&(o.push(c.length==1?c[0]:V.from(c,l)),l=-1,a=c.length=0)}for(let g of t)f(g);return u(),o.length==1?o[0]:new V(o,e)}};p.empty=new I([""],0);function se(s){let t=-1;for(let e of s)t+=e.length+1;return t}function Z(s,t,e=0,n=1e9){for(let i=0,r=0,h=!0;r<s.length&&i<=n;r++){let o=s[r],a=i+o.length;a>=e&&(a>n&&(o=o.slice(0,n-i)),i<e&&(o=o.slice(e-i)),h?(t[t.length-1]+=o,h=!1):t.push(o)),i=a+1}return t}function bt(s,t,e){return Z(s,[""],t,e)}var j=class{constructor(s,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[s],this.offsets=[t>0?1:(s instanceof I?s.text.length:s.children.length)<<1]}nextInner(s,t){for(this.done=this.lineBreak=!1;;){let e=this.nodes.length-1,n=this.nodes[e],i=this.offsets[e],r=i>>1,h=n instanceof I?n.text.length:n.children.length;if(r==(t>0?h:0)){if(e==0)return this.done=!0,this.value="",this;t>0&&this.offsets[e-1]++,this.nodes.pop(),this.offsets.pop()}else if((i&1)==(t>0?0:1)){if(this.offsets[e]+=t,s==0)return this.lineBreak=!0,this.value=`\n`,this;s--}else if(n instanceof I){let o=n.text[r+(t<0?-1:0)];if(this.offsets[e]+=t,o.length>Math.max(0,s))return this.value=s==0?o:t>0?o.slice(s):o.slice(0,o.length-s),this;s-=o.length}else{let o=n.children[r+(t<0?-1:0)];s>o.length?(s-=o.length,this.offsets[e]+=t):(t<0&&this.offsets[e]--,this.nodes.push(o),this.offsets.push(t>0?1:(o instanceof I?o.text.length:o.children.length)<<1))}}}next(s=0){return s<0&&(this.nextInner(-s,-this.dir),s=this.value.length),this.nextInner(s,this.dir)}},Pt=class{constructor(s,t,e){this.value="",this.done=!1,this.cursor=new j(s,t>e?-1:1),this.pos=t>e?s.length:0,this.from=Math.min(t,e),this.to=Math.max(t,e)}nextInner(s,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;s+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let e=t<0?this.pos-this.from:this.to-this.pos;s>e&&(s=e),e-=s;let{value:n}=this.cursor.next(s);return this.pos+=(n.length+s)*t,this.value=n.length<=e?n:t<0?n.slice(n.length-e):n.slice(0,e),this.done=!this.value,this}next(s=0){return s<0?s=Math.max(s,this.from-this.pos):s>0&&(s=Math.min(s,this.to-this.pos)),this.nextInner(s,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}},Et=class{constructor(s){this.inner=s,this.afterBreak=!0,this.value="",this.done=!1}next(s=0){let{done:t,lineBreak:e,value:n}=this.inner.next(s);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):e?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}};typeof Symbol<"u"&&(p.prototype[Symbol.iterator]=function(){return this.iter()},j.prototype[Symbol.iterator]=Pt.prototype[Symbol.iterator]=Et.prototype[Symbol.iterator]=function(){return this});var Mt=class{constructor(s,t,e,n){this.from=s,this.to=t,this.number=e,this.text=n}get length(){return this.to-this.from}};function D(s,t,e){return t=Math.max(0,Math.min(s.length,t)),[t,Math.max(t,Math.min(s.length,e))]}function z(s,t,e=!0,n=!0){return ie(s,t,e,n)}function re(s){return s>=56320&&s<57344}function he(s){return s>=55296&&s<56320}function oe(s,t){let e=s.charCodeAt(t);if(!he(e)||t+1==s.length)return e;let n=s.charCodeAt(t+1);return re(n)?(e-55296<<10)+(n-56320)+65536:e}function ae(s){return s<=65535?String.fromCharCode(s):(s-=65536,String.fromCharCode((s>>10)+55296,(s&1023)+56320))}function le(s){return s<65536?1:2}var ot=/\\r\\n?|\\n/,A=function(s){return s[s.Simple=0]="Simple",s[s.TrackDel=1]="TrackDel",s[s.TrackBefore=2]="TrackBefore",s[s.TrackAfter=3]="TrackAfter",s}(A||(A={})),J=class rt{constructor(t){this.sections=t}get length(){let t=0;for(let e=0;e<this.sections.length;e+=2)t+=this.sections[e];return t}get newLength(){let t=0;for(let e=0;e<this.sections.length;e+=2){let n=this.sections[e+1];t+=n<0?this.sections[e]:n}return t}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(t){for(let e=0,n=0,i=0;e<this.sections.length;){let r=this.sections[e++],h=this.sections[e++];h<0?(t(n,i,r),i+=r):i+=h,n+=r}}iterChangedRanges(t,e=!1){at(this,t,e)}get invertedDesc(){let t=[];for(let e=0;e<this.sections.length;){let n=this.sections[e++],i=this.sections[e++];i<0?t.push(n,i):t.push(i,n)}return new rt(t)}composeDesc(t){return this.empty?t:t.empty?this:At(this,t)}mapDesc(t,e=!1){return t.empty?this:lt(this,t,e)}mapPos(t,e=-1,n=A.Simple){let i=0,r=0;for(let h=0;h<this.sections.length;){let o=this.sections[h++],a=this.sections[h++],l=i+o;if(a<0){if(l>t)return r+(t-i);r+=o}else{if(n!=A.Simple&&l>=t&&(n==A.TrackDel&&i<t&&l>t||n==A.TrackBefore&&i<t||n==A.TrackAfter&&l>t))return null;if(l>t||l==t&&e<0&&!o)return t==i||e<0?r:r+a;r+=a}i=l}if(t>i)throw new RangeError(`Position ${t} is out of range for changeset of length ${i}`);return r}touchesRange(t,e=t){for(let n=0,i=0;n<this.sections.length&&i<=e;){let r=this.sections[n++],h=this.sections[n++],o=i+r;if(h>=0&&i<=e&&o>=t)return i<t&&o>e?"cover":!0;i=o}return!1}toString(){let t="";for(let e=0;e<this.sections.length;){let n=this.sections[e++],i=this.sections[e++];t+=(t?" ":"")+n+(i>=0?":"+i:"")}return t}toJSON(){return this.sections}static fromJSON(t){if(!Array.isArray(t)||t.length%2||t.some(e=>typeof e!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new rt(t)}static create(t){return new rt(t)}},R=class B extends J{constructor(t,e){super(t),this.inserted=e}apply(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return at(this,(e,n,i,r,h)=>t=t.replace(i,i+(n-e),h),!1),t}mapDesc(t,e=!1){return lt(this,t,e,!0)}invert(t){let e=this.sections.slice(),n=[];for(let i=0,r=0;i<e.length;i+=2){let h=e[i],o=e[i+1];if(o>=0){e[i]=o,e[i+1]=h;let a=i>>1;for(;n.length<a;)n.push(p.empty);n.push(h?t.slice(r,r+h):p.empty)}r+=h}return new B(e,n)}compose(t){return this.empty?t:t.empty?this:At(this,t,!0)}map(t,e=!1){return t.empty?this:lt(this,t,e,!0)}iterChanges(t,e=!1){at(this,t,e)}get desc(){return J.create(this.sections)}filter(t){let e=[],n=[],i=[],r=new q(this);t:for(let h=0,o=0;;){let a=h==t.length?1e9:t[h++];for(;o<a||o==a&&r.len==0;){if(r.done)break t;let c=Math.min(r.len,a-o);m(i,c,-1);let f=r.ins==-1?-1:r.off==0?r.ins:0;m(e,c,f),f>0&&T(n,e,r.text),r.forward(c),o+=c}let l=t[h++];for(;o<l;){if(r.done)break t;let c=Math.min(r.len,l-o);m(e,c,-1),m(i,c,r.ins==-1?-1:r.off==0?r.ins:0),r.forward(c),o+=c}}return{changes:new B(e,n),filtered:J.create(i)}}toJSON(){let t=[];for(let e=0;e<this.sections.length;e+=2){let n=this.sections[e],i=this.sections[e+1];i<0?t.push(n):i==0?t.push([n]):t.push([n].concat(this.inserted[e>>1].toJSON()))}return t}static of(t,e,n){let i=[],r=[],h=0,o=null;function a(c=!1){if(!c&&!i.length)return;h<e&&m(i,e-h,-1);let f=new B(i,r);o=o?o.compose(f.map(o)):f,i=[],r=[],h=0}function l(c){if(Array.isArray(c))for(let f of c)l(f);else if(c instanceof B){if(c.length!=e)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${e})`);a(),o=o?o.compose(c.map(o)):c}else{let{from:f,to:u=f,insert:g}=c;if(f>u||f<0||u>e)throw new RangeError(`Invalid change range ${f} to ${u} (in doc of length ${e})`);let d=g?typeof g=="string"?p.of(g.split(n||ot)):g:p.empty,x=d.length;if(f==u&&x==0)return;f<h&&a(),f>h&&m(i,f-h,-1),m(i,u-f,x),T(r,i,d),h=u}}return l(t),a(!o),o}static empty(t){return new B(t?[t,-1]:[],[])}static fromJSON(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");let e=[],n=[];for(let i=0;i<t.length;i++){let r=t[i];if(typeof r=="number")e.push(r,-1);else{if(!Array.isArray(r)||typeof r[0]!="number"||r.some((h,o)=>o&&typeof h!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(r.length==1)e.push(r[0],0);else{for(;n.length<i;)n.push(p.empty);n[i]=p.of(r.slice(1)),e.push(r[0],n[i].length)}}}return new B(e,n)}static createSet(t,e){return new B(t,e)}};function m(s,t,e,n=!1){if(t==0&&e<=0)return;let i=s.length-2;i>=0&&e<=0&&e==s[i+1]?s[i]+=t:i>=0&&t==0&&s[i]==0?s[i+1]+=e:n?(s[i]+=t,s[i+1]+=e):s.push(t,e)}function T(s,t,e){if(e.length==0)return;let n=t.length-2>>1;if(n<s.length)s[s.length-1]=s[s.length-1].append(e);else{for(;s.length<n;)s.push(p.empty);s.push(e)}}function at(s,t,e){let n=s.inserted;for(let i=0,r=0,h=0;h<s.sections.length;){let o=s.sections[h++],a=s.sections[h++];if(a<0)i+=o,r+=o;else{let l=i,c=r,f=p.empty;for(;l+=o,c+=a,a&&n&&(f=f.append(n[h-2>>1])),!(e||h==s.sections.length||s.sections[h+1]<0);)o=s.sections[h++],a=s.sections[h++];t(i,l,r,c,f),i=l,r=c}}}function lt(s,t,e,n=!1){let i=[],r=n?[]:null,h=new q(s),o=new q(t);for(let a=-1;;){if(h.done&&o.len||o.done&&h.len)throw new Error("Mismatched change set lengths");if(h.ins==-1&&o.ins==-1){let l=Math.min(h.len,o.len);m(i,l,-1),h.forward(l),o.forward(l)}else if(o.ins>=0&&(h.ins<0||a==h.i||h.off==0&&(o.len<h.len||o.len==h.len&&!e))){let l=o.len;for(m(i,o.ins,-1);l;){let c=Math.min(h.len,l);h.ins>=0&&a<h.i&&h.len<=c&&(m(i,0,h.ins),r&&T(r,i,h.text),a=h.i),h.forward(c),l-=c}o.next()}else if(h.ins>=0){let l=0,c=h.len;for(;c;)if(o.ins==-1){let f=Math.min(c,o.len);l+=f,c-=f,o.forward(f)}else if(o.ins==0&&o.len<c)c-=o.len,o.next();else break;m(i,l,a<h.i?h.ins:0),r&&a<h.i&&T(r,i,h.text),a=h.i,h.forward(h.len-c)}else{if(h.done&&o.done)return r?R.createSet(i,r):J.create(i);throw new Error("Mismatched change set lengths")}}}function At(s,t,e=!1){let n=[],i=e?[]:null,r=new q(s),h=new q(t);for(let o=!1;;){if(r.done&&h.done)return i?R.createSet(n,i):J.create(n);if(r.ins==0)m(n,r.len,0,o),r.next();else if(h.len==0&&!h.done)m(n,0,h.ins,o),i&&T(i,n,h.text),h.next();else{if(r.done||h.done)throw new Error("Mismatched change set lengths");{let a=Math.min(r.len2,h.len),l=n.length;if(r.ins==-1){let c=h.ins==-1?-1:h.off?0:h.ins;m(n,a,c,o),i&&c&&T(i,n,h.text)}else h.ins==-1?(m(n,r.off?0:r.len,a,o),i&&T(i,n,r.textBit(a))):(m(n,r.off?0:r.len,h.off?0:h.ins,o),i&&!h.off&&T(i,n,h.text));o=(r.ins>a||h.ins>=0&&h.len>a)&&(o||n.length>l),r.forward2(a),h.forward(a)}}}}var q=class{constructor(s){this.set=s,this.i=0,this.next()}next(){let{sections:s}=this.set;this.i<s.length?(this.len=s[this.i++],this.ins=s[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:s}=this.set,t=this.i-2>>1;return t>=s.length?p.empty:s[t]}textBit(s){let{inserted:t}=this.set,e=this.i-2>>1;return e>=t.length&&!s?p.empty:t[e].slice(this.off,s==null?void 0:this.off+s)}forward(s){s==this.len?this.next():(this.len-=s,this.off+=s)}forward2(s){this.ins==-1?this.forward(s):s==this.ins?this.next():(this.ins-=s,this.off+=s)}},W=class It{constructor(t,e,n){this.from=t,this.to=e,this.flags=n}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let t=this.flags&7;return t==7?null:t}get goalColumn(){let t=this.flags>>6;return t==16777215?void 0:t}map(t,e=-1){let n,i;return this.empty?n=i=t.mapPos(this.from,e):(n=t.mapPos(this.from,1),i=t.mapPos(this.to,-1)),n==this.from&&i==this.to?this:new It(n,i,this.flags)}extend(t,e=t){if(t<=this.anchor&&e>=this.anchor)return w.range(t,e);let n=Math.abs(t-this.anchor)>Math.abs(e-this.anchor)?t:e;return w.range(this.anchor,n)}eq(t,e=!1){return this.anchor==t.anchor&&this.head==t.head&&(!e||!this.empty||this.assoc==t.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(t){if(!t||typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return w.range(t.anchor,t.head)}static create(t,e,n){return new It(t,e,n)}},w=class S{constructor(t,e){this.ranges=t,this.mainIndex=e}map(t,e=-1){return t.empty?this:S.create(this.ranges.map(n=>n.map(t,e)),this.mainIndex)}eq(t,e=!1){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(t.ranges[n],e))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new S([this.main],0)}addRange(t,e=!0){return S.create([t].concat(this.ranges),e?0:this.mainIndex+1)}replaceRange(t,e=this.mainIndex){let n=this.ranges.slice();return n[e]=t,S.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(t=>t.toJSON()),main:this.mainIndex}}static fromJSON(t){if(!t||!Array.isArray(t.ranges)||typeof t.main!="number"||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new S(t.ranges.map(e=>W.fromJSON(e)),t.main)}static single(t,e=t){return new S([S.range(t,e)],0)}static create(t,e=0){if(t.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,i=0;i<t.length;i++){let r=t[i];if(r.empty?r.from<=n:r.from<n)return S.normalized(t.slice(),e);n=r.to}return new S(t,e)}static cursor(t,e=0,n,i){return W.create(t,t,(e==0?0:e<0?8:16)|(n==null?7:Math.min(6,n))|(i??16777215)<<6)}static range(t,e,n,i){let r=(n??16777215)<<6|(i==null?7:Math.min(6,i));return e<t?W.create(e,t,48|r):W.create(t,e,(e>t?8:0)|r)}static normalized(t,e=0){let n=t[e];t.sort((i,r)=>i.from-r.from),e=t.indexOf(n);for(let i=1;i<t.length;i++){let r=t[i],h=t[i-1];if(r.empty?r.from<=h.to:r.from<h.to){let o=h.from,a=Math.max(r.to,h.to);i<=e&&e--,t.splice(--i,2,r.anchor>r.head?S.range(a,o):S.range(o,a))}}return new S(t,e)}};function Rt(s,t){for(let e of s.ranges)if(e.to>t)throw new RangeError("Selection points outside of document")}var ct=0,k=class Kt{constructor(t,e,n,i,r){this.combine=t,this.compareInput=e,this.compare=n,this.isStatic=i,this.id=ct++,this.default=t([]),this.extensions=typeof r=="function"?r(this):r}get reader(){return this}static define(t={}){return new Kt(t.combine||(e=>e),t.compareInput||((e,n)=>e===n),t.compare||(t.combine?(e,n)=>e===n:ft),!!t.static,t.enables)}of(t){return new _([],this,0,t)}compute(t,e){if(this.isStatic)throw new Error("Can\'t compute a static facet");return new _(t,this,1,e)}computeN(t,e){if(this.isStatic)throw new Error("Can\'t compute a static facet");return new _(t,this,2,e)}from(t,e){return e||(e=n=>n),this.compute([t],n=>e(n.field(t)))}};function ft(s,t){return s==t||s.length==t.length&&s.every((e,n)=>e===t[n])}var _=class{constructor(s,t,e,n){this.dependencies=s,this.facet=t,this.type=e,this.value=n,this.id=ct++}dynamicSlot(s){var t;let e=this.value,n=this.facet.compareInput,i=this.id,r=s[i]>>1,h=this.type==2,o=!1,a=!1,l=[];for(let c of this.dependencies)c=="doc"?o=!0:c=="selection"?a=!0:!(((t=s[c.id])!==null&&t!==void 0?t:1)&1)&&l.push(s[c.id]);return{create(c){return c.values[r]=e(c),1},update(c,f){if(o&&f.docChanged||a&&(f.docChanged||f.selection)||ut(c,l)){let u=e(c);if(h?!Ct(u,c.values[r],n):!n(u,c.values[r]))return c.values[r]=u,1}return 0},reconfigure:(c,f)=>{let u,g=f.config.address[i];if(g!=null){let d=et(f,g);if(this.dependencies.every(x=>x instanceof k?f.facet(x)===c.facet(x):x instanceof U?f.field(x,!1)==c.field(x,!1):!0)||(h?Ct(u=e(c),d,n):n(u=e(c),d)))return c.values[r]=d,0}else u=e(c);return c.values[r]=u,1}}}};function Ct(s,t,e){if(s.length!=t.length)return!1;for(let n=0;n<s.length;n++)if(!e(s[n],t[n]))return!1;return!0}function ut(s,t){let e=!1;for(let n of t)H(s,n)&1&&(e=!0);return e}function ce(s,t,e){let n=e.map(a=>s[a.id]),i=e.map(a=>a.type),r=n.filter(a=>!(a&1)),h=s[t.id]>>1;function o(a){let l=[];for(let c=0;c<n.length;c++){let f=et(a,n[c]);if(i[c]==2)for(let u of f)l.push(u);else l.push(f)}return t.combine(l)}return{create(a){for(let l of n)H(a,l);return a.values[h]=o(a),1},update(a,l){if(!ut(a,r))return 0;let c=o(a);return t.compare(c,a.values[h])?0:(a.values[h]=c,1)},reconfigure(a,l){let c=ut(a,n),f=l.config.facets[t.id],u=l.facet(t);if(f&&!c&&ft(e,f))return a.values[h]=u,0;let g=o(a);return t.compare(g,u)?(a.values[h]=u,0):(a.values[h]=g,1)}}}var tt=k.define({static:!0}),U=class Qt{constructor(t,e,n,i,r){this.id=t,this.createF=e,this.updateF=n,this.compareF=i,this.spec=r,this.provides=void 0}static define(t){let e=new Qt(ct++,t.create,t.update,t.compare||((n,i)=>n===i),t);return t.provide&&(e.provides=t.provide(e)),e}create(t){return(t.facet(tt).find(n=>n.field==this)?.create||this.createF)(t)}slot(t){let e=t[this.id]>>1;return{create:n=>(n.values[e]=this.create(n),1),update:(n,i)=>{let r=n.values[e],h=this.updateF(r,i);return this.compareF(r,h)?0:(n.values[e]=h,1)},reconfigure:(n,i)=>{let r=n.facet(tt),h=i.facet(tt),o;return(o=r.find(a=>a.field==this))&&o!=h.find(a=>a.field==this)?(n.values[e]=o.create(n),1):i.config.address[this.id]!=null?(n.values[e]=i.field(this),0):(n.values[e]=this.create(n),1)}}}init(t){return[this,tt.of({field:this,create:t})]}get extension(){return this}},F={lowest:4,low:3,default:2,high:1,highest:0};function G(s){return t=>new Ot(t,s)}var fe={highest:G(F.highest),high:G(F.high),default:G(F.default),low:G(F.low),lowest:G(F.lowest)},Ot=class{constructor(s,t){this.inner=s,this.prec=t}},gt=class Xt{of(t){return new dt(this,t)}reconfigure(t){return Xt.reconfigure.of({compartment:this,extension:t})}get(t){return t.config.compartments.get(this)}},dt=class{constructor(s,t){this.compartment=s,this.inner=t}},Tt=class Yt{constructor(t,e,n,i,r,h){for(this.base=t,this.compartments=e,this.dynamicSlots=n,this.address=i,this.staticValues=r,this.facets=h,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(t){let e=this.address[t.id];return e==null?t.default:this.staticValues[e>>1]}static resolve(t,e,n){let i=[],r=Object.create(null),h=new Map;for(let u of ue(t,e,h))u instanceof U?i.push(u):(r[u.facet.id]||(r[u.facet.id]=[])).push(u);let o=Object.create(null),a=[],l=[];for(let u of i)o[u.id]=l.length<<1,l.push(g=>u.slot(g));let c=n?.config.facets;for(let u in r){let g=r[u],d=g[0].facet,x=c&&c[u]||[];if(g.every(y=>y.type==0))if(o[d.id]=a.length<<1|1,ft(x,g))a.push(n.facet(d));else{let y=d.combine(g.map(ht=>ht.value));a.push(n&&d.compare(y,n.facet(d))?n.facet(d):y)}else{for(let y of g)y.type==0?(o[y.id]=a.length<<1|1,a.push(y.value)):(o[y.id]=l.length<<1,l.push(ht=>y.dynamicSlot(ht)));o[d.id]=l.length<<1,l.push(y=>ce(y,d,g))}}let f=l.map(u=>u(o));return new Yt(t,h,f,o,a,r)}};function ue(s,t,e){let n=[[],[],[],[],[]],i=new Map;function r(h,o){let a=i.get(h);if(a!=null){if(a<=o)return;let l=n[a].indexOf(h);l>-1&&n[a].splice(l,1),h instanceof dt&&e.delete(h.compartment)}if(i.set(h,o),Array.isArray(h))for(let l of h)r(l,o);else if(h instanceof dt){if(e.has(h.compartment))throw new RangeError("Duplicate use of compartment in extensions");let l=t.get(h.compartment)||h.inner;e.set(h.compartment,l),r(l,o)}else if(h instanceof Ot)r(h.inner,h.prec);else if(h instanceof U)n[o].push(h),h.provides&&r(h.provides,o);else if(h instanceof _)n[o].push(h),h.facet.extensions&&r(h.facet.extensions,F.default);else{let l=h.extension;if(!l)throw new Error(`Unrecognized extension value in extension set (${h}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);r(l,o)}}return r(s,F.default),n.reduce((h,o)=>h.concat(o))}function H(s,t){if(t&1)return 2;let e=t>>1,n=s.status[e];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;s.status[e]=4;let i=s.computeSlot(s,s.config.dynamicSlots[e]);return s.status[e]=2|i}function et(s,t){return t&1?s.config.staticValues[t>>1]:s.values[t>>1]}var Bt=k.define(),pt=k.define({combine:s=>s.some(t=>t),static:!0}),Ft=k.define({combine:s=>s.length?s[0]:void 0,static:!0}),Nt=k.define(),Dt=k.define(),Jt=k.define(),Lt=k.define({combine:s=>s.length?s[0]:!1}),L=class{constructor(s,t){this.type=s,this.value=t}static define(){return new $t}},$t=class{of(s){return new L(this,s)}},Vt=class{constructor(s){this.map=s}of(s){return new v(this,s)}},v=class Zt{constructor(t,e){this.type=t,this.value=e}map(t){let e=this.type.map(this.value,t);return e===void 0?void 0:e==this.value?this:new Zt(this.type,e)}is(t){return this.type==t}static define(t={}){return new Vt(t.map||(e=>e))}static mapEffects(t,e){if(!t.length)return t;let n=[];for(let i of t){let r=i.map(e);r&&n.push(r)}return n}};v.reconfigure=v.define(),v.appendConfig=v.define();var b=class X{constructor(t,e,n,i,r,h){this.startState=t,this.changes=e,this.selection=n,this.effects=i,this.annotations=r,this.scrollIntoView=h,this._doc=null,this._state=null,n&&Rt(n,e.newLength),r.some(o=>o.type==X.time)||(this.annotations=r.concat(X.time.of(Date.now())))}static create(t,e,n,i,r,h){return new X(t,e,n,i,r,h)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let e of this.annotations)if(e.type==t)return e.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let e=this.annotation(X.userEvent);return!!(e&&(e==t||e.length>t.length&&e.slice(0,t.length)==t&&e[t.length]=="."))}};b.time=L.define(),b.userEvent=L.define(),b.addToHistory=L.define(),b.remote=L.define();function ge(s,t){let e=[];for(let n=0,i=0;;){let r,h;if(n<s.length&&(i==t.length||t[i]>=s[n]))r=s[n++],h=s[n++];else if(i<t.length)r=t[i++],h=t[i++];else return e;!e.length||e[e.length-1]<r?e.push(r,h):e[e.length-1]<h&&(e[e.length-1]=h)}}function jt(s,t,e){var n;let i,r,h;return e?(i=t.changes,r=R.empty(t.changes.length),h=s.changes.compose(t.changes)):(i=t.changes.map(s.changes),r=s.changes.mapDesc(t.changes,!0),h=s.changes.compose(i)),{changes:h,selection:t.selection?t.selection.map(r):(n=s.selection)===null||n===void 0?void 0:n.map(i),effects:v.mapEffects(s.effects,i).concat(v.mapEffects(t.effects,r)),annotations:s.annotations.length?s.annotations.concat(t.annotations):t.annotations,scrollIntoView:s.scrollIntoView||t.scrollIntoView}}function mt(s,t,e){let n=t.selection,i=$(t.annotations);return t.userEvent&&(i=i.concat(b.userEvent.of(t.userEvent))),{changes:t.changes instanceof R?t.changes:R.of(t.changes||[],e,s.facet(Ft)),selection:n&&(n instanceof w?n:w.single(n.anchor,n.head)),effects:$(t.effects),annotations:i,scrollIntoView:!!t.scrollIntoView}}function zt(s,t,e){let n=mt(s,t.length?t[0]:{},s.doc.length);t.length&&t[0].filter===!1&&(e=!1);for(let r=1;r<t.length;r++){t[r].filter===!1&&(e=!1);let h=!!t[r].sequential;n=jt(n,mt(s,t[r],h?n.changes.newLength:s.doc.length),h)}let i=b.create(s,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return pe(e?de(i):i)}function de(s){let t=s.startState,e=!0;for(let i of t.facet(Nt)){let r=i(s);if(r===!1){e=!1;break}Array.isArray(r)&&(e=e===!0?r:ge(e,r))}if(e!==!0){let i,r;if(e===!1)r=s.changes.invertedDesc,i=R.empty(t.doc.length);else{let h=s.changes.filter(e);i=h.changes,r=h.filtered.mapDesc(h.changes).invertedDesc}s=b.create(t,i,s.selection&&s.selection.map(r),v.mapEffects(s.effects,r),s.annotations,s.scrollIntoView)}let n=t.facet(Dt);for(let i=n.length-1;i>=0;i--){let r=n[i](s);r instanceof b?s=r:Array.isArray(r)&&r.length==1&&r[0]instanceof b?s=r[0]:s=zt(t,$(r),!1)}return s}function pe(s){let t=s.startState,e=t.facet(Jt),n=s;for(let i=e.length-1;i>=0;i--){let r=e[i](s);r&&Object.keys(r).length&&(n=jt(n,mt(t,r,s.changes.newLength),!0))}return n==s?s:b.create(t,s.changes,s.selection,n.effects,n.annotations,n.scrollIntoView)}var me=[];function $(s){return s==null?me:Array.isArray(s)?s:[s]}var C=function(s){return s[s.Word=0]="Word",s[s.Space=1]="Space",s[s.Other=2]="Other",s}(C||(C={})),ve=/[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/,vt;try{vt=new RegExp("[\\\\p{Alphabetic}\\\\p{Number}_]","u")}catch{}function xe(s){if(vt)return vt.test(s);for(let t=0;t<s.length;t++){let e=s[t];if(/\\w/.test(e)||e>"\\x80"&&(e.toUpperCase()!=e.toLowerCase()||ve.test(e)))return!0}return!1}function we(s){return t=>{if(!/\\S/.test(t))return C.Space;if(xe(t))return C.Word;for(let e=0;e<s.length;e++)if(t.indexOf(s[e])>-1)return C.Word;return C.Other}}var E=class P{constructor(t,e,n,i,r,h){this.config=t,this.doc=e,this.selection=n,this.values=i,this.status=t.statusTemplate.slice(),this.computeSlot=r,h&&(h._state=this);for(let o=0;o<this.config.dynamicSlots.length;o++)H(this,o<<1);this.computeSlot=null}field(t,e=!0){let n=this.config.address[t.id];if(n==null){if(e)throw new RangeError("Field is not present in this state");return}return H(this,n),et(this,n)}update(...t){return zt(this,t,!0)}applyTransaction(t){let e=this.config,{base:n,compartments:i}=e;for(let o of t.effects)o.is(gt.reconfigure)?(e&&(i=new Map,e.compartments.forEach((a,l)=>i.set(l,a)),e=null),i.set(o.value.compartment,o.value.extension)):o.is(v.reconfigure)?(e=null,n=o.value):o.is(v.appendConfig)&&(e=null,n=$(n).concat(o.value));let r;e?r=t.startState.values.slice():(e=Tt.resolve(n,i,this),r=new P(e,this.doc,this.selection,e.dynamicSlots.map(()=>null),(o,a)=>a.reconfigure(o,this),null).values);let h=t.startState.facet(pt)?t.newSelection:t.newSelection.asSingle();new P(e,t.newDoc,h,r,(o,a)=>a.update(o,t),t)}replaceSelection(t){return typeof t=="string"&&(t=this.toText(t)),this.changeByRange(e=>({changes:{from:e.from,to:e.to,insert:t},range:w.cursor(e.from+t.length)}))}changeByRange(t){let e=this.selection,n=t(e.ranges[0]),i=this.changes(n.changes),r=[n.range],h=$(n.effects);for(let o=1;o<e.ranges.length;o++){let a=t(e.ranges[o]),l=this.changes(a.changes),c=l.map(i);for(let u=0;u<o;u++)r[u]=r[u].map(c);let f=i.mapDesc(l,!0);r.push(a.range.map(f)),i=i.compose(c),h=v.mapEffects(h,c).concat(v.mapEffects($(a.effects),f))}return{changes:i,selection:w.create(r,e.mainIndex),effects:h}}changes(t=[]){return t instanceof R?t:R.of(t,this.doc.length,this.facet(P.lineSeparator))}toText(t){return p.of(t.split(this.facet(P.lineSeparator)||ot))}sliceDoc(t=0,e=this.doc.length){return this.doc.sliceString(t,e,this.lineBreak)}facet(t){let e=this.config.address[t.id];return e==null?t.default:(H(this,e),et(this,e))}toJSON(t){let e={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let n in t){let i=t[n];i instanceof U&&this.config.address[i.id]!=null&&(e[n]=i.spec.toJSON(this.field(t[n]),this))}return e}static fromJSON(t,e={},n){if(!t||typeof t.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(n){for(let r in n)if(Object.prototype.hasOwnProperty.call(t,r)){let h=n[r],o=t[r];i.push(h.init(a=>h.spec.fromJSON(o,a)))}}return P.create({doc:t.doc,selection:w.fromJSON(t.selection),extensions:e.extensions?i.concat([e.extensions]):i})}static create(t={}){let e=Tt.resolve(t.extensions||[],new Map),n=t.doc instanceof p?t.doc:p.of((t.doc||"").split(e.staticFacet(P.lineSeparator)||ot)),i=t.selection?t.selection instanceof w?t.selection:w.single(t.selection.anchor,t.selection.head):w.single(0);return Rt(i,n.length),e.staticFacet(pt)||(i=i.asSingle()),new P(e,n,i,e.dynamicSlots.map(()=>null),(r,h)=>h.create(r),null)}get tabSize(){return this.facet(P.tabSize)}get lineBreak(){return this.facet(P.lineSeparator)||`\n`}get readOnly(){return this.facet(Lt)}phrase(t,...e){for(let n of this.facet(P.phrases))if(Object.prototype.hasOwnProperty.call(n,t)){t=n[t];break}return e.length&&(t=t.replace(/\\$(\\$|\\d*)/g,(n,i)=>{if(i=="$")return"$";let r=+(i||1);return!r||r>e.length?n:e[r-1]})),t}languageDataAt(t,e,n=-1){let i=[];for(let r of this.facet(Bt))for(let h of r(this,e,n))Object.prototype.hasOwnProperty.call(h,t)&&i.push(h[t]);return i}charCategorizer(t){return we(this.languageDataAt("wordChars",t).join(""))}wordAt(t){let{text:e,from:n,length:i}=this.doc.lineAt(t),r=this.charCategorizer(t),h=t-n,o=t-n;for(;h>0;){let a=z(e,h,!1);if(r(e.slice(a,h))!=C.Word)break;h=a}for(;o<i;){let a=z(e,o);if(r(e.slice(o,a))!=C.Word)break;o=a}return h==o?null:w.range(h+n,o+n)}};E.allowMultipleSelections=pt,E.tabSize=k.define({combine:s=>s.length?s[0]:4}),E.lineSeparator=Ft,E.readOnly=Lt,E.phrases=k.define({compare(s,t){let e=Object.keys(s),n=Object.keys(t);return e.length==n.length&&e.every(i=>s[i]==t[i])}}),E.languageData=Bt,E.changeFilter=Nt,E.transactionFilter=Dt,E.transactionExtender=Jt,gt.reconfigure=v.define();function Se(s,t,e={}){let n={};for(let i of s)for(let r of Object.keys(i)){let h=i[r],o=n[r];if(o===void 0)n[r]=h;else if(!(o===h||h===void 0))if(Object.hasOwnProperty.call(e,r))n[r]=e[r](o,h);else throw new Error("Config merge conflict for field "+r)}for(let i in t)n[i]===void 0&&(n[i]=t[i]);return n}var K=class{eq(s){return this==s}range(s,t=s){return nt.create(s,t,this)}};K.prototype.startSide=K.prototype.endSide=0,K.prototype.point=!1,K.prototype.mapMode=A.TrackDel;var nt=class _t{constructor(t,e,n){this.from=t,this.to=e,this.value=n}static create(t,e,n){return new _t(t,e,n)}};function xt(s,t){return s.from-t.from||s.value.startSide-t.value.startSide}var ye=class te{constructor(t,e,n,i){this.from=t,this.to=e,this.value=n,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(t,e,n,i=0){let r=n?this.to:this.from;for(let h=i,o=r.length;;){if(h==o)return h;let a=h+o>>1,l=r[a]-t||(n?this.value[a].endSide:this.value[a].startSide)-e;if(a==h)return l>=0?h:o;l>=0?o=a:h=a+1}}between(t,e,n,i){for(let r=this.findIndex(e,-1e9,!0),h=this.findIndex(n,1e9,!1,r);r<h;r++)if(i(this.from[r]+t,this.to[r]+t,this.value[r])===!1)return!1}map(t,e){let n=[],i=[],r=[],h=-1,o=-1;for(let a=0;a<this.value.length;a++){let l=this.value[a],c=this.from[a]+t,f=this.to[a]+t,u,g;if(c==f){let d=e.mapPos(c,l.startSide,l.mapMode);if(d==null||(u=g=d,l.startSide!=l.endSide&&(g=e.mapPos(c,l.endSide),g<u)))continue}else if(u=e.mapPos(c,l.startSide),g=e.mapPos(f,l.endSide),u>g||u==g&&l.startSide>0&&l.endSide<=0)continue;(g-u||l.endSide-l.startSide)<0||(h<0&&(h=u),l.point&&(o=Math.max(o,g-u)),n.push(l),i.push(u-h),r.push(g-h))}return{mapped:n.length?new te(i,r,n,o):null,pos:h}}},N=class O{constructor(t,e,n,i){this.chunkPos=t,this.chunk=e,this.nextLayer=n,this.maxPoint=i}static create(t,e,n,i){return new O(t,e,n,i)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let e of this.chunk)t+=e.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:e=[],sort:n=!1,filterFrom:i=0,filterTo:r=this.length}=t,h=t.filter;if(e.length==0&&!h)return this;if(n&&(e=e.slice().sort(xt)),this.isEmpty)return e.length?O.of(e):this;let o=new Wt(this,null,-1).goto(0),a=0,l=[],c=new wt;for(;o.value||a<e.length;)if(a<e.length&&(o.from-e[a].from||o.startSide-e[a].value.startSide)>=0){let f=e[a++];c.addInner(f.from,f.to,f.value)||l.push(f)}else o.rangeIndex==1&&o.chunkIndex<this.chunk.length&&(a==e.length||this.chunkEnd(o.chunkIndex)<e[a].from)&&(!h||i>this.chunkEnd(o.chunkIndex)||r<this.chunkPos[o.chunkIndex])&&c.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!h||i>o.to||r<o.from||h(o.from,o.to,o.value))&&(c.addInner(o.from,o.to,o.value)||l.push(nt.create(o.from,o.to,o.value))),o.next());return c.finishInner(this.nextLayer.isEmpty&&!l.length?O.empty:this.nextLayer.update({add:l,filter:h,filterFrom:i,filterTo:r}))}map(t){if(t.empty||this.isEmpty)return this;let e=[],n=[],i=-1;for(let h=0;h<this.chunk.length;h++){let o=this.chunkPos[h],a=this.chunk[h],l=t.touchesRange(o,o+a.length);if(l===!1)i=Math.max(i,a.maxPoint),e.push(a),n.push(t.mapPos(o));else if(l===!0){let{mapped:c,pos:f}=a.map(o,t);c&&(i=Math.max(i,c.maxPoint),e.push(c),n.push(f))}}let r=this.nextLayer.map(t);return e.length==0?r:new O(n,e,r||O.empty,i)}between(t,e,n){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let r=this.chunkPos[i],h=this.chunk[i];if(e>=r&&t<=r+h.length&&h.between(r,t-r,e-r,n)===!1)return}this.nextLayer.between(t,e,n)}}iter(t=0){return St.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,e=0){return St.from(t).goto(e)}static compare(t,e,n,i,r=-1){let h=t.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=r),o=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=r),a=qt(h,o,n),l=new Q(h,a,r),c=new Q(o,a,r);n.iterGaps((f,u,g)=>Ut(l,f,c,u,g,i)),n.empty&&n.length==0&&Ut(l,0,c,0,0,i)}static eq(t,e,n=0,i){i==null&&(i=999999999);let r=t.filter(c=>!c.isEmpty&&e.indexOf(c)<0),h=e.filter(c=>!c.isEmpty&&t.indexOf(c)<0);if(r.length!=h.length)return!1;if(!r.length)return!0;let o=qt(r,h),a=new Q(r,o,0).goto(n),l=new Q(h,o,0).goto(n);for(;;){if(a.to!=l.to||!kt(a.active,l.active)||a.point&&(!l.point||!a.point.eq(l.point)))return!1;if(a.to>i)return!0;a.next(),l.next()}}static spans(t,e,n,i,r=-1){let h=new Q(t,null,r).goto(e),o=e,a=h.openStart;for(;;){let l=Math.min(h.to,n);if(h.point){let c=h.activeForPoint(h.to),f=h.pointFrom<e?c.length+1:h.point.startSide<0?c.length:Math.min(c.length,a);i.point(o,l,h.point,c,f,h.pointRank),a=Math.min(h.openEnd(l),c.length)}else l>o&&(i.span(o,l,h.active,a),a=h.openEnd(l));if(h.to>n)return a+(h.point&&h.to>n?1:0);o=h.to,h.next()}}static of(t,e=!1){let n=new wt;for(let i of t instanceof nt?[t]:e?ke(t):t)n.add(i.from,i.to,i.value);return n.finish()}static join(t){if(!t.length)return O.empty;let e=t[t.length-1];for(let n=t.length-2;n>=0;n--)for(let i=t[n];i!=O.empty;i=i.nextLayer)e=new O(i.chunkPos,i.chunk,e,Math.max(i.maxPoint,e.maxPoint));return e}};N.empty=new N([],[],null,-1);function ke(s){if(s.length>1)for(let t=s[0],e=1;e<s.length;e++){let n=s[e];if(xt(t,n)>0)return s.slice().sort(xt);t=n}return s}N.empty.nextLayer=N.empty;var wt=class ee{finishChunk(t){this.chunks.push(new ye(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(t,e,n){this.addInner(t,e,n)||(this.nextLayer||(this.nextLayer=new ee)).add(t,e,n)}addInner(t,e,n){let i=t-this.lastTo||n.startSide-this.last.endSide;if(i<=0&&(t-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(e-this.chunkStart),this.last=n,this.lastFrom=t,this.lastTo=e,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,e-t)),!0)}addChunk(t,e){if((t-this.lastTo||e.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,e.maxPoint),this.chunks.push(e),this.chunkPos.push(t);let n=e.value.length-1;return this.last=e.value[n],this.lastFrom=e.from[n]+t,this.lastTo=e.to[n]+t,!0}finish(){return this.finishInner(N.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return t;let e=N.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,e}};function qt(s,t,e){let n=new Map;for(let r of s)for(let h=0;h<r.chunk.length;h++)r.chunk[h].maxPoint<=0&&n.set(r.chunk[h],r.chunkPos[h]);let i=new Set;for(let r of t)for(let h=0;h<r.chunk.length;h++){let o=n.get(r.chunk[h]);o!=null&&(e?e.mapPos(o):o)==r.chunkPos[h]&&!e?.touchesRange(o,o+r.chunk[h].length)&&i.add(r.chunk[h])}return i}var Wt=class{constructor(s,t,e,n=0){this.layer=s,this.skip=t,this.minPoint=e,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(s,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(s,t,!1),this}gotoInner(s,t,e){for(;this.chunkIndex<this.layer.chunk.length;){let n=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(n)||this.layer.chunkEnd(this.chunkIndex)<s||n.maxPoint<this.minPoint))break;this.chunkIndex++,e=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(s-this.layer.chunkPos[this.chunkIndex],t,!0);(!e||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(s,t){(this.to-s||this.endSide-t)<0&&this.gotoInner(s,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let s=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],e=s+t.from[this.rangeIndex];if(this.from=e,this.to=s+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(s){if(s==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=s}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(s){return this.from-s.from||this.startSide-s.startSide||this.rank-s.rank||this.to-s.to||this.endSide-s.endSide}},St=class ne{constructor(t){this.heap=t}static from(t,e=null,n=-1){let i=[];for(let r=0;r<t.length;r++)for(let h=t[r];!h.isEmpty;h=h.nextLayer)h.maxPoint>=n&&i.push(new Wt(h,e,n,r));return i.length==1?i[0]:new ne(i)}get startSide(){return this.value?this.value.startSide:0}goto(t,e=-1e9){for(let n of this.heap)n.goto(t,e);for(let n=this.heap.length>>1;n>=0;n--)yt(this.heap,n);return this.next(),this}forward(t,e){for(let n of this.heap)n.forward(t,e);for(let n=this.heap.length>>1;n>=0;n--)yt(this.heap,n);(this.to-t||this.value.endSide-e)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),yt(this.heap,0)}}};function yt(s,t){for(let e=s[t];;){let n=(t<<1)+1;if(n>=s.length)break;let i=s[n];if(n+1<s.length&&i.compare(s[n+1])>=0&&(i=s[n+1],n++),e.compare(i)<0)break;s[n]=e,s[t]=i,t=n}}var Q=class{constructor(s,t,e){this.minPoint=e,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=St.from(s,t,e)}goto(s,t=-1e9){return this.cursor.goto(s,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=s,this.endSide=t,this.openStart=-1,this.next(),this}forward(s,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-s||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(s,t)}removeActive(s){it(this.active,s),it(this.activeTo,s),it(this.activeRank,s),this.minActive=Gt(this.active,this.activeTo)}addActive(s){let t=0,{value:e,to:n,rank:i}=this.cursor;for(;t<this.activeRank.length&&(i-this.activeRank[t]||n-this.activeTo[t])>0;)t++;st(this.active,t,e),st(this.activeTo,t,n),st(this.activeRank,t,i),s&&st(s,t,this.cursor.from),this.minActive=Gt(this.active,this.activeTo)}next(){let s=this.to,t=this.point;this.point=null;let e=this.openStart<0?[]:null;for(;;){let n=this.minActive;if(n>-1&&(this.activeTo[n]-this.cursor.from||this.active[n].endSide-this.cursor.startSide)<0){if(this.activeTo[n]>s){this.to=this.activeTo[n],this.endSide=this.active[n].endSide;break}this.removeActive(n),e&&it(e,n)}else if(this.cursor.value)if(this.cursor.from>s){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let i=this.cursor.value;if(!i.point)this.addActive(e),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=i,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=i.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(e){this.openStart=0;for(let n=e.length-1;n>=0&&e[n]<s;n--)this.openStart++}}activeForPoint(s){if(!this.active.length)return this.active;let t=[];for(let e=this.active.length-1;e>=0&&!(this.activeRank[e]<this.pointRank);e--)(this.activeTo[e]>s||this.activeTo[e]==s&&this.active[e].endSide>=this.point.endSide)&&t.push(this.active[e]);return t.reverse()}openEnd(s){let t=0;for(let e=this.activeTo.length-1;e>=0&&this.activeTo[e]>s;e--)t++;return t}};function Ut(s,t,e,n,i,r){s.goto(t),e.goto(n);let h=n+i,o=n,a=n-t;for(;;){let l=s.to+a-e.to,c=l||s.endSide-e.endSide,f=c<0?s.to+a:e.to,u=Math.min(f,h);if(s.point||e.point?s.point&&e.point&&(s.point==e.point||s.point.eq(e.point))&&kt(s.activeForPoint(s.to),e.activeForPoint(e.to))||r.comparePoint(o,u,s.point,e.point):u>o&&!kt(s.active,e.active)&&r.compareRange(o,u,s.active,e.active),f>h)break;(l||s.openEnd!=e.openEnd)&&r.boundChange&&r.boundChange(f),o=f,c<=0&&s.next(),c>=0&&e.next()}}function kt(s,t){if(s.length!=t.length)return!1;for(let e=0;e<s.length;e++)if(s[e]!=t[e]&&!s[e].eq(t[e]))return!1;return!0}function it(s,t){for(let e=t,n=s.length-1;e<n;e++)s[e]=s[e+1];s.pop()}function st(s,t,e){for(let n=s.length-1;n>=t;n--)s[n+1]=s[n];s[t]=e}function Gt(s,t){let e=-1,n=1e9;for(let i=0;i<t.length;i++)(t[i]-n||s[i].endSide-s[e].endSide)<0&&(e=i,n=t[i]);return e}function Ie(s,t,e=s.length){let n=0;for(let i=0;i<e&&i<s.length;)s.charCodeAt(i)==9?(n+=t-n%t,i++):(n++,i=z(s,i));return n}function be(s,t,e,n){for(let i=0,r=0;;){if(r>=t)return i;if(i==s.length)break;r+=s.charCodeAt(i)==9?e-r%e:1,i=z(s,i)}return n===!0?-1:s.length}export{L as Annotation,$t as AnnotationType,J as ChangeDesc,R as ChangeSet,C as CharCategory,gt as Compartment,w as EditorSelection,E as EditorState,k as Facet,Mt as Line,A as MapMode,fe as Prec,nt as Range,N as RangeSet,wt as RangeSetBuilder,K as RangeValue,W as SelectionRange,v as StateEffect,Vt as StateEffectType,U as StateField,p as Text,b as Transaction,oe as codePointAt,le as codePointSize,Se as combineConfig,Ie as countColumn,z as findClusterBreak,be as findColumn,ae as fromCodePoint};\n',mimeType:"application/javascript"},"/@codemirror/lang-html@6.4.11/es2022/lang-html.mjs":{content:`import{parser as W,configureNesting as E}from"/@lezer/html@^1.3.12?target=es2022";import{cssLanguage as I,css as J}from"/@codemirror/lang-css@^6.0.0?target=es2022";import{javascriptLanguage as S,typescriptLanguage as K,jsxLanguage as Q,tsxLanguage as X,javascript as Y}from"/@codemirror/lang-javascript@^6.0.0?target=es2022";import{EditorView as Z}from"/@codemirror/view@^6.17.0?target=es2022";import{EditorSelection as ee}from"/@codemirror/state@^6.0.0?target=es2022";import{syntaxTree as O,LRLanguage as te,indentNodeProp as le,foldNodeProp as ae,bracketMatchingHandle as ne,LanguageSupport as re}from"/@codemirror/language@^6.4.0?target=es2022";var w=["_blank","_self","_top","_parent"],$=["ascii","utf-8","utf-16","latin1","latin1"],j=["get","post","put","delete"],L=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],p=["true","false"],l={},oe={a:{attrs:{href:null,ping:null,type:null,media:null,target:w,hreflang:null}},abbr:l,address:l,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:l,aside:l,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:l,base:{attrs:{href:null,target:w}},bdi:l,bdo:l,blockquote:{attrs:{cite:null}},body:l,br:l,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:L,formmethod:j,formnovalidate:["novalidate"],formtarget:w,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:l,center:l,cite:l,code:l,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:l,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:l,div:l,dl:l,dt:l,em:l,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:l,figure:l,footer:l,form:{attrs:{action:null,name:null,"accept-charset":$,autocomplete:["on","off"],enctype:L,method:j,novalidate:["novalidate"],target:w}},h1:l,h2:l,h3:l,h4:l,h5:l,h6:l,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:l,hgroup:l,hr:l,html:{attrs:{manifest:null}},i:l,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:L,formmethod:j,formnovalidate:["novalidate"],formtarget:w,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:l,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:l,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:l,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:$,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:l,noscript:l,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:l,param:{attrs:{name:null,value:null}},pre:l,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:l,rt:l,ruby:l,samp:l,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:$}},section:l,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:l,source:{attrs:{src:null,type:null,media:null}},span:l,strong:l,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:l,summary:l,sup:l,table:l,tbody:l,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:l,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:l,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:l,time:{attrs:{datetime:null}},title:l,tr:l,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},ul:{children:["li","script","template","ul","ol"]},var:l,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:l},q={accesskey:null,class:null,contenteditable:p,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:p,autocorrect:p,autocapitalize:p,style:null,tabindex:null,title:null,translate:["yes","no"],rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":p,"aria-autocomplete":["inline","list","both","none"],"aria-busy":p,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":p,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":p,"aria-hidden":p,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":p,"aria-multiselectable":p,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":p,"aria-relevant":null,"aria-required":p,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null},z="beforeunload copy cut dragstart dragover dragleave dragenter dragend drag paste focus blur change click load mousedown mouseenter mouseleave mouseup keydown keyup resize scroll unload".split(" ").map(e=>"on"+e);for(let e of z)q[e]=null;var k=class{constructor(e,a){this.tags={...oe,...e},this.globalAttrs={...q,...a},this.allTags=Object.keys(this.tags),this.globalAttrNames=Object.keys(this.globalAttrs)}};k.default=new k;function y(e,a,r=e.length){if(!a)return"";let n=a.firstChild,t=n&&n.getChild("TagName");return t?e.sliceString(t.from,Math.min(t.to,r)):""}function v(e,a=!1){for(;e;e=e.parent)if(e.name=="Element")if(a)a=!1;else return e;return null}function D(e,a,r){return r.tags[y(e,v(a))]?.children||r.allTags}function N(e,a){let r=[];for(let n=v(a);n&&!n.type.isTop;n=v(n.parent)){let t=y(e,n);if(t&&n.lastChild.name=="CloseTag")break;t&&r.indexOf(t)<0&&(a.name=="EndTag"||a.from>=n.firstChild.to)&&r.push(t)}return r}var F=/^[:\\-\\.\\w\\u00b7-\\uffff]*$/;function _(e,a,r,n,t){let s=/\\s*>/.test(e.sliceDoc(t,t+5))?"":">",o=v(r,r.name=="StartTag"||r.name=="TagName");return{from:n,to:t,options:D(e.doc,o,a).map(u=>({label:u,type:"type"})).concat(N(e.doc,r).map((u,i)=>({label:"/"+u,apply:"/"+u+s,type:"type",boost:99-i}))),validFor:/^\\/?[:\\-\\.\\w\\u00b7-\\uffff]*$/}}function V(e,a,r,n){let t=/\\s*>/.test(e.sliceDoc(n,n+5))?"":">";return{from:r,to:n,options:N(e.doc,a).map((s,o)=>({label:s,apply:s+t,type:"type",boost:99-o})),validFor:F}}function se(e,a,r,n){let t=[],s=0;for(let o of D(e.doc,r,a))t.push({label:"<"+o,type:"type"});for(let o of N(e.doc,r))t.push({label:"</"+o+">",type:"type",boost:99-s++});return{from:n,to:n,options:t,validFor:/^<\\/?[:\\-\\.\\w\\u00b7-\\uffff]*$/}}function ie(e,a,r,n,t){let s=v(r),o=s?a.tags[y(e.doc,s)]:null,u=o&&o.attrs?Object.keys(o.attrs):[],i=o&&o.globalAttrs===!1?u:u.length?u.concat(a.globalAttrNames):a.globalAttrNames;return{from:n,to:t,options:i.map(m=>({label:m,type:"property"})),validFor:F}}function ue(e,a,r,n,t){var s;let o=(s=r.parent)===null||s===void 0?void 0:s.getChild("AttributeName"),u=[],i;if(o){let m=e.sliceDoc(o.from,o.to),f=a.globalAttrs[m];if(!f){let c=v(r),g=c?a.tags[y(e.doc,c)]:null;f=g?.attrs&&g.attrs[m]}if(f){let c=e.sliceDoc(n,t).toLowerCase(),g='"',d='"';/^['"]/.test(c)?(i=c[0]=='"'?/^[^"]*$/:/^[^']*$/,g="",d=e.sliceDoc(t,t+1)==c[0]?"":c[0],c=c.slice(1),n++):i=/^[^\\s<>='"]*$/;for(let h of f)u.push({label:h,apply:g+h+d,type:"constant"})}}return{from:n,to:t,options:u,validFor:i}}function B(e,a){let{state:r,pos:n}=a,t=O(r).resolveInner(n,-1),s=t.resolve(n);for(let o=n,u;s==t&&(u=t.childBefore(o));){let i=u.lastChild;if(!i||!i.type.isError||i.from<i.to)break;s=t=u,o=i.from}return t.name=="TagName"?t.parent&&/CloseTag$/.test(t.parent.name)?V(r,t,t.from,n):_(r,e,t,t.from,n):t.name=="StartTag"||t.name=="IncompleteTag"?_(r,e,t,n,n):t.name=="StartCloseTag"||t.name=="IncompleteCloseTag"?V(r,t,n,n):t.name=="OpenTag"||t.name=="SelfClosingTag"||t.name=="AttributeName"?ie(r,e,t,t.name=="AttributeName"?t.from:n,n):t.name=="Is"||t.name=="AttributeValue"||t.name=="UnquotedAttributeValue"?ue(r,e,t,t.name=="Is"?n:t.from,n):a.explicit&&(s.name=="Element"||s.name=="Text"||s.name=="Document")?se(r,e,t,n):null}function de(e){return B(k.default,e)}function M(e){let{extraTags:a,extraGlobalAttributes:r}=e,n=r||a?new k(a,r):k.default;return t=>B(n,t)}var ce=S.parser.configure({top:"SingleExpression"}),R=[{tag:"script",attrs:e=>e.type=="text/typescript"||e.lang=="ts",parser:K.parser},{tag:"script",attrs:e=>e.type=="text/babel"||e.type=="text/jsx",parser:Q.parser},{tag:"script",attrs:e=>e.type=="text/typescript-jsx",parser:X.parser},{tag:"script",attrs(e){return/^(importmap|speculationrules|application\\/(.+\\+)?json)$/i.test(e.type)},parser:ce},{tag:"script",attrs(e){return!e.type||/^(?:text|application)\\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(e.type)},parser:S.parser},{tag:"style",attrs(e){return(!e.lang||e.lang=="css")&&(!e.type||/^(text\\/)?(x-)?(stylesheet|css)$/i.test(e.type))},parser:I.parser}],G=[{name:"style",parser:I.parser.configure({top:"Styles"})}].concat(z.map(e=>({name:e,parser:S.parser}))),H=te.define({name:"html",parser:W.configure({props:[le.add({Element(e){let a=/^(\\s*)(<\\/)?/.exec(e.textAfter);return e.node.to<=e.pos+a[0].length?e.continue():e.lineIndent(e.node.from)+(a[2]?0:e.unit)},"OpenTag CloseTag SelfClosingTag"(e){return e.column(e.node.from)+e.unit},Document(e){if(e.pos+/\\s*/.exec(e.textAfter)[0].length<e.node.to)return e.continue();let a=null,r;for(let n=e.node;;){let t=n.lastChild;if(!t||t.name!="Element"||t.to!=n.to)break;a=n=t}return a&&!((r=a.lastChild)&&(r.name=="CloseTag"||r.name=="SelfClosingTag"))?e.lineIndent(a.from)+e.unit:null}}),ae.add({Element(e){let a=e.firstChild,r=e.lastChild;return!a||a.name!="OpenTag"?null:{from:a.to,to:r.name=="CloseTag"?r.from:e.to}}}),ne.add({"OpenTag CloseTag":e=>e.getChild("TagName")})]}),languageData:{commentTokens:{block:{open:"<!--",close:"-->"}},indentOnInput:/^\\s*<\\/\\w+\\W$/,wordChars:"-_"}}),T=H.configure({wrap:E(R,G)});function pe(e={}){let a="",r;e.matchClosingTags===!1&&(a="noMatch"),e.selfClosingTags===!0&&(a=(a?a+" ":"")+"selfClosing"),(e.nestedLanguages&&e.nestedLanguages.length||e.nestedAttributes&&e.nestedAttributes.length)&&(r=E((e.nestedLanguages||[]).concat(R),(e.nestedAttributes||[]).concat(G)));let n=r?H.configure({wrap:r,dialect:a}):a?T.configure({dialect:a}):T;return new re(n,[T.data.of({autocomplete:M(e)}),e.autoCloseTags!==!1?U:[],Y().support,J().support])}var P=new Set("area base br col command embed frame hr img input keygen link meta param source track wbr menuitem".split(" ")),U=Z.inputHandler.of((e,a,r,n,t)=>{if(e.composing||e.state.readOnly||a!=r||n!=">"&&n!="/"||!T.isActiveAt(e.state,a,-1))return!1;let s=t(),{state:o}=s,u=o.changeByRange(i=>{var m,f,c;let g=o.doc.sliceString(i.from-1,i.to)==n,{head:d}=i,h=O(o).resolveInner(d,-1),b;if(g&&n==">"&&h.name=="EndTag"){let x=h.parent;if(((f=(m=x.parent)===null||m===void 0?void 0:m.lastChild)===null||f===void 0?void 0:f.name)!="CloseTag"&&(b=y(o.doc,x.parent,d))&&!P.has(b)){let A=d+(o.doc.sliceString(d,d+1)===">"?1:0),C=\`</\${b}>\`;return{range:i,changes:{from:d,to:A,insert:C}}}}else if(g&&n=="/"&&h.name=="IncompleteCloseTag"){let x=h.parent;if(h.from==d-2&&((c=x.lastChild)===null||c===void 0?void 0:c.name)!="CloseTag"&&(b=y(o.doc,x,d))&&!P.has(b)){let A=d+(o.doc.sliceString(d,d+1)===">"?1:0),C=\`\${b}>\`;return{range:ee.cursor(d+C.length,-1),changes:{from:d,to:A,insert:C}}}}return{range:i}});return u.changes.empty?!1:(e.dispatch([s,o.update(u,{userEvent:"input.complete",scrollIntoView:!0})]),!0)});export{U as autoCloseTags,pe as html,de as htmlCompletionSource,M as htmlCompletionSourceWith,T as htmlLanguage};
`,mimeType:"application/javascript"},"/@codemirror/lang-css":{content:`import"/@codemirror/language@^6.0.0?target=es2022";import"/@lezer/common@^1.0.2?target=es2022";import"/@lezer/css@^1.1.7?target=es2022";export*from"/@codemirror/lang-css@6.3.1/es2022/lang-css.mjs";
`,mimeType:"application/javascript"},"/@fsegurai/codemirror-theme-gruvbox-dark":{content:`import"/@codemirror/language@^6.0.0?target=es2022";import"/@codemirror/view@^6.0.0?target=es2022";import"/@lezer/highlight@^1.0.0?target=es2022";export*from"/@fsegurai/codemirror-theme-gruvbox-dark@6.2.3/es2022/codemirror-theme-gruvbox-dark.mjs";
`,mimeType:"application/javascript"},"/@codemirror/lang-css@6.3.1/es2022/lang-css.mjs":{content:`import{parser as v}from"/@lezer/css@^1.1.7?target=es2022";import{syntaxTree as y,LRLanguage as k,indentNodeProp as x,continuedIndent as z,foldNodeProp as S,foldInside as q,LanguageSupport as F}from"/@codemirror/language@^6.0.0?target=es2022";import{NodeWeakMap as C,IterMode as L}from"/@lezer/common@^1.0.2?target=es2022";var c=null;function u(){if(!c&&typeof document=="object"&&document.body){let{style:t}=document.body,a=[],o=new Set;for(let r in t)r!="cssText"&&r!="cssFloat"&&typeof t[r]=="string"&&(/[A-Z]/.test(r)&&(r=r.replace(/[A-Z]/g,e=>"-"+e.toLowerCase())),o.has(r)||(a.push(r),o.add(r)));c=a.sort().map(r=>({type:"property",label:r,apply:r+": "}))}return c||[]}var m=["active","after","any-link","autofill","backdrop","before","checked","cue","default","defined","disabled","empty","enabled","file-selector-button","first","first-child","first-letter","first-line","first-of-type","focus","focus-visible","focus-within","fullscreen","has","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","marker","modal","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","part","placeholder","placeholder-shown","read-only","read-write","required","right","root","scope","selection","slotted","target","target-text","valid","visited","where"].map(t=>({type:"class",label:t})),h=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(t=>({type:"keyword",label:t})).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(t=>({type:"constant",label:t}))),N=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(t=>({type:"type",label:t})),P=["@charset","@color-profile","@container","@counter-style","@font-face","@font-feature-values","@font-palette-values","@import","@keyframes","@layer","@media","@namespace","@page","@position-try","@property","@scope","@starting-style","@supports","@view-transition"].map(t=>({type:"keyword",label:t})),s=/^(\\w[\\w-]*|-\\w[\\w-]*|)$/,A=/^-(-[\\w-]*)?$/;function I(t,a){var o;if((t.name=="("||t.type.isError)&&(t=t.parent||t),t.name!="ArgList")return!1;let r=(o=t.parent)===null||o===void 0?void 0:o.firstChild;return r?.name!="Callee"?!1:a.sliceString(r.from,r.to)=="var"}var g=new C,T=["Declaration"];function B(t){for(let a=t;;){if(a.type.isTop)return a;if(!(a=a.parent))return t}}function b(t,a,o){if(a.to-a.from>4096){let r=g.get(a);if(r)return r;let e=[],l=new Set,i=a.cursor(L.IncludeAnonymous);if(i.firstChild())do for(let n of b(t,i.node,o))l.has(n.label)||(l.add(n.label),e.push(n));while(i.nextSibling());return g.set(a,e),e}else{let r=[],e=new Set;return a.cursor().iterate(l=>{var i;if(o(l)&&l.matchContext(T)&&((i=l.node.nextSibling)===null||i===void 0?void 0:i.name)==":"){let n=t.sliceString(l.from,l.to);e.has(n)||(e.add(n),r.push({label:n,type:"variable"}))}}),r}}var f=t=>a=>{let{state:o,pos:r}=a,e=y(o).resolveInner(r,-1),l=e.type.isError&&e.from==e.to-1&&o.doc.sliceString(e.from,e.to)=="-";if(e.name=="PropertyName"||(l||e.name=="TagName")&&/^(Block|Styles)$/.test(e.resolve(e.to).name))return{from:e.from,options:u(),validFor:s};if(e.name=="ValueName")return{from:e.from,options:h,validFor:s};if(e.name=="PseudoClassName")return{from:e.from,options:m,validFor:s};if(t(e)||(a.explicit||l)&&I(e,o.doc))return{from:t(e)||l?e.from:r,options:b(o.doc,B(e),t),validFor:A};if(e.name=="TagName"){for(let{parent:d}=e;d;d=d.parent)if(d.name=="Block")return{from:e.from,options:u(),validFor:s};return{from:e.from,options:N,validFor:s}}if(e.name=="AtKeyword")return{from:e.from,options:P,validFor:s};if(!a.explicit)return null;let i=e.resolve(r),n=i.childBefore(r);return n&&n.name==":"&&i.name=="PseudoClassSelector"?{from:r,options:m,validFor:s}:n&&n.name==":"&&i.name=="Declaration"||i.name=="ArgList"?{from:r,options:h,validFor:s}:i.name=="Block"||i.name=="Styles"?{from:r,options:u(),validFor:s}:null},w=f(t=>t.name=="VariableName"),p=k.define({name:"css",parser:v.configure({props:[x.add({Declaration:z()}),S.add({"Block KeyframeList":q})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\\s*\\}$/,wordChars:"-"}});function j(){return new F(p,p.data.of({autocomplete:w}))}export{j as css,w as cssCompletionSource,p as cssLanguage,f as defineCSSCompletionSource};
`,mimeType:"application/javascript"},"/@fsegurai/codemirror-theme-gruvbox-dark@6.2.3/es2022/codemirror-theme-gruvbox-dark.mjs":{content:'import{EditorView as E}from"/@codemirror/view@^6.0.0?target=es2022";import{HighlightStyle as I,syntaxHighlighting as G}from"/@codemirror/language@^6.0.0?target=es2022";import{tags as o}from"/@lezer/highlight@^1.0.0?target=es2022";var C={fontSize:"14px",fontFamily:"JetBrains Mono, Consolas, monospace",lineHeight:"1.6"},F={borderLeftWidth:"2px"},r={insertedTextDecoration:"none",deletedTextDecoration:"line-through",insertedLinePadding:"1px 3px",borderRadious:"3px"},i={border:"none",paddingRight:"8px",fontSize:"0.9em",fontWeight:"500",lineHeight:"1.78"},y={border:"none",borderRadius:"4px",padding:"2px 10px"},K={borderRadius:"2px"},v={borderRadius:"2px"},$={borderRadius:"4px",padding:"0 5px",margin:"0 2px"},S={width:"12px",height:"12px",borderRadius:"6px"},h={borderRadius:"4px",padding:"2px 6px"},l={borderRadius:"4px",borderRadiusSelected:"3px",lineHeight:"1.3",padding:"4px 8px",paddingRight:"8px"};function q(b){let R=document.createElement("style");R.id="cm-merge-revert-styles",R.textContent=`\n    .cm-merge-revert {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: flex-start;\n      padding: 4px;\n      background-color: ${b.backgroundColor};\n      border-left: 1px solid ${b.borderColor};\n      border-right: 1px solid ${b.borderColor};\n      width: 32px;\n    }\n    \n    .cm-merge-revert button {\n      width: 100%;\n      height: auto;\n      background-color: transparent;\n      border: none;\n      color: ${b.buttonColor};\n      cursor: pointer;\n      margin: 0 auto;\n      font-size: 20px;\n    }\n    \n    .cm-merge-revert button:hover {\n      background-color: ${b.buttonHoverColor};\n    }\n  `;let B=document.getElementById("cm-merge-revert-styles");B&&B.remove(),document.head.appendChild(R)}var m="#282828",p="#3c3836",f="#504945",n="#665c54",U="#7c6f64",e="#928374",w="#fbf1c7",t="#ebdbb2",u="#fb4934",k="#b8bb26",a="#fabd2f",g="#83a598",x="#d3869b",L="#8ec07c",s="#fe8019",c=u,j=p,J="#3c383660",O=m,d=p,N=f,V="#665c5480",D=s,A="#504945cc",Q=a,W=a,z=g,X=x,P="#32361a80",M="#3c1f1e80",H="#b8bb26",T="#fb4934",Y=E.theme({"&":{color:t,backgroundColor:O,fontSize:C.fontSize,fontFamily:C.fontFamily},".cm-content":{caretColor:D,lineHeight:C.lineHeight},".cm-cursor, .cm-dropCursor":{borderLeftColor:D,borderLeftWidth:F.borderLeftWidth},".cm-fat-cursor":{backgroundColor:`${D}99`,color:m},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:N},".cm-selectionLayer":{zIndex:100},".cm-searchMatch":{backgroundColor:"#b57614cc",outline:`1px solid ${a}`,color:w,borderRadius:h.borderRadius,"& span":{color:w}},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:s,color:m,padding:h.padding,"& span":{color:m}},".cm-search.cm-panel.cm-textfield":{color:t,borderRadius:h.borderRadius,padding:h.padding},".cm-panels":{backgroundColor:d,color:t,borderRadius:"4px"},".cm-panels.cm-panels-top":{borderBottom:`1px solid ${n}`},".cm-panels.cm-panels-bottom":{borderTop:`1px solid ${n}`},".cm-panel button":{backgroundColor:d,color:t,border:y.border,borderRadius:y.borderRadius,padding:y.padding},".cm-panel button:hover":{backgroundColor:f},".cm-activeLine":{backgroundColor:J,borderRadius:K.borderRadius,zIndex:1},".cm-gutters":{backgroundColor:p,color:e,border:i.border,borderRight:`1px solid ${f}`,paddingRight:i.paddingRight},".cm-activeLineGutter":{backgroundColor:j,color:t,fontWeight:i.fontWeight},".cm-lineNumbers":{fontSize:i.fontSize,lineHeight:i.lineHeight},".cm-foldGutter":{fontSize:i.fontSize,lineHeight:i.lineHeight},".cm-foldGutter .cm-gutterElement":{color:e,cursor:"pointer"},".cm-foldGutter .cm-gutterElement:hover":{color:t},".cm-insertedLine":{textDecoration:r.insertedTextDecoration,backgroundColor:P,color:H,padding:r.insertedLinePadding,borderRadius:r.borderRadious},"ins.cm-insertedLine, ins.cm-insertedLine:not(:has(.cm-changedText))":{textDecoration:r.insertedTextDecoration,backgroundColor:`${P} !important`,color:H,padding:r.insertedLinePadding,borderRadius:r.borderRadious,border:`1px solid ${H}40`},"ins.cm-insertedLine .cm-changedText":{background:"transparent !important"},".cm-deletedLine":{textDecoration:r.deletedTextDecoration,backgroundColor:M,color:T,padding:r.insertedLinePadding,borderRadius:r.borderRadious},"del.cm-deletedLine, del, del:not(:has(.cm-deletedText))":{textDecoration:r.deletedTextDecoration,backgroundColor:`${M} !important`,color:T,padding:r.insertedLinePadding,borderRadius:r.borderRadious,border:`1px solid ${T}40`},"del .cm-deletedText, del .cm-changedText":{background:"transparent !important"},".cm-tooltip":{backgroundColor:d,border:`1px solid ${n}`,borderRadius:l.borderRadius,padding:l.padding,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)"},".cm-tooltip-autocomplete":{"& > ul":{backgroundColor:d,border:"none"},"& > ul > li":{padding:l.padding,lineHeight:l.lineHeight},"& > ul > li[aria-selected]":{backgroundColor:N,color:w,borderRadius:l.borderRadiusSelected},"& > ul > li > span.cm-completionIcon":{color:e,paddingRight:l.paddingRight},"& > ul > li > span.cm-completionDetail":{color:e,fontStyle:"italic"}},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:d,borderBottomColor:d},".cm-diagnostic":{"&-error":{borderLeft:`3px solid ${c}`},"&-warning":{borderLeft:`3px solid ${W}`},"&-info":{borderLeft:`3px solid ${z}`}},".cm-lintPoint-error":{borderBottom:`2px wavy ${c}`},".cm-lintPoint-warning":{borderBottom:`2px wavy ${W}`},".cm-matchingBracket":{backgroundColor:A,outline:`1px solid ${Q}`,borderRadius:v.borderRadius},".cm-nonmatchingBracket":{backgroundColor:"#cc241d55",outline:`1px solid ${c}`,borderRadius:v.borderRadius},".cm-selectionMatch":{backgroundColor:V,outline:`1px solid ${n}`,borderRadius:v.borderRadius},".cm-foldPlaceholder":{backgroundColor:d,color:e,border:`1px dotted ${n}`,borderRadius:$.borderRadius,padding:$.padding,margin:$.margin},"&.cm-focused":{outline:"none",boxShadow:`0 0 0 2px ${m}, 0 0 0 3px ${s}40`},"& .cm-scroller::-webkit-scrollbar":{width:S.width,height:S.height},"& .cm-scroller::-webkit-scrollbar-track":{background:p},"& .cm-scroller::-webkit-scrollbar-thumb":{backgroundColor:n,borderRadius:S.borderRadius,border:`3px solid ${p}`},"& .cm-scroller::-webkit-scrollbar-thumb:hover":{backgroundColor:U},".cm-ghostText":{opacity:"0.5",color:e}},{dark:!0}),Z=I.define([{tag:o.keyword,color:u,fontWeight:"bold"},{tag:o.controlKeyword,color:u,fontWeight:"bold"},{tag:o.moduleKeyword,color:u,fontWeight:"bold"},{tag:[o.name,o.deleted,o.character,o.macroName],color:g},{tag:[o.variableName],color:g},{tag:[o.propertyName],color:L,fontStyle:"normal"},{tag:[o.typeName],color:L},{tag:[o.className],color:a,fontStyle:"italic"},{tag:[o.namespace],color:g,fontStyle:"italic"},{tag:[o.operator,o.operatorKeyword],color:t},{tag:[o.bracket],color:e},{tag:[o.brace],color:e},{tag:[o.punctuation],color:e},{tag:[o.function(o.variableName),o.labelName],color:a},{tag:[o.definition(o.variableName)],color:g},{tag:o.number,color:x},{tag:o.changed,color:x},{tag:o.annotation,color:c,fontStyle:"italic"},{tag:o.modifier,color:x,fontStyle:"italic"},{tag:o.self,color:x},{tag:[o.color,o.constant(o.name),o.standard(o.name)],color:s},{tag:[o.atom,o.bool,o.special(o.variableName)],color:s},{tag:[o.processingInstruction,o.inserted],color:k},{tag:[o.special(o.string),o.regexp],color:k},{tag:o.string,color:k},{tag:o.definition(o.typeName),color:L,fontWeight:"bold"},{tag:o.meta,color:e},{tag:o.comment,fontStyle:"italic",color:e},{tag:o.docComment,fontStyle:"italic",color:e},{tag:[o.tagName],color:u},{tag:[o.attributeName],color:a},{tag:[o.heading],fontWeight:"bold",color:a},{tag:[o.strong],fontWeight:"bold",color:a},{tag:[o.emphasis],fontStyle:"italic",color:k},{tag:[o.link],color:X,fontWeight:"500",textDecoration:"underline",textUnderlinePosition:"under"},{tag:[o.url],color:z,textDecoration:"underline",textUnderlineOffset:"2px"},{tag:[o.invalid],color:t,textDecoration:"underline wavy",borderBottom:`1px wavy ${c}`},{tag:[o.strikethrough],color:c,textDecoration:"line-through"},{tag:o.constant(o.name),color:s},{tag:o.deleted,color:c},{tag:o.squareBracket,color:e},{tag:o.angleBracket,color:e},{tag:o.monospace,color:t},{tag:[o.contentSeparator],color:g},{tag:o.quote,color:e}]),_=[Y,G(Z)],oo={backgroundColor:d,borderColor:n,buttonColor:t,buttonHoverColor:f};export{q as applyMergeRevertStyles,_ as gruvboxDark,oo as gruvboxDarkMergeStyles};\n',mimeType:"application/javascript"},"/@codemirror/language":{content:`import"/@codemirror/state@^6.0.0?target=es2022";import"/@codemirror/view@^6.23.0?target=es2022";import"/@lezer/common@^1.1.0?target=es2022";import"/@lezer/highlight@^1.0.0?target=es2022";import"/style-mod@^4.0.0?target=es2022";export*from"/@codemirror/language@6.11.3/es2022/language.mjs";
`,mimeType:"application/javascript"},"/@codemirror/language@6.11.3/es2022/language.mjs":{content:'import{NodeProp as b,IterMode as pe,Tree as k,TreeFragment as R,Parser as wt,NodeType as E,NodeSet as ge}from"/@lezer/common@^1.1.0?target=es2022";import{StateEffect as F,StateField as q,Facet as x,EditorState as D,countColumn as me,combineConfig as bt,RangeSet as xt,RangeSetBuilder as J,Prec as yt}from"/@codemirror/state@^6.0.0?target=es2022";import{ViewPlugin as U,logException as ke,EditorView as v,Decoration as d,WidgetType as St,gutter as ve,GutterMarker as we,Direction as W}from"/@codemirror/view@^6.23.0?target=es2022";import{tags as f,tagHighlighter as be,highlightTree as xe,styleTags as ye}from"/@lezer/highlight@^1.0.0?target=es2022";import{StyleModule as Pt}from"/style-mod@^4.0.0?target=es2022";var K,P=new b;function Q(e){return x.define({combine:e?t=>t.concat(e):void 0})}var At=new b,p=class{constructor(e,t,r=[],s=""){this.data=e,this.name=s,D.prototype.hasOwnProperty("tree")||Object.defineProperty(D.prototype,"tree",{get(){return g(this)}}),this.parser=t,this.extension=[y.of(this),D.languageData.of((i,n,o)=>{let a=Tt(i,n,o),l=a.type.prop(P);if(!l)return[];let h=i.facet(l),u=a.type.prop(At);if(u){let c=a.resolve(n-a.from,o);for(let m of u)if(m.test(c,i)){let w=i.facet(m.facet);return m.type=="replace"?w:w.concat(h)}}return h})].concat(r)}isActiveAt(e,t,r=-1){return Tt(e,t,r).type.prop(P)==this.data}findRegions(e){let t=e.facet(y);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],s=(i,n)=>{if(i.prop(P)==this.data){r.push({from:n,to:n+i.length});return}let o=i.prop(b.mounted);if(o){if(o.tree.prop(P)==this.data){if(o.overlay)for(let a of o.overlay)r.push({from:a.from+n,to:a.to+n});else r.push({from:n,to:n+i.length});return}else if(o.overlay){let a=r.length;if(s(o.tree,o.overlay[0].from+n),r.length>a)return}}for(let a=0;a<i.children.length;a++){let l=i.children[a];l instanceof k&&s(l,i.positions[a]+n)}};return s(g(e),0),r}get allowsNesting(){return!0}};p.setState=F.define();function Tt(e,t,r){let s=e.facet(y),i=g(e).topNode;if(!s||s.allowsNesting)for(let n=i;n;n=n.enter(t,r,pe.ExcludeBuffers))n.type.isTop&&(i=n);return i}var Se=class mt extends p{constructor(t,r,s){super(t,r,[],s),this.parser=r}static define(t){let r=Q(t.languageData);return new mt(r,t.parser.configure({props:[P.add(s=>s.isTop?r:void 0)]}),t.name)}configure(t,r){return new mt(this.data,this.parser.configure(t),r||this.name)}get allowsNesting(){return this.parser.hasWrappers()}};function g(e){let t=e.field(p.state,!1);return t?t.tree:k.empty}function Ct(e,t,r=50){var s;let i=(s=e.field(p.state,!1))===null||s===void 0?void 0:s.context;if(!i)return null;let n=i.viewport;i.updateViewport({from:0,to:t});let o=i.isDone(t)||i.work(r,t)?i.tree:null;return i.updateViewport(n),o}function Pe(e,t=e.doc.length){var r;return((r=e.field(p.state,!1))===null||r===void 0?void 0:r.context.isDone(t))||!1}function Ae(e,t=e.viewport.to,r=100){let s=Ct(e.state,t,r);return s!=g(e.state)&&e.dispatch({}),!!s}function Te(e){var t;return((t=e.plugin(Lt))===null||t===void 0?void 0:t.isWorking())||!1}var It=class{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}},O=null,V=class kt{constructor(t,r,s=[],i,n,o,a,l){this.parser=t,this.state=r,this.fragments=s,this.tree=i,this.treeLen=n,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(t,r,s){return new kt(t,r,[],k.empty,0,s,[],null)}startParse(){return this.parser.startParse(new It(this.state.doc),this.fragments)}work(t,r){return r!=null&&r>=this.state.doc.length&&(r=void 0),this.tree!=k.empty&&this.isDone(r??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var s;if(typeof t=="number"){let i=Date.now()+t;t=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),r!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>r)&&r<this.state.doc.length&&this.parse.stopAt(r);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(R.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(s=this.parse.stoppedAt)!==null&&s!==void 0?s:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(r??this.state.doc.length))this.parse=this.startParse();else return!0;if(t())return!1}})}takeTree(){let t,r;this.parse&&(t=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&this.parse.stopAt(t),this.withContext(()=>{for(;!(r=this.parse.advance()););}),this.treeLen=t,this.tree=r,this.fragments=this.withoutTempSkipped(R.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(t){let r=O;O=this;try{return t()}finally{O=r}}withoutTempSkipped(t){for(let r;r=this.tempSkipped.pop();)t=Dt(t,r.from,r.to);return t}changes(t,r){let{fragments:s,tree:i,treeLen:n,viewport:o,skipped:a}=this;if(this.takeTree(),!t.empty){let l=[];if(t.iterChangedRanges((h,u,c,m)=>l.push({fromA:h,toA:u,fromB:c,toB:m})),s=R.applyChanges(s,l),i=k.empty,n=0,o={from:t.mapPos(o.from,-1),to:t.mapPos(o.to,1)},this.skipped.length){a=[];for(let h of this.skipped){let u=t.mapPos(h.from,1),c=t.mapPos(h.to,-1);u<c&&a.push({from:u,to:c})}}}return new kt(this.parser,r,s,i,n,o,a,this.scheduleOn)}updateViewport(t){if(this.viewport.from==t.from&&this.viewport.to==t.to)return!1;this.viewport=t;let r=this.skipped.length;for(let s=0;s<this.skipped.length;s++){let{from:i,to:n}=this.skipped[s];i<t.to&&n>t.from&&(this.fragments=Dt(this.fragments,i,n),this.skipped.splice(s--,1))}return this.skipped.length>=r?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(t,r){this.skipped.push({from:t,to:r})}static getSkippingParser(t){return new class extends wt{createParse(r,s,i){let n=i[0].from,o=i[i.length-1].to;return{parsedPos:n,advance(){let a=O;if(a){for(let l of i)a.tempSkipped.push(l);t&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,t]):t)}return this.parsedPos=o,new k(E.none,[],[],o-n)},stoppedAt:null,stopAt(){}}}}}isDone(t){t=Math.min(t,this.state.doc.length);let r=this.fragments;return this.treeLen>=t&&r.length&&r[0].from==0&&r[0].to>=t}static get(){return O}};function Dt(e,t,r){return R.applyChanges(e,[{fromA:t,toA:r,fromB:t,toB:r}])}var X=class vt{constructor(t){this.context=t,this.tree=t.tree}apply(t){if(!t.docChanged&&this.tree==this.context.tree)return this;let r=this.context.changes(t.changes,t.state),s=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),r.viewport.to);return r.work(20,s)||r.takeTree(),new vt(r)}static init(t){let r=Math.min(3e3,t.doc.length),s=V.create(t.facet(y).parser,t,{from:0,to:r});return s.work(20,r)||s.takeTree(),new vt(s)}};p.state=q.define({create:X.init,update(e,t){for(let r of t.effects)if(r.is(p.setState))return r.value;return t.startState.facet(y)!=t.state.facet(y)?X.init(t.state):e.apply(t)}});var Ot=e=>{let t=setTimeout(()=>e(),500);return()=>clearTimeout(t)};typeof requestIdleCallback<"u"&&(Ot=e=>{let t=-1,r=setTimeout(()=>{t=requestIdleCallback(e,{timeout:400})},100);return()=>t<0?clearTimeout(r):cancelIdleCallback(t)});var Y=typeof navigator<"u"&&!((K=navigator.scheduling)===null||K===void 0)&&K.isInputPending?()=>navigator.scheduling.isInputPending():null,Lt=U.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(p.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(p.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=Ot(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:s}}=this.view,i=r.field(p.state);if(i.tree==i.context.tree&&i.context.isDone(s+1e5))return;let n=Date.now()+Math.min(this.chunkBudget,100,e&&!Y?Math.max(25,e.timeRemaining()-5):1e9),o=i.context.treeLen<s&&r.doc.length>s+1e3,a=i.context.work(()=>Y&&Y()||Date.now()>n,s+(o?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(i.context.takeTree(),this.view.dispatch({effects:p.setState.of(new X(i.context))})),this.chunkBudget>0&&!(a&&!o)&&this.scheduleWork(),this.checkAsyncSchedule(i.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>ke(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),y=x.define({combine(e){return e.length?e[0]:null},enables:e=>[p.state,Lt,v.contentAttributes.compute([e],t=>{let r=t.facet(e);return r&&r.name?{"data-language":r.name}:{}})]}),Ce=class{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}},Ie=class he{constructor(t,r,s,i,n,o=void 0){this.name=t,this.alias=r,this.extensions=s,this.filename=i,this.loadFunc=n,this.support=o,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(t=>this.support=t,t=>{throw this.loading=null,t}))}static of(t){let{load:r,support:s}=t;if(!r){if(!s)throw new RangeError("Must pass either \'load\' or \'support\' to LanguageDescription.of");r=()=>Promise.resolve(s)}return new he(t.name,(t.alias||[]).concat(t.name).map(i=>i.toLowerCase()),t.extensions||[],t.filename,r,s)}static matchFilename(t,r){for(let i of t)if(i.filename&&i.filename.test(r))return i;let s=/\\.([^.]+)$/.exec(r);if(s){for(let i of t)if(i.extensions.indexOf(s[1])>-1)return i}return null}static matchLanguageName(t,r,s=!0){r=r.toLowerCase();for(let i of t)if(i.alias.some(n=>n==r))return i;if(s)for(let i of t)for(let n of i.alias){let o=r.indexOf(n);if(o>-1&&(n.length>2||!/\\w/.test(r[o-1])&&!/\\w/.test(r[o+n.length])))return i}return null}},Bt=x.define(),Z=x.define({combine:e=>{if(!e.length)return"  ";let t=e[0];if(!t||/\\S/.test(t)||Array.from(t).some(r=>r!=t[0]))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return t}});function L(e){let t=e.facet(Z);return t.charCodeAt(0)==9?e.tabSize*t.length:t.length}function _(e,t){let r="",s=e.tabSize,i=e.facet(Z)[0];if(i=="	"){for(;t>=s;)r+="	",t-=s;i=" "}for(let n=0;n<t;n++)r+=i;return r}function tt(e,t){e instanceof D&&(e=new j(e));for(let s of e.state.facet(Bt)){let i=s(e,t);if(i!==void 0)return i}let r=g(e.state);return r.length>=t?Oe(e,r,t):null}function De(e,t,r){let s=Object.create(null),i=new j(e,{overrideIndentation:o=>{var a;return(a=s[o])!==null&&a!==void 0?a:-1}}),n=[];for(let o=t;o<=r;){let a=e.doc.lineAt(o);o=a.to+1;let l=tt(i,a.from);if(l==null)continue;/\\S/.test(a.text)||(l=0);let h=/^\\s*/.exec(a.text)[0],u=_(e,l);h!=u&&(s[a.from]=l,n.push({from:a.from,to:a.from+h.length,insert:u}))}return e.changes(n)}var j=class{constructor(e,t={}){this.state=e,this.options=t,this.unit=L(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:i}=this.options;return s!=null&&s>=r.from&&s<=r.to?i&&s==e?{text:"",from:e}:(t<0?s<e:s<=e)?{text:r.text.slice(s-r.from),from:s}:{text:r.text.slice(0,s-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:s}=this.lineAt(e,t);return r.slice(e-s,Math.min(r.length,e+100-s))}column(e,t=1){let{text:r,from:s}=this.lineAt(e,t),i=this.countColumn(r,e-s),n=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return n>-1&&(i+=n-this.countColumn(r,r.search(/\\S|$/))),i}countColumn(e,t=e.length){return me(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:s}=this.lineAt(e,t),i=this.options.overrideIndentation;if(i){let n=i(s);if(n>-1)return n}return this.countColumn(r,r.search(/\\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}},et=new b;function Oe(e,t,r){let s=t.resolveStack(r),i=t.resolveInner(r,-1).resolve(r,0).enterUnfinishedNodesBefore(r);if(i!=s.node){let n=[];for(let o=i;o&&!(o.from<s.node.from||o.to>s.node.to||o.from==s.node.from&&o.type==s.node.type);o=o.parent)n.push(o);for(let o=n.length-1;o>=0;o--)s={node:n[o],next:s}}return Nt(s,e,r)}function Nt(e,t,r){for(let s=e;s;s=s.next){let i=Be(s.node);if(i)return i(Mt.create(t,r,s))}return 0}function Le(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}function Be(e){let t=e.type.prop(et);if(t)return t;let r=e.firstChild,s;if(r&&(s=r.type.prop(b.closedBy))){let i=e.lastChild,n=i&&s.indexOf(i.name)>-1;return o=>Rt(o,!0,1,void 0,n&&!Le(o)?i.from:void 0)}return e.parent==null?Ne:null}function Ne(){return 0}var Mt=class ue extends j{constructor(t,r,s){super(t.state,t.options),this.base=t,this.pos=r,this.context=s}get node(){return this.context.node}static create(t,r,s){return new ue(t,r,s)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(t){let r=this.state.doc.lineAt(t.from);for(;;){let s=t.resolve(r.from);for(;s.parent&&s.parent.from==s.from;)s=s.parent;if(Me(s,t))break;r=this.state.doc.lineAt(s.from)}return this.lineIndent(r.from)}continue(){return Nt(this.context.next,this.base,this.pos)}};function Me(e,t){for(let r=t;r;r=r.parent)if(e==r)return!0;return!1}function Re(e){let t=e.node,r=t.childAfter(t.from),s=t.lastChild;if(!r)return null;let i=e.options.simulateBreak,n=e.state.doc.lineAt(r.from),o=i==null||i<=n.from?n.to:Math.min(n.to,i);for(let a=r.to;;){let l=t.childAfter(a);if(!l||l==s)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let h=/^ */.exec(n.text.slice(r.to-n.from))[0].length;return{from:r.from,to:r.to+h}}a=l.to}}function Ee({closing:e,align:t=!0,units:r=1}){return s=>Rt(s,t,r,e)}function Rt(e,t,r,s,i){let n=e.textAfter,o=n.match(/^\\s*/)[0].length,a=s&&n.slice(o,o+s.length)==s||i==e.pos+o,l=t?Re(e):null;return l?a?e.column(l.from):e.column(l.to):e.baseIndent+(a?0:e.unit*r)}var Fe=e=>e.baseIndent;function Ue({except:e,units:t=1}={}){return r=>{let s=e&&e.test(r.textAfter);return r.baseIndent+(s?0:t*r.unit)}}var We=200;function Ve(){return D.transactionFilter.of(e=>{if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;let t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;let r=e.newDoc,{head:s}=e.newSelection.main,i=r.lineAt(s);if(s>i.from+We)return e;let n=r.sliceString(i.from,s);if(!t.some(h=>h.test(n)))return e;let{state:o}=e,a=-1,l=[];for(let{head:h}of o.selection.ranges){let u=o.doc.lineAt(h);if(u.from==a)continue;a=u.from;let c=tt(o,u.from);if(c==null)continue;let m=/^\\s*/.exec(u.text)[0],w=_(o,c);m!=w&&l.push({from:u.from,to:u.from+m.length,insert:w})}return l.length?[e,{changes:l,sequential:!0}]:e})}var Et=x.define(),Ft=new b;function je(e){let t=e.firstChild,r=e.lastChild;return t&&t.to<r.from?{from:t.to,to:r.type.isError?e.to:r.from}:null}function $e(e,t,r){let s=g(e);if(s.length<r)return null;let i=s.resolveStack(r,1),n=null;for(let o=i;o;o=o.next){let a=o.node;if(a.to<=r||a.from>r)continue;if(n&&a.from<t)break;let l=a.type.prop(Ft);if(l&&(a.to<s.length-50||s.length==e.doc.length||!ze(a))){let h=l(a,e);h&&h.from<=r&&h.from>=t&&h.to>r&&(n=h)}}return n}function ze(e){let t=e.lastChild;return t&&t.to==e.to&&t.type.isError}function C(e,t,r){for(let s of e.facet(Et)){let i=s(e,t,r);if(i)return i}return $e(e,t,r)}function Ut(e,t){let r=t.mapPos(e.from,1),s=t.mapPos(e.to,-1);return r>=s?void 0:{from:r,to:s}}var I=F.define({map:Ut}),A=F.define({map:Ut});function rt(e){let t=[];for(let{head:r}of e.state.selection.ranges)t.some(s=>s.from<=r&&s.to>=r)||t.push(e.lineBlockAt(r));return t}var S=q.define({create(){return d.none},update(e,t){t.isUserEvent("delete")&&t.changes.iterChangedRanges((r,s)=>e=Wt(e,r,s)),e=e.map(t.changes);for(let r of t.effects)if(r.is(I)&&!Ge(e,r.value.from,r.value.to)){let{preparePlaceholder:s}=t.state.facet(it),i=s?d.replace({widget:new Xe(s(t.state,r.value))}):Gt;e=e.update({add:[i.range(r.value.from,r.value.to)]})}else r.is(A)&&(e=e.update({filter:(s,i)=>r.value.from!=s||r.value.to!=i,filterFrom:r.value.from,filterTo:r.value.to}));return t.selection&&(e=Wt(e,t.selection.main.head)),e},provide:e=>v.decorations.from(e),toJSON(e,t){let r=[];return e.between(0,t.doc.length,(s,i)=>{r.push(s,i)}),r},fromJSON(e){if(!Array.isArray(e)||e.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let r=0;r<e.length;){let s=e[r++],i=e[r++];if(typeof s!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");t.push(Gt.range(s,i))}return d.set(t,!0)}});function Wt(e,t,r=t){let s=!1;return e.between(t,r,(i,n)=>{i<r&&n>t&&(s=!0)}),s?e.update({filterFrom:t,filterTo:r,filter:(i,n)=>i>=r||n<=t}):e}function He(e){return e.field(S,!1)||xt.empty}function B(e,t,r){var s;let i=null;return(s=e.field(S,!1))===null||s===void 0||s.between(t,r,(n,o)=>{(!i||i.from>n)&&(i={from:n,to:o})}),i}function Ge(e,t,r){let s=!1;return e.between(t,t,(i,n)=>{i==t&&n==r&&(s=!0)}),s}function st(e,t){return e.field(S,!1)?t:t.concat(F.appendConfig.of(nt()))}var Vt=e=>{for(let t of rt(e)){let r=C(e.state,t.from,t.to);if(r)return e.dispatch({effects:st(e.state,[I.of(r),$(e,r)])}),!0}return!1},jt=e=>{if(!e.state.field(S,!1))return!1;let t=[];for(let r of rt(e)){let s=B(e.state,r.from,r.to);s&&t.push(A.of(s),$(e,s,!1))}return t.length&&e.dispatch({effects:t}),t.length>0};function $(e,t,r=!0){let s=e.state.doc.lineAt(t.from).number,i=e.state.doc.lineAt(t.to).number;return v.announce.of(`${e.state.phrase(r?"Folded lines":"Unfolded lines")} ${s} ${e.state.phrase("to")} ${i}.`)}var $t=e=>{let{state:t}=e,r=[];for(let s=0;s<t.doc.length;){let i=e.lineBlockAt(s),n=C(t,i.from,i.to);n&&r.push(I.of(n)),s=(n?e.lineBlockAt(n.to):i).to+1}return r.length&&e.dispatch({effects:st(e.state,r)}),!!r.length},zt=e=>{let t=e.state.field(S,!1);if(!t||!t.size)return!1;let r=[];return t.between(0,e.state.doc.length,(s,i)=>{r.push(A.of({from:s,to:i}))}),e.dispatch({effects:r}),!0};function qe(e,t){for(let r=t;;){let s=C(e.state,r.from,r.to);if(s&&s.to>t.from)return s;if(!r.from)return null;r=e.lineBlockAt(r.from-1)}}var Je=e=>{let t=[];for(let r of rt(e)){let s=B(e.state,r.from,r.to);if(s)t.push(A.of(s),$(e,s,!1));else{let i=qe(e,r);i&&t.push(I.of(i),$(e,i))}}return t.length>0&&e.dispatch({effects:st(e.state,t)}),!!t.length},Ke=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Vt},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:jt},{key:"Ctrl-Alt-[",run:$t},{key:"Ctrl-Alt-]",run:zt}],Qe={placeholderDOM:null,preparePlaceholder:null,placeholderText:"\\u2026"},it=x.define({combine(e){return bt(e,Qe)}});function nt(e){let t=[S,_e];return e&&t.push(it.of(e)),t}function Ht(e,t){let{state:r}=e,s=r.facet(it),i=o=>{let a=e.lineBlockAt(e.posAtDOM(o.target)),l=B(e.state,a.from,a.to);l&&e.dispatch({effects:A.of(l)}),o.preventDefault()};if(s.placeholderDOM)return s.placeholderDOM(e,i,t);let n=document.createElement("span");return n.textContent=s.placeholderText,n.setAttribute("aria-label",r.phrase("folded code")),n.title=r.phrase("unfold"),n.className="cm-foldPlaceholder",n.onclick=i,n}var Gt=d.replace({widget:new class extends St{toDOM(e){return Ht(e,null)}}}),Xe=class extends St{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Ht(e,this.value)}},Ye={openText:"\\u2304",closedText:"\\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1},ot=class extends we{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}};function Ze(e={}){let t={...Ye,...e},r=new ot(t,!0),s=new ot(t,!1),i=U.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(y)!=o.state.facet(y)||o.startState.field(S,!1)!=o.state.field(S,!1)||g(o.startState)!=g(o.state)||t.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new J;for(let l of o.viewportLineBlocks){let h=B(o.state,l.from,l.to)?s:C(o.state,l.from,l.to)?r:null;h&&a.add(l.from,l.from,h)}return a.finish()}}),{domEventHandlers:n}=t;return[i,ve({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(i))===null||a===void 0?void 0:a.markers)||xt.empty},initialSpacer(){return new ot(t,!1)},domEventHandlers:{...n,click:(o,a,l)=>{if(n.click&&n.click(o,a,l))return!0;let h=B(o.state,a.from,a.to);if(h)return o.dispatch({effects:A.of(h)}),!0;let u=C(o.state,a.from,a.to);return u?(o.dispatch({effects:I.of(u)}),!0):!1}}}),nt()]}var _e=v.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}}),at=class fe{constructor(t,r){this.specs=t;let s;function i(a){let l=Pt.newName();return(s||(s=Object.create(null)))["."+l]=a,l}let n=typeof r.all=="string"?r.all:r.all?i(r.all):void 0,o=r.scope;this.scope=o instanceof p?a=>a.prop(P)==o.data:o?a=>a==o:void 0,this.style=be(t.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:n}).style,this.module=s?new Pt(s):null,this.themeType=r.themeType}static define(t,r){return new fe(t,r||{})}},lt=x.define(),qt=x.define({combine(e){return e.length?[e[0]]:null}});function z(e){let t=e.facet(lt);return t.length?t:e.facet(qt)}function tr(e,t){let r=[sr],s;return e instanceof at&&(e.module&&r.push(v.styleModule.of(e.module)),s=e.themeType),t?.fallback?r.push(qt.of(e)):s?r.push(lt.computeN([v.darkTheme],i=>i.facet(v.darkTheme)==(s=="dark")?[e]:[])):r.push(lt.of(e)),r}function er(e,t,r){let s=z(e),i=null;if(s){for(let n of s)if(!n.scope||r&&n.scope(r)){let o=n.style(t);o&&(i=i?i+" "+o:o)}}return i}var rr=class{constructor(e){this.markCache=Object.create(null),this.tree=g(e.state),this.decorations=this.buildDeco(e,z(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=g(e.state),r=z(e.state),s=r!=z(e.startState),{viewport:i}=e.view,n=e.changes.mapPos(this.decoratedTo,1);t.length<i.to&&!s&&t.type==this.tree.type&&n>=i.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=n):(t!=this.tree||e.viewportChanged||s)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=i.to)}buildDeco(e,t){if(!t||!this.tree.length)return d.none;let r=new J;for(let{from:s,to:i}of e.visibleRanges)xe(this.tree,t,(n,o,a)=>{r.add(n,o,this.markCache[a]||(this.markCache[a]=d.mark({class:a})))},s,i);return r.finish()}},sr=yt.high(U.fromClass(rr,{decorations:e=>e.decorations})),ir=at.define([{tag:f.meta,color:"#404740"},{tag:f.link,textDecoration:"underline"},{tag:f.heading,textDecoration:"underline",fontWeight:"bold"},{tag:f.emphasis,fontStyle:"italic"},{tag:f.strong,fontWeight:"bold"},{tag:f.strikethrough,textDecoration:"line-through"},{tag:f.keyword,color:"#708"},{tag:[f.atom,f.bool,f.url,f.contentSeparator,f.labelName],color:"#219"},{tag:[f.literal,f.inserted],color:"#164"},{tag:[f.string,f.deleted],color:"#a11"},{tag:[f.regexp,f.escape,f.special(f.string)],color:"#e40"},{tag:f.definition(f.variableName),color:"#00f"},{tag:f.local(f.variableName),color:"#30a"},{tag:[f.typeName,f.namespace],color:"#085"},{tag:f.className,color:"#167"},{tag:[f.special(f.variableName),f.macroName],color:"#256"},{tag:f.definition(f.propertyName),color:"#00c"},{tag:f.comment,color:"#940"},{tag:f.invalid,color:"#f00"}]),nr=v.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Jt=1e4,Kt="()[]{}",Qt=x.define({combine(e){return bt(e,{afterCursor:!0,brackets:Kt,maxScanDistance:Jt,renderMatch:lr})}}),or=d.mark({class:"cm-matchingBracket"}),ar=d.mark({class:"cm-nonmatchingBracket"});function lr(e){let t=[],r=e.matched?or:ar;return t.push(r.range(e.start.from,e.start.to)),e.end&&t.push(r.range(e.end.from,e.end.to)),t}var hr=q.define({create(){return d.none},update(e,t){if(!t.docChanged&&!t.selection)return e;let r=[],s=t.state.facet(Qt);for(let i of t.state.selection.ranges){if(!i.empty)continue;let n=N(t.state,i.head,-1,s)||i.head>0&&N(t.state,i.head-1,1,s)||s.afterCursor&&(N(t.state,i.head,1,s)||i.head<t.state.doc.length&&N(t.state,i.head+1,-1,s));n&&(r=r.concat(s.renderMatch(n,t.state)))}return d.set(r,!0)},provide:e=>v.decorations.from(e)}),ur=[hr,nr];function fr(e={}){return[Qt.of(e),ur]}var Xt=new b;function ht(e,t,r){let s=e.prop(t<0?b.openedBy:b.closedBy);if(s)return s;if(e.name.length==1){let i=r.indexOf(e.name);if(i>-1&&i%2==(t<0?1:0))return[r[i+t]]}return null}function ut(e){let t=e.type.prop(Xt);return t?t(e.node):e}function N(e,t,r,s={}){let i=s.maxScanDistance||Jt,n=s.brackets||Kt,o=g(e),a=o.resolveInner(t,r);for(let l=a;l;l=l.parent){let h=ht(l.type,r,n);if(h&&l.from<l.to){let u=ut(l);if(u&&(r>0?t>=u.from&&t<u.to:t>u.from&&t<=u.to))return cr(e,t,r,l,u,h,n)}}return dr(e,t,r,o,a.type,i,n)}function cr(e,t,r,s,i,n,o){let a=s.parent,l={from:i.from,to:i.to},h=0,u=a?.cursor();if(u&&(r<0?u.childBefore(s.from):u.childAfter(s.to)))do if(r<0?u.to<=s.from:u.from>=s.to){if(h==0&&n.indexOf(u.type.name)>-1&&u.from<u.to){let c=ut(u);return{start:l,end:c?{from:c.from,to:c.to}:void 0,matched:!0}}else if(ht(u.type,r,o))h++;else if(ht(u.type,-r,o)){if(h==0){let c=ut(u);return{start:l,end:c&&c.from<c.to?{from:c.from,to:c.to}:void 0,matched:!1}}h--}}while(r<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function dr(e,t,r,s,i,n,o){let a=r<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=o.indexOf(a);if(l<0||l%2==0!=r>0)return null;let h={from:r<0?t-1:t,to:r>0?t+1:t},u=e.doc.iterRange(t,r>0?e.doc.length:0),c=0;for(let m=0;!u.next().done&&m<=n;){let w=u.value;r<0&&(m+=w.length);let H=t+m*r;for(let T=r>0?0:w.length-1,de=r>0?w.length:-1;T!=de;T+=r){let G=o.indexOf(w[T]);if(!(G<0||s.resolveInner(H+T,1).type!=i))if(G%2==0==r>0)c++;else{if(c==1)return{start:h,end:{from:H+T,to:H+T+1},matched:G>>1==l>>1};c--}}r>0&&(m+=w.length)}return u.done?{start:h,matched:!1}:null}function Yt(e,t,r,s=0,i=0){t==null&&(t=e.search(/[^\\s\\u00a0]/),t==-1&&(t=e.length));let n=i;for(let o=s;o<t;o++)e.charCodeAt(o)==9?n+=r-n%r:n++;return n}var ft=class{constructor(e,t,r,s){this.string=e,this.tabSize=t,this.indentUnit=r,this.overrideIndent=s,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t=this.string.charAt(this.pos),r;if(typeof e=="string"?r=t==e:r=t&&(e instanceof RegExp?e.test(t):e(t)),r)return++this.pos,t}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\\s\\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Yt(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:Yt(this.string,null,this.tabSize)}match(e,t,r){if(typeof e=="string"){let s=n=>r?n.toLowerCase():n,i=this.string.substr(this.pos,e.length);return s(i)==s(e)?(t!==!1&&(this.pos+=e.length),!0):null}else{let s=this.string.slice(this.pos).match(e);return s&&s.index>0?null:(s&&t!==!1&&(this.pos+=s[0].length),s)}}current(){return this.string.slice(this.start,this.pos)}};function pr(e){return{name:e.name||"",token:e.token,blankLine:e.blankLine||(()=>{}),startState:e.startState||(()=>!0),copyState:e.copyState||gr,indent:e.indent||(()=>null),languageData:e.languageData||{},tokenTable:e.tokenTable||dt,mergeTokens:e.mergeTokens!==!1}}function gr(e){if(typeof e!="object")return e;let t={};for(let r in e){let s=e[r];t[r]=s instanceof Array?s.slice():s}return t}var Zt=new WeakMap,mr=class ce extends p{constructor(t){let r=Q(t.languageData),s=pr(t),i,n=new class extends wt{createParse(o,a,l){return new vr(i,o,a,l)}};super(r,n,[],t.name),this.topNode=xr(r,this),i=this,this.streamParser=s,this.stateAfter=new b({perNode:!0}),this.tokenTable=t.tokenTable?new ie(s.tokenTable):br}static define(t){return new ce(t)}getIndent(t){let r,{overrideIndentation:s}=t.options;s&&(r=Zt.get(t.state),r!=null&&r<t.pos-1e4&&(r=void 0));let i=ct(this,t.node.tree,t.node.from,t.node.from,r??t.pos),n,o;if(i?(o=i.state,n=i.pos+1):(o=this.streamParser.startState(t.unit),n=t.node.from),t.pos-n>1e4)return null;for(;n<t.pos;){let l=t.state.doc.lineAt(n),h=Math.min(t.pos,l.to);if(l.length){let u=s?s(l.from):-1,c=new ft(l.text,t.state.tabSize,t.unit,u<0?void 0:u);for(;c.pos<h-l.from;)te(this.streamParser.token,c,o)}else this.streamParser.blankLine(o,t.unit);if(h==t.pos)break;n=l.to+1}let a=t.lineAt(t.pos);return s&&r==null&&Zt.set(t.state,a.from),this.streamParser.indent(o,/^\\s*(.*)/.exec(a.text)[1],t)}get allowsNesting(){return!1}};function ct(e,t,r,s,i){let n=r>=s&&r+t.length<=i&&t.prop(e.stateAfter);if(n)return{state:e.streamParser.copyState(n),pos:r+t.length};for(let o=t.children.length-1;o>=0;o--){let a=t.children[o],l=r+t.positions[o],h=a instanceof k&&l<i&&ct(e,a,l,s,i);if(h)return h}return null}function _t(e,t,r,s,i){if(i&&r<=0&&s>=t.length)return t;!i&&r==0&&t.type==e.topNode&&(i=!0);for(let n=t.children.length-1;n>=0;n--){let o=t.positions[n],a=t.children[n],l;if(o<s&&a instanceof k){if(!(l=_t(e,a,r-o,s-o,i)))break;return i?new k(t.type,t.children.slice(0,n).concat(l),t.positions.slice(0,n+1),o+l.length):l}}return null}function kr(e,t,r,s,i){for(let n of t){let o=n.from+(n.openStart?25:0),a=n.to-(n.openEnd?25:0),l=o<=r&&a>r&&ct(e,n.tree,0-n.offset,r,a),h;if(l&&l.pos<=s&&(h=_t(e,n.tree,r+n.offset,l.pos+n.offset,!1)))return{state:l.state,tree:h}}return{state:e.streamParser.startState(i?L(i):4),tree:k.empty}}var vr=class{constructor(e,t,r,s){this.lang=e,this.input=t,this.fragments=r,this.ranges=s,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=s[s.length-1].to;let i=V.get(),n=s[0].from,{state:o,tree:a}=kr(e,r,n,this.to,i?.state);this.state=o,this.parsedPos=this.chunkStart=n+a.length;for(let l=0;l<a.children.length;l++)this.chunks.push(a.children[l]),this.chunkPos.push(a.positions[l]);i&&this.parsedPos<i.viewport.from-1e5&&s.some(l=>l.from<=i.viewport.from&&l.to>=i.viewport.from)&&(this.state=this.lang.streamParser.startState(L(i.state)),i.skipUntilInView(this.parsedPos,i.viewport.from),this.parsedPos=i.viewport.from),this.moveRangeIndex()}advance(){let e=V.get(),t=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(t,this.chunkStart+512);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=t?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,t),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let t=this.input.chunk(e);if(this.input.lineChunks)t==`\n`&&(t="");else{let r=t.indexOf(`\n`);r>-1&&(t=t.slice(0,r))}return e+t.length<=this.to?t:t.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,t=this.lineAfter(e),r=e+t.length;for(let s=this.rangeIndex;;){let i=this.ranges[s].to;if(i>=r||(t=t.slice(0,i-(r-t.length)),s++,s==this.ranges.length))break;let n=this.ranges[s].from,o=this.lineAfter(n);t+=o,r=n+o.length}return{line:t,end:r}}skipGapsTo(e,t,r){for(;;){let s=this.ranges[this.rangeIndex].to,i=e+t;if(r>0?s>i:s>=i)break;let n=this.ranges[++this.rangeIndex].from;t+=n-s}return t}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,t,r,s){let i=4;if(this.ranges.length>1){s=this.skipGapsTo(t,s,1),t+=s;let o=this.chunk.length;s=this.skipGapsTo(r,s,-1),r+=s,i+=this.chunk.length-o}let n=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&i==4&&n>=0&&this.chunk[n]==e&&this.chunk[n+2]==t?this.chunk[n+2]=r:this.chunk.push(e,t,r,i),s}parseLine(e){let{line:t,end:r}=this.nextLine(),s=0,{streamParser:i}=this.lang,n=new ft(t,e?e.state.tabSize:4,e?L(e.state):2);if(n.eol())i.blankLine(this.state,n.indentUnit);else for(;!n.eol();){let o=te(i.token,n,this.state);if(o&&(s=this.emitToken(this.lang.tokenTable.resolve(o),this.parsedPos+n.start,this.parsedPos+n.pos,s)),n.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=k.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:wr,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new k(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new k(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}};function te(e,t,r){t.start=t.pos;for(let s=0;s<10;s++){let i=e(t,r);if(t.pos>t.start)return i}throw new Error("Stream parser failed to advance stream.")}var dt=Object.create(null),M=[E.none],wr=new ge(M),ee=[],re=Object.create(null),se=Object.create(null);for(let[e,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])se[e]=ne(dt,t);var ie=class{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),se)}resolve(e){return e?this.table[e]||(this.table[e]=ne(this.extra,e)):0}},br=new ie(dt);function pt(e,t){ee.indexOf(e)>-1||(ee.push(e),console.warn(t))}function ne(e,t){let r=[];for(let a of t.split(" ")){let l=[];for(let h of a.split(".")){let u=e[h]||f[h];u?typeof u=="function"?l.length?l=l.map(u):pt(h,`Modifier ${h} used at start of tag`):l.length?pt(h,`Tag ${h} used as modifier`):l=Array.isArray(u)?u:[u]:pt(h,`Unknown highlighting tag ${h}`)}for(let h of l)r.push(h)}if(!r.length)return 0;let s=t.replace(/ /g,"_"),i=s+" "+r.map(a=>a.id),n=re[i];if(n)return n.id;let o=re[i]=E.define({id:M.length,name:s,props:[ye({[s]:r})]});return M.push(o),o.id}function xr(e,t){let r=E.define({id:M.length,name:"Document",props:[P.add(()=>e),et.add(()=>s=>t.getIndent(s))],top:!0});return M.push(r),r}function oe(e){return e.length<=4096&&/[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac\\ufb50-\\ufdff]/.test(e)}function ae(e){for(let t=e.iter();!t.next().done;)if(oe(t.value))return!0;return!1}function yr(e){let t=!1;return e.iterChanges((r,s,i,n,o)=>{!t&&ae(o)&&(t=!0)}),t}var gt=x.define({combine:e=>e.some(t=>t)});function Sr(e={}){let t=[Pr];return e.alwaysIsolate&&t.push(gt.of(!0)),t}var Pr=U.fromClass(class{constructor(e){this.always=e.state.facet(gt)||e.textDirection!=W.LTR||e.state.facet(v.perLineTextDirection),this.hasRTL=!this.always&&ae(e.state.doc),this.tree=g(e.state),this.decorations=this.always||this.hasRTL?le(e,this.tree,this.always):d.none}update(e){let t=e.state.facet(gt)||e.view.textDirection!=W.LTR||e.state.facet(v.perLineTextDirection);if(!t&&!this.hasRTL&&yr(e.changes)&&(this.hasRTL=!0),!t&&!this.hasRTL)return;let r=g(e.state);(t!=this.always||r!=this.tree||e.docChanged||e.viewportChanged)&&(this.tree=r,this.always=t,this.decorations=le(e.view,r,t))}},{provide:e=>{function t(r){var s,i;return(i=(s=r.plugin(e))===null||s===void 0?void 0:s.decorations)!==null&&i!==void 0?i:d.none}return[v.outerDecorations.of(t),yt.lowest(v.bidiIsolatedRanges.of(t))]}});function le(e,t,r){let s=new J,i=e.visibleRanges;r||(i=Ar(i,e.state.doc));for(let{from:n,to:o}of i)t.iterate({enter:a=>{let l=a.type.prop(b.isolate);l&&s.add(a.from,a.to,Tr[l])},from:n,to:o});return s.finish()}function Ar(e,t){let r=t.iter(),s=0,i=[],n=null;for(let{from:o,to:a}of e)if(!(n&&n.to>o&&(o=n.to,o>=a)))for(s+r.value.length<o&&(r.next(o-(s+r.value.length)),s=o);;){let l=s,h=s+r.value.length;if(!r.lineBreak&&oe(r.value)&&(n&&n.to>l-10?n.to=Math.min(a,h):i.push(n={from:l,to:Math.min(a,h)})),h>=a)break;s=h,r.next()}return i}var Tr={rtl:d.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"rtl"},bidiIsolate:W.RTL}),ltr:d.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"ltr"},bidiIsolate:W.LTR}),auto:d.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"auto"},bidiIsolate:null})};export{It as DocInput,at as HighlightStyle,j as IndentContext,Se as LRLanguage,p as Language,Ie as LanguageDescription,Ce as LanguageSupport,V as ParseContext,mr as StreamLanguage,ft as StringStream,Mt as TreeIndentContext,Sr as bidiIsolates,fr as bracketMatching,Xt as bracketMatchingHandle,nt as codeFolding,Ue as continuedIndent,ir as defaultHighlightStyle,Q as defineLanguageFacet,Ee as delimitedIndent,Ct as ensureSyntaxTree,Fe as flatIndent,$t as foldAll,Vt as foldCode,I as foldEffect,Ze as foldGutter,je as foldInside,Ke as foldKeymap,Ft as foldNodeProp,Et as foldService,S as foldState,C as foldable,He as foldedRanges,Ae as forceParsing,L as getIndentUnit,tt as getIndentation,er as highlightingFor,et as indentNodeProp,Ve as indentOnInput,De as indentRange,Bt as indentService,_ as indentString,Z as indentUnit,y as language,P as languageDataProp,N as matchBrackets,At as sublanguageProp,tr as syntaxHighlighting,Te as syntaxParserRunning,g as syntaxTree,Pe as syntaxTreeAvailable,Je as toggleFold,zt as unfoldAll,jt as unfoldCode,A as unfoldEffect};\n',mimeType:"application/javascript"},"/@codemirror/autocomplete@%5E6.0.0?target=es2022":{content:`import"/@codemirror/language@^6.0.0?target=es2022";import"/@codemirror/state@^6.0.0?target=es2022";import"/@codemirror/view@^6.17.0?target=es2022";export*from"/@codemirror/autocomplete@6.20.0/es2022/autocomplete.mjs";
`,mimeType:"application/javascript"},"/@lezer/html@%5E1.3.12?target=es2022":{content:`import"/@lezer/common@^1.2.0?target=es2022";import"/@lezer/highlight@^1.0.0?target=es2022";import"/@lezer/lr@^1.0.0?target=es2022";export*from"/@lezer/html@1.3.12/es2022/html.mjs";
`,mimeType:"application/javascript"},"/@codemirror/autocomplete@6.20.0/es2022/autocomplete.mjs":{content:`import{Annotation as Yt,StateEffect as k,EditorSelection as x,codePointAt as C,codePointSize as D,fromCodePoint as ct,Facet as ht,combineConfig as Gt,StateField as X,Prec as Y,Text as Jt,Transaction as Zt,MapMode as G,RangeValue as _t,RangeSet as te,CharCategory as J}from"/@codemirror/state@^6.0.0?target=es2022";import{Direction as ee,logException as Z,showTooltip as ne,EditorView as P,ViewPlugin as oe,getTooltip as pt,Decoration as U,WidgetType as se,keymap as ut}from"/@codemirror/view@^6.17.0?target=es2022";import{syntaxTree as B,indentUnit as ie}from"/@codemirror/language@^6.0.0?target=es2022";var _=class{constructor(e,t,n,o){this.state=e,this.pos=t,this.explicit=n,this.view=o,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=B(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),o=t.text.slice(n-t.from,this.pos-t.from),s=o.search(gt(e,!1));return s<0?null:{from:n+s,to:this.pos,text:o.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,n){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),n&&n.onDocChange&&(this.abortOnDocChange=!0))}};function ft(e){let t=Object.keys(e).join(""),n=/\\w/.test(t);return n&&(t=t.replace(/\\w/g,"")),\`[\${n?"\\\\w":""}\${t.replace(/[^\\w\\s]/g,"\\\\$&")}]\`}function re(e){let t=Object.create(null),n=Object.create(null);for(let{label:s}of e){t[s[0]]=!0;for(let i=1;i<s.length;i++)n[s[i]]=!0}let o=ft(t)+ft(n)+"*$";return[new RegExp("^"+o),new RegExp(o)]}function dt(e){let t=e.map(s=>typeof s=="string"?{label:s}:s),[n,o]=t.every(s=>/^\\w+$/.test(s.label))?[/\\w*$/,/\\w+$/]:re(t);return s=>{let i=s.matchBefore(o);return i||s.explicit?{from:i?i.from:s.pos,options:t,validFor:n}:null}}function le(e,t){return n=>{for(let o=B(n.state).resolveInner(n.pos,-1);o;o=o.parent){if(e.indexOf(o.name)>-1)return t(n);if(o.type.isTop)break}return null}}function ae(e,t){return n=>{for(let o=B(n.state).resolveInner(n.pos,-1);o;o=o.parent){if(e.indexOf(o.name)>-1)return null;if(o.type.isTop)break}return t(n)}}var mt=class{constructor(e,t,n,o){this.completion=e,this.source=t,this.match=n,this.score=o}};function T(e){return e.selection.main.from}function gt(e,t){var n;let{source:o}=e,s=t&&o[0]!="^",i=o[o.length-1]!="$";return!s&&!i?e:new RegExp(\`\${s?"^":""}(?:\${o})\${i?"$":""}\`,(n=e.flags)!==null&&n!==void 0?n:e.ignoreCase?"i":"")}var j=Yt.define();function vt(e,t,n,o){let{main:s}=e.selection,i=n-s.from,l=o-s.from;return{...e.changeByRange(r=>{if(r!=s&&n!=o&&e.sliceDoc(r.from+i,r.from+l)!=e.sliceDoc(n,o))return{range:r};let a=e.toText(t);return{changes:{from:r.from+i,to:o==s.from?r.to:r.from+l,insert:a},range:x.cursor(r.from+i+a.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}var bt=new WeakMap;function ce(e){if(!Array.isArray(e))return e;let t=bt.get(e);return t||bt.set(e,t=dt(e)),t}var q=k.define(),L=k.define(),he=class{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let n=C(e,t),o=D(n);this.chars.push(n);let s=e.slice(t,t+o),i=s.toUpperCase();this.folded.push(C(i==s?s.toLowerCase():i,0)),t+=o}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:o,precise:s,byWord:i}=this;if(t.length==1){let d=C(e,0),w=D(d),I=w==e.length?0:-100;if(d!=t[0])if(d==n[0])I+=-200;else return null;return this.ret(I,[0,w])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let r=t.length,a=0;if(l<0){for(let d=0,w=Math.min(e.length,200);d<w&&a<r;){let I=C(e,d);(I==t[a]||I==n[a])&&(o[a++]=d),d+=D(I)}if(a<r)return null}let p=0,c=0,h=!1,u=0,f=-1,m=-1,y=/[a-z]/.test(e),S=!0;for(let d=0,w=Math.min(e.length,200),I=0;d<w&&c<r;){let b=C(e,d);l<0&&(p<r&&b==t[p]&&(s[p++]=d),u<r&&(b==t[u]||b==n[u]?(u==0&&(f=d),m=d+1,u++):u=0));let W,Q=b<255?b>=48&&b<=57||b>=97&&b<=122?2:b>=65&&b<=90?1:0:(W=ct(b))!=W.toLowerCase()?1:W!=W.toUpperCase()?2:0;(!d||Q==1&&y||I==0&&Q!=0)&&(t[c]==b||n[c]==b&&(h=!0)?i[c++]=d:i.length&&(S=!1)),I=Q,d+=D(b)}return c==r&&i[0]==0&&S?this.result(-100+(h?-200:0),i,e):u==r&&f==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):u==r?this.ret(-900-e.length,[f,m]):c==r?this.result(-100+(h?-200:0)+-700+(S?0:-1100),i,e):t.length==2?null:this.result((o[0]?-700:0)+-200+-1100,o,e)}result(e,t,n){let o=[],s=0;for(let i of t){let l=i+(this.astral?D(C(n,i)):1);s&&o[s-1]==i?o[s-1]=l:(o[s++]=i,o[s++]=l)}return this.ret(e-n.length,o)}},pe=class{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),n=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return n==null?null:(this.matched=[0,t.length],this.score=n+(e.length==this.pattern.length?0:-100),this)}},g=ht.define({combine(e){return Gt(e,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:ue,filterStrict:!1,compareCompletions:(t,n)=>(t.sortText||t.label).localeCompare(n.sortText||n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(t,n)=>t&&n,closeOnBlur:(t,n)=>t&&n,icons:(t,n)=>t&&n,tooltipClass:(t,n)=>o=>yt(t(o),n(o)),optionClass:(t,n)=>o=>yt(t(o),n(o)),addToOptions:(t,n)=>t.concat(n),filterStrict:(t,n)=>t||n})}});function yt(e,t){return e?t?e+" "+t:e:t}function ue(e,t,n,o,s,i){let l=e.textDirection==ee.RTL,r=l,a=!1,p="top",c,h,u=t.left-s.left,f=s.right-t.right,m=o.right-o.left,y=o.bottom-o.top;if(r&&u<Math.min(m,f)?r=!1:!r&&f<Math.min(m,u)&&(r=!0),m<=(r?u:f))c=Math.max(s.top,Math.min(n.top,s.bottom-y))-t.top,h=Math.min(400,r?u:f);else{a=!0,h=Math.min(400,(l?t.right:s.right-t.left)-30);let w=s.bottom-t.bottom;w>=y||w>t.top?c=n.bottom-t.top:(p="bottom",c=t.bottom-n.top)}let S=(t.bottom-t.top)/i.offsetHeight,d=(t.right-t.left)/i.offsetWidth;return{style:\`\${p}: \${c/S}px; max-width: \${h/d}px\`,class:"cm-completionInfo-"+(a?l?"left-narrow":"right-narrow":r?"left":"right")}}function fe(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(n){let o=document.createElement("div");return o.classList.add("cm-completionIcon"),n.type&&o.classList.add(...n.type.split(/\\s+/g).map(s=>"cm-completionIcon-"+s)),o.setAttribute("aria-hidden","true"),o},position:20}),t.push({render(n,o,s,i){let l=document.createElement("span");l.className="cm-completionLabel";let r=n.displayLabel||n.label,a=0;for(let p=0;p<i.length;){let c=i[p++],h=i[p++];c>a&&l.appendChild(document.createTextNode(r.slice(a,c)));let u=l.appendChild(document.createElement("span"));u.appendChild(document.createTextNode(r.slice(c,h))),u.className="cm-completionMatchedText",a=h}return a<r.length&&l.appendChild(document.createTextNode(r.slice(a))),l},position:50},{render(n){if(!n.detail)return null;let o=document.createElement("span");return o.className="cm-completionDetail",o.textContent=n.detail,o},position:80}),t.sort((n,o)=>n.position-o.position).map(n=>n.render)}function tt(e,t,n){if(e<=n)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){let s=Math.floor(t/n);return{from:s*n,to:(s+1)*n}}let o=Math.floor((e-t)/n);return{from:e-(o+1)*n,to:e-o*n}}var de=class{constructor(e,t,n){this.view=e,this.stateField=t,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:r=>this.placeInfo(r),key:this},this.space=null,this.currentClass="";let o=e.state.field(t),{options:s,selected:i}=o.open,l=e.state.facet(g);this.optionContent=fe(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=tt(s.length,i,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",r=>{let{options:a}=e.state.field(t).open;for(let p=r.target,c;p&&p!=this.dom;p=p.parentNode)if(p.nodeName=="LI"&&(c=/-(\\d+)$/.exec(p.id))&&+c[1]<a.length){this.applyCompletion(e,a[+c[1]]),r.preventDefault();return}}),this.dom.addEventListener("focusout",r=>{let a=e.state.field(this.stateField,!1);a&&a.tooltip&&e.state.facet(g).closeOnBlur&&r.relatedTarget!=e.contentDOM&&e.dispatch({effects:L.of(null)})}),this.showOptions(s,o.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let n=e.state.field(this.stateField),o=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),n!=o){let{options:s,selected:i,disabled:l}=n.open;(!o.open||o.open.options!=s)&&(this.range=tt(s.length,i,e.state.facet(g).maxRenderedOptions),this.showOptions(s,n.id)),this.updateSel(),l!=((t=o.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let n of this.currentClass.split(" "))n&&this.dom.classList.remove(n);for(let n of t.split(" "))n&&this.dom.classList.add(n);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;(t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=tt(t.options.length,t.selected,this.view.state.facet(g).maxRenderedOptions),this.showOptions(t.options,e.id));let n=this.updateSelectedOption(t.selected);if(n){this.destroyInfo();let{completion:o}=t.options[t.selected],{info:s}=o;if(!s)return;let i=typeof s=="string"?document.createTextNode(s):s(o);if(!i)return;"then"in i?i.then(l=>{l&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(l,o)}).catch(l=>Z(this.view.state,l,"completion info")):(this.addInfoPane(i,o),n.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,t){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",n.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)n.appendChild(e),this.infoDestroy=null;else{let{dom:o,destroy:s}=e;n.appendChild(o),this.infoDestroy=s||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,o=this.range.from;n;n=n.nextSibling,o++)n.nodeName!="LI"||!n.id?o--:o==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&(n.removeAttribute("aria-selected"),n.removeAttribute("aria-describedby"));return t&&ge(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),o=e.getBoundingClientRect(),s=this.space;if(!s){let i=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:i.clientWidth,bottom:i.clientHeight}}return o.top>Math.min(s.bottom,t.bottom)-10||o.bottom<Math.max(s.top,t.top)+10?null:this.view.state.facet(g).positionInfo(this.view,t,o,n,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,n){let o=document.createElement("ul");o.id=t,o.setAttribute("role","listbox"),o.setAttribute("aria-expanded","true"),o.setAttribute("aria-label",this.view.state.phrase("Completions")),o.addEventListener("mousedown",i=>{i.target==o&&i.preventDefault()});let s=null;for(let i=n.from;i<n.to;i++){let{completion:l,match:r}=e[i],{section:a}=l;if(a){let h=typeof a=="string"?a:a.name;if(h!=s&&(i>n.from||n.from==0))if(s=h,typeof a!="string"&&a.header)o.appendChild(a.header(a));else{let u=o.appendChild(document.createElement("completion-section"));u.textContent=h}}let p=o.appendChild(document.createElement("li"));p.id=t+"-"+i,p.setAttribute("role","option");let c=this.optionClass(l);c&&(p.className=c);for(let h of this.optionContent){let u=h(l,this.view.state,this.view,r);u&&p.appendChild(u)}}return n.from&&o.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&o.classList.add("cm-completionListIncompleteBottom"),o}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}};function me(e,t){return n=>new de(n,e,t)}function ge(e,t){let n=e.getBoundingClientRect(),o=t.getBoundingClientRect(),s=n.height/e.offsetHeight;o.top<n.top?e.scrollTop-=(n.top-o.top)/s:o.bottom>n.bottom&&(e.scrollTop+=(o.bottom-n.bottom)/s)}function wt(e){return(e.boost||0)*100+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}function ve(e,t){let n=[],o=null,s=null,i=c=>{n.push(c);let{section:h}=c.completion;if(h){o||(o=[]);let u=typeof h=="string"?h:h.name;o.some(f=>f.name==u)||o.push(typeof h=="string"?{name:u}:h)}},l=t.facet(g);for(let c of e)if(c.hasResult()){let h=c.result.getMatch;if(c.result.filter===!1)for(let u of c.result.options)i(new mt(u,c.source,h?h(u):[],1e9-n.length));else{let u=t.sliceDoc(c.from,c.to),f,m=l.filterStrict?new pe(u):new he(u);for(let y of c.result.options)if(f=m.match(y.label)){let S=y.displayLabel?h?h(y,f.matched):[]:f.matched,d=f.score+(y.boost||0);if(i(new mt(y,c.source,S,d)),typeof y.section=="object"&&y.section.rank==="dynamic"){let{name:w}=y.section;s||(s=Object.create(null)),s[w]=Math.max(d,s[w]||-1e9)}}}}if(o){let c=Object.create(null),h=0,u=(f,m)=>(f.rank==="dynamic"&&m.rank==="dynamic"?s[m.name]-s[f.name]:0)||(typeof f.rank=="number"?f.rank:1e9)-(typeof m.rank=="number"?m.rank:1e9)||(f.name<m.name?-1:1);for(let f of o.sort(u))h-=1e5,c[f.name]=h;for(let f of n){let{section:m}=f.completion;m&&(f.score+=c[typeof m=="string"?m:m.name])}}let r=[],a=null,p=l.compareCompletions;for(let c of n.sort((h,u)=>u.score-h.score||p(h.completion,u.completion))){let h=c.completion;!a||a.label!=h.label||a.detail!=h.detail||a.type!=null&&h.type!=null&&a.type!=h.type||a.apply!=h.apply||a.boost!=h.boost?r.push(c):wt(c.completion)>wt(a)&&(r[r.length-1]=c),a=c.completion}return r}var be=class \${constructor(t,n,o,s,i,l){this.options=t,this.attrs=n,this.tooltip=o,this.timestamp=s,this.selected=i,this.disabled=l}setSelected(t,n){return t==this.selected||t>=this.options.length?this:new $(this.options,xt(n,t),this.tooltip,this.timestamp,t,this.disabled)}static build(t,n,o,s,i,l){if(s&&!l&&t.some(p=>p.isPending))return s.setDisabled();let r=ve(t,n);if(!r.length)return s&&t.some(p=>p.isPending)?s.setDisabled():null;let a=n.facet(g).selectOnOpen?0:-1;if(s&&s.selected!=a&&s.selected!=-1){let p=s.options[s.selected].completion;for(let c=0;c<r.length;c++)if(r[c].completion==p){a=c;break}}return new $(r,xt(o,a),{pos:t.reduce((p,c)=>c.hasResult()?Math.min(p,c.from):p,1e8),create:De,above:i.aboveCursor},s?s.timestamp:Date.now(),a,!1)}map(t){return new $(this.options,this.attrs,{...this.tooltip,pos:t.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new $(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}},ye=class at{constructor(t,n,o){this.active=t,this.id=n,this.open=o}static start(){return new at(Ie,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(t){let{state:n}=t,o=n.facet(g),s=(o.override||n.languageDataAt("autocomplete",T(n)).map(ce)).map(r=>(this.active.find(a=>a.source==r)||new A(r,this.active.some(a=>a.state!=0)?1:0)).update(t,o));s.length==this.active.length&&s.every((r,a)=>r==this.active[a])&&(s=this.active);let i=this.open,l=t.effects.some(r=>r.is(et));i&&t.docChanged&&(i=i.map(t.changes)),t.selection||s.some(r=>r.hasResult()&&t.changes.touchesRange(r.from,r.to))||!we(s,this.active)||l?i=be.build(s,n,this.id,i,o,l):i&&i.disabled&&!s.some(r=>r.isPending)&&(i=null),!i&&s.every(r=>!r.isPending)&&s.some(r=>r.hasResult())&&(s=s.map(r=>r.hasResult()?new A(r.source,0):r));for(let r of t.effects)r.is(nt)&&(i=i&&i.setSelected(r.value,this.id));return s==this.active&&i==this.open?this:new at(s,this.id,i)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?xe:Ce}};function we(e,t){if(e==t)return!0;for(let n=0,o=0;;){for(;n<e.length&&!e[n].hasResult();)n++;for(;o<t.length&&!t[o].hasResult();)o++;let s=n==e.length,i=o==t.length;if(s||i)return s==i;if(e[n++].result!=t[o++].result)return!1}}var xe={"aria-autocomplete":"list"},Ce={};function xt(e,t){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(n["aria-activedescendant"]=e+"-"+t),n}var Ie=[];function Ct(e,t){if(e.isUserEvent("input.complete")){let o=e.annotation(j);if(o&&t.activateOnCompletion(o))return 12}let n=e.isUserEvent("input.type");return n&&t.activateOnTyping?5:n?1:e.isUserEvent("delete.backward")?2:e.selection?8:e.docChanged?16:0}var A=class N{constructor(t,n,o=!1){this.source=t,this.state=n,this.explicit=o}hasResult(){return!1}get isPending(){return this.state==1}update(t,n){let o=Ct(t,n),s=this;(o&8||o&16&&this.touches(t))&&(s=new N(s.source,0)),o&4&&s.state==0&&(s=new N(this.source,1)),s=s.updateFor(t,o);for(let i of t.effects)if(i.is(q))s=new N(s.source,1,i.value);else if(i.is(L))s=new N(s.source,0);else if(i.is(et))for(let l of i.value)l.source==s.source&&(s=l);return s}updateFor(t,n){return this.map(t.changes)}map(t){return this}touches(t){return t.changes.touchesRange(T(t.state))}},It=class K extends A{constructor(t,n,o,s,i,l){super(t,3,n),this.limit=o,this.result=s,this.from=i,this.to=l}hasResult(){return!0}updateFor(t,n){var o;if(!(n&3))return this.map(t.changes);let s=this.result;s.map&&!t.changes.empty&&(s=s.map(s,t.changes));let i=t.changes.mapPos(this.from),l=t.changes.mapPos(this.to,1),r=T(t.state);if(r>l||!s||n&2&&(T(t.startState)==this.from||r<this.limit))return new A(this.source,n&4?1:0);let a=t.changes.mapPos(this.limit);return ke(s.validFor,t.state,i,l)?new K(this.source,this.explicit,a,s,i,l):s.update&&(s=s.update(s,i,l,new _(t.state,r,!1)))?new K(this.source,this.explicit,a,s,s.from,(o=s.to)!==null&&o!==void 0?o:T(t.state)):new A(this.source,1,this.explicit)}map(t){return t.empty?this:(this.result.map?this.result.map(this.result,t):this.result)?new K(this.source,this.explicit,t.mapPos(this.limit),this.result,t.mapPos(this.from),t.mapPos(this.to,1)):new A(this.source,0)}touches(t){return t.changes.touchesRange(this.from,this.to)}};function ke(e,t,n,o){if(!e)return!1;let s=t.sliceDoc(n,o);return typeof e=="function"?e(s,n,o,t):gt(e,!0).test(s)}var et=k.define({map(e,t){return e.map(n=>n.map(t))}}),nt=k.define(),v=X.define({create(){return ye.start()},update(e,t){return e.update(t)},provide:e=>[ne.from(e,t=>t.tooltip),P.contentAttributes.from(e,t=>t.attrs)]});function ot(e,t){let n=t.completion.apply||t.completion.label,o=e.state.field(v).active.find(s=>s.source==t.source);return o instanceof It?(typeof n=="string"?e.dispatch({...vt(e.state,n,o.from,o.to),annotations:j.of(t.completion)}):n(e,t.completion,o.from,o.to),!0):!1}var De=me(v,ot);function R(e,t="option"){return n=>{let o=n.state.field(v,!1);if(!o||!o.open||o.open.disabled||Date.now()-o.open.timestamp<n.state.facet(g).interactionDelay)return!1;let s=1,i;t=="page"&&(i=pt(n,o.open.tooltip))&&(s=Math.max(2,Math.floor(i.dom.offsetHeight/i.dom.querySelector("li").offsetHeight)-1));let{length:l}=o.open.options,r=o.open.selected>-1?o.open.selected+s*(e?1:-1):e?0:l-1;return r<0?r=t=="page"?0:l-1:r>=l&&(r=t=="page"?l-1:0),n.dispatch({effects:nt.of(r)}),!0}}var kt=e=>{let t=e.state.field(v,!1);return e.state.readOnly||!t||!t.open||t.open.selected<0||t.open.disabled||Date.now()-t.open.timestamp<e.state.facet(g).interactionDelay?!1:ot(e,t.open.options[t.open.selected])},H=e=>e.state.field(v,!1)?(e.dispatch({effects:q.of(!0)}),!0):!1,Dt=e=>{let t=e.state.field(v,!1);return!t||!t.active.some(n=>n.state!=0)?!1:(e.dispatch({effects:L.of(null)}),!0)},Se=class{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}},Te=50,Ae=1e3,Oe=oe.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let t of e.state.field(v).active)t.isPending&&this.startQuery(t)}update(e){let t=e.state.field(v),n=e.state.facet(g);if(!e.selectionSet&&!e.docChanged&&e.startState.field(v)==t)return;let o=e.transactions.some(i=>{let l=Ct(i,n);return l&8||(i.selection||i.docChanged)&&!(l&3)});for(let i=0;i<this.running.length;i++){let l=this.running[i];if(o||l.context.abortOnDocChange&&e.docChanged||l.updates.length+e.transactions.length>Te&&Date.now()-l.time>Ae){for(let r of l.context.abortListeners)try{r()}catch(a){Z(this.view.state,a)}l.context.abortListeners=null,this.running.splice(i--,1)}else l.updates.push(...e.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),e.transactions.some(i=>i.effects.some(l=>l.is(q)))&&(this.pendingStart=!0);let s=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=t.active.some(i=>i.isPending&&!this.running.some(l=>l.active.source==i.source))?setTimeout(()=>this.startUpdate(),s):-1,this.composing!=0)for(let i of e.transactions)i.isUserEvent("input.type")?this.composing=2:this.composing==2&&i.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:e}=this.view,t=e.field(v);for(let n of t.active)n.isPending&&!this.running.some(o=>o.active.source==n.source)&&this.startQuery(n);this.running.length&&t.open&&t.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(g).updateSyncTime))}startQuery(e){let{state:t}=this.view,n=T(t),o=new _(t,n,e.explicit,this.view),s=new Se(e,o);this.running.push(s),Promise.resolve(e.source(o)).then(i=>{s.context.aborted||(s.done=i||null,this.scheduleAccept())},i=>{this.view.dispatch({effects:L.of(null)}),Z(this.view.state,i)})}scheduleAccept(){this.running.every(e=>e.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(g).updateSyncTime))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],n=this.view.state.facet(g),o=this.view.state.field(v);for(let s=0;s<this.running.length;s++){let i=this.running[s];if(i.done===void 0)continue;if(this.running.splice(s--,1),i.done){let r=T(i.updates.length?i.updates[0].startState:this.view.state),a=Math.min(r,i.done.from+(i.active.explicit?0:1)),p=new It(i.active.source,i.active.explicit,a,i.done,i.done.from,(e=i.done.to)!==null&&e!==void 0?e:r);for(let c of i.updates)p=p.update(c,n);if(p.hasResult()){t.push(p);continue}}let l=o.active.find(r=>r.source==i.active.source);if(l&&l.isPending)if(i.done==null){let r=new A(i.active.source,0);for(let a of i.updates)r=r.update(a,n);r.isPending||t.push(r)}else this.startQuery(l)}(t.length||o.open&&o.open.disabled)&&this.view.dispatch({effects:et.of(t)})}},{eventHandlers:{blur(e){let t=this.view.state.field(v,!1);if(t&&t.tooltip&&this.view.state.facet(g).closeOnBlur){let n=t.open&&pt(this.view,t.open.tooltip);(!n||!n.dom.contains(e.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:L.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:q.of(!1)}),20),this.composing=0}}}),Ee=typeof navigator=="object"&&/Win/.test(navigator.platform),Pe=Y.highest(P.domEventHandlers({keydown(e,t){let n=t.state.field(v,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||e.key.length>1||e.ctrlKey&&!(Ee&&e.altKey)||e.metaKey)return!1;let o=n.open.options[n.open.selected],s=n.active.find(l=>l.source==o.source),i=o.completion.commitCharacters||s.result.commitCharacters;return i&&i.indexOf(e.key)>-1&&ot(t,o),!1}})),St=P.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\\xB7\\xB7\\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\\u{1F511}\\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Be=class{constructor(e,t,n,o){this.field=e,this.line=t,this.from=n,this.to=o}},Le=class Kt{constructor(t,n,o){this.field=t,this.from=n,this.to=o}map(t){let n=t.mapPos(this.from,-1,G.TrackDel),o=t.mapPos(this.to,1,G.TrackDel);return n==null||o==null?null:new Kt(this.field,n,o)}},Re=class Qt{constructor(t,n){this.lines=t,this.fieldPositions=n}instantiate(t,n){let o=[],s=[n],i=t.doc.lineAt(n),l=/^\\s*/.exec(i.text)[0];for(let a of this.lines){if(o.length){let p=l,c=/^\\t*/.exec(a)[0].length;for(let h=0;h<c;h++)p+=t.facet(ie);s.push(n+p.length-c),a=p+a.slice(c)}o.push(a),n+=a.length+1}let r=this.fieldPositions.map(a=>new Le(a.field,s[a.line]+a.from,s[a.line]+a.to));return{text:o,ranges:r}}static parse(t){let n=[],o=[],s=[],i;for(let l of t.split(/\\r\\n?|\\n/)){for(;i=/[#$]\\{(?:(\\d+)(?::([^{}]*))?|((?:\\\\[{}]|[^{}])*))\\}/.exec(l);){let r=i[1]?+i[1]:null,a=i[2]||i[3]||"",p=-1,c=a.replace(/\\\\[{}]/g,h=>h[1]);for(let h=0;h<n.length;h++)(r!=null?n[h].seq==r:c&&n[h].name==c)&&(p=h);if(p<0){let h=0;for(;h<n.length&&(r==null||n[h].seq!=null&&n[h].seq<r);)h++;n.splice(h,0,{seq:r,name:c}),p=h;for(let u of s)u.field>=p&&u.field++}for(let h of s)if(h.line==o.length&&h.from>i.index){let u=i[2]?3+(i[1]||"").length:2;h.from-=u,h.to-=u}s.push(new Be(p,o.length,i.index,i.index+c.length)),l=l.slice(0,i.index)+a+l.slice(i.index+i[0].length)}l=l.replace(/\\\\([{}])/g,(r,a,p)=>{for(let c of s)c.line==o.length&&c.from>p&&(c.from--,c.to--);return a}),o.push(l)}return new Qt(o,s)}},Fe=U.widget({widget:new class extends se{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),Me=U.mark({class:"cm-snippetField"}),V=class Xt{constructor(t,n){this.ranges=t,this.active=n,this.deco=U.set(t.map(o=>(o.from==o.to?Fe:Me).range(o.from,o.to)),!0)}map(t){let n=[];for(let o of this.ranges){let s=o.map(t);if(!s)return null;n.push(s)}return new Xt(n,this.active)}selectionInsideField(t){return t.ranges.every(n=>this.ranges.some(o=>o.field==this.active&&o.from<=n.from&&o.to>=n.to))}},F=k.define({map(e,t){return e&&e.map(t)}}),$e=k.define(),O=X.define({create(){return null},update(e,t){for(let n of t.effects){if(n.is(F))return n.value;if(n.is($e)&&e)return new V(e.ranges,n.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:e=>P.decorations.from(e,t=>t?t.deco:U.none)});function st(e,t){return x.create(e.filter(n=>n.field==t).map(n=>x.range(n.from,n.to)))}function Tt(e){let t=Re.parse(e);return(n,o,s,i)=>{let{text:l,ranges:r}=t.instantiate(n.state,s),{main:a}=n.state.selection,p={changes:{from:s,to:i==a.from?a.to:i,insert:Jt.of(l)},scrollIntoView:!0,annotations:o?[j.of(o),Zt.userEvent.of("input.complete")]:void 0};if(r.length&&(p.selection=st(r,0)),r.some(c=>c.field>0)){let c=new V(r,0),h=p.effects=[F.of(c)];n.state.field(O,!1)===void 0&&h.push(k.appendConfig.of([O,je,He,St]))}n.dispatch(n.state.update(p))}}function At(e){return({state:t,dispatch:n})=>{let o=t.field(O,!1);if(!o||e<0&&o.active==0)return!1;let s=o.active+e,i=e>0&&!o.ranges.some(l=>l.field==s+e);return n(t.update({selection:st(o.ranges,s),effects:F.of(i?null:new V(o.ranges,s)),scrollIntoView:!0})),!0}}var Ot=({state:e,dispatch:t})=>e.field(O,!1)?(t(e.update({effects:F.of(null)})),!0):!1,Et=At(1),Pt=At(-1);function Ne(e){let t=e.field(O,!1);return!!(t&&t.ranges.some(n=>n.field==t.active+1))}function We(e){let t=e.field(O,!1);return!!(t&&t.active>0)}var Ue=[{key:"Tab",run:Et,shift:Pt},{key:"Escape",run:Ot}],it=ht.define({combine(e){return e.length?e[0]:Ue}}),je=Y.highest(ut.compute([it],e=>e.facet(it)));function qe(e,t){return{...t,apply:Tt(e)}}var He=P.domEventHandlers({mousedown(e,t){let n=t.state.field(O,!1),o;if(!n||(o=t.posAtCoords({x:e.clientX,y:e.clientY}))==null)return!1;let s=n.ranges.find(i=>i.from<=o&&i.to>=o);return!s||s.field==n.active?!1:(t.dispatch({selection:st(n.ranges,s.field),effects:F.of(n.ranges.some(i=>i.field>s.field)?new V(n.ranges,s.field):null),scrollIntoView:!0}),!0)}});function Ve(e){let t=e.replace(/[\\]\\-\\\\]/g,"\\\\$&");try{return new RegExp(\`[\\\\p{Alphabetic}\\\\p{Number}_\${t}]+\`,"ug")}catch{return new RegExp(\`[w\${t}]\`,"g")}}function Bt(e,t){return new RegExp(t(e.source),e.unicode?"u":"")}var Lt=Object.create(null);function ze(e){return Lt[e]||(Lt[e]=new WeakMap)}function Rt(e,t,n,o,s){for(let i=e.iterLines(),l=0;!i.next().done;){let{value:r}=i,a;for(t.lastIndex=0;a=t.exec(r);)if(!o[a[0]]&&l+a.index!=s&&(n.push({type:"text",label:a[0]}),o[a[0]]=!0,n.length>=2e3))return;l+=r.length+1}}function Ft(e,t,n,o,s){let i=e.length>=1e3,l=i&&t.get(e);if(l)return l;let r=[],a=Object.create(null);if(e.children){let p=0;for(let c of e.children){if(c.length>=1e3)for(let h of Ft(c,t,n,o-p,s-p))a[h.label]||(a[h.label]=!0,r.push(h));else Rt(c,n,r,a,s-p);p+=c.length+1}}else Rt(e,n,r,a,s);return i&&r.length<2e3&&t.set(e,r),r}var Ke=e=>{let t=e.state.languageDataAt("wordChars",e.pos).join(""),n=Ve(t),o=e.matchBefore(Bt(n,l=>l+"$"));if(!o&&!e.explicit)return null;let s=o?o.from:e.pos,i=Ft(e.state.doc,ze(t),n,5e4,s);return{from:s,options:i,validFor:Bt(n,l=>"^"+l)}},M={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},E=k.define({map(e,t){return t.mapPos(e,-1,G.TrackAfter)??void 0}}),rt=new class extends _t{};rt.startSide=1,rt.endSide=-1;var Mt=X.define({create(){return te.empty},update(e,t){if(e=e.map(t.changes),t.selection){let n=t.state.doc.lineAt(t.selection.main.head);e=e.update({filter:o=>o>=n.from&&o<=n.to})}for(let n of t.effects)n.is(E)&&(e=e.update({add:[rt.range(n.value,n.value+1)]}));return e}});function Qe(){return[Ye,Mt]}var lt="()[]{}<>\\xAB\\xBB\\xBB\\xAB\\uFF3B\\uFF3D\\uFF5B\\uFF5D";function $t(e){for(let t=0;t<lt.length;t+=2)if(lt.charCodeAt(t)==e)return lt.charAt(t+1);return ct(e<128?e:e+1)}function Nt(e,t){return e.languageDataAt("closeBrackets",t)[0]||M}var Xe=typeof navigator=="object"&&/Android\\b/.test(navigator.userAgent),Ye=P.inputHandler.of((e,t,n,o)=>{if((Xe?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let s=e.state.selection.main;if(o.length>2||o.length==2&&D(C(o,0))==1||t!=s.from||n!=s.to)return!1;let i=Ut(e.state,o);return i?(e.dispatch(i),!0):!1}),Wt=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=Nt(e,e.selection.main.head).brackets||M.brackets,o=null,s=e.changeByRange(i=>{if(i.empty){let l=Je(e.doc,i.head);for(let r of n)if(r==l&&z(e.doc,i.head)==$t(C(r,0)))return{changes:{from:i.head-r.length,to:i.head+r.length},range:x.cursor(i.head-r.length)}}return{range:o=i}});return o||t(e.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!o},Ge=[{key:"Backspace",run:Wt}];function Ut(e,t){let n=Nt(e,e.selection.main.head),o=n.brackets||M.brackets;for(let s of o){let i=$t(C(s,0));if(t==s)return i==s?tn(e,s,o.indexOf(s+s+s)>-1,n):Ze(e,s,i,n.before||M.before);if(t==i&&jt(e,e.selection.main.from))return _e(e,s,i)}return null}function jt(e,t){let n=!1;return e.field(Mt).between(0,e.doc.length,o=>{o==t&&(n=!0)}),n}function z(e,t){let n=e.sliceString(t,t+2);return n.slice(0,D(C(n,0)))}function Je(e,t){let n=e.sliceString(t-2,t);return D(C(n,0))==n.length?n:n.slice(1)}function Ze(e,t,n,o){let s=null,i=e.changeByRange(l=>{if(!l.empty)return{changes:[{insert:t,from:l.from},{insert:n,from:l.to}],effects:E.of(l.to+t.length),range:x.range(l.anchor+t.length,l.head+t.length)};let r=z(e.doc,l.head);return!r||/\\s/.test(r)||o.indexOf(r)>-1?{changes:{insert:t+n,from:l.head},effects:E.of(l.head+t.length),range:x.cursor(l.head+t.length)}:{range:s=l}});return s?null:e.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function _e(e,t,n){let o=null,s=e.changeByRange(i=>i.empty&&z(e.doc,i.head)==n?{changes:{from:i.head,to:i.head+n.length,insert:n},range:x.cursor(i.head+n.length)}:o={range:i});return o?null:e.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function tn(e,t,n,o){let s=o.stringPrefixes||M.stringPrefixes,i=null,l=e.changeByRange(r=>{if(!r.empty)return{changes:[{insert:t,from:r.from},{insert:t,from:r.to}],effects:E.of(r.to+t.length),range:x.range(r.anchor+t.length,r.head+t.length)};let a=r.head,p=z(e.doc,a),c;if(p==t){if(qt(e,a))return{changes:{insert:t+t,from:a},effects:E.of(a+t.length),range:x.cursor(a+t.length)};if(jt(e,a)){let h=n&&e.sliceDoc(a,a+t.length*3)==t+t+t?t+t+t:t;return{changes:{from:a,to:a+h.length,insert:h},range:x.cursor(a+h.length)}}}else{if(n&&e.sliceDoc(a-2*t.length,a)==t+t&&(c=Ht(e,a-2*t.length,s))>-1&&qt(e,c))return{changes:{insert:t+t+t+t,from:a},effects:E.of(a+t.length),range:x.cursor(a+t.length)};if(e.charCategorizer(a)(p)!=J.Word&&Ht(e,a,s)>-1&&!en(e,a,t,s))return{changes:{insert:t+t,from:a},effects:E.of(a+t.length),range:x.cursor(a+t.length)}}return{range:i=r}});return i?null:e.update(l,{scrollIntoView:!0,userEvent:"input.type"})}function qt(e,t){let n=B(e).resolveInner(t+1);return n.parent&&n.from==t}function en(e,t,n,o){let s=B(e).resolveInner(t,-1),i=o.reduce((l,r)=>Math.max(l,r.length),0);for(let l=0;l<5;l++){let r=e.sliceDoc(s.from,Math.min(s.to,s.from+n.length+i)),a=r.indexOf(n);if(!a||a>-1&&o.indexOf(r.slice(0,a))>-1){let c=s.firstChild;for(;c&&c.from==s.from&&c.to-c.from>n.length+a;){if(e.sliceDoc(c.to-n.length,c.to)==n)return!1;c=c.firstChild}return!0}let p=s.to==t&&s.parent;if(!p)break;s=p}return!1}function Ht(e,t,n){let o=e.charCategorizer(t);if(o(e.sliceDoc(t-1,t))!=J.Word)return t;for(let s of n){let i=t-s.length;if(e.sliceDoc(i,t)==s&&o(e.sliceDoc(i-1,i))!=J.Word)return i}return-1}function nn(e={}){return[Pe,v,g.of(e),Oe,on,St]}var Vt=[{key:"Ctrl-Space",run:H},{mac:"Alt-\`",run:H},{mac:"Alt-i",run:H},{key:"Escape",run:Dt},{key:"ArrowDown",run:R(!0)},{key:"ArrowUp",run:R(!1)},{key:"PageDown",run:R(!0,"page")},{key:"PageUp",run:R(!1,"page")},{key:"Enter",run:kt}],on=Y.highest(ut.computeN([g],e=>e.facet(g).defaultKeymap?[Vt]:[]));function sn(e){let t=e.field(v,!1);return t&&t.active.some(n=>n.isPending)?"pending":t&&t.active.some(n=>n.state!=0)?"active":null}var zt=new WeakMap;function rn(e){var t;let n=(t=e.field(v,!1))===null||t===void 0?void 0:t.open;if(!n||n.disabled)return[];let o=zt.get(n.options);return o||zt.set(n.options,o=n.options.map(s=>s.completion)),o}function ln(e){var t;let n=(t=e.field(v,!1))===null||t===void 0?void 0:t.open;return n&&!n.disabled&&n.selected>=0?n.options[n.selected].completion:null}function an(e){var t;let n=(t=e.field(v,!1))===null||t===void 0?void 0:t.open;return n&&!n.disabled&&n.selected>=0?n.selected:null}function cn(e){return nt.of(e)}export{_ as CompletionContext,kt as acceptCompletion,nn as autocompletion,Ot as clearSnippet,Qe as closeBrackets,Ge as closeBracketsKeymap,Dt as closeCompletion,Ke as completeAnyWord,dt as completeFromList,Vt as completionKeymap,sn as completionStatus,rn as currentCompletions,Wt as deleteBracketPair,Ne as hasNextSnippetField,We as hasPrevSnippetField,le as ifIn,ae as ifNotIn,Ut as insertBracket,vt as insertCompletionText,R as moveCompletionSelection,Et as nextSnippetField,j as pickedCompletion,Pt as prevSnippetField,ln as selectedCompletion,an as selectedCompletionIndex,cn as setSelectedCompletion,Tt as snippet,qe as snippetCompletion,it as snippetKeymap,H as startCompletion};
`,mimeType:"application/javascript"},"/@codemirror/view@%5E6.17.0?target=es2022":{content:`import"/@codemirror/state@^6.5.0?target=es2022";import"/crelt@^1.0.6?target=es2022";import"/style-mod@^4.1.0?target=es2022";import"/w3c-keyname@^2.2.4?target=es2022";export*from"/@codemirror/view@6.39.4/es2022/view.mjs";
`,mimeType:"application/javascript"},"/@codemirror/state@%5E6.0.0?target=es2022":{content:`import"/@marijn/find-cluster-break@^1.0.0?target=es2022";export*from"/@codemirror/state@6.5.2/es2022/state.mjs";
`,mimeType:"application/javascript"},"/@lezer/javascript@%5E1.0.0?target=es2022":{content:`import"/@lezer/highlight@^1.1.3?target=es2022";import"/@lezer/lr@^1.3.0?target=es2022";export*from"/@lezer/javascript@1.5.4/es2022/javascript.mjs";
`,mimeType:"application/javascript"},"/@codemirror/lang-css@%5E6.0.0?target=es2022":{content:`import"/@codemirror/language@^6.0.0?target=es2022";import"/@lezer/common@^1.0.2?target=es2022";import"/@lezer/css@^1.1.7?target=es2022";export*from"/@codemirror/lang-css@6.3.1/es2022/lang-css.mjs";
`,mimeType:"application/javascript"},"/@lezer/common@%5E1.0.0?target=es2022":{content:`export*from"/@lezer/common@1.4.0/es2022/common.mjs";
`,mimeType:"application/javascript"},"/@codemirror/language@%5E6.4.0?target=es2022":{content:`import"/@codemirror/state@^6.0.0?target=es2022";import"/@codemirror/view@^6.23.0?target=es2022";import"/@lezer/common@^1.1.0?target=es2022";import"/@lezer/highlight@^1.0.0?target=es2022";import"/style-mod@^4.0.0?target=es2022";export*from"/@codemirror/language@6.11.3/es2022/language.mjs";
`,mimeType:"application/javascript"},"/@marijn/find-cluster-break@%5E1.0.0?target=es2022":{content:`export*from"/@marijn/find-cluster-break@1.0.2/es2022/find-cluster-break.mjs";
`,mimeType:"application/javascript"},"/@codemirror/language@%5E6.6.0?target=es2022":{content:`import"/@codemirror/state@^6.0.0?target=es2022";import"/@codemirror/view@^6.23.0?target=es2022";import"/@lezer/common@^1.1.0?target=es2022";import"/@lezer/highlight@^1.0.0?target=es2022";import"/style-mod@^4.0.0?target=es2022";export*from"/@codemirror/language@6.11.3/es2022/language.mjs";
`,mimeType:"application/javascript"},"/@codemirror/lang-javascript@%5E6.0.0?target=es2022":{content:`import"/@codemirror/autocomplete@^6.0.0?target=es2022";import"/@codemirror/language@^6.6.0?target=es2022";import"/@codemirror/state@^6.0.0?target=es2022";import"/@codemirror/view@^6.17.0?target=es2022";import"/@lezer/common@^1.0.0?target=es2022";import"/@lezer/javascript@^1.0.0?target=es2022";export*from"/@codemirror/lang-javascript@6.2.4/es2022/lang-javascript.mjs";
`,mimeType:"application/javascript"},"/@lezer/html@1.3.12/es2022/html.mjs":{content:"import{ContextTracker as U,ExternalTokenizer as f,LRParser as I}from\"/@lezer/lr@^1.0.0?target=es2022\";import{styleTags as j,tags as n}from\"/@lezer/highlight@^1.0.0?target=es2022\";import{parseMixed as N}from\"/@lezer/common@^1.2.0?target=es2022\";var H=55,K=1,F=56,J=2,L=57,OO=3,m=4,tO=5,u=6,h=7,v=8,Y=9,k=10,eO=11,rO=12,aO=13,b=58,SO=14,sO=15,R=59,M=21,lO=23,A=24,nO=25,_=27,Z=28,oO=29,PO=32,pO=35,VO=37,iO=38,dO=0,xO=1,XO={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},cO={dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},y={dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}};function fO(O){return O==45||O==46||O==58||O>=65&&O<=90||O==95||O>=97&&O<=122||O>=161}var C=null,B=null,z=0;function w(O,t){let a=O.pos+t;if(z==a&&B==O)return C;let r=O.peek(t),e=\"\";for(;fO(r);)e+=String.fromCharCode(r),r=O.peek(++t);return B=O,z=a,C=e?e.toLowerCase():r==TO||r==uO?void 0:null}var E=60,T=62,$=47,TO=63,uO=33,bO=45;function W(O,t){this.name=O,this.parent=t}var _O=[u,k,h,v,Y],wO=new U({start:null,shift(O,t,a,r){return _O.indexOf(t)>-1?new W(w(r,1)||\"\",O):O},reduce(O,t){return t==M&&O?O.parent:O},reuse(O,t,a,r){let e=t.type.id;return e==u||e==VO?new W(w(r,1)||\"\",O):O},strict:!1}),$O=new f((O,t)=>{if(O.next!=E){O.next<0&&t.context&&O.acceptToken(b);return}O.advance();let a=O.next==$;a&&O.advance();let r=w(O,0);if(r===void 0)return;if(!r)return O.acceptToken(a?sO:SO);let e=t.context?t.context.name:null;if(a){if(r==e)return O.acceptToken(eO);if(e&&cO[e])return O.acceptToken(b,-2);if(t.dialectEnabled(dO))return O.acceptToken(rO);for(let S=t.context;S;S=S.parent)if(S.name==r)return;O.acceptToken(aO)}else{if(r==\"script\")return O.acceptToken(h);if(r==\"style\")return O.acceptToken(v);if(r==\"textarea\")return O.acceptToken(Y);if(XO.hasOwnProperty(r))return O.acceptToken(k);e&&y[e]&&y[e][r]?O.acceptToken(b,-1):O.acceptToken(u)}},{contextual:!0}),qO=new f(O=>{for(let t=0,a=0;;a++){if(O.next<0){a&&O.acceptToken(R);break}if(O.next==bO)t++;else if(O.next==T&&t>=2){a>=3&&O.acceptToken(R,-2);break}else t=0;O.advance()}});function gO(O){for(;O;O=O.parent)if(O.name==\"svg\"||O.name==\"math\")return!0;return!1}var QO=new f((O,t)=>{if(O.next==$&&O.peek(1)==T){let a=t.dialectEnabled(xO)||gO(t.context);O.acceptToken(a?tO:m,2)}else O.next==T&&O.acceptToken(m,1)});function q(O,t,a){let r=2+O.length;return new f(e=>{for(let S=0,o=0,s=0;;s++){if(e.next<0){s&&e.acceptToken(t);break}if(S==0&&e.next==E||S==1&&e.next==$||S>=2&&S<r&&e.next==O.charCodeAt(S-2))S++,o++;else if(S==r&&e.next==T){s>o?e.acceptToken(t,-o):e.acceptToken(a,-(o-2));break}else if((e.next==10||e.next==13)&&s){e.acceptToken(t,1);break}else S=o=0;e.advance()}})}var mO=q(\"script\",H,K),hO=q(\"style\",F,J),vO=q(\"textarea\",L,OO),YO=j({\"Text RawText IncompleteTag IncompleteCloseTag\":n.content,\"StartTag StartCloseTag SelfClosingEndTag EndTag\":n.angleBracket,TagName:n.tagName,\"MismatchedCloseTag/TagName\":[n.tagName,n.invalid],AttributeName:n.attributeName,\"AttributeValue UnquotedAttributeValue\":n.attributeValue,Is:n.definitionOperator,\"EntityReference CharacterReference\":n.character,Comment:n.blockComment,ProcessingInst:n.processingInstruction,DoctypeDecl:n.documentMeta}),kO=I.deserialize({version:14,states:\",xOVO!rOOO!ZQ#tO'#CrO!`Q#tO'#C{O!eQ#tO'#DOO!jQ#tO'#DRO!oQ#tO'#DTO!tOaO'#CqO#PObO'#CqO#[OdO'#CqO$kO!rO'#CqOOO`'#Cq'#CqO$rO$fO'#DUO$zQ#tO'#DWO%PQ#tO'#DXOOO`'#Dl'#DlOOO`'#DZ'#DZQVO!rOOO%UQ&rO,59^O%aQ&rO,59gO%lQ&rO,59jO%wQ&rO,59mO&SQ&rO,59oOOOa'#D_'#D_O&_OaO'#CyO&jOaO,59]OOOb'#D`'#D`O&rObO'#C|O&}ObO,59]OOOd'#Da'#DaO'VOdO'#DPO'bOdO,59]OOO`'#Db'#DbO'jO!rO,59]O'qQ#tO'#DSOOO`,59],59]OOOp'#Dc'#DcO'vO$fO,59pOOO`,59p,59pO(OQ#|O,59rO(TQ#|O,59sOOO`-E7X-E7XO(YQ&rO'#CtOOQW'#D['#D[O(hQ&rO1G.xOOOa1G.x1G.xOOO`1G/Z1G/ZO(sQ&rO1G/ROOOb1G/R1G/RO)OQ&rO1G/UOOOd1G/U1G/UO)ZQ&rO1G/XOOO`1G/X1G/XO)fQ&rO1G/ZOOOa-E7]-E7]O)qQ#tO'#CzOOO`1G.w1G.wOOOb-E7^-E7^O)vQ#tO'#C}OOOd-E7_-E7_O){Q#tO'#DQOOO`-E7`-E7`O*QQ#|O,59nOOOp-E7a-E7aOOO`1G/[1G/[OOO`1G/^1G/^OOO`1G/_1G/_O*VQ,UO,59`OOQW-E7Y-E7YOOOa7+$d7+$dOOO`7+$u7+$uOOOb7+$m7+$mOOOd7+$p7+$pOOO`7+$s7+$sO*bQ#|O,59fO*gQ#|O,59iO*lQ#|O,59lOOO`1G/Y1G/YO*qO7[O'#CwO+SOMhO'#CwOOQW1G.z1G.zOOO`1G/Q1G/QOOO`1G/T1G/TOOO`1G/W1G/WOOOO'#D]'#D]O+eO7[O,59cOOQW,59c,59cOOOO'#D^'#D^O+vOMhO,59cOOOO-E7Z-E7ZOOQW1G.}1G.}OOOO-E7[-E7[\",stateData:\",c~O!_OS~OUSOVPOWQOXROYTO[]O][O^^O_^Oa^Ob^Oc^Od^Oy^O|_O!eZO~OgaO~OgbO~OgcO~OgdO~OgeO~O!XfOPmP![mP~O!YiOQpP![pP~O!ZlORsP![sP~OUSOVPOWQOXROYTOZqO[]O][O^^O_^Oa^Ob^Oc^Od^Oy^O!eZO~O![rO~P#gO!]sO!fuO~OgvO~OgwO~OS|OT}OiyO~OS!POT}OiyO~OS!ROT}OiyO~OS!TOT}OiyO~OS}OT}OiyO~O!XfOPmX![mX~OP!WO![!XO~O!YiOQpX![pX~OQ!ZO![!XO~O!ZlORsX![sX~OR!]O![!XO~O![!XO~P#gOg!_O~O!]sO!f!aO~OS!bO~OS!cO~Oj!dOShXThXihX~OS!fOT!gOiyO~OS!hOT!gOiyO~OS!iOT!gOiyO~OS!jOT!gOiyO~OS!gOT!gOiyO~Og!kO~Og!lO~Og!mO~OS!nO~Ol!qO!a!oO!c!pO~OS!rO~OS!sO~OS!tO~Ob!uOc!uOd!uO!a!wO!b!uO~Ob!xOc!xOd!xO!c!wO!d!xO~Ob!uOc!uOd!uO!a!{O!b!uO~Ob!xOc!xOd!xO!c!{O!d!xO~OT~cbd!ey|!e~\",goto:\"%q!aPPPPPPPPPPPPPPPPPPPPP!b!hP!nPP!zP!}#Q#T#Z#^#a#g#j#m#s#y!bP!b!bP$P$V$m$s$y%P%V%]%cPPPPPPPP%iX^OX`pXUOX`pezabcde{!O!Q!S!UR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ!ObQ!QcQ!SdQ!UeZ!e{!O!Q!S!UQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp\",nodeNames:\"\\u26A0 StartCloseTag StartCloseTag StartCloseTag EndTag SelfClosingEndTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl\",maxTerm:68,context:wO,nodeProps:[[\"closedBy\",-10,1,2,3,7,8,9,10,11,12,13,\"EndTag\",6,\"EndTag SelfClosingEndTag\",-4,22,31,34,37,\"CloseTag\"],[\"openedBy\",4,\"StartTag StartCloseTag\",5,\"StartTag\",-4,30,33,36,38,\"OpenTag\"],[\"group\",-10,14,15,18,19,20,21,40,41,42,43,\"Entity\",17,\"Entity TextContent\",-3,29,32,35,\"TextContent Entity\"],[\"isolate\",-11,22,30,31,33,34,36,37,38,39,42,43,\"ltr\",-3,27,28,40,\"\"]],propSources:[YO],skippedNodes:[0],repeatNodeCount:9,tokenData:\"!<p!aR!YOX$qXY,QYZ,QZ[$q[]&X]^,Q^p$qpq,Qqr-_rs3_sv-_vw3}wxHYx}-_}!OH{!O!P-_!P!Q$q!Q![-_![!]Mz!]!^-_!^!_!$S!_!`!;x!`!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4U-_4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!Z$|caPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr$qrs&}sv$qvw+Pwx(tx!^$q!^!_*V!_!a&X!a#S$q#S#T&X#T;'S$q;'S;=`+z<%lO$q!R&bXaP!b`!dpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&Xq'UVaP!dpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}P'pTaPOv'kw!^'k!_;'S'k;'S;=`(P<%lO'kP(SP;=`<%l'kp([S!dpOv(Vx;'S(V;'S;=`(h<%lO(Vp(kP;=`<%l(Vq(qP;=`<%l&}a({WaP!b`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t`)jT!b`Or)esv)ew;'S)e;'S;=`)y<%lO)e`)|P;=`<%l)ea*SP;=`<%l(t!Q*^V!b`!dpOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!Q*vP;=`<%l*V!R*|P;=`<%l&XW+UYlWOX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+PW+wP;=`<%l+P!Z+}P;=`<%l$q!a,]`aP!b`!dp!_^OX&XXY,QYZ,QZ]&X]^,Q^p&Xpq,Qqr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!_-ljiSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q[/ebiSlWOX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+PS0rXiSqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0mS1bP;=`<%l0m[1hP;=`<%l/^!V1vciSaP!b`!dpOq&Xqr1krs&}sv1kvw0mwx(tx!P1k!P!Q&X!Q!^1k!^!_*V!_!a&X!a#s1k#s$f&X$f;'S1k;'S;=`3R<%l?Ah1k?Ah?BY&X?BY?Mn1k?MnO&X!V3UP;=`<%l1k!_3[P;=`<%l-_!Z3hV!ahaP!dpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}!_4WiiSlWd!ROX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst>]tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^/^!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!Z5zblWOX5uXZ7SZ[5u[^7S^p5uqr5urs7Sst+Ptw5uwx7Sx!]5u!]!^7w!^!a7S!a#S5u#S#T7S#T;'S5u;'S;=`8n<%lO5u!R7VVOp7Sqs7St!]7S!]!^7l!^;'S7S;'S;=`7q<%lO7S!R7qOb!R!R7tP;=`<%l7S!Z8OYlWb!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!Z8qP;=`<%l5u!_8{iiSlWOX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst/^tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^:j!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!_:sbiSlWb!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!V<QciSOp7Sqr;{rs7Sst0mtw;{wx7Sx!P;{!P!Q7S!Q!];{!]!^=]!^!a7S!a#s;{#s$f7S$f;'S;{;'S;=`>P<%l?Ah;{?Ah?BY7S?BY?Mn;{?MnO7S!V=dXiSb!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!V>SP;=`<%l;{!_>YP;=`<%l8t!_>dhiSlWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^/^!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!Z@TalWOX@OXZAYZ[@O[^AY^p@Oqr@OrsAYsw@OwxAYx!]@O!]!^Az!^!aAY!a#S@O#S#TAY#T;'S@O;'S;=`Bq<%lO@O!RA]UOpAYq!]AY!]!^Ao!^;'SAY;'S;=`At<%lOAY!RAtOc!R!RAwP;=`<%lAY!ZBRYlWc!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!ZBtP;=`<%l@O!_COhiSlWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^Dj!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!_DsbiSlWc!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!VFQbiSOpAYqrE{rsAYswE{wxAYx!PE{!P!QAY!Q!]E{!]!^GY!^!aAY!a#sE{#s$fAY$f;'SE{;'S;=`G|<%l?AhE{?Ah?BYAY?BY?MnE{?MnOAY!VGaXiSc!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!VHPP;=`<%lE{!_HVP;=`<%lBw!ZHcW!cxaP!b`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t!aIYliSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OKQ!O!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!aK_kiSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!`&X!`!aMS!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!TM_XaP!b`!dp!fQOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!aNZ!ZiSgQaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OMz!O!PMz!P!Q$q!Q![Mz![!]Mz!]!^-_!^!_*V!_!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f$}-_$}%OMz%O%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4UMz4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Je-_$Je$JgMz$Jg$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!a!$PP;=`<%lMz!R!$ZY!b`!dpOq*Vqr!$yrs(Vsv*Vwx)ex!a*V!a!b!4t!b;'S*V;'S;=`*s<%lO*V!R!%Q]!b`!dpOr*Vrs(Vsv*Vwx)ex}*V}!O!%y!O!f*V!f!g!']!g#W*V#W#X!0`#X;'S*V;'S;=`*s<%lO*V!R!&QX!b`!dpOr*Vrs(Vsv*Vwx)ex}*V}!O!&m!O;'S*V;'S;=`*s<%lO*V!R!&vV!b`!dp!ePOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!'dX!b`!dpOr*Vrs(Vsv*Vwx)ex!q*V!q!r!(P!r;'S*V;'S;=`*s<%lO*V!R!(WX!b`!dpOr*Vrs(Vsv*Vwx)ex!e*V!e!f!(s!f;'S*V;'S;=`*s<%lO*V!R!(zX!b`!dpOr*Vrs(Vsv*Vwx)ex!v*V!v!w!)g!w;'S*V;'S;=`*s<%lO*V!R!)nX!b`!dpOr*Vrs(Vsv*Vwx)ex!{*V!{!|!*Z!|;'S*V;'S;=`*s<%lO*V!R!*bX!b`!dpOr*Vrs(Vsv*Vwx)ex!r*V!r!s!*}!s;'S*V;'S;=`*s<%lO*V!R!+UX!b`!dpOr*Vrs(Vsv*Vwx)ex!g*V!g!h!+q!h;'S*V;'S;=`*s<%lO*V!R!+xY!b`!dpOr!+qrs!,hsv!+qvw!-Swx!.[x!`!+q!`!a!/j!a;'S!+q;'S;=`!0Y<%lO!+qq!,mV!dpOv!,hvx!-Sx!`!,h!`!a!-q!a;'S!,h;'S;=`!.U<%lO!,hP!-VTO!`!-S!`!a!-f!a;'S!-S;'S;=`!-k<%lO!-SP!-kO|PP!-nP;=`<%l!-Sq!-xS!dp|POv(Vx;'S(V;'S;=`(h<%lO(Vq!.XP;=`<%l!,ha!.aX!b`Or!.[rs!-Ssv!.[vw!-Sw!`!.[!`!a!.|!a;'S!.[;'S;=`!/d<%lO!.[a!/TT!b`|POr)esv)ew;'S)e;'S;=`)y<%lO)ea!/gP;=`<%l!.[!R!/sV!b`!dp|POr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!0]P;=`<%l!+q!R!0gX!b`!dpOr*Vrs(Vsv*Vwx)ex#c*V#c#d!1S#d;'S*V;'S;=`*s<%lO*V!R!1ZX!b`!dpOr*Vrs(Vsv*Vwx)ex#V*V#V#W!1v#W;'S*V;'S;=`*s<%lO*V!R!1}X!b`!dpOr*Vrs(Vsv*Vwx)ex#h*V#h#i!2j#i;'S*V;'S;=`*s<%lO*V!R!2qX!b`!dpOr*Vrs(Vsv*Vwx)ex#m*V#m#n!3^#n;'S*V;'S;=`*s<%lO*V!R!3eX!b`!dpOr*Vrs(Vsv*Vwx)ex#d*V#d#e!4Q#e;'S*V;'S;=`*s<%lO*V!R!4XX!b`!dpOr*Vrs(Vsv*Vwx)ex#X*V#X#Y!+q#Y;'S*V;'S;=`*s<%lO*V!R!4{Y!b`!dpOr!4trs!5ksv!4tvw!6Vwx!8]x!a!4t!a!b!:]!b;'S!4t;'S;=`!;r<%lO!4tq!5pV!dpOv!5kvx!6Vx!a!5k!a!b!7W!b;'S!5k;'S;=`!8V<%lO!5kP!6YTO!a!6V!a!b!6i!b;'S!6V;'S;=`!7Q<%lO!6VP!6lTO!`!6V!`!a!6{!a;'S!6V;'S;=`!7Q<%lO!6VP!7QOyPP!7TP;=`<%l!6Vq!7]V!dpOv!5kvx!6Vx!`!5k!`!a!7r!a;'S!5k;'S;=`!8V<%lO!5kq!7yS!dpyPOv(Vx;'S(V;'S;=`(h<%lO(Vq!8YP;=`<%l!5ka!8bX!b`Or!8]rs!6Vsv!8]vw!6Vw!a!8]!a!b!8}!b;'S!8];'S;=`!:V<%lO!8]a!9SX!b`Or!8]rs!6Vsv!8]vw!6Vw!`!8]!`!a!9o!a;'S!8];'S;=`!:V<%lO!8]a!9vT!b`yPOr)esv)ew;'S)e;'S;=`)y<%lO)ea!:YP;=`<%l!8]!R!:dY!b`!dpOr!4trs!5ksv!4tvw!6Vwx!8]x!`!4t!`!a!;S!a;'S!4t;'S;=`!;r<%lO!4t!R!;]V!b`!dpyPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!;uP;=`<%l!4t!V!<TXjSaP!b`!dpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X\",tokenizers:[mO,hO,vO,QO,$O,qO,0,1,2,3,4,5],topRules:{Document:[0,16]},dialects:{noMatch:0,selfClosing:515},tokenPrec:517});function D(O,t){let a=Object.create(null);for(let r of O.getChildren(A)){let e=r.getChild(nO),S=r.getChild(_)||r.getChild(Z);e&&(a[t.read(e.from,e.to)]=S?S.type.id==_?t.read(S.from+1,S.to-1):t.read(S.from,S.to):\"\")}return a}function G(O,t){let a=O.getChild(lO);return a?t.read(a.from,a.to):\" \"}function g(O,t,a){let r;for(let e of a)if(!e.attrs||e.attrs(r||(r=D(O.node.parent.firstChild,t))))return{parser:e.parser};return null}function RO(O=[],t=[]){let a=[],r=[],e=[],S=[];for(let s of O)(s.tag==\"script\"?a:s.tag==\"style\"?r:s.tag==\"textarea\"?e:S).push(s);let o=t.length?Object.create(null):null;for(let s of t)(o[s.name]||(o[s.name]=[])).push(s);return N((s,p)=>{let d=s.type.id;if(d==oO)return g(s,p,a);if(d==PO)return g(s,p,r);if(d==pO)return g(s,p,e);if(d==M&&S.length){let V=s.node,P=V.firstChild,x=P&&G(P,p),i;if(x){for(let l of S)if(l.tag==x&&(!l.attrs||l.attrs(i||(i=D(P,p))))){let X=V.lastChild,c=X.type.id==iO?X.from:V.to;if(c>P.to)return{parser:l.parser,overlay:[{from:P.to,to:c}]}}}}if(o&&d==A){let V=s.node,P;if(P=V.firstChild){let x=o[p.read(P.from,P.to)];if(x)for(let i of x){if(i.tagName&&i.tagName!=G(V.parent,p))continue;let l=V.lastChild;if(l.type.id==_){let X=l.from+1,c=l.lastChild,Q=l.to-(c&&c.isError?0:1);if(Q>X)return{parser:i.parser,overlay:[{from:X,to:Q}]}}else if(l.type.id==Z)return{parser:i.parser,overlay:[{from:l.from,to:l.to}]}}}}return null})}export{RO as configureNesting,kO as parser};\n",mimeType:"application/javascript"},"/@codemirror/view@6.39.4/es2022/view.mjs":{content:'import{RangeSet as E,MapMode as me,RangeValue as Ot,findClusterBreak as se,EditorSelection as x,Facet as S,StateEffect as Z,ChangeSet as Pi,Text as I,findColumn as Bt,CharCategory as ss,EditorState as De,Annotation as rs,Transaction as ls,Prec as Lt,codePointAt as Vi,codePointSize as as,combineConfig as Et,StateField as Rt,RangeSetBuilder as hs,countColumn as Fi}from"/@codemirror/state@^6.5.0?target=es2022";import{StyleModule as ve}from"/style-mod@^4.1.0?target=es2022";import{keyName as cs,base as ds,shift as us}from"/w3c-keyname@^2.2.4?target=es2022";import we from"/crelt@^1.0.6?target=es2022";var N=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Ht=typeof document<"u"?document:{documentElement:{style:{}}},Wt=/Edge\\/(\\d+)/.exec(N.userAgent),zi=/MSIE \\d/.test(N.userAgent),Nt=/Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(N.userAgent),Ue=!!(zi||Nt||Wt),Ii=!Ue&&/gecko\\/(\\d+)/i.test(N.userAgent),Pt=!Ue&&/Chrome\\/(\\d+)/.exec(N.userAgent),qi="webkitFontSmoothing"in Ht.documentElement.style,Vt=!Ue&&/Apple Computer/.test(N.vendor),Ki=Vt&&(/Mobile\\/\\w+/.test(N.userAgent)||N.maxTouchPoints>2),w={mac:Ki||/Mac/.test(N.platform),windows:/Win/.test(N.platform),linux:/Linux|X11/.test(N.platform),ie:Ue,ie_version:zi?Ht.documentMode||6:Nt?+Nt[1]:Wt?+Wt[1]:0,gecko:Ii,gecko_version:Ii?+(/Firefox\\/(\\d+)/.exec(N.userAgent)||[0,0])[1]:0,chrome:!!Pt,chrome_version:Pt?+Pt[1]:0,ios:Ki,android:/Android\\b/.test(N.userAgent),webkit:qi,webkit_version:qi?+(/\\bAppleWebKit\\/(\\d+)/.exec(N.userAgent)||[0,0])[1]:0,safari:Vt,safari_version:Vt?+(/\\bVersion\\/(\\d+(\\.\\d+)?)/.exec(N.userAgent)||[0,0])[1]:0,tabSize:Ht.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function Ft(e,t){for(let i in e)i=="class"&&t.class?t.class+=" "+e.class:i=="style"&&t.style?t.style+=";"+e.style:t[i]=e[i];return t}var Qe=Object.create(null);function zt(e,t,i){if(e==t)return!0;e||(e=Qe),t||(t=Qe);let o=Object.keys(e),n=Object.keys(t);if(o.length-(i&&o.indexOf(i)>-1?1:0)!=n.length-(i&&n.indexOf(i)>-1?1:0))return!1;for(let s of o)if(s!=i&&(n.indexOf(s)==-1||e[s]!==t[s]))return!1;return!0}function fs(e,t){for(let i=e.attributes.length-1;i>=0;i--){let o=e.attributes[i].name;t[o]==null&&e.removeAttribute(o)}for(let i in t){let o=t[i];i=="style"?e.style.cssText=o:e.getAttribute(i)!=o&&e.setAttribute(i,o)}}function Yi(e,t,i){let o=!1;if(t)for(let n in t)i&&n in i||(o=!0,n=="style"?e.style.cssText="":e.removeAttribute(n));if(i)for(let n in i)t&&t[n]==i[n]||(o=!0,n=="style"?e.style.cssText=i[n]:e.setAttribute(n,i[n]));return o}function ps(e){let t=Object.create(null);for(let i=0;i<e.attributes.length;i++){let o=e.attributes[i];t[o.name]=o.value}return t}var re=class{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}},H=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(H||(H={})),T=class extends Ot{constructor(e,t,i,o){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=o}get heightRelevant(){return!1}static mark(e){return new It(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Oe(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,o;if(e.isBlockGap)i=-5e8,o=4e8;else{let{start:n,end:s}=Xi(e,t);i=(n?t?-3e8:-1:5e8)-1,o=(s?t?2e8:1:-6e8)+1}return new Oe(e,i,o,t,e.widget||null,!0)}static line(e){return new qt(e)}static set(e,t=!1){return E.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}};T.none=E.empty;var It=class Yn extends T{constructor(t){let{start:i,end:o}=Xi(t);super(i?-1:5e8,o?1:-6e8,null,t),this.tagName=t.tagName||"span",this.attrs=t.class&&t.attributes?Ft(t.attributes,{class:t.class}):t.class?{class:t.class}:t.attributes||Qe}eq(t){return this==t||t instanceof Yn&&this.tagName==t.tagName&&zt(this.attrs,t.attrs)}range(t,i=t){if(t>=i)throw new RangeError("Mark decorations may not be empty");return super.range(t,i)}};It.prototype.point=!1;var qt=class Xn extends T{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof Xn&&this.spec.class==t.spec.class&&zt(this.spec.attributes,t.spec.attributes)}range(t,i=t){if(i!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,i)}};qt.prototype.mapMode=me.TrackBefore,qt.prototype.point=!0;var Oe=class Gn extends T{constructor(t,i,o,n,s,r){super(i,o,s,t),this.block=n,this.isReplace=r,this.mapMode=n?i<=0?me.TrackBefore:me.TrackAfter:me.TrackDel}get type(){return this.startSide!=this.endSide?H.WidgetRange:this.startSide<=0?H.WidgetBefore:H.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(t){return t instanceof Gn&&gs(this.widget,t.widget)&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide}range(t,i=t){if(this.isReplace&&(t>i||t==i&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&i!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,i)}};Oe.prototype.point=!0;function Xi(e,t=!1){let{inclusiveStart:i,inclusiveEnd:o}=e;return i==null&&(i=e.inclusive),o==null&&(o=e.inclusive),{start:i??t,end:o??t}}function gs(e,t){return e==t||!!(e&&t&&e.compare(t))}function be(e,t,i,o=0){let n=i.length-1;n>=0&&i[n]+o>=e?i[n]=Math.max(i[n],t):i.push(e,t)}var Kt=class Oi extends Ot{constructor(t,i){super(),this.tagName=t,this.attributes=i}eq(t){return t==this||t instanceof Oi&&this.tagName==t.tagName&&zt(this.attributes,t.attributes)}static create(t){return new Oi(t.tagName,t.attributes||Qe)}static set(t,i=!1){return E.of(t,i)}};Kt.prototype.startSide=Kt.prototype.endSide=-1;function Be(e){let t;return e.nodeType==11?t=e.getSelection?e:e.ownerDocument:t=e,t.getSelection()}function Yt(e,t){return t?e==t||e.contains(t.nodeType!=1?t.parentNode:t):!1}function _e(e,t){if(!t.anchorNode)return!1;try{return Yt(e,t.anchorNode)}catch{return!1}}function Le(e){return e.nodeType==3?He(e,0,e.nodeValue.length).getClientRects():e.nodeType==1?e.getClientRects():[]}function Ee(e,t,i,o){return i?Gi(e,t,i,o,-1)||Gi(e,t,i,o,1):!1}function le(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t}function Je(e){return e.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\\d|SECTION|PRE)$/.test(e.nodeName)}function Gi(e,t,i,o,n){for(;;){if(e==i&&t==o)return!0;if(t==(n<0?0:ee(e))){if(e.nodeName=="DIV")return!1;let s=e.parentNode;if(!s||s.nodeType!=1)return!1;t=le(e)+(n<0?0:1),e=s}else if(e.nodeType==1){if(e=e.childNodes[t+(n<0?-1:0)],e.nodeType==1&&e.contentEditable=="false")return!1;t=n<0?ee(e):0}else return!1}}function ee(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Re(e,t){let i=t?e.left:e.right;return{left:i,right:i,top:e.top,bottom:e.bottom}}function ms(e){let t=e.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function ji(e,t){let i=t.width/e.offsetWidth,o=t.height/e.offsetHeight;return(i>.995&&i<1.005||!isFinite(i)||Math.abs(t.width-e.offsetWidth)<1)&&(i=1),(o>.995&&o<1.005||!isFinite(o)||Math.abs(t.height-e.offsetHeight)<1)&&(o=1),{scaleX:i,scaleY:o}}function vs(e,t,i,o,n,s,r,l){let a=e.ownerDocument,h=a.defaultView||window;for(let c=e,u=!1;c&&!u;)if(c.nodeType==1){let d,f=c==a.body,p=1,g=1;if(f)d=ms(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(u=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let b=c.getBoundingClientRect();({scaleX:p,scaleY:g}=ji(c,b)),d={left:b.left,right:b.left+c.clientWidth*p,top:b.top,bottom:b.top+c.clientHeight*g}}let m=0,v=0;if(n=="nearest")t.top<d.top?(v=t.top-(d.top+r),i>0&&t.bottom>d.bottom+v&&(v=t.bottom-d.bottom+r)):t.bottom>d.bottom&&(v=t.bottom-d.bottom+r,i<0&&t.top-v<d.top&&(v=t.top-(d.top+r)));else{let b=t.bottom-t.top,C=d.bottom-d.top;v=(n=="center"&&b<=C?t.top+b/2-C/2:n=="start"||n=="center"&&i<0?t.top-r:t.bottom-C+r)-d.top}if(o=="nearest"?t.left<d.left?(m=t.left-(d.left+s),i>0&&t.right>d.right+m&&(m=t.right-d.right+s)):t.right>d.right&&(m=t.right-d.right+s,i<0&&t.left<d.left+m&&(m=t.left-(d.left+s))):m=(o=="center"?t.left+(t.right-t.left)/2-(d.right-d.left)/2:o=="start"==l?t.left-s:t.right-(d.right-d.left)+s)-d.left,m||v)if(f)h.scrollBy(m,v);else{let b=0,C=0;if(v){let M=c.scrollTop;c.scrollTop+=v/g,C=(c.scrollTop-M)*g}if(m){let M=c.scrollLeft;c.scrollLeft+=m/p,b=(c.scrollLeft-M)*p}t={left:t.left-b,top:t.top-C,right:t.right-b,bottom:t.bottom-C},b&&Math.abs(b-m)<1&&(o="nearest"),C&&Math.abs(C-v)<1&&(n="nearest")}if(f)break;(t.top<d.top||t.bottom>d.bottom||t.left<d.left||t.right>d.right)&&(t={left:Math.max(t.left,d.left),right:Math.min(t.right,d.right),top:Math.max(t.top,d.top),bottom:Math.min(t.bottom,d.bottom)}),c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function ws(e){let t=e.ownerDocument,i,o;for(let n=e.parentNode;n&&!(n==t.body||i&&o);)if(n.nodeType==1)!o&&n.scrollHeight>n.clientHeight&&(o=n),!i&&n.scrollWidth>n.clientWidth&&(i=n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;return{x:i,y:o}}var bs=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?ee(t):0),i,Math.min(e.focusOffset,i?ee(i):0))}set(e,t,i,o){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=o}},ue=null;w.safari&&w.safari_version>=26&&(ue=!1);function $i(e){if(e.setActive)return e.setActive();if(ue)return e.focus(ue);let t=[];for(let i=e;i&&(t.push(i,i.scrollTop,i.scrollLeft),i!=i.ownerDocument);i=i.parentNode);if(e.focus(ue==null?{get preventScroll(){return ue={preventScroll:!0},!0}}:void 0),!ue){ue=!1;for(let i=0;i<t.length;){let o=t[i++],n=t[i++],s=t[i++];o.scrollTop!=n&&(o.scrollTop=n),o.scrollLeft!=s&&(o.scrollLeft=s)}}}var Ui;function He(e,t,i=t){let o=Ui||(Ui=document.createRange());return o.setEnd(e,i),o.setStart(e,t),o}function ye(e,t,i,o){let n={key:t,code:t,keyCode:i,which:i,cancelable:!0};o&&({altKey:n.altKey,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,metaKey:n.metaKey}=o);let s=new KeyboardEvent("keydown",n);s.synthetic=!0,e.dispatchEvent(s);let r=new KeyboardEvent("keyup",n);return r.synthetic=!0,e.dispatchEvent(r),s.defaultPrevented||r.defaultPrevented}function ys(e){for(;e;){if(e&&(e.nodeType==9||e.nodeType==11&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}function xs(e,t){let i=t.focusNode,o=t.focusOffset;if(!i||t.anchorNode!=i||t.anchorOffset!=o)return!1;for(o=Math.min(o,ee(i));;)if(o){if(i.nodeType!=1)return!1;let n=i.childNodes[o-1];n.contentEditable=="false"?o--:(i=n,o=ee(i))}else{if(i==e)return!0;o=le(i),i=i.parentNode}}function Qi(e){return e.scrollTop>Math.max(1,e.scrollHeight-e.clientHeight-4)}function _i(e,t){for(let i=e,o=t;;){if(i.nodeType==3&&o>0)return{node:i,offset:o};if(i.nodeType==1&&o>0){if(i.contentEditable=="false")return null;i=i.childNodes[o-1],o=ee(i)}else if(i.parentNode&&!Je(i))o=le(i),i=i.parentNode;else return null}}function Ji(e,t){for(let i=e,o=t;;){if(i.nodeType==3&&o<i.nodeValue.length)return{node:i,offset:o};if(i.nodeType==1&&o<i.childNodes.length){if(i.contentEditable=="false")return null;i=i.childNodes[o],o=0}else if(i.parentNode&&!Je(i))o=le(i)+1,i=i.parentNode;else return null}}var ae=class Bi{constructor(t,i,o=!0){this.node=t,this.offset=i,this.precise=o}static before(t,i){return new Bi(t.parentNode,le(t),i)}static after(t,i){return new Bi(t.parentNode,le(t)+1,i)}},B=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(B||(B={})),fe=B.LTR,Xt=B.RTL;function Zi(e){let t=[];for(let i=0;i<e.length;i++)t.push(1<<+e[i]);return t}var Ss=Zi("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Cs=Zi("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Gt=Object.create(null),X=[];for(let e of["()","[]","{}"]){let t=e.charCodeAt(0),i=e.charCodeAt(1);Gt[t]=i,Gt[i]=-t}function eo(e){return e<=247?Ss[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?Cs[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8204?256:64336<=e&&e<=65023?4:1}var Ms=/[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac\\ufb50-\\ufdff]/,G=class{get dir(){return this.level%2?Xt:fe}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,o){let n=-1;for(let s=0;s<e.length;s++){let r=e[s];if(r.from<=t&&r.to>=t){if(r.level==i)return s;(n<0||(o!=0?o<0?r.from<t:r.to>t:e[n].level>r.level))&&(n=s)}}if(n<0)throw new RangeError("Index out of range");return n}};function to(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let o=e[i],n=t[i];if(o.from!=n.from||o.to!=n.to||o.direction!=n.direction||!to(o.inner,n.inner))return!1}return!0}var D=[];function ks(e,t,i,o,n){for(let s=0;s<=o.length;s++){let r=s?o[s-1].to:t,l=s<o.length?o[s].from:i,a=s?256:n;for(let h=r,c=a,u=a;h<l;h++){let d=eo(e.charCodeAt(h));d==512?d=c:d==8&&u==4&&(d=16),D[h]=d==4?2:d,d&7&&(u=d),c=d}for(let h=r,c=a,u=a;h<l;h++){let d=D[h];if(d==128)h<l-1&&c==D[h+1]&&c&24?d=D[h]=c:D[h]=256;else if(d==64){let f=h+1;for(;f<l&&D[f]==64;)f++;let p=h&&c==8||f<i&&D[f]==8?u==1?1:8:256;for(let g=h;g<f;g++)D[g]=p;h=f-1}else d==8&&u==1&&(D[h]=1);c=d,d&7&&(u=d)}}}function As(e,t,i,o,n){let s=n==1?2:1;for(let r=0,l=0,a=0;r<=o.length;r++){let h=r?o[r-1].to:t,c=r<o.length?o[r].from:i;for(let u=h,d,f,p;u<c;u++)if(f=Gt[d=e.charCodeAt(u)])if(f<0){for(let g=l-3;g>=0;g-=3)if(X[g+1]==-f){let m=X[g+2],v=m&2?n:m&4?m&1?s:n:0;v&&(D[u]=D[X[g]]=v),l=g;break}}else{if(X.length==189)break;X[l++]=u,X[l++]=d,X[l++]=a}else if((p=D[u])==2||p==1){let g=p==n;a=g?0:1;for(let m=l-3;m>=0;m-=3){let v=X[m+2];if(v&2)break;if(g)X[m+2]|=2;else{if(v&4)break;X[m+2]|=4}}}}}function Ts(e,t,i,o){for(let n=0,s=o;n<=i.length;n++){let r=n?i[n-1].to:e,l=n<i.length?i[n].from:t;for(let a=r;a<l;){let h=D[a];if(h==256){let c=a+1;for(;;)if(c==l){if(n==i.length)break;c=i[n++].to,l=n<i.length?i[n].from:t}else if(D[c]==256)c++;else break;let u=s==1,d=(c<t?D[c]:o)==1,f=u==d?u?1:2:o;for(let p=c,g=n,m=g?i[g-1].to:e;p>a;)p==m&&(p=i[--g].from,m=g?i[g-1].to:e),D[--p]=f;a=c}else s=h,a++}}}function jt(e,t,i,o,n,s,r){let l=o%2?2:1;if(o%2==n%2)for(let a=t,h=0;a<i;){let c=!0,u=!1;if(h==s.length||a<s[h].from){let g=D[a];g!=l&&(c=!1,u=g==16)}let d=!c&&l==1?[]:null,f=c?o:o+1,p=a;e:for(;;)if(h<s.length&&p==s[h].from){if(u)break e;let g=s[h];if(!c)for(let m=g.to,v=h+1;;){if(m==i)break e;if(v<s.length&&s[v].from==m)m=s[v++].to;else{if(D[m]==l)break e;break}}if(h++,d)d.push(g);else{g.from>a&&r.push(new G(a,g.from,f));let m=g.direction==fe!=!(f%2);$t(e,m?o+1:o,n,g.inner,g.from,g.to,r),a=g.to}p=g.to}else{if(p==i||(c?D[p]!=l:D[p]==l))break;p++}d?jt(e,a,p,o+1,n,d,r):a<p&&r.push(new G(a,p,f)),a=p}else for(let a=i,h=s.length;a>t;){let c=!0,u=!1;if(!h||a>s[h-1].to){let g=D[a-1];g!=l&&(c=!1,u=g==16)}let d=!c&&l==1?[]:null,f=c?o:o+1,p=a;e:for(;;)if(h&&p==s[h-1].to){if(u)break e;let g=s[--h];if(!c)for(let m=g.from,v=h;;){if(m==t)break e;if(v&&s[v-1].to==m)m=s[--v].from;else{if(D[m-1]==l)break e;break}}if(d)d.push(g);else{g.to<a&&r.push(new G(g.to,a,f));let m=g.direction==fe!=!(f%2);$t(e,m?o+1:o,n,g.inner,g.from,g.to,r),a=g.from}p=g.from}else{if(p==t||(c?D[p-1]!=l:D[p-1]==l))break;p--}d?jt(e,p,a,o+1,n,d,r):p<a&&r.push(new G(p,a,f)),a=p}}function $t(e,t,i,o,n,s,r){let l=t%2?2:1;ks(e,n,s,o,l),As(e,n,s,o,l),Ts(n,s,o,l),jt(e,n,s,t,i,o,r)}function io(e,t,i){if(!e)return[new G(0,0,t==Xt?1:0)];if(t==fe&&!i.length&&!Ms.test(e))return oo(e.length);if(i.length)for(;e.length>D.length;)D[D.length]=256;let o=[],n=t==fe?0:1;return $t(e,n,n,i,0,e.length,o),o}function oo(e){return[new G(0,e,0)]}var no="";function so(e,t,i,o,n){var s;let r=o.head-e.from,l=G.find(t,r,(s=o.bidiLevel)!==null&&s!==void 0?s:-1,o.assoc),a=t[l],h=a.side(n,i);if(r==h){let d=l+=n?1:-1;if(d<0||d>=t.length)return null;a=t[l=d],r=a.side(!n,i),h=a.side(n,i)}let c=se(e.text,r,a.forward(n,i));(c<a.from||c>a.to)&&(c=h),no=e.text.slice(Math.min(r,c),Math.max(r,c));let u=l==(n?t.length-1:0)?null:t[l+(n?1:-1)];return u&&c==h&&u.level+(n?0:1)<a.level?x.cursor(u.side(!n,i)+e.from,u.forward(n,i)?1:-1,u.level):x.cursor(c+e.from,a.forward(n,i)?-1:1,a.level)}function Ds(e,t,i){for(let o=t;o<i;o++){let n=eo(e.charCodeAt(o));if(n==1)return fe;if(n==2||n==4)return Xt}return fe}var ro=S.define(),lo=S.define(),ao=S.define(),ho=S.define(),Ut=S.define(),co=S.define(),uo=S.define(),Qt=S.define(),_t=S.define(),fo=S.define({combine:e=>e.some(t=>t)}),po=S.define({combine:e=>e.some(t=>t)}),go=S.define(),Jt=class Li{constructor(t,i="nearest",o="nearest",n=5,s=5,r=!1){this.range=t,this.y=i,this.x=o,this.yMargin=n,this.xMargin=s,this.isSnapshot=r}map(t){return t.empty?this:new Li(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(t){return this.range.to<=t.doc.length?this:new Li(x.cursor(t.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}},Ze=Z.define({map:(e,t)=>e.map(t)}),mo=Z.define();function q(e,t,i){let o=e.facet(ho);o.length?o[0](t):window.onerror&&window.onerror(String(t),i,void 0,void 0,t)||(i?console.error(i+":",t):console.error(t))}var te=S.define({combine:e=>e.length?e[0]:!0}),Os=0,xe=S.define({combine(e){return e.filter((t,i)=>{for(let o=0;o<i;o++)if(e[o].plugin==t.plugin)return!1;return!0})}}),P=class Ei{constructor(t,i,o,n,s){this.id=t,this.create=i,this.domEventHandlers=o,this.domEventObservers=n,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(xe.of({plugin:this,arg:void 0}))}of(t){return this.baseExtensions.concat(xe.of({plugin:this,arg:t}))}static define(t,i){let{eventHandlers:o,eventObservers:n,provide:s,decorations:r}=i||{};return new Ei(Os++,t,o,n,l=>{let a=[];return r&&a.push(We.of(h=>{let c=h.plugin(l);return c?r(c):T.none})),s&&a.push(s(l)),a})}static fromClass(t,i){return Ei.define((o,n)=>new t(o,n),i)}},Zt=class{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(q(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){q(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){q(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}},vo=S.define(),et=S.define(),We=S.define(),wo=S.define(),bo=S.define(),Ne=S.define(),yo=S.define();function xo(e,t){let i=e.state.facet(yo);if(!i.length)return i;let o=i.map(s=>s instanceof Function?s(e):s),n=[];return E.spans(o,t.from,t.to,{point(){},span(s,r,l,a){let h=s-t.from,c=r-t.from,u=n;for(let d=l.length-1;d>=0;d--,a--){let f=l[d].spec.bidiIsolate,p;if(f==null&&(f=Ds(t.text,h,c)),a>0&&u.length&&(p=u[u.length-1]).to==h&&p.direction==f)p.to=c,u=p.inner;else{let g={from:h,to:c,direction:f,inner:[]};u.push(g),u=g.inner}}}}),n}var So=S.define();function ei(e){let t=0,i=0,o=0,n=0;for(let s of e.state.facet(So)){let r=s(e);r&&(r.left!=null&&(t=Math.max(t,r.left)),r.right!=null&&(i=Math.max(i,r.right)),r.top!=null&&(o=Math.max(o,r.top)),r.bottom!=null&&(n=Math.max(n,r.bottom)))}return{left:t,right:i,top:o,bottom:n}}var Pe=S.define(),j=class Ri{constructor(t,i,o,n){this.fromA=t,this.toA=i,this.fromB=o,this.toB=n}join(t){return new Ri(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let i=t.length,o=this;for(;i>0;i--){let n=t[i-1];if(!(n.fromA>o.toA)){if(n.toA<o.fromA)break;o=o.join(n),t.splice(i-1,1)}}return t.splice(i,0,o),t}static extendWithRanges(t,i){if(i.length==0)return t;let o=[];for(let n=0,s=0,r=0;;){let l=n<t.length?t[n].fromB:1e9,a=s<i.length?i[s]:1e9,h=Math.min(l,a);if(h==1e9)break;let c=h+r,u=h,d=c;for(;;)if(s<i.length&&i[s]<=u){let f=i[s+1];s+=2,u=Math.max(u,f);for(let p=n;p<t.length&&t[p].fromB<=u;p++)r=t[p].toA-t[p].toB;d=Math.max(d,f+r)}else if(n<t.length&&t[n].fromB<=u){let f=t[n++];u=Math.max(u,f.toB),d=Math.max(d,f.toA),r=f.toA-f.toB}else break;o.push(new Ri(c,d,h,u))}return o}},ti=class jn{constructor(t,i,o){this.view=t,this.state=i,this.transactions=o,this.flags=0,this.startState=t.state,this.changes=Pi.empty(this.startState.doc.length);for(let s of o)this.changes=this.changes.compose(s.changes);let n=[];this.changes.iterChangedRanges((s,r,l,a)=>n.push(new j(s,r,l,a))),this.changedRanges=n}static create(t,i,o){return new jn(t,i,o)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(t=>t.selection)}get empty(){return this.flags==0&&this.transactions.length==0}},Bs=[],R=class{constructor(e,t,i=0){this.dom=e,this.length=t,this.flags=i,this.parent=null,e.cmTile=this}get breakAfter(){return this.flags&1}get children(){return Bs}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(e){if(this.flags|=2,this.flags&4){this.flags&=-5;let t=this.domAttrs;t&&fs(this.dom,t)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(e){this.dom=e,e.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e,t=this.posAtStart){let i=t;for(let o of this.children){if(o==e)return i;i+=o.length+o.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}covers(e){return!0}coordsIn(e,t){return null}domPosFor(e,t){let i=le(this.dom),o=this.length?e>0:t>0;return new ae(this.parent.dom,i+(o?1:0),e==0||e==this.length)}markDirty(e){this.flags&=-3,e&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let e=this;e;e=e.parent)if(e instanceof it)return e;return null}static get(e){return e.cmTile}},tt=class extends R{constructor(e){super(e,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(e){this.children.push(e),e.parent=this}sync(e){if(this.flags&2)return;super.sync(e);let t=this.dom,i=null,o,n=e?.node==t?e:null,s=0;for(let r of this.children){if(r.sync(e),s+=r.length+r.breakAfter,o=i?i.nextSibling:t.firstChild,n&&o!=r.dom&&(n.written=!0),r.dom.parentNode==t)for(;o&&o!=r.dom;)o=Co(o);else t.insertBefore(r.dom,o);i=r.dom}for(o=i?i.nextSibling:t.firstChild,n&&o&&(n.written=!0);o;)o=Co(o);this.length=s}};function Co(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}var it=class extends tt{constructor(e,t){super(t),this.view=e}owns(e){for(;e;e=e.parent)if(e==this)return!0;return!1}isBlock(){return!0}nearest(e){for(;;){if(!e)return null;let t=R.get(e);if(t&&this.owns(t))return t;e=e.parentNode}}blockTiles(e){for(let t=[],i=this,o=0,n=0;;)if(o==i.children.length){if(!t.length)return;i=i.parent,i.breakAfter&&n++,o=t.pop()}else{let s=i.children[o++];if(s instanceof Se)t.push(o),i=s,o=0;else{let r=n+s.length,l=e(s,n);if(l!==void 0)return l;n=r+s.breakAfter}}}resolveBlock(e,t){let i,o=-1,n,s=-1;if(this.blockTiles((r,l)=>{let a=l+r.length;if(e>=l&&e<=a){if(r.isWidget()&&t>=-1&&t<=1){if(r.flags&32)return!0;r.flags&16&&(i=void 0)}(l<e||e==a&&(t<-1?r.length:r.covers(1)))&&(!i||!r.isWidget()&&i.isWidget())&&(i=r,o=e-l),(a>e||e==l&&(t>1?r.length:r.covers(-1)))&&(!n||!r.isWidget()&&n.isWidget())&&(n=r,s=e-l)}}),!i&&!n)throw new Error("No tile at position "+e);return i&&t<0||!n?{tile:i,offset:o}:{tile:n,offset:s}}},Se=class $n extends tt{constructor(t,i){super(t),this.wrapper=i}isBlock(){return!0}covers(t){return this.children.length?t<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(t,i){let o=new $n(i||document.createElement(t.tagName),t);return i||(o.flags|=4),o}},ot=class Un extends tt{constructor(t,i){super(t),this.attrs=i}isLine(){return!0}static start(t,i,o){let n=new Un(i||document.createElement("div"),t);return(!i||!o)&&(n.flags|=4),n}get domAttrs(){return this.attrs}resolveInline(t,i,o){let n=null,s=-1,r=null,l=-1;function a(c,u){for(let d=0,f=0;d<c.children.length&&f<=u;d++){let p=c.children[d],g=f+p.length;g>=u&&(p.isComposite()?a(p,u-f):(!r||r.isHidden&&(i>0||o&&Es(r,p)))&&(g>u||p.flags&32)?(r=p,l=u-f):(f<u||p.flags&16&&!p.isHidden)&&(n=p,s=u-f)),f=g}}a(this,t);let h=(i<0?n:r)||n||r;return h?{tile:h,offset:h==n?s:l}:null}coordsIn(t,i){let o=this.resolveInline(t,i,!0);return o?o.tile.coordsIn(Math.max(0,o.offset),i):Ls(this)}domIn(t,i){let o=this.resolveInline(t,i);if(o){let{tile:n,offset:s}=o;if(this.dom.contains(n.dom))return n.isText()?new ae(n.dom,Math.min(n.dom.nodeValue.length,s)):n.domPosFor(s,n.flags&16?1:n.flags&32?-1:i);let r=o.tile.parent,l=!1;for(let a of r.children){if(l)return new ae(a.dom,0);a==o.tile&&(l=!0)}}return new ae(this.dom,0)}};function Ls(e){let t=e.dom.lastChild;if(!t)return e.dom.getBoundingClientRect();let i=Le(t);return i[i.length-1]||null}function Es(e,t){let i=e.coordsIn(0,1),o=t.coordsIn(0,1);return i&&o&&o.top<i.bottom}var V=class Qn extends tt{constructor(t,i){super(t),this.mark=i}get domAttrs(){return this.mark.attrs}static of(t,i){let o=new Qn(i||document.createElement(t.tagName),t);return i||(o.flags|=4),o}},Ve=class _n extends R{constructor(t,i){super(t,i.length),this.text=i}sync(t){this.flags&2||(super.sync(t),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(t,i){let o=this.dom.nodeValue.length;t>o&&(t=o);let n=t,s=t,r=0;t==0&&i<0||t==o&&i>=0?w.chrome||w.gecko||(t?(n--,r=1):s<o&&(s++,r=-1)):i<0?n--:s<o&&s++;let l=He(this.dom,n,s).getClientRects();if(!l.length)return null;let a=l[(r?r<0:i>=0)?0:l.length-1];return w.safari&&!r&&a.width==0&&(a=Array.prototype.find.call(l,h=>h.width)||a),r?Re(a,r<0):a||null}static of(t,i){let o=new _n(i||document.createTextNode(t),t);return i||(o.flags|=2),o}},nt=class Jn extends R{constructor(t,i,o,n){super(t,i,n),this.widget=o}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(t){return this.flags&48?!1:(this.flags&(t<0?64:128))>0}coordsIn(t,i){return this.coordsInWidget(t,i,!1)}coordsInWidget(t,i,o){let n=this.widget.coordsAt(this.dom,t,i);if(n)return n;if(o)return Re(this.dom.getBoundingClientRect(),this.length?t==0:i<=0);{let s=this.dom.getClientRects(),r=null;if(!s.length)return null;let l=this.flags&16?!0:this.flags&32?!1:t>0;for(let a=l?s.length-1:0;r=s[a],!(t>0?a==0:a==s.length-1||r.top<r.bottom);a+=l?-1:1);return Re(r,!l)}}get overrideDOMText(){if(!this.length)return I.empty;let{root:t}=this;if(!t)return I.empty;let i=this.posAtStart;return t.view.state.doc.slice(i,i+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(t,i,o,n,s){return s||(s=t.toDOM(i),t.editable||(s.contentEditable="false")),new Jn(s,o,t,n)}},st=class extends R{constructor(e){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),super(t,0,e)}get isHidden(){return!1}get overrideDOMText(){return I.empty}coordsIn(e){return this.dom.getBoundingClientRect()}},Rs=class{constructor(e){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=e}advance(e,t,i){let{tile:o,index:n,beforeBreak:s,parents:r}=this;for(;e||t>0;)if(o.isComposite())if(s){if(!e)break;i&&i.break(),e--,s=!1}else if(n==o.children.length){if(!e&&!r.length)break;i&&i.leave(o),s=!!o.breakAfter,{tile:o,index:n}=r.pop(),n++}else{let l=o.children[n],a=l.breakAfter;(t>0?l.length<=e:l.length<e)&&(!i||i.skip(l,0,l.length)!==!1||!l.isComposite)?(s=!!a,n++,e-=l.length):(r.push({tile:o,index:n}),o=l,n=0,i&&l.isComposite()&&i.enter(l))}else if(n==o.length)s=!!o.breakAfter,{tile:o,index:n}=r.pop(),n++;else if(e){let l=Math.min(e,o.length-n);i&&i.skip(o,n,n+l),e-=l,n+=l}else break;return this.tile=o,this.index=n,this.beforeBreak=s,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}},Hs=class{constructor(e,t,i,o){this.from=e,this.to=t,this.wrapper=i,this.rank=o}},Ws=class{constructor(e,t,i){this.cache=e,this.root=t,this.blockWrappers=i,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(e,t,i,o){var n;this.flushBuffer();let s=this.ensureMarks(t,i),r=s.lastChild;if(r&&r.isText()&&!(r.flags&8)){this.cache.reused.set(r,2);let l=s.children[s.children.length-1]=new Ve(r.dom,r.text+e);l.parent=s}else s.append(o||Ve.of(e,(n=this.cache.find(Ve))===null||n===void 0?void 0:n.dom));this.pos+=e.length,this.afterWidget=null}addComposition(e,t){let i=this.curLine;i.dom!=t.line.dom&&(i.setDOM(this.cache.reused.has(t.line)?ii(t.line.dom):t.line.dom),this.cache.reused.set(t.line,2));let o=i;for(let s=t.marks.length-1;s>=0;s--){let r=t.marks[s],l=o.lastChild;if(l instanceof V&&l.mark.eq(r.mark))l.dom!=r.dom&&l.setDOM(ii(r.dom)),o=l;else{if(this.cache.reused.get(r)){let h=R.get(r.dom);h&&h.setDOM(ii(r.dom))}let a=V.of(r.mark,r.dom);o.append(a),o=a}this.cache.reused.set(r,2)}let n=new Ve(e.text,e.text.nodeValue);n.flags|=8,o.append(n)}addInlineWidget(e,t,i){let o=this.afterWidget&&e.flags&48&&(this.afterWidget.flags&48)==(e.flags&48);o||this.flushBuffer();let n=this.ensureMarks(t,i);!o&&!(e.flags&16)&&n.append(this.getBuffer(1)),n.append(e),this.pos+=e.length,this.afterWidget=e}addMark(e,t,i){this.flushBuffer(),this.ensureMarks(t,i).append(e),this.pos+=e.length,this.afterWidget=null}addBlockWidget(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}continueWidget(e){let t=this.afterWidget||this.lastBlock;t.length+=e,this.pos+=e}addLineStart(e,t){var i;e||(e=ko);let o=ot.start(e,t||((i=this.cache.find(ot))===null||i===void 0?void 0:i.dom),!!t);this.getBlockPos().append(this.lastBlock=this.curLine=o)}addLine(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(e){this.blockPosCovered()||this.addLineStart(e)}ensureLine(e){this.curLine||this.addLineStart(e)}ensureMarks(e,t){var i;let o=this.curLine;for(let n=e.length-1;n>=0;n--){let s=e[n],r;if(t>0&&(r=o.lastChild)&&r instanceof V&&r.mark.eq(s))o=r,t--;else{let l=V.of(s,(i=this.cache.find(V,a=>a.mark.eq(s)))===null||i===void 0?void 0:i.dom);o.append(l),o=l,t=0}}return o}endLine(){if(this.curLine){this.flushBuffer();let e=this.curLine.lastChild;(!e||!Mo(this.curLine,!1)||e.dom.nodeName!="BR"&&e.isWidget()&&!(w.ios&&Mo(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(oi,0,32)||new nt(oi.toDOM(),0,oi,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let e=this.wrappers.length-1;e>=0;e--)this.wrappers[e].to<this.pos&&this.wrappers.splice(e,1);for(let e=this.blockWrappers;e.value&&e.from<=this.pos;e.next())if(e.to>=this.pos){let t=new Hs(e.from,e.to,e.value,e.rank),i=this.wrappers.length;for(;i>0&&(this.wrappers[i-1].rank-t.rank||this.wrappers[i-1].to-t.to)<0;)i--;this.wrappers.splice(i,0,t)}this.wrapperPos=this.pos}getBlockPos(){var e;this.updateBlockWrappers();let t=this.root;for(let i of this.wrappers){let o=t.lastChild;if(i.from<this.pos&&o instanceof Se&&o.wrapper.eq(i.wrapper))t=o;else{let n=Se.of(i.wrapper,(e=this.cache.find(Se,s=>s.wrapper.eq(i.wrapper)))===null||e===void 0?void 0:e.dom);t.append(n),t=n}}return t}blockPosCovered(){let e=this.lastBlock;return e!=null&&!e.breakAfter&&(!e.isWidget()||(e.flags&160)>0)}getBuffer(e){let t=2|(e<0?16:32),i=this.cache.find(st,void 0,1);return i&&(i.flags=t),i||new st(t)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}},Ns=class{constructor(e){this.skipCount=0,this.text="",this.textOff=0,this.cursor=e.iter()}skip(e){this.textOff+e<=this.text.length?this.textOff+=e:(this.skipCount+=e-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(e){if(this.textOff==this.text.length){let{value:o,lineBreak:n,done:s}=this.cursor.next(this.skipCount);if(this.skipCount=0,s)throw new Error("Ran out of text content when drawing inline views");this.text=o;let r=this.textOff=Math.min(e,o.length);return n?null:o.slice(0,r)}let t=Math.min(this.text.length,this.textOff+e),i=this.text.slice(this.textOff,t);return this.textOff=t,i}},rt=[nt,ot,Ve,V,st,Se,it];for(let e=0;e<rt.length;e++)rt[e].bucket=e;var Ps=class{constructor(e){this.view=e,this.buckets=rt.map(()=>[]),this.index=rt.map(()=>0),this.reused=new Map}add(e){let t=e.constructor.bucket,i=this.buckets[t];i.length<6?i.push(e):i[this.index[t]=(this.index[t]+1)%6]=e}find(e,t,i=2){let o=e.bucket,n=this.buckets[o],s=this.index[o];for(let r=n.length-1;r>=0;r--){let l=(r+s)%n.length,a=n[l];if((!t||t(a))&&!this.reused.has(a))return n.splice(l,1),l<s&&this.index[o]--,this.reused.set(a,i),a}return null}findWidget(e,t,i){let o=this.buckets[0];if(o.length)for(let n=0,s=0;;n++){if(n==o.length){if(s)return null;s=1,n=0}let r=o[n];if(!this.reused.has(r)&&(s==0?r.widget.compare(e):r.widget.constructor==e.constructor&&e.updateDOM(r.dom,this.view)))return o.splice(n,1),n<this.index[0]&&this.index[0]--,this.reused.set(r,1),r.length=t,r.flags=r.flags&-498|i,r}}reuse(e){return this.reused.set(e,1),e}maybeReuse(e,t=2){if(!this.reused.has(e))return this.reused.set(e,t),e.dom}},Vs=class{constructor(e,t,i,o,n){this.view=e,this.decorations=o,this.disallowBlockEffectsFor=n,this.openWidget=!1,this.openMarks=0,this.cache=new Ps(e),this.text=new Ns(e.state.doc),this.builder=new Ws(this.cache,new it(e,e.contentDOM),E.iter(i)),this.cache.reused.set(t,2),this.old=new Rs(t)}run(e,t){let i=t&&this.getCompositionContext(t.text);for(let o=0,n=0,s=0;;){let r=s<e.length?e[s++]:null,l=r?r.fromA:this.old.root.length;if(l>o){let a=l-o;this.preserve(a,!s,!r),o=l,n+=a}if(!r)break;this.forward(r.fromA,r.toA),t&&r.fromA<=t.range.fromA&&r.toA>=t.range.toA?(this.emit(n,t.range.fromB),this.builder.addComposition(t,i),this.emit(t.range.toB,r.toB)):this.emit(n,r.toB),n=r.toB,o=r.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(e,t,i){let o=Is(this.old),n=this.openMarks;this.old.advance(e,i?1:-1,{skip:(s,r,l)=>{if(s.isWidget())if(this.openWidget)this.builder.continueWidget(l-r);else{let a=l>0||r<s.length?nt.of(s.widget,this.view,l-r,s.flags&496,this.cache.maybeReuse(s)):this.cache.reuse(s);a.flags&256?(a.flags&=-2,this.builder.addBlockWidget(a)):(this.builder.ensureLine(null),this.builder.addInlineWidget(a,o,n),n=o.length)}else if(s.isText())this.builder.ensureLine(null),!r&&l==s.length?this.builder.addText(s.text,o,n,this.cache.reuse(s)):(this.cache.add(s),this.builder.addText(s.text.slice(r,l),o,n)),n=o.length;else if(s.isLine())s.flags&=-2,this.cache.reused.set(s,1),this.builder.addLine(s);else if(s instanceof st)this.cache.add(s);else if(s instanceof V)this.builder.ensureLine(null),this.builder.addMark(s,o,n),this.cache.reused.set(s,1),n=o.length;else return!1;this.openWidget=!1},enter:s=>{s.isLine()?this.builder.addLineStart(s.attrs,this.cache.maybeReuse(s)):(this.cache.add(s),s instanceof V&&o.unshift(s.mark)),this.openWidget=!1},leave:s=>{s.isLine()?o.length&&(o.length=n=0):s instanceof V&&(o.shift(),n=Math.min(n,o.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(e)}emit(e,t){let i=null,o=this.builder,n=0,s=E.spans(this.decorations,e,t,{point:(r,l,a,h,c,u)=>{if(a instanceof Oe){if(this.disallowBlockEffectsFor[u]){if(a.block)throw new RangeError("Block decorations may not be specified via plugins");if(l>this.view.state.doc.lineAt(r).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(n=h.length,c>h.length)o.continueWidget(l-r);else{let d=a.widget||(a.block?Ce.block:Ce.inline),f=Fs(a),p=this.cache.findWidget(d,l-r,f)||nt.of(d,this.view,l-r,f);a.block?(a.startSide>0&&o.addLineStartIfNotCovered(i),o.addBlockWidget(p)):(o.ensureLine(i),o.addInlineWidget(p,h,c))}i=null}else i=zs(i,a);l>r&&this.text.skip(l-r)},span:(r,l,a,h)=>{for(let c=r;c<l;){let u=this.text.next(Math.min(512,l-c));u==null?(o.addLineStartIfNotCovered(i),o.addBreak(),c++):(o.ensureLine(i),o.addText(u,a,h),c+=u.length),i=null}}});o.addLineStartIfNotCovered(i),this.openWidget=s>n,this.openMarks=s}forward(e,t){this.old.advance(t-e,1,{skip:(i,o,n)=>{(i.isText()||n==i.length)&&this.cache.add(i)},enter:i=>this.cache.add(i),leave:()=>{},break:()=>{}})}getCompositionContext(e){let t=[],i=null;for(let o=e.parentNode;;o=o.parentNode){let n=R.get(o);if(o==this.view.contentDOM)break;n instanceof V?t.push(n):n?.isLine()?i=n:o.nodeName=="DIV"&&!i&&o!=this.view.contentDOM?i=new ot(o,ko):t.push(V.of(new It({tagName:o.nodeName.toLowerCase(),attributes:ps(o)}),o))}return{line:i,marks:t}}};function Mo(e,t){let i=o=>{for(let n of o.children)if((t?n.isText():n.length)||i(n))return!0;return!1};return i(e)}function Fs(e){let t=e.isReplace?(e.startSide<0?64:0)|(e.endSide>0?128:0):e.startSide>0?32:16;return e.block&&(t|=256),t}var ko={class:"cm-line"};function zs(e,t){let i=t.spec.attributes,o=t.spec.class;return!i&&!o||(e||(e={class:"cm-line"}),i&&Ft(i,e),o&&(e.class+=" "+o)),e}function Is(e){let t=[];for(let i=e.parents.length;i>1;i--){let o=i==e.parents.length?e.tile:e.parents[i].tile;o instanceof V&&t.push(o.mark)}return t}function ii(e){let t=R.get(e);return t&&t.setDOM(e.cloneNode()),e}var Ce=class extends re{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}};Ce.inline=new Ce("span"),Ce.block=new Ce("div");var oi=new class extends re{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}},Ao=class{constructor(e){this.view=e,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=T.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new it(e,e.contentDOM),this.updateInner([new j(0,0,0,e.state.doc.length)],null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:h,toA:c})=>c<this.minWidthFrom||h>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let o=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?o=this.domChanged.newSel.head:!Qs(e.changes,this.hasComposition)&&!e.selectionSet&&(o=e.state.selection.main.head));let n=o>-1?Ks(this.view,e.changes,o):null;if(this.domChanged=null,this.hasComposition){let{from:h,to:c}=this.hasComposition;i=new j(h,c,e.changes.mapPos(h,-1),e.changes.mapPos(c,1)).addToSet(i.slice())}this.hasComposition=n?{from:n.range.fromB,to:n.range.toB}:null,(w.ie||w.chrome)&&!n&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let s=this.decorations,r=this.blockWrappers;this.updateDeco();let l=Gs(s,this.decorations,e.changes);l.length&&(i=j.extendWithRanges(i,l));let a=$s(r,this.blockWrappers,e.changes);return a.length&&(i=j.extendWithRanges(i,a)),n&&!i.some(h=>h.fromA<=n.range.fromA&&h.toA>=n.range.toA)&&(i=n.range.addToSet(i.slice())),this.tile.flags&2&&i.length==0?!1:(this.updateInner(i,n),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0;let{observer:i}=this.view;i.ignore(()=>{if(t||e.length){let s=this.tile,r=new Vs(this.view,s,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=r.run(e,t),ni(s,r.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let n=w.chrome||w.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(n),n&&(n.written||i.selectionRange.focusNode!=n.node||!this.tile.dom.contains(n.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let n of this.tile.children)n.isWidget()&&n.widget instanceof si&&o.push(n.dom);i.updateGaps(o)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let i of t.effects)i.is(mo)&&(this.editContextFormatting=i.value)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:i}=this.tile,o=this.view.root.activeElement,n=o==i,s=!n&&!(this.view.state.facet(te)||i.tabIndex>-1)&&_e(i,this.view.observer.selectionRange)&&!(o&&i.contains(o));if(!(n||t||s))return;let r=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a,h;if(l.empty?h=a=this.inlineDOMNearPos(l.anchor,l.assoc||1):(h=this.inlineDOMNearPos(l.head,l.head==l.from?1:-1),a=this.inlineDOMNearPos(l.anchor,l.anchor==l.from?1:-1)),w.gecko&&l.empty&&!this.hasComposition&&qs(a)){let u=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(u,a.node.childNodes[a.offset]||null)),a=h=new ae(u,0),r=!0}let c=this.view.observer.selectionRange;(r||!c.focusNode||(!Ee(a.node,a.offset,c.anchorNode,c.anchorOffset)||!Ee(h.node,h.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,l))&&(this.view.observer.ignore(()=>{w.android&&w.chrome&&i.contains(c.focusNode)&&Us(c.focusNode,i)&&(i.blur(),i.focus({preventScroll:!0}));let u=Be(this.view.root);if(u)if(l.empty){if(w.gecko){let d=Ys(a.node,a.offset);if(d&&d!=3){let f=(d==1?_i:Ji)(a.node,a.offset);f&&(a=new ae(f.node,f.offset))}}u.collapse(a.node,a.offset),l.bidiLevel!=null&&u.caretBidiLevel!==void 0&&(u.caretBidiLevel=l.bidiLevel)}else if(u.extend){u.collapse(a.node,a.offset);try{u.extend(h.node,h.offset)}catch{}}else{let d=document.createRange();l.anchor>l.head&&([a,h]=[h,a]),d.setEnd(h.node,h.offset),d.setStart(a.node,a.offset),u.removeAllRanges(),u.addRange(d)}s&&this.view.root.activeElement==i&&(i.blur(),o&&o.focus())}),this.view.observer.setSelectionRange(a,h)),this.impreciseAnchor=a.precise?null:new ae(c.anchorNode,c.anchorOffset),this.impreciseHead=h.precise?null:new ae(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Ee(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=Be(e.root),{anchorNode:o,anchorOffset:n}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let s=this.lineAt(t.head,t.assoc);if(!s)return;let r=s.posAtStart;if(t.head==r||t.head==r+s.length)return;let l=this.coordsAt(t.head,-1),a=this.coordsAt(t.head,1);if(!l||!a||l.bottom>a.top)return;let h=this.domAtPos(t.head+t.assoc,t.assoc);i.collapse(h.node,h.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let c=e.observer.selectionRange;e.docView.posFromDOM(c.anchorNode,c.anchorOffset)!=t.from&&i.collapse(o,n)}posFromDOM(e,t){let i=this.tile.nearest(e);if(!i)return this.tile.dom.compareDocumentPosition(e)&2?0:this.view.state.doc.length;let o=i.posAtStart;if(i.isComposite()){let n;if(e==i.dom)n=i.dom.childNodes[t];else{let s=ee(e)==0?0:t==0?-1:1;for(;;){let r=e.parentNode;if(r==i.dom)break;s==0&&r.firstChild!=r.lastChild&&(e==r.firstChild?s=-1:s=1),e=r}s<0?n=e:n=e.nextSibling}if(n==i.dom.firstChild)return o;for(;n&&!R.get(n);)n=n.nextSibling;if(!n)return o+i.length;for(let s=0,r=o;;s++){let l=i.children[s];if(l.dom==n)return r;r+=l.length+l.breakAfter}}else return i.isText()?e==i.dom?o+t:o+(t?i.length:0):o}domAtPos(e,t){let{tile:i,offset:o}=this.tile.resolveBlock(e,t);return i.isWidget()?i.domPosFor(e,t):i.domIn(o,t)}inlineDOMNearPos(e,t){let i,o=-1,n=!1,s,r=-1,l=!1;return this.tile.blockTiles((a,h)=>{if(a.isWidget()){if(a.flags&32&&h>=e)return!0;a.flags&16&&(n=!0)}else{let c=h+a.length;if(h<=e&&(i=a,o=e-h,n=c<e),c>=e&&!s&&(s=a,r=e-h,l=h>e),h>e&&s)return!0}}),!i&&!s?this.domAtPos(e,t):(n&&s?i=null:l&&i&&(s=null),i&&t<0||!s?i.domIn(o,t):s.domIn(r,t))}coordsAt(e,t){let{tile:i,offset:o}=this.tile.resolveBlock(e,t);return i.isWidget()?i.widget instanceof si?null:i.coordsInWidget(o,t,!0):i.coordsIn(o,t)}lineAt(e,t){let{tile:i}=this.tile.resolveBlock(e,t);return i.isLine()?i:null}coordsForChar(e){let{tile:t,offset:i}=this.tile.resolveBlock(e,1);if(!t.isLine())return null;function o(n,s){if(n.isComposite())for(let r of n.children){if(r.length>=s){let l=o(r,s);if(l)return l}if(s-=r.length,s<0)break}else if(n.isText()&&s<n.length){let r=se(n.text,s);if(r==s)return null;let l=He(n.dom,s,r).getClientRects();for(let a=0;a<l.length;a++){let h=l[a];if(a==l.length-1||h.top<h.bottom&&h.left<h.right)return h}}return null}return o(t,i)}measureVisibleLineHeights(e){let t=[],{from:i,to:o}=e,n=this.view.contentDOM.clientWidth,s=n>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,r=-1,l=this.view.textDirection==B.LTR,a=0,h=(c,u,d)=>{for(let f=0;f<c.children.length&&!(u>o);f++){let p=c.children[f],g=u+p.length,m=p.dom.getBoundingClientRect(),{height:v}=m;if(d&&!f&&(a+=m.top-d.top),p instanceof Se)g>i&&h(p,u,m);else if(u>=i&&(a>0&&t.push(-a),t.push(v+a),a=0,s)){let b=p.dom.lastChild,C=b?Le(b):[];if(C.length){let M=C[C.length-1],y=l?M.right-m.left:m.right-M.left;y>r&&(r=y,this.minWidth=n,this.minWidthFrom=u,this.minWidthTo=g)}}d&&f==c.children.length-1&&(a+=d.bottom-m.bottom),u=g+p.breakAfter}};return h(this.tile,0,null),t}textDirectionAt(e){let{tile:t}=this.tile.resolveBlock(e,1);return getComputedStyle(t.dom).direction=="rtl"?B.RTL:B.LTR}measureTextSize(){let e=this.tile.blockTiles(s=>{if(s.isLine()&&s.children.length&&s.length<=20){let r=0,l;for(let a of s.children){if(!a.isText()||/[^ -~]/.test(a.text))return;let h=Le(a.dom);if(h.length!=1)return;r+=h[0].width,l=h[0].height}if(r)return{lineHeight:s.dom.getBoundingClientRect().height,charWidth:r/s.length,textHeight:l}}});if(e)return e;let t=document.createElement("div"),i,o,n;return t.className="cm-line",t.style.width="99999px",t.style.position="absolute",t.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(t);let s=Le(t.firstChild)[0];i=t.getBoundingClientRect().height,o=s&&s.width?s.width/27:7,n=s&&s.height?s.height:i,t.remove()}),{lineHeight:i,charWidth:o,textHeight:n}}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,o=0;;o++){let n=o==t.viewports.length?null:t.viewports[o],s=n?n.from-1:this.view.state.doc.length;if(s>i){let r=(t.lineBlockAt(s).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(T.replace({widget:new si(r),block:!0,inclusive:!0,isBlockGap:!0}).range(i,s))}if(!n)break;i=n.to+1}return T.set(e)}updateDeco(){let e=1,t=this.view.state.facet(We).map(n=>(this.dynamicDecorationMap[e++]=typeof n=="function")?n(this.view):n),i=!1,o=this.view.state.facet(bo).map((n,s)=>{let r=typeof n=="function";return r&&(i=!0),r?n(this.view):n});for(o.length&&(this.dynamicDecorationMap[e++]=i,t.push(E.join(o))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;this.blockWrappers=this.view.state.facet(wo).map(n=>typeof n=="function"?n(this.view):n)}scrollIntoView(e){if(e.isSnapshot){let a=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=a.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let a of this.view.state.facet(go))try{if(a(this.view,e.range,e))return!0}catch(h){q(this.view.state,h,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),o;if(!i)return;!t.empty&&(o=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,o.left),top:Math.min(i.top,o.top),right:Math.max(i.right,o.right),bottom:Math.max(i.bottom,o.bottom)});let n=ei(this.view),s={left:i.left-n.left,top:i.top-n.top,right:i.right+n.right,bottom:i.bottom+n.bottom},{offsetWidth:r,offsetHeight:l}=this.view.scrollDOM;vs(this.view.scrollDOM,s,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,r),-r),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==B.LTR)}lineHasWidget(e){let t=i=>i.isWidget()||i.children.some(t);return t(this.tile.resolveBlock(e,1).tile)}destroy(){ni(this.tile)}};function ni(e,t){let i=t?.get(e);if(i!=1){i==null&&e.destroy();for(let o of e.children)ni(o,t)}}function qs(e){return e.node.nodeType==1&&e.node.firstChild&&(e.offset==0||e.node.childNodes[e.offset-1].contentEditable=="false")&&(e.offset==e.node.childNodes.length||e.node.childNodes[e.offset].contentEditable=="false")}function To(e,t){let i=e.observer.selectionRange;if(!i.focusNode)return null;let o=_i(i.focusNode,i.focusOffset),n=Ji(i.focusNode,i.focusOffset),s=o||n;if(n&&o&&n.node!=o.node){let l=R.get(n.node);if(!l||l.isText()&&l.text!=n.node.nodeValue)s=n;else if(e.docView.lastCompositionAfterCursor){let a=R.get(o.node);!a||a.isText()&&a.text!=o.node.nodeValue||(s=n)}}if(e.docView.lastCompositionAfterCursor=s!=o,!s)return null;let r=t-s.offset;return{from:r,to:r+s.node.nodeValue.length,node:s.node}}function Ks(e,t,i){let o=To(e,i);if(!o)return null;let{node:n,from:s,to:r}=o,l=n.nodeValue;if(/[\\n\\r]/.test(l)||e.state.doc.sliceString(o.from,o.to)!=l)return null;let a=t.invertedDesc;return{range:new j(a.mapPos(s),a.mapPos(r),s,r),text:n}}function Ys(e,t){return e.nodeType!=1?0:(t&&e.childNodes[t-1].contentEditable=="false"?1:0)|(t<e.childNodes.length&&e.childNodes[t].contentEditable=="false"?2:0)}var Xs=class{constructor(){this.changes=[]}compareRange(e,t){be(e,t,this.changes)}comparePoint(e,t){be(e,t,this.changes)}boundChange(e){be(e,e,this.changes)}};function Gs(e,t,i){let o=new Xs;return E.compare(e,t,i,o),o.changes}var js=class{constructor(){this.changes=[]}compareRange(e,t){be(e,t,this.changes)}comparePoint(){}boundChange(e){be(e,e,this.changes)}};function $s(e,t,i){let o=new js;return E.compare(e,t,i,o),o.changes}function Us(e,t){for(let i=e;i&&i!=t;i=i.assignedSlot||i.parentNode)if(i.nodeType==1&&i.contentEditable=="false")return!0;return!1}function Qs(e,t){let i=!1;return t&&e.iterChangedRanges((o,n)=>{o<t.to&&n>t.from&&(i=!0)}),i}var si=class extends re{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}};function _s(e,t,i=1){let o=e.charCategorizer(t),n=e.doc.lineAt(t),s=t-n.from;if(n.length==0)return x.cursor(t);s==0?i=1:s==n.length&&(i=-1);let r=s,l=s;i<0?r=se(n.text,s,!1):l=se(n.text,s);let a=o(n.text.slice(r,l));for(;r>0;){let h=se(n.text,r,!1);if(o(n.text.slice(h,r))!=a)break;r=h}for(;l<n.length;){let h=se(n.text,l);if(o(n.text.slice(l,h))!=a)break;l=h}return x.range(r+n.from,l+n.from)}function Js(e,t,i,o,n){let s=Math.round((o-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&i.height>e.defaultLineHeight*1.5){let l=e.viewState.heightOracle.textHeight,a=Math.floor((n-i.top-(e.defaultLineHeight-l)*.5)/l);s+=a*e.viewState.heightOracle.lineLength}let r=e.state.sliceDoc(i.from,i.to);return i.from+Bt(r,s,e.state.tabSize)}function ri(e,t,i){let o=e.lineBlockAt(t);if(Array.isArray(o.type)){let n;for(let s of o.type){if(s.from>t)break;if(!(s.to<t)){if(s.from<t&&s.to>t)return s;(!n||s.type==H.Text&&(n.type!=s.type||(i<0?s.from<t:s.to>t)))&&(n=s)}}return n||o}return o}function Zs(e,t,i,o){let n=ri(e,t.head,t.assoc||-1),s=!o||n.type!=H.Text||!(e.lineWrapping||n.widgetLineBreaks)?null:e.coordsAtPos(t.assoc<0&&t.head>n.from?t.head-1:t.head);if(s){let r=e.dom.getBoundingClientRect(),l=e.textDirectionAt(n.from),a=e.posAtCoords({x:i==(l==B.LTR)?r.right-1:r.left+1,y:(s.top+s.bottom)/2});if(a!=null)return x.cursor(a,i?-1:1)}return x.cursor(i?n.to:n.from,i?-1:1)}function Do(e,t,i,o){let n=e.state.doc.lineAt(t.head),s=e.bidiSpans(n),r=e.textDirectionAt(n.from);for(let l=t,a=null;;){let h=so(n,s,r,l,i),c=no;if(!h){if(n.number==(i?e.state.doc.lines:1))return l;c=`\n`,n=e.state.doc.line(n.number+(i?1:-1)),s=e.bidiSpans(n),h=e.visualLineSide(n,!i)}if(a){if(!a(c))return l}else{if(!o)return h;a=o(c)}l=h}}function er(e,t,i){let o=e.state.charCategorizer(t),n=o(i);return s=>{let r=o(s);return n==ss.Space&&(n=r),n==r}}function tr(e,t,i,o){let n=t.head,s=i?1:-1;if(n==(i?e.state.doc.length:0))return x.cursor(n,t.assoc);let r=t.goalColumn,l,a=e.contentDOM.getBoundingClientRect(),h=e.coordsAtPos(n,t.assoc||-1),c=e.documentTop;if(h)r==null&&(r=h.left-a.left),l=s<0?h.top:h.bottom;else{let f=e.viewState.lineBlockAt(n);r==null&&(r=Math.min(a.right-a.left,e.defaultCharacterWidth*(n-f.from))),l=(s<0?f.top:f.bottom)+c}let u=a.left+r,d=o??e.viewState.heightOracle.textHeight>>1;for(let f=0;;f+=10){let p=l+(d+f)*s,g=ai(e,{x:u,y:p},!1,s);return x.cursor(g.pos,g.assoc,void 0,r)}}function Fe(e,t,i){for(;;){let o=0;for(let n of e)n.between(t-1,t+1,(s,r,l)=>{if(t>s&&t<r){let a=o||i||(t-s<r-t?-1:1);t=a<0?s:r,o=a}});if(!o)return t}}function Oo(e,t){let i=null;for(let o=0;o<t.ranges.length;o++){let n=t.ranges[o],s=null;if(n.empty){let r=Fe(e,n.from,0);r!=n.from&&(s=x.cursor(r,-1))}else{let r=Fe(e,n.from,-1),l=Fe(e,n.to,1);(r!=n.from||l!=n.to)&&(s=x.range(n.from==n.anchor?r:l,n.from==n.head?r:l))}s&&(i||(i=t.ranges.slice()),i[o]=s)}return i?x.create(i,t.mainIndex):t}function li(e,t,i){let o=Fe(e.state.facet(Ne).map(n=>n(e)),i.from,t.head>i.from?-1:1);return o==i.from?i:x.cursor(o,o<i.from?1:-1)}var $=class{constructor(e,t){this.pos=e,this.assoc=t}};function ai(e,t,i,o){let n=e.contentDOM.getBoundingClientRect(),s=n.top+e.viewState.paddingTop,{x:r,y:l}=t,a=l-s,h;for(;;){if(a<0)return new $(0,1);if(a>e.viewState.docHeight)return new $(e.state.doc.length,-1);if(h=e.elementAtHeight(a),o==null)break;if(h.type==H.Text){let d=e.docView.coordsAt(o<0?h.from:h.to,o);if(d&&(o<0?d.top<=a+s:d.bottom>=a+s))break}let u=e.viewState.heightOracle.textHeight/2;a=o>0?h.bottom+u:h.top-u}if(e.viewport.from>=h.to||e.viewport.to<=h.from){if(i)return null;if(h.type==H.Text){let u=Js(e,n,h,r,l);return new $(u,u==h.from?1:-1)}}if(h.type!=H.Text)return a<(h.top+h.bottom)/2?new $(h.from,1):new $(h.to,-1);let c=e.docView.lineAt(h.from,2);return(!c||c.length!=h.length)&&(c=e.docView.lineAt(h.from,-2)),Bo(e,c,h.from,r,l)}function Bo(e,t,i,o,n){let s=-1,r=null,l=1e9,a=1e9,h=n,c=n,u=(d,f)=>{for(let p=0;p<d.length;p++){let g=d[p];if(g.top==g.bottom)continue;let m=g.left>o?g.left-o:g.right<o?o-g.right:0,v=g.top>n?g.top-n:g.bottom<n?n-g.bottom:0;g.top<=c&&g.bottom>=h&&(h=Math.min(g.top,h),c=Math.max(g.bottom,c),v=0),(s<0||(v-a||m-l)<0)&&(s>=0&&a&&l<m&&r.top<=c-2&&r.bottom>=h+2?a=0:(s=f,l=m,a=v,r=g))}};if(t.isText()){for(let d=0;d<t.length;){let f=se(t.text,d);if(u(He(t.dom,d,f).getClientRects(),d),!l&&!a)break;d=f}return o>(r.left+r.right)/2==(Lo(e,s+i)==B.LTR)?new $(i+se(t.text,s),-1):new $(i+s,1)}else{if(!t.length)return new $(i,1);for(let p=0;p<t.children.length;p++){let g=t.children[p];if(g.flags&48)continue;let m=(g.dom.nodeType==1?g.dom:He(g.dom,0,g.length)).getClientRects();if(u(m,p),!l&&!a)break}let d=t.children[s],f=t.posBefore(d,i);return d.isComposite()||d.isText()?Bo(e,d,f,Math.max(r.left,Math.min(r.right,o)),n):o>(r.left+r.right)/2==(Lo(e,s+i)==B.LTR)?new $(f+d.length,-1):new $(f,1)}}function Lo(e,t){let i=e.state.doc.lineAt(t);return e.bidiSpans(i)[G.find(e.bidiSpans(i),t-i.from,-1,1)].dir}var ze="\\uFFFF",ir=class{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(De.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=ze}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let o=e;;){this.findPointBefore(i,o);let n=this.text.length;this.readNode(o);let s=R.get(o),r=o.nextSibling;if(r==t){s?.breakAfter&&!r&&this.lineBreak();break}let l=R.get(r);(s&&l?s.breakAfter:(s?s.breakAfter:Je(o))||Je(r)&&(o.nodeName!="BR"||s?.isWidget())&&this.text.length>n)&&!nr(r,t)&&this.lineBreak(),o=r}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,o=this.lineSeparator?null:/\\r\\n?|\\n/g;;){let n=-1,s=1,r;if(this.lineSeparator?(n=t.indexOf(this.lineSeparator,i),s=this.lineSeparator.length):(r=o.exec(t))&&(n=r.index,s=r[0].length),this.append(t.slice(i,n<0?t.length:n)),n<0)break;if(this.lineBreak(),s>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=s-1);i=n+s}}readNode(e){let t=R.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let o=i.iter();!o.next().done;)o.lineBreak?this.lineBreak():this.append(o.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(or(e,i.node,i.offset)?t:0))}};function or(e,t,i){for(;;){if(!t||i<ee(t))return!1;if(t==e)return!0;i=le(t)+1,t=t.parentNode}}function nr(e,t){let i;for(;!(e==t||!e);e=e.nextSibling){let o=R.get(e);if(!o?.isWidget())return!1;o&&(i||(i=[])).push(o)}if(i){for(let o of i)if(o.overrideDOMText?.length)return!1}return!0}var Eo=class{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}},sr=class{constructor(e,t,i,o){this.typeOver=o,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:n,impreciseAnchor:s}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=Ro(e.docView.tile,t,i,0))){let r=n||s?[]:lr(e),l=new ir(r,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=ar(r,this.bounds.from)}else{let r=e.observer.selectionRange,l=n&&n.node==r.focusNode&&n.offset==r.focusOffset||!Yt(e.contentDOM,r.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(r.focusNode,r.focusOffset),a=s&&s.node==r.anchorNode&&s.offset==r.anchorOffset||!Yt(e.contentDOM,r.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(r.anchorNode,r.anchorOffset),h=e.viewport;if((w.ios||w.chrome)&&e.state.selection.main.empty&&l!=a&&(h.from>0||h.to<e.state.doc.length)){let c=Math.min(l,a),u=Math.max(l,a),d=h.from-c,f=h.to-u;(d==0||d==1||c==0)&&(f==0||f==-1||u==e.state.doc.length)&&(l=0,a=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(x.range(a,l)):this.newSel=x.single(a,l)}}};function Ro(e,t,i,o){if(e.isComposite()){let n=-1,s=-1,r=-1,l=-1;for(let a=0,h=o,c=o;a<e.children.length;a++){let u=e.children[a],d=h+u.length;if(h<t&&d>i)return Ro(u,t,i,h);if(d>=t&&n==-1&&(n=a,s=h),h>i&&u.dom.parentNode==e.dom){r=a,l=c;break}c=d,h=d+u.breakAfter}return{from:s,to:l<0?o+e.length:l,startDOM:(n?e.children[n-1].dom.nextSibling:null)||e.dom.firstChild,endDOM:r<e.children.length&&r>=0?e.children[r].dom:null}}else return e.isText()?{from:o,to:o+e.length,startDOM:e.dom,endDOM:e.dom.nextSibling}:null}function Ho(e,t){let i,{newSel:o}=t,n=e.state.selection.main,s=e.inputState.lastKeyTime>Date.now()-100?e.inputState.lastKeyCode:-1;if(t.bounds){let{from:r,to:l}=t.bounds,a=n.from,h=null;(s===8||w.android&&t.text.length<l-r)&&(a=n.to,h="end");let c=Wo(e.state.doc.sliceString(r,l,ze),t.text,a-r,h);c&&(w.chrome&&s==13&&c.toB==c.from+2&&t.text.slice(c.from,c.toB)==ze+ze&&c.toB--,i={from:r+c.from,to:r+c.toA,insert:I.of(t.text.slice(c.from,c.toB).split(ze))})}else o&&(!e.hasFocus&&e.state.facet(te)||o.main.eq(n))&&(o=null);if(!i&&!o)return!1;if(!i&&t.typeOver&&!n.empty&&o&&o.main.empty?i={from:n.from,to:n.to,insert:e.state.doc.slice(n.from,n.to)}:(w.mac||w.android)&&i&&i.from==i.to&&i.from==n.head-1&&/^\\. ?$/.test(i.insert.toString())&&e.contentDOM.getAttribute("autocorrect")=="off"?(o&&i.insert.length==2&&(o=x.single(o.main.anchor-1,o.main.head-1)),i={from:i.from,to:i.to,insert:I.of([i.insert.toString().replace("."," ")])}):i&&i.from>=n.from&&i.to<=n.to&&(i.from!=n.from||i.to!=n.to)&&n.to-n.from-(i.to-i.from)<=4?i={from:n.from,to:n.to,insert:e.state.doc.slice(n.from,i.from).append(i.insert).append(e.state.doc.slice(i.to,n.to))}:e.state.doc.lineAt(n.from).to<n.to&&e.docView.lineHasWidget(n.to)&&e.inputState.insertingTextAt>Date.now()-50?i={from:n.from,to:n.to,insert:e.state.toText(e.inputState.insertingText)}:w.chrome&&i&&i.from==i.to&&i.from==n.head&&i.insert.toString()==`\n `&&e.lineWrapping&&(o&&(o=x.single(o.main.anchor-1,o.main.head-1)),i={from:n.from,to:n.to,insert:I.of([" "])}),i)return hi(e,i,o,s);if(o&&!o.main.eq(n)){let r=!1,l="select";return e.inputState.lastSelectionTime>Date.now()-50&&(e.inputState.lastSelectionOrigin=="select"&&(r=!0),l=e.inputState.lastSelectionOrigin,l=="select.pointer"&&(o=Oo(e.state.facet(Ne).map(a=>a(e)),o))),e.dispatch({selection:o,scrollIntoView:r,userEvent:l}),!0}else return!1}function hi(e,t,i,o=-1){if(w.ios&&e.inputState.flushIOSKey(t))return!0;let n=e.state.selection.main;if(w.android&&(t.to==n.to&&(t.from==n.from||t.from==n.from-1&&e.state.sliceDoc(t.from,n.from)==" ")&&t.insert.length==1&&t.insert.lines==2&&ye(e.contentDOM,"Enter",13)||(t.from==n.from-1&&t.to==n.to&&t.insert.length==0||o==8&&t.insert.length<t.to-t.from&&t.to>n.head)&&ye(e.contentDOM,"Backspace",8)||t.from==n.from&&t.to==n.to+1&&t.insert.length==0&&ye(e.contentDOM,"Delete",46)))return!0;let s=t.insert.toString();e.inputState.composing>=0&&e.inputState.composing++;let r,l=()=>r||(r=rr(e,t,i));return e.state.facet(co).some(a=>a(e,t.from,t.to,s,l))||e.dispatch(l()),!0}function rr(e,t,i){let o,n=e.state,s=n.selection.main,r=-1;if(t.from==t.to&&t.from<s.from||t.from>s.to){let a=t.from<s.from?-1:1,h=a<0?s.from:s.to,c=Fe(n.facet(Ne).map(u=>u(e)),h,a);t.from==c&&(r=c)}if(r>-1)o={changes:t,selection:x.cursor(t.from+t.insert.length,-1)};else if(t.from>=s.from&&t.to<=s.to&&t.to-t.from>=(s.to-s.from)/3&&(!i||i.main.empty&&i.main.from==t.from+t.insert.length)&&e.inputState.composing<0){let a=s.from<t.from?n.sliceDoc(s.from,t.from):"",h=s.to>t.to?n.sliceDoc(t.to,s.to):"";o=n.replaceSelection(e.state.toText(a+t.insert.sliceString(0,void 0,e.state.lineBreak)+h))}else{let a=n.changes(t),h=i&&i.main.to<=a.newLength?i.main:void 0;if(n.selection.ranges.length>1&&(e.inputState.composing>=0||e.inputState.compositionPendingChange)&&t.to<=s.to+10&&t.to>=s.to-10){let c=e.state.sliceDoc(t.from,t.to),u,d=i&&To(e,i.main.head);if(d){let p=t.insert.length-(t.to-t.from);u={from:d.from,to:d.to-p}}else u=e.state.doc.lineAt(s.head);let f=s.to-t.to;o=n.changeByRange(p=>{if(p.from==s.from&&p.to==s.to)return{changes:a,range:h||p.map(a)};let g=p.to-f,m=g-c.length;if(e.state.sliceDoc(m,g)!=c||g>=u.from&&m<=u.to)return{range:p};let v=n.changes({from:m,to:g,insert:t.insert}),b=p.to-s.to;return{changes:v,range:h?x.range(Math.max(0,h.anchor+b),Math.max(0,h.head+b)):p.map(v)}})}else o={changes:a,selection:h&&n.selection.replaceRange(h)}}let l="input.type";return(e.composing||e.inputState.compositionPendingChange&&e.inputState.compositionEndedAt>Date.now()-50)&&(e.inputState.compositionPendingChange=!1,l+=".compose",e.inputState.compositionFirstChange&&(l+=".start",e.inputState.compositionFirstChange=!1)),n.update(o,{userEvent:l,scrollIntoView:!0})}function Wo(e,t,i,o){let n=Math.min(e.length,t.length),s=0;for(;s<n&&e.charCodeAt(s)==t.charCodeAt(s);)s++;if(s==n&&e.length==t.length)return null;let r=e.length,l=t.length;for(;r>0&&l>0&&e.charCodeAt(r-1)==t.charCodeAt(l-1);)r--,l--;if(o=="end"){let a=Math.max(0,s-Math.min(r,l));i-=r+a-s}if(r<s&&e.length<t.length){let a=i<=s&&i>=r?s-i:0;s-=a,l=s+(l-r),r=s}else if(l<s){let a=i<=s&&i>=l?s-i:0;s-=a,r=s+(r-l),l=s}return{from:s,toA:r,toB:l}}function lr(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:i,anchorOffset:o,focusNode:n,focusOffset:s}=e.observer.selectionRange;return i&&(t.push(new Eo(i,o)),(n!=i||s!=o)&&t.push(new Eo(n,s))),t}function ar(e,t){if(e.length==0)return null;let i=e[0].pos,o=e.length==2?e[1].pos:i;return i>-1&&o>-1?x.single(i+t,o+t):null}var hr=class{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,w.safari&&e.contentDOM.addEventListener("input",()=>null),w.gecko&&Mr(e.contentDOM.ownerDocument)}handleEvent(e){!vr(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let i=this.handlers[e];if(i){for(let o of i.observers)o(this.view,t);for(let o of i.handlers){if(t.defaultPrevented)break;if(o(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=cr(e),i=this.handlers,o=this.view.contentDOM;for(let n in t)if(n!="scroll"){let s=!t[n].handlers.length,r=i[n];r&&s!=!r.handlers.length&&(o.removeEventListener(n,this.handleEvent),r=null),r||o.addEventListener(n,this.handleEvent,{passive:s})}for(let n in i)n!="scroll"&&!t[n]&&o.removeEventListener(n,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Vo.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),w.android&&w.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return w.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=Po.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||dr.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,ye(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:w.safari&&!w.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}};function No(e,t){return(i,o)=>{try{return t.call(e,o,i)}catch(n){q(i.state,n)}}}function cr(e){let t=Object.create(null);function i(o){return t[o]||(t[o]={observers:[],handlers:[]})}for(let o of e){let n=o.spec,s=n&&n.plugin.domEventHandlers,r=n&&n.plugin.domEventObservers;if(s)for(let l in s){let a=s[l];a&&i(l).handlers.push(No(o.value,a))}if(r)for(let l in r){let a=r[l];a&&i(l).observers.push(No(o.value,a))}}for(let o in K)i(o).handlers.push(K[o]);for(let o in F)i(o).observers.push(F[o]);return t}var Po=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],dr="dthko",Vo=[16,17,18,20,91,92,224,225],lt=6;function at(e){return Math.max(0,e)*.7+8}function ur(e,t){return Math.max(Math.abs(e.clientX-t.clientX),Math.abs(e.clientY-t.clientY))}var fr=class{constructor(e,t,i,o){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=o,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=ws(e.contentDOM),this.atoms=e.state.facet(Ne).map(s=>s(e));let n=e.contentDOM.ownerDocument;n.addEventListener("mousemove",this.move=this.move.bind(this)),n.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(De.allowMultipleSelections)&&pr(e,t),this.dragging=mr(e,t)&&Xo(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&ur(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,i=0,o=0,n=0,s=this.view.win.innerWidth,r=this.view.win.innerHeight;this.scrollParents.x&&({left:o,right:s}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:n,bottom:r}=this.scrollParents.y.getBoundingClientRect());let l=ei(this.view);e.clientX-l.left<=o+lt?t=-at(o-e.clientX):e.clientX+l.right>=s-lt&&(t=at(e.clientX-s)),e.clientY-l.top<=n+lt?i=-at(n-e.clientY):e.clientY+l.bottom>=r-lt&&(i=at(e.clientY-r)),this.setScrollSpeed(t,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,i=Oo(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}};function pr(e,t){let i=e.state.facet(ro);return i.length?i[0](t):w.mac?t.metaKey:t.ctrlKey}function gr(e,t){let i=e.state.facet(lo);return i.length?i[0](t):w.mac?!t.altKey:!t.ctrlKey}function mr(e,t){let{main:i}=e.state.selection;if(i.empty)return!1;let o=Be(e.root);if(!o||o.rangeCount==0)return!0;let n=o.getRangeAt(0).getClientRects();for(let s=0;s<n.length;s++){let r=n[s];if(r.left<=t.clientX&&r.right>=t.clientX&&r.top<=t.clientY&&r.bottom>=t.clientY)return!0}return!1}function vr(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let i=t.target,o;i!=e.contentDOM;i=i.parentNode)if(!i||i.nodeType==11||(o=R.get(i))&&o.isWidget()&&!o.isHidden&&o.widget.ignoreEvent(t))return!1;return!0}var K=Object.create(null),F=Object.create(null),Fo=w.ie&&w.ie_version<15||w.ios&&w.webkit_version<604;function wr(e){let t=e.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout(()=>{e.focus(),i.remove(),zo(e,i.value)},50)}function ht(e,t,i){for(let o of e.facet(t))i=o(i,e);return i}function zo(e,t){t=ht(e.state,Qt,t);let{state:i}=e,o,n=1,s=i.toText(t),r=s.lines==i.selection.ranges.length;if(ci!=null&&i.selection.ranges.every(l=>l.empty)&&ci==s.toString()){let l=-1;o=i.changeByRange(a=>{let h=i.doc.lineAt(a.from);if(h.from==l)return{range:a};l=h.from;let c=i.toText((r?s.line(n++).text:t)+i.lineBreak);return{changes:{from:h.from,insert:c},range:x.cursor(a.from+c.length)}})}else r?o=i.changeByRange(l=>{let a=s.line(n++);return{changes:{from:l.from,to:l.to,insert:a.text},range:x.cursor(l.from+a.length)}}):o=i.replaceSelection(s);e.dispatch(o,{userEvent:"input.paste",scrollIntoView:!0})}F.scroll=e=>{e.inputState.lastScrollTop=e.scrollDOM.scrollTop,e.inputState.lastScrollLeft=e.scrollDOM.scrollLeft},K.keydown=(e,t)=>(e.inputState.setSelectionOrigin("select"),t.keyCode==27&&e.inputState.tabFocusMode!=0&&(e.inputState.tabFocusMode=Date.now()+2e3),!1),F.touchstart=(e,t)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},F.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},K.mousedown=(e,t)=>{if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3)return!1;let i=null;for(let o of e.state.facet(ao))if(i=o(e,t),i)break;if(!i&&t.button==0&&(i=yr(e,t)),i){let o=!e.hasFocus;e.inputState.startMouseSelection(new fr(e,t,i,o)),o&&e.observer.ignore(()=>{$i(e.contentDOM);let s=e.root.activeElement;s&&!s.contains(e.contentDOM)&&s.blur()});let n=e.inputState.mouseSelection;if(n)return n.start(t),n.dragging===!1}else e.inputState.setSelectionOrigin("select.pointer");return!1};function Io(e,t,i,o){if(o==1)return x.cursor(t,i);if(o==2)return _s(e.state,t,i);{let n=e.docView.lineAt(t,i),s=e.state.doc.lineAt(n?n.posAtEnd:t),r=n?n.posAtStart:s.from,l=n?n.posAtEnd:s.to;return l<e.state.doc.length&&l==s.to&&l++,x.range(r,l)}}var br=w.ie&&w.ie_version<=11,qo=null,Ko=0,Yo=0;function Xo(e){if(!br)return e.detail;let t=qo,i=Yo;return qo=e,Yo=Date.now(),Ko=!t||i>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(Ko+1)%3:1}function yr(e,t){let i=e.posAndSideAtCoords({x:t.clientX,y:t.clientY},!1),o=Xo(t),n=e.state.selection;return{update(s){s.docChanged&&(i.pos=s.changes.mapPos(i.pos),n=n.map(s.changes))},get(s,r,l){let a=e.posAndSideAtCoords({x:s.clientX,y:s.clientY},!1),h,c=Io(e,a.pos,a.assoc,o);if(i.pos!=a.pos&&!r){let u=Io(e,i.pos,i.assoc,o),d=Math.min(u.from,c.from),f=Math.max(u.to,c.to);c=d<c.from?x.range(d,f):x.range(f,d)}return r?n.replaceRange(n.main.extend(c.from,c.to)):l&&o==1&&n.ranges.length>1&&(h=xr(n,a.pos))?h:l?n.addRange(c):x.create([c])}}}function xr(e,t){for(let i=0;i<e.ranges.length;i++){let{from:o,to:n}=e.ranges[i];if(o<=t&&n>=t)return x.create(e.ranges.slice(0,i).concat(e.ranges.slice(i+1)),e.mainIndex==i?0:e.mainIndex-(e.mainIndex>i?1:0))}return null}K.dragstart=(e,t)=>{let{selection:{main:i}}=e.state;if(t.target.draggable){let n=e.docView.tile.nearest(t.target);if(n&&n.isWidget()){let s=n.posAtStart,r=s+n.length;(s>=i.to||r<=i.from)&&(i=x.range(s,r))}}let{inputState:o}=e;return o.mouseSelection&&(o.mouseSelection.dragging=!0),o.draggedContent=i,t.dataTransfer&&(t.dataTransfer.setData("Text",ht(e.state,_t,e.state.sliceDoc(i.from,i.to))),t.dataTransfer.effectAllowed="copyMove"),!1},K.dragend=e=>(e.inputState.draggedContent=null,!1);function Go(e,t,i,o){if(i=ht(e.state,Qt,i),!i)return;let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1),{draggedContent:s}=e.inputState,r=o&&s&&gr(e,t)?{from:s.from,to:s.to}:null,l={from:n,insert:i},a=e.state.changes(r?[r,l]:l);e.focus(),e.dispatch({changes:a,selection:{anchor:a.mapPos(n,-1),head:a.mapPos(n,1)},userEvent:r?"move.drop":"input.drop"}),e.inputState.draggedContent=null}K.drop=(e,t)=>{if(!t.dataTransfer)return!1;if(e.state.readOnly)return!0;let i=t.dataTransfer.files;if(i&&i.length){let o=Array(i.length),n=0,s=()=>{++n==i.length&&Go(e,t,o.filter(r=>r!=null).join(e.state.lineBreak),!1)};for(let r=0;r<i.length;r++){let l=new FileReader;l.onerror=s,l.onload=()=>{/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(l.result)||(o[r]=l.result),s()},l.readAsText(i[r])}return!0}else{let o=t.dataTransfer.getData("Text");if(o)return Go(e,t,o,!0),!0}return!1},K.paste=(e,t)=>{if(e.state.readOnly)return!0;e.observer.flush();let i=Fo?null:t.clipboardData;return i?(zo(e,i.getData("text/plain")||i.getData("text/uri-list")),!0):(wr(e),!1)};function Sr(e,t){let i=e.dom.parentNode;if(!i)return;let o=i.appendChild(document.createElement("textarea"));o.style.cssText="position: fixed; left: -10000px; top: 10px",o.value=t,o.focus(),o.selectionEnd=t.length,o.selectionStart=0,setTimeout(()=>{o.remove(),e.focus()},50)}function Cr(e){let t=[],i=[],o=!1;for(let n of e.selection.ranges)n.empty||(t.push(e.sliceDoc(n.from,n.to)),i.push(n));if(!t.length){let n=-1;for(let{from:s}of e.selection.ranges){let r=e.doc.lineAt(s);r.number>n&&(t.push(r.text),i.push({from:r.from,to:Math.min(e.doc.length,r.to+1)})),n=r.number}o=!0}return{text:ht(e,_t,t.join(e.lineBreak)),ranges:i,linewise:o}}var ci=null;K.copy=K.cut=(e,t)=>{let{text:i,ranges:o,linewise:n}=Cr(e.state);if(!i&&!n)return!1;ci=n?i:null,t.type=="cut"&&!e.state.readOnly&&e.dispatch({changes:o,scrollIntoView:!0,userEvent:"delete.cut"});let s=Fo?null:t.clipboardData;return s?(s.clearData(),s.setData("text/plain",i),!0):(Sr(e,i),!1)};var jo=rs.define();function $o(e,t){let i=[];for(let o of e.facet(uo)){let n=o(e,t);n&&i.push(n)}return i.length?e.update({effects:i,annotations:jo.of(!0)}):null}function Uo(e){setTimeout(()=>{let t=e.hasFocus;if(t!=e.inputState.notifiedFocused){let i=$o(e.state,t);i?e.dispatch(i):e.update([])}},10)}F.focus=e=>{e.inputState.lastFocusTime=Date.now(),!e.scrollDOM.scrollTop&&(e.inputState.lastScrollTop||e.inputState.lastScrollLeft)&&(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),Uo(e)},F.blur=e=>{e.observer.clearSelectionRange(),Uo(e)},F.compositionstart=F.compositionupdate=e=>{e.observer.editContext||(e.inputState.compositionFirstChange==null&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0))},F.compositionend=e=>{e.observer.editContext||(e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionPendingKey=!0,e.inputState.compositionPendingChange=e.observer.pendingRecords().length>0,e.inputState.compositionFirstChange=null,w.chrome&&w.android?e.observer.flushSoon():e.inputState.compositionPendingChange?Promise.resolve().then(()=>e.observer.flush()):setTimeout(()=>{e.inputState.composing<0&&e.docView.hasComposition&&e.update([])},50))},F.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},K.beforeinput=(e,t)=>{var i,o;if((t.inputType=="insertText"||t.inputType=="insertCompositionText")&&(e.inputState.insertingText=t.data,e.inputState.insertingTextAt=Date.now()),t.inputType=="insertReplacementText"&&e.observer.editContext){let s=(i=t.dataTransfer)===null||i===void 0?void 0:i.getData("text/plain"),r=t.getTargetRanges();if(s&&r.length){let l=r[0],a=e.posAtDOM(l.startContainer,l.startOffset),h=e.posAtDOM(l.endContainer,l.endOffset);return hi(e,{from:a,to:h,insert:e.state.toText(s)},null),!0}}let n;if(w.chrome&&w.android&&(n=Po.find(s=>s.inputType==t.inputType))&&(e.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let s=((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0;setTimeout(()=>{var r;(((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0)>s+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())},100)}return w.ios&&t.inputType=="deleteContentForward"&&e.observer.flushSoon(),w.safari&&t.inputType=="insertText"&&e.inputState.composing>=0&&setTimeout(()=>F.compositionend(e,t),20),!1};var Qo=new Set;function Mr(e){Qo.has(e)||(Qo.add(e),e.addEventListener("copy",()=>{}),e.addEventListener("cut",()=>{}))}var _o=["pre-wrap","normal","pre-line","break-spaces"],pe=!1;function di(){pe=!1}var Jo=class{constructor(e){this.lineWrapping=e,this.doc=I.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return _o.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let o=e[i];o<0?i++:this.heightSamples[Math.floor(o*10)]||(t=!0,this.heightSamples[Math.floor(o*10)]=!0)}return t}refresh(e,t,i,o,n,s){let r=_o.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=r;if(this.lineWrapping=r,this.lineHeight=t,this.charWidth=i,this.textHeight=o,this.lineLength=n,l){this.heightSamples={};for(let a=0;a<s.length;a++){let h=s[a];h<0?a++:this.heightSamples[Math.floor(h*10)]=!0}}return l}},Zo=class{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}},U=class Zn{constructor(t,i,o,n,s){this.from=t,this.length=i,this.top=o,this.height=n,this._content=s}get type(){return typeof this._content=="number"?H.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Oe?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(t){let i=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(t._content)?t._content:[t]);return new Zn(this.from,this.length+t.length,this.top,this.height+t.height,i)}},O=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(O||(O={})),ct=.001,z=class Dt{constructor(t,i,o=2){this.length=t,this.height=i,this.flags=o}get outdated(){return(this.flags&2)>0}set outdated(t){this.flags=(t?2:0)|this.flags&-3}setHeight(t){this.height!=t&&(Math.abs(this.height-t)>ct&&(pe=!0),this.height=t)}replace(t,i,o){return Dt.of(o)}decomposeLeft(t,i){i.push(this)}decomposeRight(t,i){i.push(this)}applyChanges(t,i,o,n){let s=this,r=o.doc;for(let l=n.length-1;l>=0;l--){let{fromA:a,toA:h,fromB:c,toB:u}=n[l],d=s.lineAt(a,O.ByPosNoHeight,o.setDoc(i),0,0),f=d.to>=h?d:s.lineAt(h,O.ByPosNoHeight,o,0,0);for(u+=f.to-h,h=f.to;l>0&&d.from<=n[l-1].toA;)a=n[l-1].fromA,c=n[l-1].fromB,l--,a<d.from&&(d=s.lineAt(a,O.ByPosNoHeight,o,0,0));c+=d.from-a,a=d.from;let p=Dr.build(o.setDoc(r),t,c,u);s=dt(s,s.replace(a,h,p))}return s.updateHeight(o,0)}static empty(){return new Q(0,0,0)}static of(t){if(t.length==1)return t[0];let i=0,o=t.length,n=0,s=0;for(;;)if(i==o)if(n>s*2){let l=t[i-1];l.break?t.splice(--i,1,l.left,null,l.right):t.splice(--i,1,l.left,l.right),o+=1+l.break,n-=l.size}else if(s>n*2){let l=t[o];l.break?t.splice(o,1,l.left,null,l.right):t.splice(o,1,l.left,l.right),o+=2+l.break,s-=l.size}else break;else if(n<s){let l=t[i++];l&&(n+=l.size)}else{let l=t[--o];l&&(s+=l.size)}let r=0;return t[i-1]==null?(r=1,i--):t[i]==null&&(r=1,o++),new Ar(Dt.of(t.slice(0,i)),r,Dt.of(t.slice(o)))}};function dt(e,t){return e==t?e:(e.constructor!=t.constructor&&(pe=!0),t)}z.prototype.size=1;var kr=T.replace({}),en=class extends z{constructor(e,t,i){super(e,t),this.deco=i,this.spaceAbove=0}mainBlock(e,t){return new U(t,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(e,t,i,o){return this.spaceAbove&&e<i+this.spaceAbove?new U(o,0,i,this.spaceAbove,kr):this.mainBlock(i,o)}lineAt(e,t,i,o,n){let s=this.mainBlock(o,n);return this.spaceAbove?this.blockAt(0,i,o,n).join(s):s}forEachLine(e,t,i,o,n,s){e<=n+this.length&&t>=n&&s(this.lineAt(0,O.ByPos,i,o,n))}setMeasuredHeight(e){let t=e.heights[e.index++];t<0?(this.spaceAbove=-t,t=e.heights[e.index++]):this.spaceAbove=0,this.setHeight(t)}updateHeight(e,t=0,i=!1,o){return o&&o.from<=t&&o.more&&this.setMeasuredHeight(o),this.outdated=!1,this}toString(){return`block(${this.length})`}},Q=class Hi extends en{constructor(t,i,o){super(t,i,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=o}mainBlock(t,i){return new U(i,this.length,t+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(t,i,o){let n=o[0];return o.length==1&&(n instanceof Hi||n instanceof Me&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof Me?n=new Hi(n.length,this.height,this.spaceAbove):n.height=this.height,this.outdated||(n.outdated=!1),n):z.of(o)}updateHeight(t,i=0,o=!1,n){return n&&n.from<=i&&n.more?this.setMeasuredHeight(n):(o||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))+this.breaks*t.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}},Me=class Y extends z{constructor(t){super(t,0)}heightMetrics(t,i){let o=t.doc.lineAt(i).number,n=t.doc.lineAt(i+this.length).number,s=n-o+1,r,l=0;if(t.lineWrapping){let a=Math.min(this.height,t.lineHeight*s);r=a/s,this.length>s+1&&(l=(this.height-a)/(this.length-s-1))}else r=this.height/s;return{firstLine:o,lastLine:n,perLine:r,perChar:l}}blockAt(t,i,o,n){let{firstLine:s,lastLine:r,perLine:l,perChar:a}=this.heightMetrics(i,n);if(i.lineWrapping){let h=n+(t<i.lineHeight?0:Math.round(Math.max(0,Math.min(1,(t-o)/this.height))*this.length)),c=i.doc.lineAt(h),u=l+c.length*a,d=Math.max(o,t-u/2);return new U(c.from,c.length,d,u,0)}else{let h=Math.max(0,Math.min(r-s,Math.floor((t-o)/l))),{from:c,length:u}=i.doc.line(s+h);return new U(c,u,o+l*h,l,0)}}lineAt(t,i,o,n,s){if(i==O.ByHeight)return this.blockAt(t,o,n,s);if(i==O.ByPosNoHeight){let{from:f,to:p}=o.doc.lineAt(t);return new U(f,p-f,0,0,0)}let{firstLine:r,perLine:l,perChar:a}=this.heightMetrics(o,s),h=o.doc.lineAt(t),c=l+h.length*a,u=h.number-r,d=n+l*u+a*(h.from-s-u);return new U(h.from,h.length,Math.max(n,Math.min(d,n+this.height-c)),c,0)}forEachLine(t,i,o,n,s,r){t=Math.max(t,s),i=Math.min(i,s+this.length);let{firstLine:l,perLine:a,perChar:h}=this.heightMetrics(o,s);for(let c=t,u=n;c<=i;){let d=o.doc.lineAt(c);if(c==t){let p=d.number-l;u+=a*p+h*(t-s-p)}let f=a+h*d.length;r(new U(d.from,d.length,u,f,0)),u+=f,c=d.to+1}}replace(t,i,o){let n=this.length-i;if(n>0){let s=o[o.length-1];s instanceof Y?o[o.length-1]=new Y(s.length+n):o.push(null,new Y(n-1))}if(t>0){let s=o[0];s instanceof Y?o[0]=new Y(t+s.length):o.unshift(new Y(t-1),null)}return z.of(o)}decomposeLeft(t,i){i.push(new Y(t-1),null)}decomposeRight(t,i){i.push(null,new Y(this.length-t-1))}updateHeight(t,i=0,o=!1,n){let s=i+this.length;if(n&&n.from<=i+this.length&&n.more){let r=[],l=Math.max(i,n.from),a=-1;for(n.from>i&&r.push(new Y(n.from-i-1).updateHeight(t,i));l<=s&&n.more;){let c=t.doc.lineAt(l).length;r.length&&r.push(null);let u=n.heights[n.index++],d=0;u<0&&(d=-u,u=n.heights[n.index++]),a==-1?a=u:Math.abs(u-a)>=ct&&(a=-2);let f=new Q(c,u,d);f.outdated=!1,r.push(f),l+=c+1}l<=s&&r.push(null,new Y(s-l).updateHeight(t,l));let h=z.of(r);return(a<0||Math.abs(h.height-this.height)>=ct||Math.abs(a-this.heightMetrics(t,i).perLine)>=ct)&&(pe=!0),dt(this,h)}else(o||this.outdated)&&(this.setHeight(t.heightForGap(i,i+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}},Ar=class extends z{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,o){let n=i+this.left.height;return e<n?this.left.blockAt(e,t,i,o):this.right.blockAt(e,t,n,o+this.left.length+this.break)}lineAt(e,t,i,o,n){let s=o+this.left.height,r=n+this.left.length+this.break,l=t==O.ByHeight?e<s:e<r,a=l?this.left.lineAt(e,t,i,o,n):this.right.lineAt(e,t,i,s,r);if(this.break||(l?a.to<r:a.from>r))return a;let h=t==O.ByPosNoHeight?O.ByPosNoHeight:O.ByPos;return l?a.join(this.right.lineAt(r,h,i,s,r)):this.left.lineAt(r,h,i,o,n).join(a)}forEachLine(e,t,i,o,n,s){let r=o+this.left.height,l=n+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,i,o,n,s),t>=l&&this.right.forEachLine(e,t,i,r,l,s);else{let a=this.lineAt(l,O.ByPos,i,o,n);e<a.from&&this.left.forEachLine(e,a.from-1,i,o,n,s),a.to>=e&&a.from<=t&&s(a),t>a.to&&this.right.forEachLine(a.to+1,t,i,r,l,s)}}replace(e,t,i){let o=this.left.length+this.break;if(t<o)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-o,t-o,i));let n=[];e>0&&this.decomposeLeft(e,n);let s=n.length;for(let r of i)n.push(r);if(e>0&&tn(n,s-1),t<this.length){let r=n.length;this.decomposeRight(t,n),tn(n,r)}return z.of(n)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,o=i+this.break;if(e>=o)return this.right.decomposeRight(e-o,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<o&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?z.of(this.break?[e,null,t]:[e,t]):(this.left=dt(this.left,e),this.right=dt(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,o){let{left:n,right:s}=this,r=t+n.length+this.break,l=null;return o&&o.from<=t+n.length&&o.more?l=n=n.updateHeight(e,t,i,o):n.updateHeight(e,t,i),o&&o.from<=r+s.length&&o.more?l=s=s.updateHeight(e,r,i,o):s.updateHeight(e,r,i),l?this.balanced(n,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}};function tn(e,t){let i,o;e[t]==null&&(i=e[t-1])instanceof Me&&(o=e[t+1])instanceof Me&&e.splice(t-1,3,new Me(i.length+1+o.length))}var Tr=5,Dr=class es{constructor(t,i){this.pos=t,this.oracle=i,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,i){if(this.lineStart>-1){let o=Math.min(i,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Q?n.length+=o-this.pos:(o>this.pos||!this.isCovered)&&this.nodes.push(new Q(o-this.pos,-1,0)),this.writtenTo=o,i>o&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=i}point(t,i,o){if(t<i||o.heightRelevant){let n=o.widget?o.widget.estimatedHeight:0,s=o.widget?o.widget.lineBreaks:0;n<0&&(n=this.oracle.lineHeight);let r=i-t;o.block?this.addBlock(new en(r,n,o)):(r||s||n>=Tr)&&this.addLineDeco(n,s,r)}else i>t&&this.span(t,i);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:i}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=i,this.writtenTo<t&&((this.writtenTo<t-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new Q(this.pos-t,-1,0)),this.writtenTo=this.pos}blankContent(t,i){let o=new Me(i-t);return this.oracle.doc.lineAt(t).to==i&&(o.flags|=4),o}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof Q)return t;let i=new Q(0,-1,0);return this.nodes.push(i),i}addBlock(t){this.enterLine();let i=t.deco;i&&i.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,i&&i.endSide>0&&(this.covering=t)}addLineDeco(t,i,o){let n=this.ensureLine();n.length+=o,n.collapsed+=o,n.widgetHeight=Math.max(n.widgetHeight,t),n.breaks+=i,this.writtenTo=this.pos=this.pos+o}finish(t){let i=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(i instanceof Q)&&!this.isCovered?this.nodes.push(new Q(0,-1,0)):(this.writtenTo<this.pos||i==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let o=t;for(let n of this.nodes)n instanceof Q&&n.updateHeight(this.oracle,o),o+=n?n.length:1;return this.nodes}static build(t,i,o,n){let s=new es(o,t);return E.spans(i,o,n,s,0),s.finish(o)}};function Or(e,t,i){let o=new Br;return E.compare(e,t,i,o,0),o.changes}var Br=class{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,o){(e<t||i&&i.heightRelevant||o&&o.heightRelevant)&&be(e,t,this.changes,5)}};function Lr(e,t){let i=e.getBoundingClientRect(),o=e.ownerDocument,n=o.defaultView||window,s=Math.max(0,i.left),r=Math.min(n.innerWidth,i.right),l=Math.max(0,i.top),a=Math.min(n.innerHeight,i.bottom);for(let h=e.parentNode;h&&h!=o.body;)if(h.nodeType==1){let c=h,u=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&u.overflow!="visible"){let d=c.getBoundingClientRect();s=Math.max(s,d.left),r=Math.min(r,d.right),l=Math.max(l,d.top),a=Math.min(h==e.parentNode?n.innerHeight:a,d.bottom)}h=u.position=="absolute"||u.position=="fixed"?c.offsetParent:c.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:s-i.left,right:Math.max(s,r)-i.left,top:l-(i.top+t),bottom:Math.max(l,a)-(i.top+t)}}function Er(e){let t=e.getBoundingClientRect(),i=e.ownerDocument.defaultView||window;return t.left<i.innerWidth&&t.right>0&&t.top<i.innerHeight&&t.bottom>0}function Rr(e,t){let i=e.getBoundingClientRect();return{left:0,right:i.right-i.left,top:t,bottom:i.bottom-(i.top+t)}}var ui=class{constructor(e,t,i,o){this.from=e,this.to=t,this.size=i,this.displaySize=o}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let o=e[i],n=t[i];if(o.from!=n.from||o.to!=n.to||o.size!=n.size)return!1}return!0}draw(e,t){return T.replace({widget:new Hr(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}},Hr=class extends re{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}},on=class{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=nn,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=B.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(et).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new Jo(t),this.stateDeco=e.facet(We).filter(i=>typeof i!="function"),this.heightMap=z.empty().applyChanges(this.stateDeco,I.empty,this.heightOracle.setDoc(e.doc),[new j(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=T.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let o=i?t.head:t.anchor;if(!e.some(({from:n,to:s})=>o>=n&&o<=s)){let{from:n,to:s}=this.lineBlockAt(o);e.push(new ut(n,s))}}return this.viewports=e.sort((i,o)=>i.from-o.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?nn:new Pr(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Ie(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(We).filter(h=>typeof h!="function");let o=e.changedRanges,n=j.extendWithRanges(o,Or(i,this.stateDeco,e?e.changes:Pi.empty(this.state.doc.length))),s=this.heightMap.height,r=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);di(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),n),(this.heightMap.height!=s||pe)&&(e.flags|=2),r?(this.scrollAnchorPos=e.changes.mapPos(r.from,-1),this.scrollAnchorHeight=r.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=s);let l=n.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let a=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(a||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(po)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),o=this.heightOracle,n=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?B.RTL:B.LTR;let s=this.heightOracle.mustRefreshForWrapping(n),r=t.getBoundingClientRect(),l=s||this.mustMeasureContent||this.contentDOMHeight!=r.height;this.contentDOMHeight=r.height,this.mustMeasureContent=!1;let a=0,h=0;if(r.width&&r.height){let{scaleX:C,scaleY:M}=ji(t,r);(C>.005&&Math.abs(this.scaleX-C)>.005||M>.005&&Math.abs(this.scaleY-M)>.005)&&(this.scaleX=C,this.scaleY=M,a|=16,s=l=!0)}let c=(parseInt(i.paddingTop)||0)*this.scaleY,u=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=c||this.paddingBottom!=u)&&(this.paddingTop=c,this.paddingBottom=u,a|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(o.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,a|=16);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=Qi(e.scrollDOM);let f=(this.printing?Rr:Lr)(t,this.paddingTop),p=f.top-this.pixelViewport.top,g=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(l=!0)),!this.inView&&!this.scrollTarget&&!Er(e.dom))return 0;let v=r.width;if((this.contentDOMWidth!=v||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=r.width,this.editorHeight=e.scrollDOM.clientHeight,a|=16),l){let C=e.docView.measureVisibleLineHeights(this.viewport);if(o.mustRefreshForHeights(C)&&(s=!0),s||o.lineWrapping&&Math.abs(v-this.contentDOMWidth)>o.charWidth){let{lineHeight:M,charWidth:y,textHeight:A}=e.docView.measureTextSize();s=M>0&&o.refresh(n,M,y,A,Math.max(5,v/y),C),s&&(e.docView.minWidth=0,a|=16)}p>0&&g>0?h=Math.max(p,g):p<0&&g<0&&(h=Math.min(p,g)),di();for(let M of this.viewports){let y=M.from==this.viewport.from?C:e.docView.measureVisibleLineHeights(M);this.heightMap=(s?z.empty().applyChanges(this.stateDeco,I.empty,this.heightOracle,[new j(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(o,0,s,new Zo(M.from,y))}pe&&(a|=2)}let b=!this.viewportIsAppropriate(this.viewport,h)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return b&&(a&2&&(a|=this.updateScaler()),this.viewport=this.getViewport(h,this.scrollTarget),a|=this.updateForViewport()),(a&2||b)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps,e)),a|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),a}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),o=this.heightMap,n=this.heightOracle,{visibleTop:s,visibleBottom:r}=this,l=new ut(o.lineAt(s-i*1e3,O.ByHeight,n,0,0).from,o.lineAt(r+(1-i)*1e3,O.ByHeight,n,0,0).to);if(t){let{head:a}=t.range;if(a<l.from||a>l.to){let h=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),c=o.lineAt(a,O.ByPos,n,0,0),u;t.y=="center"?u=(c.top+c.bottom)/2-h/2:t.y=="start"||t.y=="nearest"&&a<l.from?u=c.top:u=c.bottom-h,l=new ut(o.lineAt(u-1e3/2,O.ByHeight,n,0,0).from,o.lineAt(u+h+1e3/2,O.ByHeight,n,0,0).to)}}return l}mapViewport(e,t){let i=t.mapPos(e.from,-1),o=t.mapPos(e.to,1);return new ut(this.heightMap.lineAt(i,O.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(o,O.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:o}=this.heightMap.lineAt(e,O.ByPos,this.heightOracle,0,0),{bottom:n}=this.heightMap.lineAt(t,O.ByPos,this.heightOracle,0,0),{visibleTop:s,visibleBottom:r}=this;return(e==0||o<=s-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||n>=r+Math.max(10,Math.min(i,250)))&&o>s-2*1e3&&n<r+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let o of e)t.touchesRange(o.from,o.to)||i.push(new ui(t.mapPos(o.from),t.mapPos(o.to),o.size,o.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,o=i?1e4:2e3,n=o>>1,s=o<<1;if(this.defaultTextDirection!=B.LTR&&!i)return[];let r=[],l=(h,c,u,d)=>{if(c-h<n)return;let f=this.state.selection.main,p=[f.from];f.empty||p.push(f.to);for(let m of p)if(m>h&&m<c){l(h,m-10,u,d),l(m+10,c,u,d);return}let g=Nr(e,m=>m.from>=u.from&&m.to<=u.to&&Math.abs(m.from-h)<n&&Math.abs(m.to-c)<n&&!p.some(v=>m.from<v&&m.to>v));if(!g){if(c<u.to&&t&&i&&t.visibleRanges.some(b=>b.from<=c&&b.to>=c)){let b=t.moveToLineBoundary(x.cursor(c),!1,!0).head;b>h&&(c=b)}let m=this.gapSize(u,h,c,d),v=i||m<2e6?m:2e6;g=new ui(h,c,m,v)}r.push(g)},a=h=>{if(h.length<s||h.type!=H.Text)return;let c=Wr(h.from,h.to,this.stateDeco);if(c.total<s)return;let u=this.scrollTarget?this.scrollTarget.range.head:null,d,f;if(i){let p=o/this.heightOracle.lineLength*this.heightOracle.lineHeight,g,m;if(u!=null){let v=pt(c,u),b=((this.visibleBottom-this.visibleTop)/2+p)/h.height;g=v-b,m=v+b}else g=(this.visibleTop-h.top-p)/h.height,m=(this.visibleBottom-h.top+p)/h.height;d=ft(c,g),f=ft(c,m)}else{let p=c.total*this.heightOracle.charWidth,g=o*this.heightOracle.charWidth,m=0;if(p>2e6)for(let y of e)y.from>=h.from&&y.from<h.to&&y.size!=y.displaySize&&y.from*this.heightOracle.charWidth+m<this.pixelViewport.left&&(m=y.size-y.displaySize);let v=this.pixelViewport.left+m,b=this.pixelViewport.right+m,C,M;if(u!=null){let y=pt(c,u),A=((b-v)/2+g)/p;C=y-A,M=y+A}else C=(v-g)/p,M=(b+g)/p;d=ft(c,C),f=ft(c,M)}d>h.from&&l(h.from,d,h,c),f<h.to&&l(f,h.to,h,c)};for(let h of this.viewportLines)Array.isArray(h.type)?h.type.forEach(a):a(h);return r}gapSize(e,t,i,o){let n=pt(o,i)-pt(o,t);return this.heightOracle.lineWrapping?e.height*n:o.total*this.heightOracle.charWidth*n}updateLineGaps(e){ui.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=T.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let i=[];E.spans(t,this.viewport.from,this.viewport.to,{span(n,s){i.push({from:n,to:s})},point(){}},20);let o=0;if(i.length!=this.visibleRanges.length)o=12;else for(let n=0;n<i.length&&!(o&8);n++){let s=this.visibleRanges[n],r=i[n];(s.from!=r.from||s.to!=r.to)&&(o|=4,e&&e.mapPos(s.from,-1)==r.from&&e.mapPos(s.to,1)==r.to||(o|=8))}return this.visibleRanges=i,o}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Ie(this.heightMap.lineAt(e,O.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Ie(this.heightMap.lineAt(this.scaler.fromDOM(e),O.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Ie(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}},ut=class{constructor(e,t){this.from=e,this.to=t}};function Wr(e,t,i){let o=[],n=e,s=0;return E.spans(i,e,t,{span(){},point(r,l){r>n&&(o.push({from:n,to:r}),s+=r-n),n=l}},20),n<t&&(o.push({from:n,to:t}),s+=t-n),{total:s,ranges:o}}function ft({total:e,ranges:t},i){if(i<=0)return t[0].from;if(i>=1)return t[t.length-1].to;let o=Math.floor(e*i);for(let n=0;;n++){let{from:s,to:r}=t[n],l=r-s;if(o<=l)return s+o;o-=l}}function pt(e,t){let i=0;for(let{from:o,to:n}of e.ranges){if(t<=n){i+=t-o;break}i+=n-o}return i/e.total}function Nr(e,t){for(let i of e)if(t(i))return i}var nn={toDOM(e){return e},fromDOM(e){return e},scale:1,eq(e){return e==this}},Pr=class ts{constructor(t,i,o){let n=0,s=0,r=0;this.viewports=o.map(({from:l,to:a})=>{let h=i.lineAt(l,O.ByPos,t,0,0).top,c=i.lineAt(a,O.ByPos,t,0,0).bottom;return n+=c-h,{from:l,to:a,top:h,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(i.height-n);for(let l of this.viewports)l.domTop=r+(l.top-s)*this.scale,r=l.domBottom=l.domTop+(l.bottom-l.top),s=l.bottom}toDOM(t){for(let i=0,o=0,n=0;;i++){let s=i<this.viewports.length?this.viewports[i]:null;if(!s||t<s.top)return n+(t-o)*this.scale;if(t<=s.bottom)return s.domTop+(t-s.top);o=s.bottom,n=s.domBottom}}fromDOM(t){for(let i=0,o=0,n=0;;i++){let s=i<this.viewports.length?this.viewports[i]:null;if(!s||t<s.domTop)return o+(t-n)/this.scale;if(t<=s.domBottom)return s.top+(t-s.domTop);o=s.bottom,n=s.domBottom}}eq(t){return t instanceof ts?this.scale==t.scale&&this.viewports.length==t.viewports.length&&this.viewports.every((i,o)=>i.from==t.viewports[o].from&&i.to==t.viewports[o].to):!1}};function Ie(e,t){if(t.scale==1)return e;let i=t.toDOM(e.top),o=t.toDOM(e.bottom);return new U(e.from,e.length,i,o-i,Array.isArray(e._content)?e._content.map(n=>Ie(n,t)):e._content)}var gt=S.define({combine:e=>e.join(" ")}),fi=S.define({combine:e=>e.indexOf(!0)>-1}),pi=ve.newName(),sn=ve.newName(),rn=ve.newName(),ln={"&light":"."+sn,"&dark":"."+rn};function gi(e,t,i){return new ve(t,{finish(o){return/&/.test(o)?o.replace(/&\\w*/,n=>{if(n=="&")return e;if(!i||!i[n])throw new RangeError(`Unsupported selector: ${n}`);return i[n]}):e+" "+o}})}var Vr=gi("."+pi,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},ln),Fr={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},mi=w.ie&&w.ie_version<=11,zr=class{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new bs,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(w.ie&&w.ie_version<=11||w.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&w.android&&e.constructor.EDIT_CONTEXT!==!1&&!(w.chrome&&w.chrome_version<126)&&(this.editContext=new qr(e),e.state.facet(te)&&(e.contentDOM.editContext=this.editContext.editContext)),mi&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,o=this.selectionRange;if(i.state.facet(te)?i.root.activeElement!=this.dom:!_e(this.dom,o))return;let n=o.anchorNode&&i.docView.tile.nearest(o.anchorNode);if(n&&n.isWidget()&&n.widget.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(w.ie&&w.ie_version<=11||w.android&&w.chrome)&&!i.state.selection.main.empty&&o.focusNode&&Ee(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Be(e.root);if(!t)return!1;let i=w.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&Ir(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let o=_e(this.dom,i);return o&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&xs(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),o&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Fr),mi&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),mi&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let o=()=>{let n=this.delayedAndroidKey;n&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=n.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&n.force&&ye(this.dom,n.key,n.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(o)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,o=!1;for(let n of e){let s=this.readMutation(n);s&&(s.typeOver&&(o=!0),t==-1?{from:t,to:i}=s:(t=Math.min(s.from,t),i=Math.max(s.to,i)))}return{from:t,to:i,typeOver:o}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),o=this.selectionChanged&&_e(this.dom,this.selectionRange);if(e<0&&!o)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let n=new sr(this.view,e,t,i);return this.view.docView.domChanged={newSel:n.newSel?n.newSel.main:null},n}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,o=Ho(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),o}readMutation(e){let t=this.view.docView.tile.nearest(e.target);if(!t||t.isWidget())return null;if(t.markDirty(e.type=="attributes"),e.type=="childList"){let i=an(t,e.previousSibling||e.target.previousSibling,-1),o=an(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:o?t.posBefore(o):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(te)!=e.state.facet(te)&&(e.view.contentDOM.editContext=e.state.facet(te)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let o of this.scrollTargets)o.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}};function an(e,t,i){for(;t;){let o=R.get(t);if(o&&o.parent==e)return o;let n=t.parentNode;t=n!=e.dom?n:i>0?t.nextSibling:t.previousSibling}return null}function hn(e,t){let i=t.startContainer,o=t.startOffset,n=t.endContainer,s=t.endOffset,r=e.docView.domAtPos(e.state.selection.main.anchor,1);return Ee(r.node,r.offset,n,s)&&([i,o,n,s]=[n,s,i,o]),{anchorNode:i,anchorOffset:o,focusNode:n,focusOffset:s}}function Ir(e,t){if(t.getComposedRanges){let n=t.getComposedRanges(e.root)[0];if(n)return hn(e,n)}let i=null;function o(n){n.preventDefault(),n.stopImmediatePropagation(),i=n.getTargetRanges()[0]}return e.contentDOM.addEventListener("beforeinput",o,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",o,!0),i?hn(e,i):null}var qr=class{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let o=e.state.selection.main,{anchor:n,head:s}=o,r=this.toEditorPos(i.updateRangeStart),l=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:r,drifted:!1});let a=l-r>i.text.length;r==this.from&&n<this.from?r=n:l==this.to&&n>this.to&&(l=n);let h=Wo(e.state.sliceDoc(r,l),i.text,(a?o.from:o.to)-r,a?"end":null);if(!h){let u=x.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));u.main.eq(o)||e.dispatch({selection:u,userEvent:"select"});return}let c={from:h.from+r,to:h.toA+r,insert:I.of(i.text.slice(h.from,h.toB).split(`\n`))};if((w.mac||w.android)&&c.from==s-1&&/^\\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(c={from:r,to:l,insert:I.of([i.text.replace("."," ")])}),this.pendingContextChange=c,!e.state.readOnly){let u=this.to-this.from+(c.to-c.from+c.insert.length);hi(e,c,x.single(this.toEditorPos(i.selectionStart,u),this.toEditorPos(i.selectionEnd,u)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),c.from<c.to&&!c.insert.length&&e.inputState.composing>=0&&!/[\\\\p{Alphabetic}\\\\p{Number}_]/.test(t.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(t.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let o=[],n=null;for(let s=this.toEditorPos(i.rangeStart),r=this.toEditorPos(i.rangeEnd);s<r;s++){let l=e.coordsForChar(s);n=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||n||new DOMRect,o.push(n)}t.updateCharacterBounds(i.rangeStart,o)},this.handlers.textformatupdate=i=>{let o=[];for(let n of i.getTextFormats()){let s=n.underlineStyle,r=n.underlineThickness;if(!/none/i.test(s)&&!/none/i.test(r)){let l=this.toEditorPos(n.rangeStart),a=this.toEditorPos(n.rangeEnd);if(l<a){let h=`text-decoration: underline ${/^[a-z]/.test(s)?s+" ":s=="Dashed"?"dashed ":s=="Squiggle"?"wavy ":""}${/thin/i.test(r)?1:2}px`;o.push(T.mark({attributes:{style:h}}).range(l,a))}}}e.dispatch({effects:mo.of(T.set(o))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)t.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let o=Be(i.root);o&&o.rangeCount&&this.editContext.updateSelectionBounds(o.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,o=this.pendingContextChange;return e.changes.iterChanges((n,s,r,l,a)=>{if(i)return;let h=a.length-(s-n);if(o&&s>=o.to)if(o.from==n&&o.to==s&&o.insert.eq(a)){o=this.pendingContextChange=null,t+=h,this.to+=h;return}else o=null,this.revertPending(e.state);if(n+=t,s+=t,s<=this.from)this.from+=h,this.to+=h;else if(n<this.to){if(n<this.from||s>this.to||this.to-this.from+a.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(n),this.toContextPos(s),a.toString()),this.to+=h}t+=h}),o&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(o=>!o.isUserEvent("input.type")&&o.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),o=this.toContextPos(t.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=o)&&this.editContext.updateSelection(i,o)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}},k=class Wi{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(t={}){var i;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),t.parent&&t.parent.appendChild(this.dom);let{dispatch:o}=t;this.dispatchTransactions=t.dispatchTransactions||o&&(n=>n.forEach(s=>o(s,this)))||(n=>this.update(n)),this.dispatch=this.dispatch.bind(this),this._root=t.root||ys(t.parent)||document,this.viewState=new on(t.state||De.create(t)),t.scrollTo&&t.scrollTo.is(Ze)&&(this.viewState.scrollTarget=t.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(xe).map(n=>new Zt(n));for(let n of this.plugins)n.update(this);this.observer=new zr(this),this.inputState=new hr(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Ao(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((i=document.fonts)===null||i===void 0)&&i.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...t){let i=t.length==1&&t[0]instanceof ls?t:t.length==1&&Array.isArray(t[0])?t[0]:[this.state.update(...t)];this.dispatchTransactions(i,this)}update(t){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let i=!1,o=!1,n,s=this.state;for(let d of t){if(d.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn\'t start from the previous state.");s=d.state}if(this.destroyed){this.viewState.state=s;return}let r=this.hasFocus,l=0,a=null;t.some(d=>d.annotation(jo))?(this.inputState.notifiedFocused=r,l=1):r!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=r,a=$o(s,r),a||(l=1));let h=this.observer.delayedAndroidKey,c=null;if(h?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(De.phrases)!=this.state.facet(De.phrases))return this.setState(s);n=ti.create(this,s,t),n.flags|=l;let u=this.viewState.scrollTarget;try{this.updateState=2;for(let d of t){if(u&&(u=u.map(d.changes)),d.scrollIntoView){let{main:f}=d.state.selection;u=new Jt(f.empty?f:x.cursor(f.head,f.head>f.anchor?-1:1))}for(let f of d.effects)f.is(Ze)&&(u=f.value.clip(this.state))}this.viewState.update(n,u),this.bidiCache=dn.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),i=this.docView.update(n),this.state.facet(Pe)!=this.styleModules&&this.mountStyles(),o=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(i,t.some(d=>d.isUserEvent("select.pointer")))}finally{this.updateState=0}if(n.startState.facet(gt)!=n.state.facet(gt)&&(this.viewState.mustMeasureContent=!0),(i||o||u||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),i&&this.docViewUpdate(),!n.empty)for(let d of this.state.facet(Ut))try{d(n)}catch(f){q(this.state,f,"update listener")}(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!Ho(this,c)&&h.force&&ye(this.contentDOM,h.key,h.keyCode)})}setState(t){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=t;return}this.updateState=2;let i=this.hasFocus;try{for(let o of this.plugins)o.destroy(this);this.viewState=new on(t),this.plugins=t.facet(xe).map(o=>new Zt(o)),this.pluginMap.clear();for(let o of this.plugins)o.update(this);this.docView.destroy(),this.docView=new Ao(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}i&&this.focus(),this.requestMeasure()}updatePlugins(t){let i=t.startState.facet(xe),o=t.state.facet(xe);if(i!=o){let n=[];for(let s of o){let r=i.indexOf(s);if(r<0)n.push(new Zt(s));else{let l=this.plugins[r];l.mustUpdate=t,n.push(l)}}for(let s of this.plugins)s.mustUpdate!=t&&s.destroy(this);this.plugins=n,this.pluginMap.clear()}else for(let n of this.plugins)n.mustUpdate=t;for(let n=0;n<this.plugins.length;n++)this.plugins[n].update(this);i!=o&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let t of this.plugins){let i=t.value;if(i&&i.docViewUpdate)try{i.docViewUpdate(this)}catch(o){q(this.state,o,"doc view update listener")}}}measure(t=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,t&&this.observer.forceFlush();let i=null,o=this.scrollDOM,n=o.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:r}=this.viewState;Math.abs(n-this.viewState.scrollTop)>1&&(r=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(r<0)if(Qi(o))s=-1,r=this.viewState.heightMap.height;else{let f=this.viewState.scrollAnchorAt(n);s=f.from,r=f.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];a&4||([this.measureRequests,h]=[h,this.measureRequests]);let c=h.map(f=>{try{return f.read(this)}catch(p){return q(this.state,p),cn}}),u=ti.create(this,this.state,[]),d=!1;u.flags|=a,i?i.flags|=a:i=u,this.updateState=2,u.empty||(this.updatePlugins(u),this.inputState.update(u),this.updateAttrs(),d=this.docView.update(u),d&&this.docViewUpdate());for(let f=0;f<h.length;f++)if(c[f]!=cn)try{let p=h[f];p.write&&p.write(c[f],this)}catch(p){q(this.state,p)}if(d&&this.docView.updateSelection(!0),!u.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,r=-1;continue}else{let f=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-r;if(f>1||f<-1){n=n+f,o.scrollTop=n/this.scaleY,r=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(i&&!i.empty)for(let l of this.state.facet(Ut))l(i)}get themeClasses(){return pi+" "+(this.state.facet(fi)?rn:sn)+" "+this.state.facet(gt)}updateAttrs(){let t=un(this,vo,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),i={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(te)?"true":"false",class:"cm-content",style:`${w.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(i["aria-readonly"]="true"),un(this,et,i);let o=this.observer.ignore(()=>{let n=Yi(this.contentDOM,this.contentAttrs,i),s=Yi(this.dom,this.editorAttrs,t);return n||s});return this.editorAttrs=t,this.contentAttrs=i,o}showAnnouncements(t){let i=!0;for(let o of t)for(let n of o.effects)if(n.is(Wi.announce)){i&&(this.announceDOM.textContent=""),i=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(Pe);let t=this.state.facet(Wi.cspNonce);ve.mount(this.root,this.styleModules.concat(Vr).reverse(),t?{nonce:t}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn\'t allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),t){if(this.measureRequests.indexOf(t)>-1)return;if(t.key!=null){for(let i=0;i<this.measureRequests.length;i++)if(this.measureRequests[i].key===t.key){this.measureRequests[i]=t;return}}this.measureRequests.push(t)}}plugin(t){let i=this.pluginMap.get(t);return(i===void 0||i&&i.plugin!=t)&&this.pluginMap.set(t,i=this.plugins.find(o=>o.plugin==t)||null),i&&i.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,i,o){return li(this,t,Do(this,t,i,o))}moveByGroup(t,i){return li(this,t,Do(this,t,i,o=>er(this,t.head,o)))}visualLineSide(t,i){let o=this.bidiSpans(t),n=this.textDirectionAt(t.from),s=o[i?o.length-1:0];return x.cursor(s.side(i,n)+t.from,s.forward(!i,n)?1:-1)}moveToLineBoundary(t,i,o=!0){return Zs(this,t,i,o)}moveVertically(t,i,o){return li(this,t,tr(this,t,i,o))}domAtPos(t,i=1){return this.docView.domAtPos(t,i)}posAtDOM(t,i=0){return this.docView.posFromDOM(t,i)}posAtCoords(t,i=!0){this.readMeasured();let o=ai(this,t,i);return o&&o.pos}posAndSideAtCoords(t,i=!0){return this.readMeasured(),ai(this,t,i)}coordsAtPos(t,i=1){this.readMeasured();let o=this.docView.coordsAt(t,i);if(!o||o.left==o.right)return o;let n=this.state.doc.lineAt(t),s=this.bidiSpans(n),r=s[G.find(s,t-n.from,-1,i)];return Re(o,r.dir==B.LTR==i>0)}coordsForChar(t){return this.readMeasured(),this.docView.coordsForChar(t)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(fo)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>Kr)return oo(t.length);let i=this.textDirectionAt(t.from),o;for(let s of this.bidiCache)if(s.from==t.from&&s.dir==i&&(s.fresh||to(s.isolates,o=xo(this,t))))return s.order;o||(o=xo(this,t));let n=io(t.text,i,o);return this.bidiCache.push(new dn(t.from,t.to,i,o,!0,n)),n}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||w.safari&&((t=this.inputState)===null||t===void 0?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{$i(this.contentDOM),this.docView.updateSelection()})}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((t.nodeType==9?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,i={}){return Ze.of(new Jt(typeof t=="number"?x.cursor(t):t,i.y,i.x,i.yMargin,i.xMargin))}scrollSnapshot(){let{scrollTop:t,scrollLeft:i}=this.scrollDOM,o=this.viewState.scrollAnchorAt(t);return Ze.of(new Jt(x.cursor(o.from),"start","start",o.top-t,i,!0))}setTabFocusMode(t){t==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof t=="boolean"?this.inputState.tabFocusMode=t?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+t)}static domEventHandlers(t){return P.define(()=>({}),{eventHandlers:t})}static domEventObservers(t){return P.define(()=>({}),{eventObservers:t})}static theme(t,i){let o=ve.newName(),n=[gt.of(o),Pe.of(gi(`.${o}`,t))];return i&&i.dark&&n.push(fi.of(!0)),n}static baseTheme(t){return Lt.lowest(Pe.of(gi("."+pi,t,ln)))}static findFromDOM(t){var i;let o=t.querySelector(".cm-content");return((i=(o&&R.get(o)||R.get(t))?.root)===null||i===void 0?void 0:i.view)||null}};k.styleModule=Pe,k.inputHandler=co,k.clipboardInputFilter=Qt,k.clipboardOutputFilter=_t,k.scrollHandler=go,k.focusChangeEffect=uo,k.perLineTextDirection=fo,k.exceptionSink=ho,k.updateListener=Ut,k.editable=te,k.mouseSelectionStyle=ao,k.dragMovesSelection=lo,k.clickAddsSelectionRange=ro,k.decorations=We,k.blockWrappers=wo,k.outerDecorations=bo,k.atomicRanges=Ne,k.bidiIsolatedRanges=yo,k.scrollMargins=So,k.darkTheme=fi,k.cspNonce=S.define({combine:e=>e.length?e[0]:""}),k.contentAttributes=et,k.editorAttributes=vo,k.lineWrapping=k.contentAttributes.of({class:"cm-lineWrapping"}),k.announce=Z.define();var Kr=4096,cn={},dn=class is{constructor(t,i,o,n,s,r){this.from=t,this.to=i,this.dir=o,this.isolates=n,this.fresh=s,this.order=r}static update(t,i){if(i.empty&&!t.some(s=>s.fresh))return t;let o=[],n=t.length?t[t.length-1].dir:B.LTR;for(let s=Math.max(0,t.length-10);s<t.length;s++){let r=t[s];r.dir==n&&!i.touchesRange(r.from,r.to)&&o.push(new is(i.mapPos(r.from,1),i.mapPos(r.to,-1),r.dir,r.isolates,!1,r.order))}return o}};function un(e,t,i){for(let o=e.state.facet(t),n=o.length-1;n>=0;n--){let s=o[n],r=typeof s=="function"?s(e):s;r&&Ft(r,i)}return i}var Yr=w.mac?"mac":w.windows?"win":w.linux?"linux":"key";function Xr(e,t){let i=e.split(/-(?!$)/),o=i[i.length-1];o=="Space"&&(o=" ");let n,s,r,l;for(let a=0;a<i.length-1;++a){let h=i[a];if(/^(cmd|meta|m)$/i.test(h))l=!0;else if(/^a(lt)?$/i.test(h))n=!0;else if(/^(c|ctrl|control)$/i.test(h))s=!0;else if(/^s(hift)?$/i.test(h))r=!0;else if(/^mod$/i.test(h))t=="mac"?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+h)}return n&&(o="Alt-"+o),s&&(o="Ctrl-"+o),l&&(o="Meta-"+o),r&&(o="Shift-"+o),o}function mt(e,t,i){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),i!==!1&&t.shiftKey&&(e="Shift-"+e),e}var Gr=Lt.default(k.domEventHandlers({keydown(e,t){return mn(gn(t.state),e,t,"editor")}})),fn=S.define({enables:Gr}),pn=new WeakMap;function gn(e){let t=e.facet(fn),i=pn.get(t);return i||pn.set(t,i=Ur(t.reduce((o,n)=>o.concat(n),[]))),i}function jr(e,t,i){return mn(gn(e.state),t,e,i)}var he=null,$r=4e3;function Ur(e,t=Yr){let i=Object.create(null),o=Object.create(null),n=(r,l)=>{let a=o[r];if(a==null)o[r]=l;else if(a!=l)throw new Error("Key binding "+r+" is used both as a regular binding and as a multi-stroke prefix")},s=(r,l,a,h,c)=>{var u,d;let f=i[r]||(i[r]=Object.create(null)),p=l.split(/ (?!$)/).map(v=>Xr(v,t));for(let v=1;v<p.length;v++){let b=p.slice(0,v).join(" ");n(b,!0),f[b]||(f[b]={preventDefault:!0,stopPropagation:!1,run:[C=>{let M=he={view:C,prefix:b,scope:r};return setTimeout(()=>{he==M&&(he=null)},$r),!0}]})}let g=p.join(" ");n(g,!1);let m=f[g]||(f[g]={preventDefault:!1,stopPropagation:!1,run:((d=(u=f._any)===null||u===void 0?void 0:u.run)===null||d===void 0?void 0:d.slice())||[]});a&&m.run.push(a),h&&(m.preventDefault=!0),c&&(m.stopPropagation=!0)};for(let r of e){let l=r.scope?r.scope.split(" "):["editor"];if(r.any)for(let h of l){let c=i[h]||(i[h]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:u}=r;for(let d in c)c[d].run.push(f=>u(f,vi))}let a=r[t]||r.key;if(a)for(let h of l)s(h,a,r.run,r.preventDefault,r.stopPropagation),r.shift&&s(h,"Shift-"+a,r.shift,r.preventDefault,r.stopPropagation)}return i}var vi=null;function mn(e,t,i,o){vi=t;let n=cs(t),s=Vi(n,0),r=as(s)==n.length&&n!=" ",l="",a=!1,h=!1,c=!1;he&&he.view==i&&he.scope==o&&(l=he.prefix+" ",Vo.indexOf(t.keyCode)<0&&(h=!0,he=null));let u=new Set,d=m=>{if(m){for(let v of m.run)if(!u.has(v)&&(u.add(v),v(i)))return m.stopPropagation&&(c=!0),!0;m.preventDefault&&(m.stopPropagation&&(c=!0),h=!0)}return!1},f=e[o],p,g;return f&&(d(f[l+mt(n,t,!r)])?a=!0:r&&(t.altKey||t.metaKey||t.ctrlKey)&&!(w.windows&&t.ctrlKey&&t.altKey)&&!(w.mac&&t.altKey&&!(t.ctrlKey||t.metaKey))&&(p=ds[t.keyCode])&&p!=n?(d(f[l+mt(p,t,!0)])||t.shiftKey&&(g=us[t.keyCode])!=n&&g!=p&&d(f[l+mt(g,t,!1)]))&&(a=!0):r&&t.shiftKey&&d(f[l+mt(n,t,!0)])&&(a=!0),!a&&d(f._any)&&(a=!0)),h&&(a=!0),a&&c&&t.stopPropagation(),vi=null,a}var vt=class os{constructor(t,i,o,n,s){this.className=t,this.left=i,this.top=o,this.width=n,this.height=s}draw(){let t=document.createElement("div");return t.className=this.className,this.adjust(t),t}update(t,i){return i.className!=this.className?!1:(this.adjust(t),!0)}adjust(t){t.style.left=this.left+"px",t.style.top=this.top+"px",this.width!=null&&(t.style.width=this.width+"px"),t.style.height=this.height+"px"}eq(t){return this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height&&this.className==t.className}static forRange(t,i,o){if(o.empty){let n=t.coordsAtPos(o.head,o.assoc||1);if(!n)return[];let s=vn(t);return[new os(i,n.left-s.left,n.top-s.top,null,n.bottom-n.top)]}else return Qr(t,i,o)}};function vn(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==B.LTR?t.left:t.right-e.scrollDOM.clientWidth*e.scaleX)-e.scrollDOM.scrollLeft*e.scaleX,top:t.top-e.scrollDOM.scrollTop*e.scaleY}}function wn(e,t,i,o){let n=e.coordsAtPos(t,i*2);if(!n)return o;let s=e.dom.getBoundingClientRect(),r=(n.top+n.bottom)/2,l=e.posAtCoords({x:s.left+1,y:r}),a=e.posAtCoords({x:s.right-1,y:r});return l==null||a==null?o:{from:Math.max(o.from,Math.min(l,a)),to:Math.min(o.to,Math.max(l,a))}}function Qr(e,t,i){if(i.to<=e.viewport.from||i.from>=e.viewport.to)return[];let o=Math.max(i.from,e.viewport.from),n=Math.min(i.to,e.viewport.to),s=e.textDirection==B.LTR,r=e.contentDOM,l=r.getBoundingClientRect(),a=vn(e),h=r.querySelector(".cm-line"),c=h&&window.getComputedStyle(h),u=l.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),d=l.right-(c?parseInt(c.paddingRight):0),f=ri(e,o,1),p=ri(e,n,-1),g=f.type==H.Text?f:null,m=p.type==H.Text?p:null;if(g&&(e.lineWrapping||f.widgetLineBreaks)&&(g=wn(e,o,1,g)),m&&(e.lineWrapping||p.widgetLineBreaks)&&(m=wn(e,n,-1,m)),g&&m&&g.from==m.from&&g.to==m.to)return b(C(i.from,i.to,g));{let y=g?C(i.from,null,g):M(f,!1),A=m?C(null,i.to,m):M(p,!0),L=[];return(g||f).to<(m||p).from-(g&&m?1:0)||f.widgetLineBreaks>1&&y.bottom+e.defaultLineHeight/2<A.top?L.push(v(u,y.bottom,d,A.top)):y.bottom<A.top&&e.elementAtHeight((y.bottom+A.top)/2).type==H.Text&&(y.bottom=A.top=(y.bottom+A.top)/2),b(y).concat(L).concat(b(A))}function v(y,A,L,W){return new vt(t,y-a.left,A-a.top,L-y,W-A)}function b({top:y,bottom:A,horizontal:L}){let W=[];for(let oe=0;oe<L.length;oe+=2)W.push(v(L[oe],y,L[oe+1],A));return W}function C(y,A,L){let W=1e9,oe=-1e9,Ge=[];function Ni(ce,ne,ge,de,Te){let _=e.coordsAtPos(ce,ce==L.to?-2:2),J=e.coordsAtPos(ge,ge==L.from?2:-2);!_||!J||(W=Math.min(_.top,J.top,W),oe=Math.max(_.bottom,J.bottom,oe),Te==B.LTR?Ge.push(s&&ne?u:_.left,s&&de?d:J.right):Ge.push(!s&&de?u:J.left,!s&&ne?d:_.right))}let je=y??L.from,$e=A??L.to;for(let ce of e.visibleRanges)if(ce.to>je&&ce.from<$e)for(let ne=Math.max(ce.from,je),ge=Math.min(ce.to,$e);;){let de=e.state.doc.lineAt(ne);for(let Te of e.bidiSpans(de)){let _=Te.from+de.from,J=Te.to+de.from;if(_>=ge)break;J>ne&&Ni(Math.max(_,ne),y==null&&_<=je,Math.min(J,ge),A==null&&J>=$e,Te.dir)}if(ne=de.to+1,ne>=ge)break}return Ge.length==0&&Ni(je,y==null,$e,A==null,e.textDirection),{top:W,bottom:oe,horizontal:Ge}}function M(y,A){let L=l.top+(A?y.top:y.bottom);return{top:L,bottom:L,horizontal:[]}}}function _r(e,t){return e.constructor==t.constructor&&e.eq(t)}var Jr=class{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(wt)!=e.state.facet(wt)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(wt);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!_r(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let o of e)o.update&&t&&o.constructor&&this.drawn[i].constructor&&o.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(o.draw(),t);for(;t;){let o=t.nextSibling;t.remove(),t=o}this.drawn=e,w.safari&&w.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}},wt=S.define();function wi(e){return[P.define(t=>new Jr(t,e)),wt.of(e)]}var ke=S.define({combine(e){return Et(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(t,i)=>Math.min(t,i),drawRangeCursor:(t,i)=>t||i})}});function Zr(e={}){return[ke.of(e),tl,il,ol,po.of(!0)]}function el(e){return e.facet(ke)}function bn(e){return e.startState.facet(ke)!=e.state.facet(ke)}var tl=wi({above:!0,markers(e){let{state:t}=e,i=t.facet(ke),o=[];for(let n of t.selection.ranges){let s=n==t.selection.main;if(n.empty||i.drawRangeCursor){let r=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=n.empty?n:x.cursor(n.head,n.head>n.anchor?-1:1);for(let a of vt.forRange(e,r,l))o.push(a)}}return o},update(e,t){e.transactions.some(o=>o.selection)&&(t.style.animationName=t.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let i=bn(e);return i&&yn(e.state,t),e.docChanged||e.selectionSet||i},mount(e,t){yn(t.state,e)},class:"cm-cursorLayer"});function yn(e,t){t.style.animationDuration=e.facet(ke).cursorBlinkRate+"ms"}var il=wi({above:!1,markers(e){return e.state.selection.ranges.map(t=>t.empty?[]:vt.forRange(e,"cm-selectionBackground",t)).reduce((t,i)=>t.concat(i))},update(e,t){return e.docChanged||e.selectionSet||e.viewportChanged||bn(e)},class:"cm-selectionLayer"}),ol=Lt.highest(k.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),xn=Z.define({map(e,t){return e==null?null:t.mapPos(e)}}),qe=Rt.define({create(){return null},update(e,t){return e!=null&&(e=t.changes.mapPos(e)),t.effects.reduce((i,o)=>o.is(xn)?o.value:i,e)}}),nl=P.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var t;let i=e.state.field(qe);i==null?this.cursor!=null&&((t=this.cursor)===null||t===void 0||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(qe)!=i||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:e}=this,t=e.state.field(qe),i=t!=null&&e.coordsAtPos(t);if(!i)return null;let o=e.scrollDOM.getBoundingClientRect();return{left:i.left-o.left+e.scrollDOM.scrollLeft*e.scaleX,top:i.top-o.top+e.scrollDOM.scrollTop*e.scaleY,height:i.bottom-i.top}}drawCursor(e){if(this.cursor){let{scaleX:t,scaleY:i}=this.view;e?(this.cursor.style.left=e.left/t+"px",this.cursor.style.top=e.top/i+"px",this.cursor.style.height=e.height/i+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(qe)!=e&&this.view.dispatch({effects:xn.of(e)})}},{eventObservers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){(e.target==this.view.contentDOM||!this.view.contentDOM.contains(e.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function sl(){return[qe,nl]}function Sn(e,t,i,o,n){t.lastIndex=0;for(let s=e.iterRange(i,o),r=i,l;!s.next().done;r+=s.value.length)if(!s.lineBreak)for(;l=t.exec(s.value);)n(r+l.index,l)}function rl(e,t){let i=e.visibleRanges;if(i.length==1&&i[0].from==e.viewport.from&&i[0].to==e.viewport.to)return i;let o=[];for(let{from:n,to:s}of i)n=Math.max(e.state.doc.lineAt(n).from,n-t),s=Math.min(e.state.doc.lineAt(s).to,s+t),o.length&&o[o.length-1].to>=n?o[o.length-1].to=s:o.push({from:n,to:s});return o}var bt=class{constructor(e){let{regexp:t,decoration:i,decorate:o,boundary:n,maxLength:s=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its \'g\' flag set");if(this.regexp=t,o)this.addMatch=(r,l,a,h)=>o(h,a,a+r[0].length,r,l);else if(typeof i=="function")this.addMatch=(r,l,a,h)=>{let c=i(r,l,a);c&&h(a,a+r[0].length,c)};else if(i)this.addMatch=(r,l,a,h)=>h(a,a+r[0].length,i);else throw new RangeError("Either \'decorate\' or \'decoration\' should be provided to MatchDecorator");this.boundary=n,this.maxLength=s}createDeco(e){let t=new hs,i=t.add.bind(t);for(let{from:o,to:n}of rl(e,this.maxLength))Sn(e.state.doc,this.regexp,o,n,(s,r)=>this.addMatch(r,e,s,i));return t.finish()}updateDeco(e,t){let i=1e9,o=-1;return e.docChanged&&e.changes.iterChanges((n,s,r,l)=>{l>=e.view.viewport.from&&r<=e.view.viewport.to&&(i=Math.min(r,i),o=Math.max(l,o))}),e.viewportMoved||o-i>1e3?this.createDeco(e.view):o>-1?this.updateRange(e.view,t.map(e.changes),i,o):t}updateRange(e,t,i,o){for(let n of e.visibleRanges){let s=Math.max(n.from,i),r=Math.min(n.to,o);if(r>=s){let l=e.state.doc.lineAt(s),a=l.to<r?e.state.doc.lineAt(r):l,h=Math.max(n.from,l.from),c=Math.min(n.to,a.to);if(this.boundary){for(;s>l.from;s--)if(this.boundary.test(l.text[s-1-l.from])){h=s;break}for(;r<a.to;r++)if(this.boundary.test(a.text[r-a.from])){c=r;break}}let u=[],d,f=(p,g,m)=>u.push(m.range(p,g));if(l==a)for(this.regexp.lastIndex=h-l.from;(d=this.regexp.exec(l.text))&&d.index<c-l.from;)this.addMatch(d,e,d.index+l.from,f);else Sn(e.state.doc,this.regexp,h,c,(p,g)=>this.addMatch(g,e,p,f));t=t.update({filterFrom:h,filterTo:c,filter:(p,g)=>p<h||g>c,add:u})}}return t}},bi=/x/.unicode!=null?"gu":"g",ll=new RegExp(`[\\0-\\b\n-\\x7F-\\x9F\\xAD\\u061C\\u200B\\u200E\\u200F\\u2028\\u2029\\u202D\\u202E\\u2066\\u2067\\u2069\\uFEFF\\uFFF9-\\uFFFC]`,bi),al={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"},yi=null;function hl(){var e;if(yi==null&&typeof document<"u"&&document.body){let t=document.body.style;yi=((e=t.tabSize)!==null&&e!==void 0?e:t.MozTabSize)!=null}return yi||!1}var yt=S.define({combine(e){let t=Et(e,{render:null,specialChars:ll,addSpecialChars:null});return(t.replaceTabs=!hl())&&(t.specialChars=new RegExp("	|"+t.specialChars.source,bi)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,bi)),t}});function cl(e={}){return[yt.of(e),dl()]}var Cn=null;function dl(){return Cn||(Cn=P.fromClass(class{constructor(e){this.view=e,this.decorations=T.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(yt)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new bt({regexp:e.specialChars,decoration:(t,i,o)=>{let{doc:n}=i.state,s=Vi(t[0],0);if(s==9){let r=n.lineAt(o),l=i.state.tabSize,a=Fi(r.text,l,o-r.from);return T.replace({widget:new gl((l-a%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=T.replace({widget:new pl(e,s)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let t=e.state.facet(yt);e.startState.facet(yt)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))}var ul="\\u2022";function fl(e){return e>=32?ul:e==10?"\\u2424":String.fromCharCode(9216+e)}var pl=class extends re{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=fl(this.code),i=e.state.phrase("Control character")+" "+(al[this.code]||"0x"+this.code.toString(16)),o=this.options.render&&this.options.render(this.code,i,t);if(o)return o;let n=document.createElement("span");return n.textContent=t,n.title=i,n.setAttribute("aria-label",i),n.className="cm-specialChar",n}ignoreEvent(){return!1}},gl=class extends re{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}},Mn=P.fromClass(class{constructor(){this.height=1e3,this.attrs={style:"padding-bottom: 1000px"}}update(e){let{view:t}=e,i=t.viewState.editorHeight-t.defaultLineHeight-t.documentPadding.top-.5;i>=0&&i!=this.height&&(this.height=i,this.attrs={style:`padding-bottom: ${i}px`})}});function ml(){return[Mn,et.of(e=>{var t;return((t=e.plugin(Mn))===null||t===void 0?void 0:t.attrs)||null})]}function vl(){return bl}var wl=T.line({class:"cm-activeLine"}),bl=P.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=-1,i=[];for(let o of e.state.selection.ranges){let n=e.lineBlockAt(o.head);n.from>t&&(i.push(wl.range(n.from)),t=n.from)}return T.set(i)}},{decorations:e=>e.decorations}),yl=class extends re{constructor(e){super(),this.content=e}toDOM(e){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),t.setAttribute("aria-hidden","true"),t}coordsAt(e){let t=e.firstChild?Le(e.firstChild):[];if(!t.length)return null;let i=window.getComputedStyle(e.parentNode),o=Re(t[0],i.direction!="rtl"),n=parseInt(i.lineHeight);return o.bottom-o.top>n*1.5?{left:o.left,right:o.right,top:o.top,bottom:o.top+n}:o}ignoreEvent(){return!1}};function xl(e){let t=P.fromClass(class{constructor(i){this.view=i,this.placeholder=e?T.set([T.widget({widget:new yl(e),side:1}).range(0)]):T.none}get decorations(){return this.view.state.doc.length?T.none:this.placeholder}},{decorations:i=>i.decorations});return typeof e=="string"?[t,k.contentAttributes.of({"aria-placeholder":e})]:t}var xi=2e3;function Sl(e,t,i){let o=Math.min(t.line,i.line),n=Math.max(t.line,i.line),s=[];if(t.off>xi||i.off>xi||t.col<0||i.col<0){let r=Math.min(t.off,i.off),l=Math.max(t.off,i.off);for(let a=o;a<=n;a++){let h=e.doc.line(a);h.length<=l&&s.push(x.range(h.from+r,h.to+l))}}else{let r=Math.min(t.col,i.col),l=Math.max(t.col,i.col);for(let a=o;a<=n;a++){let h=e.doc.line(a),c=Bt(h.text,r,e.tabSize,!0);if(c<0)s.push(x.cursor(h.to));else{let u=Bt(h.text,l,e.tabSize);s.push(x.range(h.from+c,h.from+u))}}}return s}function Cl(e,t){let i=e.coordsAtPos(e.viewport.from);return i?Math.round(Math.abs((i.left-t)/e.defaultCharacterWidth)):-1}function kn(e,t){let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1),o=e.state.doc.lineAt(i),n=i-o.from,s=n>xi?-1:n==o.length?Cl(e,t.clientX):Fi(o.text,e.state.tabSize,i-o.from);return{line:o.number,col:s,off:n}}function Ml(e,t){let i=kn(e,t),o=e.state.selection;return i?{update(n){if(n.docChanged){let s=n.changes.mapPos(n.startState.doc.line(i.line).from),r=n.state.doc.lineAt(s);i={line:r.number,col:i.col,off:Math.min(i.off,r.length)},o=o.map(n.changes)}},get(n,s,r){let l=kn(e,n);if(!l)return o;let a=Sl(e.state,i,l);return a.length?r?x.create(a.concat(o.ranges)):x.create(a):o}}:null}function kl(e){let t=e?.eventFilter||(i=>i.altKey&&i.button==0);return k.mouseSelectionStyle.of((i,o)=>t(o)?Ml(i,o):null)}var Al={Alt:[18,e=>!!e.altKey],Control:[17,e=>!!e.ctrlKey],Shift:[16,e=>!!e.shiftKey],Meta:[91,e=>!!e.metaKey]},Tl={style:"cursor: crosshair"};function Dl(e={}){let[t,i]=Al[e.key||"Alt"],o=P.fromClass(class{constructor(n){this.view=n,this.isDown=!1}set(n){this.isDown!=n&&(this.isDown=n,this.view.update([]))}},{eventObservers:{keydown(n){this.set(n.keyCode==t||i(n))},keyup(n){(n.keyCode==t||!i(n))&&this.set(!1)},mousemove(n){this.set(i(n))}}});return[o,k.contentAttributes.of(n=>{var s;return!((s=n.plugin(o))===null||s===void 0)&&s.isDown?Tl:null})]}var xt="-10000px",An=class{constructor(e,t,i,o){this.facet=t,this.createTooltipView=i,this.removeTooltipView=o,this.input=e.state.facet(t),this.tooltips=this.input.filter(s=>s);let n=null;this.tooltipViews=this.tooltips.map(s=>n=i(s,n))}update(e,t){var i;let o=e.state.facet(this.facet),n=o.filter(l=>l);if(o===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let s=[],r=t?[]:null;for(let l=0;l<n.length;l++){let a=n[l],h=-1;if(a){for(let c=0;c<this.tooltips.length;c++){let u=this.tooltips[c];u&&u.create==a.create&&(h=c)}if(h<0)s[l]=this.createTooltipView(a,l?s[l-1]:null),r&&(r[l]=!!a.above);else{let c=s[l]=this.tooltipViews[h];r&&(r[l]=t[h]),c.update&&c.update(e)}}}for(let l of this.tooltipViews)s.indexOf(l)<0&&(this.removeTooltipView(l),(i=l.destroy)===null||i===void 0||i.call(l));return t&&(r.forEach((l,a)=>t[a]=l),t.length=r.length),this.input=o,this.tooltips=n,this.tooltipViews=s,!0}};function Ol(e={}){return St.of(e)}function Bl(e){let t=e.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:t.clientHeight,right:t.clientWidth}}var St=S.define({combine:e=>{var t,i,o;return{position:w.ios?"absolute":((t=e.find(n=>n.position))===null||t===void 0?void 0:t.position)||"fixed",parent:((i=e.find(n=>n.parent))===null||i===void 0?void 0:i.parent)||null,tooltipSpace:((o=e.find(n=>n.tooltipSpace))===null||o===void 0?void 0:o.tooltipSpace)||Bl}}}),Tn=new WeakMap,Ct=P.fromClass(class{constructor(e){this.view=e,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let t=e.state.facet(St);this.position=t.position,this.parent=t.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new An(e,Si,(i,o)=>this.createTooltip(i,o),i=>{this.resizeObserver&&this.resizeObserver.unobserve(i.dom),i.dom.remove()}),this.above=this.manager.tooltips.map(i=>!!i.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(i=>{Date.now()>this.lastTransaction-50&&i.length>0&&i[i.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e,this.above);t&&this.observeIntersection();let i=t||e.geometryChanged,o=e.state.facet(St);if(o.position!=this.position&&!this.madeAbsolute){this.position=o.position;for(let n of this.manager.tooltipViews)n.dom.style.position=this.position;i=!0}if(o.parent!=this.parent){this.parent&&this.container.remove(),this.parent=o.parent,this.createContainer();for(let n of this.manager.tooltipViews)this.container.appendChild(n.dom);i=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);i&&this.maybeMeasure()}createTooltip(e,t){let i=e.create(this.view),o=t?t.dom:null;if(i.dom.classList.add("cm-tooltip"),e.arrow&&!i.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",i.dom.appendChild(n)}return i.dom.style.position=this.position,i.dom.style.top=xt,i.dom.style.left="0px",this.container.insertBefore(i.dom,o),i.mount&&i.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(i.dom),i}destroy(){var e,t,i;this.view.win.removeEventListener("resize",this.measureSoon);for(let o of this.manager.tooltipViews)o.dom.remove(),(e=o.destroy)===null||e===void 0||e.call(o);this.parent&&this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(i=this.intersectionObserver)===null||i===void 0||i.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=1,t=1,i=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(w.safari){let r=s.getBoundingClientRect();i=Math.abs(r.top+1e4)>1||Math.abs(r.left)>1}else i=!!s.offsetParent&&s.offsetParent!=this.container.ownerDocument.body}if(i||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(e=s.width/this.parent.offsetWidth,t=s.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);let o=this.view.scrollDOM.getBoundingClientRect(),n=ei(this.view);return{visible:{left:o.left+n.left,top:o.top+n.top,right:o.right-n.right,bottom:o.bottom-n.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,r)=>{let l=this.manager.tooltipViews[r];return l.getCoords?l.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(St).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:i}}writeMeasure(e){var t;if(e.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{visible:i,space:o,scaleX:n,scaleY:s}=e,r=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],h=this.manager.tooltipViews[l],{dom:c}=h,u=e.pos[l],d=e.size[l];if(!u||a.clip!==!1&&(u.bottom<=Math.max(i.top,o.top)||u.top>=Math.min(i.bottom,o.bottom)||u.right<Math.max(i.left,o.left)-.1||u.left>Math.min(i.right,o.right)+.1)){c.style.top=xt;continue}let f=a.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,p=f?7:0,g=d.right-d.left,m=(t=Tn.get(h))!==null&&t!==void 0?t:d.bottom-d.top,v=h.offset||El,b=this.view.textDirection==B.LTR,C=d.width>o.right-o.left?b?o.left:o.right-d.width:b?Math.max(o.left,Math.min(u.left-(f?14:0)+v.x,o.right-g)):Math.min(Math.max(o.left,u.left-g+(f?14:0)-v.x),o.right-g),M=this.above[l];!a.strictSide&&(M?u.top-m-p-v.y<o.top:u.bottom+m+p+v.y>o.bottom)&&M==o.bottom-u.bottom>u.top-o.top&&(M=this.above[l]=!M);let y=(M?u.top-o.top:o.bottom-u.bottom)-p;if(y<m&&h.resize!==!1){if(y<this.view.defaultLineHeight){c.style.top=xt;continue}Tn.set(h,m),c.style.height=(m=y)/s+"px"}else c.style.height&&(c.style.height="");let A=M?u.top-m-p-v.y:u.bottom+p+v.y,L=C+g;if(h.overlap!==!0)for(let W of r)W.left<L&&W.right>C&&W.top<A+m&&W.bottom>A&&(A=M?W.top-m-2-p:W.bottom+p+2);if(this.position=="absolute"?(c.style.top=(A-e.parent.top)/s+"px",Dn(c,(C-e.parent.left)/n)):(c.style.top=A/s+"px",Dn(c,C/n)),f){let W=u.left+(b?v.x:-v.x)-(C+14-7);f.style.left=W/n+"px"}h.overlap!==!0&&r.push({left:C,top:A,right:L,bottom:A+m}),c.classList.toggle("cm-tooltip-above",M),c.classList.toggle("cm-tooltip-below",!M),h.positioned&&h.positioned(e.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=xt}},{eventObservers:{scroll(){this.maybeMeasure()}}});function Dn(e,t){let i=parseInt(e.style.left,10);(isNaN(i)||Math.abs(t-i)>1)&&(e.style.left=t+"px")}var Ll=k.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"\'\'",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),El={x:0,y:0},Si=S.define({enables:[Ct,Ll]}),Ke=S.define({combine:e=>e.reduce((t,i)=>t.concat(i),[])}),On=class ns{static create(t){return new ns(t)}constructor(t){this.view=t,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new An(t,Ke,(i,o)=>this.createHostedView(i,o),i=>i.dom.remove())}createHostedView(t,i){let o=t.create(this.view);return o.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(o.dom,i?i.dom.nextSibling:this.dom.firstChild),this.mounted&&o.mount&&o.mount(this.view),o}mount(t){for(let i of this.manager.tooltipViews)i.mount&&i.mount(t);this.mounted=!0}positioned(t){for(let i of this.manager.tooltipViews)i.positioned&&i.positioned(t)}update(t){this.manager.update(t)}destroy(){var t;for(let i of this.manager.tooltipViews)(t=i.destroy)===null||t===void 0||t.call(i)}passProp(t){let i;for(let o of this.manager.tooltipViews){let n=o[t];if(n!==void 0){if(i===void 0)i=n;else if(i!==n)return}}return i}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}},Rl=Si.compute([Ke],e=>{let t=e.facet(Ke);return t.length===0?null:{pos:Math.min(...t.map(i=>i.pos)),end:Math.max(...t.map(i=>{var o;return(o=i.end)!==null&&o!==void 0?o:i.pos})),create:On.create,above:t[0].above,arrow:t.some(i=>i.arrow)}}),Hl=class{constructor(e,t,i,o,n){this.view=e,this.source=t,this.field=i,this.setHover=o,this.hoverTime=n,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.tile.nearest(t.target);if(!i)return;let o,n=1;if(i.isWidget())o=i.posAtStart;else{if(o=e.posAtCoords(t),o==null)return;let r=e.coordsAtPos(o);if(!r||t.y<r.top||t.y>r.bottom||t.x<r.left-e.defaultCharacterWidth||t.x>r.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(o)).find(h=>h.from<=o&&h.to>=o),a=l&&l.dir==B.RTL?-1:1;n=t.x<r.left?-a:a}let s=this.source(e,o,n);if(s?.then){let r=this.pending={pos:o};s.then(l=>{this.pending==r&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>q(e.state,l,"hover tooltip"))}else s&&!(Array.isArray(s)&&!s.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(s)?s:[s])})}get tooltip(){let e=this.view.plugin(Ct),t=e?e.manager.tooltips.findIndex(i=>i.create==On.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:o,tooltip:n}=this;if(o.length&&n&&!Wl(n.dom,e)||this.pending){let{pos:s}=o[0]||this.pending,r=(i=(t=o[0])===null||t===void 0?void 0:t.end)!==null&&i!==void 0?i:s;(s==r?this.view.posAtCoords(this.lastMove)!=s:!Nl(this.view,s,r,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}},Mt=4;function Wl(e,t){let{left:i,right:o,top:n,bottom:s}=e.getBoundingClientRect(),r;if(r=e.querySelector(".cm-tooltip-arrow")){let l=r.getBoundingClientRect();n=Math.min(l.top,n),s=Math.max(l.bottom,s)}return t.clientX>=i-Mt&&t.clientX<=o+Mt&&t.clientY>=n-Mt&&t.clientY<=s+Mt}function Nl(e,t,i,o,n,s){let r=e.scrollDOM.getBoundingClientRect(),l=e.documentTop+e.documentPadding.top+e.contentHeight;if(r.left>o||r.right<o||r.top>n||Math.min(r.bottom,l)<n)return!1;let a=e.posAtCoords({x:o,y:n},!1);return a>=t&&a<=i}function Pl(e,t={}){let i=Z.define(),o=Rt.define({create(){return[]},update(n,s){if(n.length&&(t.hideOnChange&&(s.docChanged||s.selection)?n=[]:t.hideOn&&(n=n.filter(r=>!t.hideOn(s,r))),s.docChanged)){let r=[];for(let l of n){let a=s.changes.mapPos(l.pos,-1,me.TrackDel);if(a!=null){let h=Object.assign(Object.create(null),l);h.pos=a,h.end!=null&&(h.end=s.changes.mapPos(h.end)),r.push(h)}}n=r}for(let r of s.effects)r.is(i)&&(n=r.value),r.is(Bn)&&(n=[]);return n},provide:n=>Ke.from(n)});return{active:o,extension:[o,P.define(n=>new Hl(n,e,o,i,t.hoverTime||300)),Rl]}}function Vl(e,t){let i=e.plugin(Ct);if(!i)return null;let o=i.manager.tooltips.indexOf(t);return o<0?null:i.manager.tooltipViews[o]}function Fl(e){return e.facet(Ke).some(t=>t)}var Bn=Z.define(),zl=Bn.of(null);function Il(e){let t=e.plugin(Ct);t&&t.maybeMeasure()}var Ci=S.define({combine(e){let t,i;for(let o of e)t=t||o.topContainer,i=i||o.bottomContainer;return{topContainer:t,bottomContainer:i}}});function ql(e){return e?[Ci.of(e)]:[]}function Ln(e,t){let i=e.plugin(En),o=i?i.specs.indexOf(t):-1;return o>-1?i.panels[o]:null}var En=P.fromClass(class{constructor(e){this.input=e.state.facet(At),this.specs=this.input.filter(i=>i),this.panels=this.specs.map(i=>i(e));let t=e.state.facet(Ci);this.top=new kt(e,!0,t.topContainer),this.bottom=new kt(e,!1,t.bottomContainer),this.top.sync(this.panels.filter(i=>i.top)),this.bottom.sync(this.panels.filter(i=>!i.top));for(let i of this.panels)i.dom.classList.add("cm-panel"),i.mount&&i.mount()}update(e){let t=e.state.facet(Ci);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new kt(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new kt(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let i=e.state.facet(At);if(i!=this.input){let o=i.filter(a=>a),n=[],s=[],r=[],l=[];for(let a of o){let h=this.specs.indexOf(a),c;h<0?(c=a(e.view),l.push(c)):(c=this.panels[h],c.update&&c.update(e)),n.push(c),(c.top?s:r).push(c)}this.specs=o,this.panels=n,this.top.sync(s),this.bottom.sync(r);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let o of this.panels)o.update&&o.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>k.scrollMargins.of(t=>{let i=t.plugin(e);return i&&{top:i.top.scrollMargin(),bottom:i.bottom.scrollMargin()}})}),kt=class{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Rn(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Rn(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}};function Rn(e){let t=e.nextSibling;return e.remove(),t}var At=S.define({enables:En});function Kl(e,t){let i,o=new Promise(r=>i=r),n=r=>Xl(r,t,i);e.state.field(Tt,!1)?e.dispatch({effects:Hn.of(n)}):e.dispatch({effects:Z.appendConfig.of(Tt.init(()=>[n]))});let s=Wn.of(n);return{close:s,result:o.then(r=>((e.win.queueMicrotask||(l=>e.win.setTimeout(l,10)))(()=>{e.state.field(Tt).indexOf(n)>-1&&e.dispatch({effects:s})}),r))}}function Yl(e,t){let i=e.state.field(Tt,!1)||[];for(let o of i){let n=Ln(e,o);if(n&&n.dom.classList.contains(t))return n}return null}var Tt=Rt.define({create(){return[]},update(e,t){for(let i of t.effects)i.is(Hn)?e=[i.value].concat(e):i.is(Wn)&&(e=e.filter(o=>o!=i.value));return e},provide:e=>At.computeN([e],t=>t.field(e))}),Hn=Z.define(),Wn=Z.define();function Xl(e,t,i){let o=t.content?t.content(e,()=>r(null)):null;if(!o){if(o=we("form"),t.input){let l=we("input",t.input);/^(text|password|number|email|tel|url)$/.test(l.type)&&l.classList.add("cm-textfield"),l.name||(l.name="input"),o.appendChild(we("label",(t.label||"")+": ",l))}else o.appendChild(document.createTextNode(t.label||""));o.appendChild(document.createTextNode(" ")),o.appendChild(we("button",{class:"cm-button",type:"submit"},t.submitLabel||"OK"))}let n=o.nodeName=="FORM"?[o]:o.querySelectorAll("form");for(let l=0;l<n.length;l++){let a=n[l];a.addEventListener("keydown",h=>{h.keyCode==27?(h.preventDefault(),r(null)):h.keyCode==13&&(h.preventDefault(),r(a))}),a.addEventListener("submit",h=>{h.preventDefault(),r(a)})}let s=we("div",o,we("button",{onclick:()=>r(null),"aria-label":e.state.phrase("close"),class:"cm-dialog-close",type:"button"},["\\xD7"]));t.class&&(s.className=t.class),s.classList.add("cm-dialog");function r(l){s.contains(s.ownerDocument.activeElement)&&e.focus(),i(l)}return{dom:s,top:t.top,mount:()=>{if(t.focus){let l;typeof t.focus=="string"?l=o.querySelector(t.focus):l=o.querySelector("input")||o.querySelector("button"),l&&"select"in l?l.select():l&&"focus"in l&&l.focus()}}}}var ie=class extends Ot{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}};ie.prototype.elementClass="",ie.prototype.toDOM=void 0,ie.prototype.mapMode=me.TrackBefore,ie.prototype.startSide=ie.prototype.endSide=-1,ie.prototype.point=!0;var Ye=S.define(),Nn=S.define(),Gl={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>E.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},Xe=S.define();function jl(e){return[ki(),Xe.of({...Gl,...e})]}var Mi=S.define({combine:e=>e.some(t=>t)});function ki(e){let t=[$l];return e&&e.fixed===!1&&t.push(Mi.of(!0)),t}var $l=P.fromClass(class{constructor(e){this.view=e,this.domAfter=null,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=e.state.facet(Xe).map(t=>new Vn(e,t)),this.fixed=!e.state.facet(Mi);for(let t of this.gutters)t.config.side=="after"?this.getDOMAfter().appendChild(t.dom):this.dom.appendChild(t.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(e){if(this.updateGutters(e)){let t=this.prevViewport,i=e.view.viewport,o=Math.min(t.to,i.to)-Math.max(t.from,i.from);this.syncGutters(o<(i.to-i.from)*.8)}if(e.geometryChanged){let t=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=t,this.domAfter&&(this.domAfter.style.minHeight=t)}this.view.state.facet(Mi)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.nextSibling;e&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let i=E.iter(this.view.state.facet(Ye),this.view.viewport.from),o=[],n=this.gutters.map(s=>new Ul(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(o.length&&(o=[]),Array.isArray(s.type)){let r=!0;for(let l of s.type)if(l.type==H.Text&&r){Ai(i,o,l.from);for(let a of n)a.line(this.view,l,o);r=!1}else if(l.widget)for(let a of n)a.widget(this.view,l)}else if(s.type==H.Text){Ai(i,o,s.from);for(let r of n)r.line(this.view,s,o)}else if(s.widget)for(let r of n)r.widget(this.view,s);for(let s of n)s.finish();e&&(this.view.scrollDOM.insertBefore(this.dom,t),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(e){let t=e.startState.facet(Xe),i=e.state.facet(Xe),o=e.docChanged||e.heightChanged||e.viewportChanged||!E.eq(e.startState.facet(Ye),e.state.facet(Ye),e.view.viewport.from,e.view.viewport.to);if(t==i)for(let n of this.gutters)n.update(e)&&(o=!0);else{o=!0;let n=[];for(let s of i){let r=t.indexOf(s);r<0?n.push(new Vn(this.view,s)):(this.gutters[r].update(e),n.push(this.gutters[r]))}for(let s of this.gutters)s.dom.remove(),n.indexOf(s)<0&&s.destroy();for(let s of n)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=n}return o}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:e=>k.scrollMargins.of(t=>{let i=t.plugin(e);if(!i||i.gutters.length==0||!i.fixed)return null;let o=i.dom.offsetWidth*t.scaleX,n=i.domAfter?i.domAfter.offsetWidth*t.scaleX:0;return t.textDirection==B.LTR?{left:o,right:n}:{right:o,left:n}})});function Pn(e){return Array.isArray(e)?e:[e]}function Ai(e,t,i){for(;e.value&&e.from<=i;)e.from==i&&t.push(e.value),e.next()}var Ul=class{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=E.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:o}=this,n=(t.top-this.height)/e.scaleY,s=t.height/e.scaleY;if(this.i==o.elements.length){let r=new Fn(e,s,n,i);o.elements.push(r),o.dom.appendChild(r.dom)}else o.elements[this.i].update(e,s,n,i);this.height=t.bottom,this.i++}line(e,t,i){let o=[];Ai(this.cursor,o,t.from),i.length&&(o=o.concat(i));let n=this.gutter.config.lineMarker(e,t,o);n&&o.unshift(n);let s=this.gutter;o.length==0&&!s.config.renderEmptyElements||this.addElement(e,t,o)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),o=i?[i]:null;for(let n of e.state.facet(Nn)){let s=n(e,t.widget,t);s&&(o||(o=[])).push(s)}o&&this.addElement(e,t,o)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}},Vn=class{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,o=>{let n=o.target,s;if(n!=this.dom&&this.dom.contains(n)){for(;n.parentNode!=this.dom;)n=n.parentNode;let l=n.getBoundingClientRect();s=(l.top+l.bottom)/2}else s=o.clientY;let r=e.lineBlockAtHeight(s-e.documentTop);t.domEventHandlers[i](e,r,o)&&o.preventDefault()});this.markers=Pn(t.markers(e)),t.initialSpacer&&(this.spacer=new Fn(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=Pn(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let o=this.config.updateSpacer(this.spacer.markers[0],e);o!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[o])}let i=e.view.viewport;return!E.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}},Fn=class{constructor(e,t,i,o){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,o)}update(e,t,i,o){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),Ql(this.markers,o)||this.setMarkers(e,o)}setMarkers(e,t){let i="cm-gutterElement",o=this.dom.firstChild;for(let n=0,s=0;;){let r=s,l=n<t.length?t[n++]:null,a=!1;if(l){let h=l.elementClass;h&&(i+=" "+h);for(let c=s;c<this.markers.length;c++)if(this.markers[c].compare(l)){r=c,a=!0;break}}else r=this.markers.length;for(;s<r;){let h=this.markers[s++];if(h.toDOM){h.destroy(o);let c=o.nextSibling;o.remove(),o=c}}if(!l)break;l.toDOM&&(a?o=o.nextSibling:this.dom.insertBefore(l.toDOM(e),o)),a&&s++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}};function Ql(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(!e[i].compare(t[i]))return!1;return!0}var zn=S.define(),In=S.define(),Ae=S.define({combine(e){return Et(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(t,i){let o=Object.assign({},t);for(let n in i){let s=o[n],r=i[n];o[n]=s?(l,a,h)=>s(l,a,h)||r(l,a,h):r}return o}})}}),Ti=class extends ie{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}};function Di(e,t){return e.state.facet(Ae).formatNumber(t,e.state)}var _l=Xe.compute([Ae],e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(t){return t.state.facet(zn)},lineMarker(t,i,o){return o.some(n=>n.toDOM)?null:new Ti(Di(t,t.state.doc.lineAt(i.from).number))},widgetMarker:(t,i,o)=>{for(let n of t.state.facet(In)){let s=n(t,i,o);if(s)return s}return null},lineMarkerChange:t=>t.startState.facet(Ae)!=t.state.facet(Ae),initialSpacer(t){return new Ti(Di(t,qn(t.state.doc.lines)))},updateSpacer(t,i){let o=Di(i.view,qn(i.view.state.doc.lines));return o==t.number?t:new Ti(o)},domEventHandlers:e.facet(Ae).domEventHandlers,side:"before"}));function Jl(e={}){return[Ae.of(e),ki(),_l]}function qn(e){let t=9;for(;t<e;)t=t*10+9;return t}var Zl=new class extends ie{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},ea=Ye.compute(["selection"],e=>{let t=[],i=-1;for(let o of e.selection.ranges){let n=e.doc.lineAt(o.head).from;n>i&&(i=n,t.push(Zl.range(n)))}return E.of(t)});function ta(){return ea}function Kn(e){return P.define(t=>({decorations:e.createDeco(t),update(i){this.decorations=e.updateDeco(i,this.decorations)}}),{decorations:t=>t.decorations})}var ia=T.mark({class:"cm-highlightTab"}),oa=T.mark({class:"cm-highlightSpace"}),na=Kn(new bt({regexp:/\\t| /g,decoration:e=>e[0]=="	"?ia:oa,boundary:/\\S/}));function sa(){return na}var ra=Kn(new bt({regexp:/\\s+$/g,decoration:T.mark({class:"cm-trailingSpace"})}));function la(){return ra}var aa={HeightMap:z,HeightOracle:Jo,MeasuredHeights:Zo,QueryType:O,ChangedRange:j,computeOrder:io,moveVisually:so,clearHeightChangeFlag:di,getHeightChangeFlag:()=>pe};export{G as BidiSpan,U as BlockInfo,H as BlockType,Kt as BlockWrapper,T as Decoration,B as Direction,k as EditorView,ie as GutterMarker,bt as MatchDecorator,vt as RectangleMarker,P as ViewPlugin,ti as ViewUpdate,re as WidgetType,aa as __test,zl as closeHoverTooltips,Dl as crosshairCursor,Zr as drawSelection,sl as dropCursor,Yl as getDialog,el as getDrawSelectionConfig,Ln as getPanel,Vl as getTooltip,jl as gutter,Ye as gutterLineClass,Nn as gutterWidgetClass,ki as gutters,Fl as hasHoverTooltips,vl as highlightActiveLine,ta as highlightActiveLineGutter,cl as highlightSpecialChars,la as highlightTrailingWhitespace,sa as highlightWhitespace,Pl as hoverTooltip,fn as keymap,wi as layer,zn as lineNumberMarkers,In as lineNumberWidgetMarker,Jl as lineNumbers,q as logException,ql as panels,xl as placeholder,kl as rectangularSelection,Il as repositionTooltips,jr as runScopeHandlers,ml as scrollPastEnd,Kl as showDialog,At as showPanel,Si as showTooltip,Ol as tooltips};\n',mimeType:"application/javascript"},"/@lezer/javascript@1.5.4/es2022/javascript.mjs":{content:"import{ContextTracker as S,ExternalTokenizer as r,LRParser as c,LocalTokenGroup as l}from\"/@lezer/lr@^1.3.0?target=es2022\";import{styleTags as X,tags as O}from\"/@lezer/highlight@^1.1.3?target=es2022\";var o=316,s=317,p=1,n=2,g=3,Y=4,x=318,_=320,T=321,m=5,k=6,w=0,Z=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],t=125,u=59,P=47,y=42,z=43,q=45,R=60,j=44,d=63,b=46,W=91,f=new S({start:!1,shift(Q,$){return $==m||$==k||$==_?Q:$==T},strict:!1}),h=new r((Q,$)=>{let{next:a}=Q;(a==t||a==-1||$.context)&&Q.acceptToken(x)},{contextual:!0,fallback:!0}),G=new r((Q,$)=>{let{next:a}=Q,i;Z.indexOf(a)>-1||a==P&&((i=Q.peek(1))==P||i==y)||a!=t&&a!=u&&a!=-1&&!$.context&&Q.acceptToken(o)},{contextual:!0}),v=new r((Q,$)=>{Q.next==W&&!$.context&&Q.acceptToken(s)},{contextual:!0}),V=new r((Q,$)=>{let{next:a}=Q;if(a==z||a==q){if(Q.advance(),a==Q.next){Q.advance();let i=!$.context&&$.canShift(p);Q.acceptToken(i?p:n)}}else a==d&&Q.peek(1)==b&&(Q.advance(),Q.advance(),(Q.next<48||Q.next>57)&&Q.acceptToken(g))},{contextual:!0});function e(Q,$){return Q>=65&&Q<=90||Q>=97&&Q<=122||Q==95||Q>=192||!$&&Q>=48&&Q<=57}var U=new r((Q,$)=>{if(Q.next!=R||!$.dialectEnabled(w)||(Q.advance(),Q.next==P))return;let a=0;for(;Z.indexOf(Q.next)>-1;)Q.advance(),a++;if(e(Q.next,!0)){for(Q.advance(),a++;e(Q.next,!1);)Q.advance(),a++;for(;Z.indexOf(Q.next)>-1;)Q.advance(),a++;if(Q.next==j)return;for(let i=0;;i++){if(i==7){if(!e(Q.next,!0))return;break}if(Q.next!=\"extends\".charCodeAt(i))break;Q.advance(),a++}}Q.acceptToken(Y,-a)}),L=X({\"get set async static\":O.modifier,\"for while do if else switch try catch finally return throw break continue default case defer\":O.controlKeyword,\"in of await yield void typeof delete instanceof as satisfies\":O.operatorKeyword,\"let var const using function class extends\":O.definitionKeyword,\"import export from\":O.moduleKeyword,\"with debugger new\":O.keyword,TemplateString:O.special(O.string),super:O.atom,BooleanLiteral:O.bool,this:O.self,null:O.null,Star:O.modifier,VariableName:O.variableName,\"CallExpression/VariableName TaggedTemplateExpression/VariableName\":O.function(O.variableName),VariableDefinition:O.definition(O.variableName),Label:O.labelName,PropertyName:O.propertyName,PrivatePropertyName:O.special(O.propertyName),\"CallExpression/MemberExpression/PropertyName\":O.function(O.propertyName),\"FunctionDeclaration/VariableDefinition\":O.function(O.definition(O.variableName)),\"ClassDeclaration/VariableDefinition\":O.definition(O.className),\"NewExpression/VariableName\":O.className,PropertyDefinition:O.definition(O.propertyName),PrivatePropertyDefinition:O.definition(O.special(O.propertyName)),UpdateOp:O.updateOperator,\"LineComment Hashbang\":O.lineComment,BlockComment:O.blockComment,Number:O.number,String:O.string,Escape:O.escape,ArithOp:O.arithmeticOperator,LogicOp:O.logicOperator,BitOp:O.bitwiseOperator,CompareOp:O.compareOperator,RegExp:O.regexp,Equals:O.definitionOperator,Arrow:O.function(O.punctuation),\": Spread\":O.punctuation,\"( )\":O.paren,\"[ ]\":O.squareBracket,\"{ }\":O.brace,\"InterpolationStart InterpolationEnd\":O.special(O.brace),\".\":O.derefOperator,\", ;\":O.separator,\"@\":O.meta,TypeName:O.typeName,TypeDefinition:O.definition(O.typeName),\"type enum interface implements namespace module declare\":O.definitionKeyword,\"abstract global Privacy readonly override\":O.modifier,\"is keyof unique infer asserts\":O.operatorKeyword,JSXAttributeValue:O.attributeValue,JSXText:O.content,\"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag\":O.angleBracket,\"JSXIdentifier JSXNameSpacedName\":O.tagName,\"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName\":O.attributeName,\"JSXBuiltin/JSXIdentifier\":O.standard(O.tagName)}),M={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,in:52,out:55,const:56,extends:60,this:64,true:72,false:72,null:84,void:88,typeof:92,super:108,new:142,delete:154,yield:163,await:167,class:172,public:235,private:235,protected:235,readonly:237,instanceof:256,satisfies:259,import:292,keyof:349,unique:353,infer:359,asserts:395,is:397,abstract:417,implements:419,type:421,let:424,var:426,using:429,interface:435,enum:439,namespace:445,module:447,declare:451,global:455,defer:471,for:476,of:485,while:488,with:492,do:496,if:500,else:502,switch:506,case:512,try:518,catch:522,finally:526,return:530,throw:534,break:538,continue:542,debugger:546},E={__proto__:null,async:129,get:131,set:133,declare:195,public:197,private:197,protected:197,static:199,abstract:201,override:203,readonly:209,accessor:211,new:401},A={__proto__:null,\"<\":193},C=c.deserialize({version:14,states:\"$F|Q%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#DaO.QQlO'#DgO.bQlO'#DrO%[QlO'#DzO0fQlO'#ESOOQ!0Lf'#E['#E[O1PQ`O'#EXOOQO'#Ep'#EpOOQO'#Il'#IlO1XQ`O'#GsO1dQ`O'#EoO1iQ`O'#EoO3hQ!0MxO'#JrO6[Q!0MxO'#JsO6uQ`O'#F]O6zQ,UO'#FtOOQ!0Lf'#Ff'#FfO7VO7dO'#FfO9XQMhO'#F|O9`Q`O'#F{OOQ!0Lf'#Js'#JsOOQ!0Lb'#Jr'#JrO9eQ`O'#GwOOQ['#K_'#K_O9pQ`O'#IYO9uQ!0LrO'#IZOOQ['#J`'#J`OOQ['#I_'#I_Q`QlOOQ`QlOOO9}Q!L^O'#DvO:UQlO'#EOO:]QlO'#EQO9kQ`O'#GsO:dQMhO'#CoO:rQ`O'#EnO:}Q`O'#EyO;hQMhO'#FeO;xQ`O'#GsOOQO'#K`'#K`O;}Q`O'#K`O<]Q`O'#G{O<]Q`O'#G|O<]Q`O'#HOO9kQ`O'#HRO=SQ`O'#HUO>kQ`O'#CeO>{Q`O'#HcO?TQ`O'#HiO?TQ`O'#HkO`QlO'#HmO?TQ`O'#HoO?TQ`O'#HrO?YQ`O'#HxO?_Q!0LsO'#IOO%[QlO'#IQO?jQ!0LsO'#ISO?uQ!0LsO'#IUO9uQ!0LrO'#IWO@QQ!0MxO'#CiOASQpO'#DlQOQ`OOO%[QlO'#EQOAjQ`O'#ETO:dQMhO'#EnOAuQ`O'#EnOBQQ!bO'#FeOOQ['#Cg'#CgOOQ!0Lb'#Dq'#DqOOQ!0Lb'#Jv'#JvO%[QlO'#JvOOQO'#Jy'#JyOOQO'#Ih'#IhOCQQpO'#EgOOQ!0Lb'#Ef'#EfOOQ!0Lb'#J}'#J}OC|Q!0MSO'#EgODWQpO'#EWOOQO'#Jx'#JxODlQpO'#JyOEyQpO'#EWODWQpO'#EgPFWO&2DjO'#CbPOOO)CD})CD}OOOO'#I`'#I`OFcO#tO,59UOOQ!0Lh,59U,59UOOOO'#Ia'#IaOFqO&jO,59UOGPQ!L^O'#DcOOOO'#Ic'#IcOGWO#@ItO,59{OOQ!0Lf,59{,59{OGfQlO'#IdOGyQ`O'#JtOIxQ!fO'#JtO+}QlO'#JtOJPQ`O,5:ROJgQ`O'#EpOJtQ`O'#KTOKPQ`O'#KSOKPQ`O'#KSOKXQ`O,5;^OK^Q`O'#KROOQ!0Ln,5:^,5:^OKeQlO,5:^OMcQ!0MxO,5:fONSQ`O,5:nONmQ!0LrO'#KQONtQ`O'#KPO9eQ`O'#KPO! YQ`O'#KPO! bQ`O,5;]O! gQ`O'#KPO!#lQ!fO'#JsOOQ!0Lh'#Ci'#CiO%[QlO'#ESO!$[Q!fO,5:sOOQS'#Jz'#JzOOQO-E<j-E<jO9kQ`O,5=_O!$rQ`O,5=_O!$wQlO,5;ZO!&zQMhO'#EkO!(eQ`O,5;ZO!(jQlO'#DyO!(tQpO,5;dO!(|QpO,5;dO%[QlO,5;dOOQ['#FT'#FTOOQ['#FV'#FVO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eOOQ['#FZ'#FZO!)[QlO,5;tOOQ!0Lf,5;y,5;yOOQ!0Lf,5;z,5;zOOQ!0Lf,5;|,5;|O%[QlO'#IpO!+_Q!0LrO,5<iO%[QlO,5;eO!&zQMhO,5;eO!+|QMhO,5;eO!-nQMhO'#E^O%[QlO,5;wOOQ!0Lf,5;{,5;{O!-uQ,UO'#FjO!.rQ,UO'#KXO!.^Q,UO'#KXO!.yQ,UO'#KXOOQO'#KX'#KXO!/_Q,UO,5<SOOOW,5<`,5<`O!/pQlO'#FvOOOW'#Io'#IoO7VO7dO,5<QO!/wQ,UO'#FxOOQ!0Lf,5<Q,5<QO!0hQ$IUO'#CyOOQ!0Lh'#C}'#C}O!0{O#@ItO'#DRO!1iQMjO,5<eO!1pQ`O,5<hO!3YQ(CWO'#GXO!3jQ`O'#GYO!3oQ`O'#GYO!5_Q(CWO'#G^O!6dQpO'#GbOOQO'#Gn'#GnO!,TQMhO'#GmOOQO'#Gp'#GpO!,TQMhO'#GoO!7VQ$IUO'#JlOOQ!0Lh'#Jl'#JlO!7aQ`O'#JkO!7oQ`O'#JjO!7wQ`O'#CuOOQ!0Lh'#C{'#C{O!8YQ`O'#C}OOQ!0Lh'#DV'#DVOOQ!0Lh'#DX'#DXO!8_Q`O,5<eO1SQ`O'#DZO!,TQMhO'#GPO!,TQMhO'#GRO!8gQ`O'#GTO!8lQ`O'#GUO!3oQ`O'#G[O!,TQMhO'#GaO<]Q`O'#JkO!8qQ`O'#EqO!9`Q`O,5<gOOQ!0Lb'#Cr'#CrO!9hQ`O'#ErO!:bQpO'#EsOOQ!0Lb'#KR'#KRO!:iQ!0LrO'#KaO9uQ!0LrO,5=cO`QlO,5>tOOQ['#Jh'#JhOOQ[,5>u,5>uOOQ[-E<]-E<]O!<hQ!0MxO,5:bO!:]QpO,5:`O!?RQ!0MxO,5:jO%[QlO,5:jO!AiQ!0MxO,5:lOOQO,5@z,5@zO!BYQMhO,5=_O!BhQ!0LrO'#JiO9`Q`O'#JiO!ByQ!0LrO,59ZO!CUQpO,59ZO!C^QMhO,59ZO:dQMhO,59ZO!CiQ`O,5;ZO!CqQ`O'#HbO!DVQ`O'#KdO%[QlO,5;}O!:]QpO,5<PO!D_Q`O,5=zO!DdQ`O,5=zO!DiQ`O,5=zO!DwQ`O,5=zO9uQ!0LrO,5=zO<]Q`O,5=jOOQO'#Cy'#CyO!EOQpO,5=gO!EWQMhO,5=hO!EcQ`O,5=jO!EhQ!bO,5=mO!EpQ`O'#K`O?YQ`O'#HWO9kQ`O'#HYO!EuQ`O'#HYO:dQMhO'#H[O!EzQ`O'#H[OOQ[,5=p,5=pO!FPQ`O'#H]O!FbQ`O'#CoO!FgQ`O,59PO!FqQ`O,59PO!HvQlO,59POOQ[,59P,59PO!IWQ!0LrO,59PO%[QlO,59PO!KcQlO'#HeOOQ['#Hf'#HfOOQ['#Hg'#HgO`QlO,5=}O!KyQ`O,5=}O`QlO,5>TO`QlO,5>VO!LOQ`O,5>XO`QlO,5>ZO!LTQ`O,5>^O!LYQlO,5>dOOQ[,5>j,5>jO%[QlO,5>jO9uQ!0LrO,5>lOOQ[,5>n,5>nO#!dQ`O,5>nOOQ[,5>p,5>pO#!dQ`O,5>pOOQ[,5>r,5>rO##QQpO'#D_O%[QlO'#JvO##sQpO'#JvO##}QpO'#DmO#$`QpO'#DmO#&qQlO'#DmO#&xQ`O'#JuO#'QQ`O,5:WO#'VQ`O'#EtO#'eQ`O'#KUO#'mQ`O,5;_O#'rQpO'#DmO#(PQpO'#EVOOQ!0Lf,5:o,5:oO%[QlO,5:oO#(WQ`O,5:oO?YQ`O,5;YO!CUQpO,5;YO!C^QMhO,5;YO:dQMhO,5;YO#(`Q`O,5@bO#(eQ07dO,5:sOOQO-E<f-E<fO#)kQ!0MSO,5;RODWQpO,5:rO#)uQpO,5:rODWQpO,5;RO!ByQ!0LrO,5:rOOQ!0Lb'#Ej'#EjOOQO,5;R,5;RO%[QlO,5;RO#*SQ!0LrO,5;RO#*_Q!0LrO,5;RO!CUQpO,5:rOOQO,5;X,5;XO#*mQ!0LrO,5;RPOOO'#I^'#I^P#+RO&2DjO,58|POOO,58|,58|OOOO-E<^-E<^OOQ!0Lh1G.p1G.pOOOO-E<_-E<_OOOO,59},59}O#+^Q!bO,59}OOOO-E<a-E<aOOQ!0Lf1G/g1G/gO#+cQ!fO,5?OO+}QlO,5?OOOQO,5?U,5?UO#+mQlO'#IdOOQO-E<b-E<bO#+zQ`O,5@`O#,SQ!fO,5@`O#,ZQ`O,5@nOOQ!0Lf1G/m1G/mO%[QlO,5@oO#,cQ`O'#IjOOQO-E<h-E<hO#,ZQ`O,5@nOOQ!0Lb1G0x1G0xOOQ!0Ln1G/x1G/xOOQ!0Ln1G0Y1G0YO%[QlO,5@lO#,wQ!0LrO,5@lO#-YQ!0LrO,5@lO#-aQ`O,5@kO9eQ`O,5@kO#-iQ`O,5@kO#-wQ`O'#ImO#-aQ`O,5@kOOQ!0Lb1G0w1G0wO!(tQpO,5:uO!)PQpO,5:uOOQS,5:w,5:wO#.iQdO,5:wO#.qQMhO1G2yO9kQ`O1G2yOOQ!0Lf1G0u1G0uO#/PQ!0MxO1G0uO#0UQ!0MvO,5;VOOQ!0Lh'#GW'#GWO#0rQ!0MzO'#JlO!$wQlO1G0uO#2}Q!fO'#JwO%[QlO'#JwO#3XQ`O,5:eOOQ!0Lh'#D_'#D_OOQ!0Lf1G1O1G1OO%[QlO1G1OOOQ!0Lf1G1f1G1fO#3^Q`O1G1OO#5rQ!0MxO1G1PO#5yQ!0MxO1G1PO#8aQ!0MxO1G1PO#8hQ!0MxO1G1PO#;OQ!0MxO1G1PO#=fQ!0MxO1G1PO#=mQ!0MxO1G1PO#=tQ!0MxO1G1PO#@[Q!0MxO1G1PO#@cQ!0MxO1G1PO#BpQ?MtO'#CiO#DkQ?MtO1G1`O#DrQ?MtO'#JsO#EVQ!0MxO,5?[OOQ!0Lb-E<n-E<nO#GdQ!0MxO1G1PO#HaQ!0MzO1G1POOQ!0Lf1G1P1G1PO#IdQMjO'#J|O#InQ`O,5:xO#IsQ!0MxO1G1cO#JgQ,UO,5<WO#JoQ,UO,5<XO#JwQ,UO'#FoO#K`Q`O'#FnOOQO'#KY'#KYOOQO'#In'#InO#KeQ,UO1G1nOOQ!0Lf1G1n1G1nOOOW1G1y1G1yO#KvQ?MtO'#JrO#LQQ`O,5<bO!)[QlO,5<bOOOW-E<m-E<mOOQ!0Lf1G1l1G1lO#LVQpO'#KXOOQ!0Lf,5<d,5<dO#L_QpO,5<dO#LdQMhO'#DTOOOO'#Ib'#IbO#LkO#@ItO,59mOOQ!0Lh,59m,59mO%[QlO1G2PO!8lQ`O'#IrO#LvQ`O,5<zOOQ!0Lh,5<w,5<wO!,TQMhO'#IuO#MdQMjO,5=XO!,TQMhO'#IwO#NVQMjO,5=ZO!&zQMhO,5=]OOQO1G2S1G2SO#NaQ!dO'#CrO#NtQ(CWO'#ErO$ |QpO'#GbO$!dQ!dO,5<sO$!kQ`O'#K[O9eQ`O'#K[O$!yQ`O,5<uO$#aQ!dO'#C{O!,TQMhO,5<tO$#kQ`O'#GZO$$PQ`O,5<tO$$UQ!dO'#GWO$$cQ!dO'#K]O$$mQ`O'#K]O!&zQMhO'#K]O$$rQ`O,5<xO$$wQlO'#JvO$%RQpO'#GcO#$`QpO'#GcO$%dQ`O'#GgO!3oQ`O'#GkO$%iQ!0LrO'#ItO$%tQpO,5<|OOQ!0Lp,5<|,5<|O$%{QpO'#GcO$&YQpO'#GdO$&kQpO'#GdO$&pQMjO,5=XO$'QQMjO,5=ZOOQ!0Lh,5=^,5=^O!,TQMhO,5@VO!,TQMhO,5@VO$'bQ`O'#IyO$'vQ`O,5@UO$(OQ`O,59aOOQ!0Lh,59i,59iO$(TQ`O,5@VO$)TQ$IYO,59uOOQ!0Lh'#Jp'#JpO$)vQMjO,5<kO$*iQMjO,5<mO@zQ`O,5<oOOQ!0Lh,5<p,5<pO$*sQ`O,5<vO$*xQMjO,5<{O$+YQ`O'#KPO!$wQlO1G2RO$+_Q`O1G2RO9eQ`O'#KSO9eQ`O'#EtO%[QlO'#EtO9eQ`O'#I{O$+dQ!0LrO,5@{OOQ[1G2}1G2}OOQ[1G4`1G4`OOQ!0Lf1G/|1G/|OOQ!0Lf1G/z1G/zO$-fQ!0MxO1G0UOOQ[1G2y1G2yO!&zQMhO1G2yO%[QlO1G2yO#.tQ`O1G2yO$/jQMhO'#EkOOQ!0Lb,5@T,5@TO$/wQ!0LrO,5@TOOQ[1G.u1G.uO!ByQ!0LrO1G.uO!CUQpO1G.uO!C^QMhO1G.uO$0YQ`O1G0uO$0_Q`O'#CiO$0jQ`O'#KeO$0rQ`O,5=|O$0wQ`O'#KeO$0|Q`O'#KeO$1[Q`O'#JRO$1jQ`O,5AOO$1rQ!fO1G1iOOQ!0Lf1G1k1G1kO9kQ`O1G3fO@zQ`O1G3fO$1yQ`O1G3fO$2OQ`O1G3fO!DiQ`O1G3fO9uQ!0LrO1G3fOOQ[1G3f1G3fO!EcQ`O1G3UO!&zQMhO1G3RO$2TQ`O1G3ROOQ[1G3S1G3SO!&zQMhO1G3SO$2YQ`O1G3SO$2bQpO'#HQOOQ[1G3U1G3UO!6_QpO'#I}O!EhQ!bO1G3XOOQ[1G3X1G3XOOQ[,5=r,5=rO$2jQMhO,5=tO9kQ`O,5=tO$%dQ`O,5=vO9`Q`O,5=vO!CUQpO,5=vO!C^QMhO,5=vO:dQMhO,5=vO$2xQ`O'#KcO$3TQ`O,5=wOOQ[1G.k1G.kO$3YQ!0LrO1G.kO@zQ`O1G.kO$3eQ`O1G.kO9uQ!0LrO1G.kO$5mQ!fO,5AQO$5zQ`O,5AQO9eQ`O,5AQO$6VQlO,5>PO$6^Q`O,5>POOQ[1G3i1G3iO`QlO1G3iOOQ[1G3o1G3oOOQ[1G3q1G3qO?TQ`O1G3sO$6cQlO1G3uO$:gQlO'#HtOOQ[1G3x1G3xO$:tQ`O'#HzO?YQ`O'#H|OOQ[1G4O1G4OO$:|QlO1G4OO9uQ!0LrO1G4UOOQ[1G4W1G4WOOQ!0Lb'#G_'#G_O9uQ!0LrO1G4YO9uQ!0LrO1G4[O$?TQ`O,5@bO!)[QlO,5;`O9eQ`O,5;`O?YQ`O,5:XO!)[QlO,5:XO!CUQpO,5:XO$?YQ?MtO,5:XOOQO,5;`,5;`O$?dQpO'#IeO$?zQ`O,5@aOOQ!0Lf1G/r1G/rO$@SQpO'#IkO$@^Q`O,5@pOOQ!0Lb1G0y1G0yO#$`QpO,5:XOOQO'#Ig'#IgO$@fQpO,5:qOOQ!0Ln,5:q,5:qO#(ZQ`O1G0ZOOQ!0Lf1G0Z1G0ZO%[QlO1G0ZOOQ!0Lf1G0t1G0tO?YQ`O1G0tO!CUQpO1G0tO!C^QMhO1G0tOOQ!0Lb1G5|1G5|O!ByQ!0LrO1G0^OOQO1G0m1G0mO%[QlO1G0mO$@mQ!0LrO1G0mO$@xQ!0LrO1G0mO!CUQpO1G0^ODWQpO1G0^O$AWQ!0LrO1G0mOOQO1G0^1G0^O$AlQ!0MxO1G0mPOOO-E<[-E<[POOO1G.h1G.hOOOO1G/i1G/iO$AvQ!bO,5<iO$BOQ!fO1G4jOOQO1G4p1G4pO%[QlO,5?OO$BYQ`O1G5zO$BbQ`O1G6YO$BjQ!fO1G6ZO9eQ`O,5?UO$BtQ!0MxO1G6WO%[QlO1G6WO$CUQ!0LrO1G6WO$CgQ`O1G6VO$CgQ`O1G6VO9eQ`O1G6VO$CoQ`O,5?XO9eQ`O,5?XOOQO,5?X,5?XO$DTQ`O,5?XO$+YQ`O,5?XOOQO-E<k-E<kOOQS1G0a1G0aOOQS1G0c1G0cO#.lQ`O1G0cOOQ[7+(e7+(eO!&zQMhO7+(eO%[QlO7+(eO$DcQ`O7+(eO$DnQMhO7+(eO$D|Q!0MzO,5=XO$GXQ!0MzO,5=ZO$IdQ!0MzO,5=XO$KuQ!0MzO,5=ZO$NWQ!0MzO,59uO%!]Q!0MzO,5<kO%$hQ!0MzO,5<mO%&sQ!0MzO,5<{OOQ!0Lf7+&a7+&aO%)UQ!0MxO7+&aO%)xQlO'#IfO%*VQ`O,5@cO%*_Q!fO,5@cOOQ!0Lf1G0P1G0PO%*iQ`O7+&jOOQ!0Lf7+&j7+&jO%*nQ?MtO,5:fO%[QlO7+&zO%*xQ?MtO,5:bO%+VQ?MtO,5:jO%+aQ?MtO,5:lO%+kQMhO'#IiO%+uQ`O,5@hOOQ!0Lh1G0d1G0dOOQO1G1r1G1rOOQO1G1s1G1sO%+}Q!jO,5<ZO!)[QlO,5<YOOQO-E<l-E<lOOQ!0Lf7+'Y7+'YOOOW7+'e7+'eOOOW1G1|1G1|O%,YQ`O1G1|OOQ!0Lf1G2O1G2OOOOO,59o,59oO%,_Q!dO,59oOOOO-E<`-E<`OOQ!0Lh1G/X1G/XO%,fQ!0MxO7+'kOOQ!0Lh,5?^,5?^O%-YQMhO1G2fP%-aQ`O'#IrPOQ!0Lh-E<p-E<pO%-}QMjO,5?aOOQ!0Lh-E<s-E<sO%.pQMjO,5?cOOQ!0Lh-E<u-E<uO%.zQ!dO1G2wO%/RQ!dO'#CrO%/iQMhO'#KSO$$wQlO'#JvOOQ!0Lh1G2_1G2_O%/sQ`O'#IqO%0[Q`O,5@vO%0[Q`O,5@vO%0dQ`O,5@vO%0oQ`O,5@vOOQO1G2a1G2aO%0}QMjO1G2`O$+YQ`O'#K[O!,TQMhO1G2`O%1_Q(CWO'#IsO%1lQ`O,5@wO!&zQMhO,5@wO%1tQ!dO,5@wOOQ!0Lh1G2d1G2dO%4UQ!fO'#CiO%4`Q`O,5=POOQ!0Lb,5<},5<}O%4hQpO,5<}OOQ!0Lb,5=O,5=OOCwQ`O,5<}O%4sQpO,5<}OOQ!0Lb,5=R,5=RO$+YQ`O,5=VOOQO,5?`,5?`OOQO-E<r-E<rOOQ!0Lp1G2h1G2hO#$`QpO,5<}O$$wQlO,5=PO%5RQ`O,5=OO%5^QpO,5=OO!,TQMhO'#IuO%6WQMjO1G2sO!,TQMhO'#IwO%6yQMjO1G2uO%7TQMjO1G5qO%7_QMjO1G5qOOQO,5?e,5?eOOQO-E<w-E<wOOQO1G.{1G.{O!,TQMhO1G5qO!,TQMhO1G5qO!:]QpO,59wO%[QlO,59wOOQ!0Lh,5<j,5<jO%7lQ`O1G2ZO!,TQMhO1G2bO%7qQ!0MxO7+'mOOQ!0Lf7+'m7+'mO!$wQlO7+'mO%8eQ`O,5;`OOQ!0Lb,5?g,5?gOOQ!0Lb-E<y-E<yO%8jQ!dO'#K^O#(ZQ`O7+(eO4UQ!fO7+(eO$DfQ`O7+(eO%8tQ!0MvO'#CiO%9XQ!0MvO,5=SO%9lQ`O,5=SO%9tQ`O,5=SOOQ!0Lb1G5o1G5oOOQ[7+$a7+$aO!ByQ!0LrO7+$aO!CUQpO7+$aO!$wQlO7+&aO%9yQ`O'#JQO%:bQ`O,5APOOQO1G3h1G3hO9kQ`O,5APO%:bQ`O,5APO%:jQ`O,5APOOQO,5?m,5?mOOQO-E=P-E=POOQ!0Lf7+'T7+'TO%:oQ`O7+)QO9uQ!0LrO7+)QO9kQ`O7+)QO@zQ`O7+)QO%:tQ`O7+)QOOQ[7+)Q7+)QOOQ[7+(p7+(pO%:yQ!0MvO7+(mO!&zQMhO7+(mO!E^Q`O7+(nOOQ[7+(n7+(nO!&zQMhO7+(nO%;TQ`O'#KbO%;`Q`O,5=lOOQO,5?i,5?iOOQO-E<{-E<{OOQ[7+(s7+(sO%<rQpO'#HZOOQ[1G3`1G3`O!&zQMhO1G3`O%[QlO1G3`O%<yQ`O1G3`O%=UQMhO1G3`O9uQ!0LrO1G3bO$%dQ`O1G3bO9`Q`O1G3bO!CUQpO1G3bO!C^QMhO1G3bO%=dQ`O'#JPO%=xQ`O,5@}O%>QQpO,5@}OOQ!0Lb1G3c1G3cOOQ[7+$V7+$VO@zQ`O7+$VO9uQ!0LrO7+$VO%>]Q`O7+$VO%[QlO1G6lO%[QlO1G6mO%>bQ!0LrO1G6lO%>lQlO1G3kO%>sQ`O1G3kO%>xQlO1G3kOOQ[7+)T7+)TO9uQ!0LrO7+)_O`QlO7+)aOOQ['#Kh'#KhOOQ['#JS'#JSO%?PQlO,5>`OOQ[,5>`,5>`O%[QlO'#HuO%?^Q`O'#HwOOQ[,5>f,5>fO9eQ`O,5>fOOQ[,5>h,5>hOOQ[7+)j7+)jOOQ[7+)p7+)pOOQ[7+)t7+)tOOQ[7+)v7+)vO%?cQpO1G5|O%?}Q?MtO1G0zO%@XQ`O1G0zOOQO1G/s1G/sO%@dQ?MtO1G/sO?YQ`O1G/sO!)[QlO'#DmOOQO,5?P,5?POOQO-E<c-E<cOOQO,5?V,5?VOOQO-E<i-E<iO!CUQpO1G/sOOQO-E<e-E<eOOQ!0Ln1G0]1G0]OOQ!0Lf7+%u7+%uO#(ZQ`O7+%uOOQ!0Lf7+&`7+&`O?YQ`O7+&`O!CUQpO7+&`OOQO7+%x7+%xO$AlQ!0MxO7+&XOOQO7+&X7+&XO%[QlO7+&XO%@nQ!0LrO7+&XO!ByQ!0LrO7+%xO!CUQpO7+%xO%@yQ!0LrO7+&XO%AXQ!0MxO7++rO%[QlO7++rO%AiQ`O7++qO%AiQ`O7++qOOQO1G4s1G4sO9eQ`O1G4sO%AqQ`O1G4sOOQS7+%}7+%}O#(ZQ`O<<LPO4UQ!fO<<LPO%BPQ`O<<LPOOQ[<<LP<<LPO!&zQMhO<<LPO%[QlO<<LPO%BXQ`O<<LPO%BdQ!0MzO,5?aO%DoQ!0MzO,5?cO%FzQ!0MzO1G2`O%I]Q!0MzO1G2sO%KhQ!0MzO1G2uO%MsQ!fO,5?QO%[QlO,5?QOOQO-E<d-E<dO%M}Q`O1G5}OOQ!0Lf<<JU<<JUO%NVQ?MtO1G0uO&!^Q?MtO1G1PO&!eQ?MtO1G1PO&$fQ?MtO1G1PO&$mQ?MtO1G1PO&&nQ?MtO1G1PO&(oQ?MtO1G1PO&(vQ?MtO1G1PO&(}Q?MtO1G1PO&+OQ?MtO1G1PO&+VQ?MtO1G1PO&+^Q!0MxO<<JfO&-UQ?MtO1G1PO&.RQ?MvO1G1PO&/UQ?MvO'#JlO&1[Q?MtO1G1cO&1iQ?MtO1G0UO&1sQMjO,5?TOOQO-E<g-E<gO!)[QlO'#FqOOQO'#KZ'#KZOOQO1G1u1G1uO&1}Q`O1G1tO&2SQ?MtO,5?[OOOW7+'h7+'hOOOO1G/Z1G/ZO&2^Q!dO1G4xOOQ!0Lh7+(Q7+(QP!&zQMhO,5?^O!,TQMhO7+(cO&2eQ`O,5?]O9eQ`O,5?]O$+YQ`O,5?]OOQO-E<o-E<oO&2sQ`O1G6bO&2sQ`O1G6bO&2{Q`O1G6bO&3WQMjO7+'zO&3hQ!dO,5?_O&3rQ`O,5?_O!&zQMhO,5?_OOQO-E<q-E<qO&3wQ!dO1G6cO&4RQ`O1G6cO&4ZQ`O1G2kO!&zQMhO1G2kOOQ!0Lb1G2i1G2iOOQ!0Lb1G2j1G2jO%4hQpO1G2iO!CUQpO1G2iOCwQ`O1G2iOOQ!0Lb1G2q1G2qO&4`QpO1G2iO&4nQ`O1G2kO$+YQ`O1G2jOCwQ`O1G2jO$$wQlO1G2kO&4vQ`O1G2jO&5jQMjO,5?aOOQ!0Lh-E<t-E<tO&6]QMjO,5?cOOQ!0Lh-E<v-E<vO!,TQMhO7++]O&6gQMjO7++]O&6qQMjO7++]OOQ!0Lh1G/c1G/cO&7OQ`O1G/cOOQ!0Lh7+'u7+'uO&7TQMjO7+'|O&7eQ!0MxO<<KXOOQ!0Lf<<KX<<KXO&8XQ`O1G0zO!&zQMhO'#IzO&8^Q`O,5@xO&:`Q!fO<<LPO!&zQMhO1G2nO&:gQ!0LrO1G2nOOQ[<<G{<<G{O!ByQ!0LrO<<G{O&:xQ!0MxO<<I{OOQ!0Lf<<I{<<I{OOQO,5?l,5?lO&;lQ`O,5?lO&;qQ`O,5?lOOQO-E=O-E=OO&<PQ`O1G6kO&<PQ`O1G6kO9kQ`O1G6kO@zQ`O<<LlOOQ[<<Ll<<LlO&<XQ`O<<LlO9uQ!0LrO<<LlO9kQ`O<<LlOOQ[<<LX<<LXO%:yQ!0MvO<<LXOOQ[<<LY<<LYO!E^Q`O<<LYO&<^QpO'#I|O&<iQ`O,5@|O!)[QlO,5@|OOQ[1G3W1G3WOOQO'#JO'#JOO9uQ!0LrO'#JOO&<qQpO,5=uOOQ[,5=u,5=uO&<xQpO'#EgO&=PQpO'#GeO&=UQ`O7+(zO&=ZQ`O7+(zOOQ[7+(z7+(zO!&zQMhO7+(zO%[QlO7+(zO&=cQ`O7+(zOOQ[7+(|7+(|O9uQ!0LrO7+(|O$%dQ`O7+(|O9`Q`O7+(|O!CUQpO7+(|O&=nQ`O,5?kOOQO-E<}-E<}OOQO'#H^'#H^O&=yQ`O1G6iO9uQ!0LrO<<GqOOQ[<<Gq<<GqO@zQ`O<<GqO&>RQ`O7+,WO&>WQ`O7+,XO%[QlO7+,WO%[QlO7+,XOOQ[7+)V7+)VO&>]Q`O7+)VO&>bQlO7+)VO&>iQ`O7+)VOOQ[<<Ly<<LyOOQ[<<L{<<L{OOQ[-E=Q-E=QOOQ[1G3z1G3zO&>nQ`O,5>aOOQ[,5>c,5>cO&>sQ`O1G4QO9eQ`O7+&fO!)[QlO7+&fOOQO7+%_7+%_O&>xQ?MtO1G6ZO?YQ`O7+%_OOQ!0Lf<<Ia<<IaOOQ!0Lf<<Iz<<IzO?YQ`O<<IzOOQO<<Is<<IsO$AlQ!0MxO<<IsO%[QlO<<IsOOQO<<Id<<IdO!ByQ!0LrO<<IdO&?SQ!0LrO<<IsO&?_Q!0MxO<= ^O&?oQ`O<= ]OOQO7+*_7+*_O9eQ`O7+*_OOQ[ANAkANAkO&?wQ!fOANAkO!&zQMhOANAkO#(ZQ`OANAkO4UQ!fOANAkO&@OQ`OANAkO%[QlOANAkO&@WQ!0MzO7+'zO&BiQ!0MzO,5?aO&DtQ!0MzO,5?cO&GPQ!0MzO7+'|O&IbQ!fO1G4lO&IlQ?MtO7+&aO&KpQ?MvO,5=XO&MwQ?MvO,5=ZO&NXQ?MvO,5=XO&NiQ?MvO,5=ZO&NyQ?MvO,59uO'#PQ?MvO,5<kO'%SQ?MvO,5<mO''hQ?MvO,5<{O')^Q?MtO7+'kO')kQ?MtO7+'mO')xQ`O,5<]OOQO7+'`7+'`OOQ!0Lh7+*d7+*dO')}QMjO<<K}OOQO1G4w1G4wO'*UQ`O1G4wO'*aQ`O1G4wO'*oQ`O7++|O'*oQ`O7++|O!&zQMhO1G4yO'*wQ!dO1G4yO'+RQ`O7++}O'+ZQ`O7+(VO'+fQ!dO7+(VOOQ!0Lb7+(T7+(TOOQ!0Lb7+(U7+(UO!CUQpO7+(TOCwQ`O7+(TO'+pQ`O7+(VO!&zQMhO7+(VO$+YQ`O7+(UO'+uQ`O7+(VOCwQ`O7+(UO'+}QMjO<<NwO!,TQMhO<<NwOOQ!0Lh7+$}7+$}O',XQ!dO,5?fOOQO-E<x-E<xO',cQ!0MvO7+(YO!&zQMhO7+(YOOQ[AN=gAN=gO9kQ`O1G5WOOQO1G5W1G5WO',sQ`O1G5WO',xQ`O7+,VO',xQ`O7+,VO9uQ!0LrOANBWO@zQ`OANBWOOQ[ANBWANBWO'-QQ`OANBWOOQ[ANAsANAsOOQ[ANAtANAtO'-VQ`O,5?hOOQO-E<z-E<zO'-bQ?MtO1G6hOOQO,5?j,5?jOOQO-E<|-E<|OOQ[1G3a1G3aO'-lQ`O,5=POOQ[<<Lf<<LfO!&zQMhO<<LfO&=UQ`O<<LfO'-qQ`O<<LfO%[QlO<<LfOOQ[<<Lh<<LhO9uQ!0LrO<<LhO$%dQ`O<<LhO9`Q`O<<LhO'-yQpO1G5VO'.UQ`O7+,TOOQ[AN=]AN=]O9uQ!0LrOAN=]OOQ[<= r<= rOOQ[<= s<= sO'.^Q`O<= rO'.cQ`O<= sOOQ[<<Lq<<LqO'.hQ`O<<LqO'.mQlO<<LqOOQ[1G3{1G3{O?YQ`O7+)lO'.tQ`O<<JQO'/PQ?MtO<<JQOOQO<<Hy<<HyOOQ!0LfAN?fAN?fOOQOAN?_AN?_O$AlQ!0MxOAN?_OOQOAN?OAN?OO%[QlOAN?_OOQO<<My<<MyOOQ[G27VG27VO!&zQMhOG27VO#(ZQ`OG27VO'/ZQ!fOG27VO4UQ!fOG27VO'/bQ`OG27VO'/jQ?MtO<<JfO'/wQ?MvO1G2`O'1mQ?MvO,5?aO'3pQ?MvO,5?cO'5sQ?MvO1G2sO'7vQ?MvO1G2uO'9yQ?MtO<<KXO':WQ?MtO<<I{OOQO1G1w1G1wO!,TQMhOANAiOOQO7+*c7+*cO':eQ`O7+*cO':pQ`O<= hO':xQ!dO7+*eOOQ!0Lb<<Kq<<KqO$+YQ`O<<KqOCwQ`O<<KqO';SQ`O<<KqO!&zQMhO<<KqOOQ!0Lb<<Ko<<KoO!CUQpO<<KoO';_Q!dO<<KqOOQ!0Lb<<Kp<<KpO';iQ`O<<KqO!&zQMhO<<KqO$+YQ`O<<KpO';nQMjOANDcO';xQ!0MvO<<KtOOQO7+*r7+*rO9kQ`O7+*rO'<YQ`O<= qOOQ[G27rG27rO9uQ!0LrOG27rO@zQ`OG27rO!)[QlO1G5SO'<bQ`O7+,SO'<jQ`O1G2kO&=UQ`OANBQOOQ[ANBQANBQO!&zQMhOANBQO'<oQ`OANBQOOQ[ANBSANBSO9uQ!0LrOANBSO$%dQ`OANBSOOQO'#H_'#H_OOQO7+*q7+*qOOQ[G22wG22wOOQ[ANE^ANE^OOQ[ANE_ANE_OOQ[ANB]ANB]O'<wQ`OANB]OOQ[<<MW<<MWO!)[QlOAN?lOOQOG24yG24yO$AlQ!0MxOG24yO#(ZQ`OLD,qOOQ[LD,qLD,qO!&zQMhOLD,qO'<|Q!fOLD,qO'=TQ?MvO7+'zO'>yQ?MvO,5?aO'@|Q?MvO,5?cO'CPQ?MvO7+'|O'DuQMjOG27TOOQO<<M}<<M}OOQ!0LbANA]ANA]O$+YQ`OANA]OCwQ`OANA]O'EVQ!dOANA]OOQ!0LbANAZANAZO'E^Q`OANA]O!&zQMhOANA]O'EiQ!dOANA]OOQ!0LbANA[ANA[OOQO<<N^<<N^OOQ[LD-^LD-^O9uQ!0LrOLD-^O'EsQ?MtO7+*nOOQO'#Gf'#GfOOQ[G27lG27lO&=UQ`OG27lO!&zQMhOG27lOOQ[G27nG27nO9uQ!0LrOG27nOOQ[G27wG27wO'E}Q?MtOG25WOOQOLD*eLD*eOOQ[!$(!]!$(!]O#(ZQ`O!$(!]O!&zQMhO!$(!]O'FXQ!0MzOG27TOOQ!0LbG26wG26wO$+YQ`OG26wO'HjQ`OG26wOCwQ`OG26wO'HuQ!dOG26wO!&zQMhOG26wOOQ[!$(!x!$(!xOOQ[LD-WLD-WO&=UQ`OLD-WOOQ[LD-YLD-YOOQ[!)9Ew!)9EwO#(ZQ`O!)9EwOOQ!0LbLD,cLD,cO$+YQ`OLD,cOCwQ`OLD,cO'H|Q`OLD,cO'IXQ!dOLD,cOOQ[!$(!r!$(!rOOQ[!.K;c!.K;cO'I`Q?MvOG27TOOQ!0Lb!$( }!$( }O$+YQ`O!$( }OCwQ`O!$( }O'KUQ`O!$( }OOQ!0Lb!)9Ei!)9EiO$+YQ`O!)9EiOCwQ`O!)9EiOOQ!0Lb!.K;T!.K;TO$+YQ`O!.K;TOOQ!0Lb!4/0o!4/0oO!)[QlO'#DzO1PQ`O'#EXO'KaQ!fO'#JrO'KhQ!L^O'#DvO'KoQlO'#EOO'KvQ!fO'#CiO'N^Q!fO'#CiO!)[QlO'#EQO'NnQlO,5;ZO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO'#IpO(!qQ`O,5<iO!)[QlO,5;eO(!yQMhO,5;eO($dQMhO,5;eO!)[QlO,5;wO!&zQMhO'#GmO(!yQMhO'#GmO!&zQMhO'#GoO(!yQMhO'#GoO1SQ`O'#DZO1SQ`O'#DZO!&zQMhO'#GPO(!yQMhO'#GPO!&zQMhO'#GRO(!yQMhO'#GRO!&zQMhO'#GaO(!yQMhO'#GaO!)[QlO,5:jO($kQpO'#D_O($uQpO'#JvO!)[QlO,5@oO'NnQlO1G0uO(%PQ?MtO'#CiO!)[QlO1G2PO!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO(%ZQ!dO'#CrO!&zQMhO,5<tO(!yQMhO,5<tO'NnQlO1G2RO!)[QlO7+&zO!&zQMhO1G2`O(!yQMhO1G2`O!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO!&zQMhO1G2bO(!yQMhO1G2bO'NnQlO7+'mO'NnQlO7+&aO!&zQMhOANAiO(!yQMhOANAiO(%nQ`O'#EoO(%sQ`O'#EoO(%{Q`O'#F]O(&QQ`O'#EyO(&VQ`O'#KTO(&bQ`O'#KRO(&mQ`O,5;ZO(&rQMjO,5<eO(&yQ`O'#GYO('OQ`O'#GYO('TQ`O,5<eO(']Q`O,5<gO('eQ`O,5;ZO('mQ?MtO1G1`O('tQ`O,5<tO('yQ`O,5<tO((OQ`O,5<vO((TQ`O,5<vO((YQ`O1G2RO((_Q`O1G0uO((dQMjO<<K}O((kQMjO<<K}O((rQMhO'#F|O9`Q`O'#F{OAuQ`O'#EnO!)[QlO,5;tO!3oQ`O'#GYO!3oQ`O'#GYO!3oQ`O'#G[O!3oQ`O'#G[O!,TQMhO7+(cO!,TQMhO7+(cO%.zQ!dO1G2wO%.zQ!dO1G2wO!&zQMhO,5=]O!&zQMhO,5=]\",stateData:\"()x~O'|OS'}OSTOS(ORQ~OPYOQYOSfOY!VOaqOdzOeyOl!POpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!uwO!xxO!|]O$W|O$niO%h}O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO&W!WO&^!XO&`!YO&b!ZO&d![O&g!]O&m!^O&s!_O&u!`O&w!aO&y!bO&{!cO(TSO(VTO(YUO(aVO(o[O~OWtO~P`OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa!wOs!nO!S!oO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!xO#W!pO#X!pO#[!zO#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O(O!{O~OP]XR]X[]Xa]Xj]Xr]X!Q]X!S]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X'z]X(a]X(r]X(y]X(z]X~O!g%RX~P(qO_!}O(V#PO(W!}O(X#PO~O_#QO(X#PO(Y#PO(Z#QO~Ox#SO!U#TO(b#TO(c#VO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T<ZO(VTO(YUO(aVO(o[O~O![#ZO!]#WO!Y(hP!Y(vP~P+}O!^#cO~P`OPYOQYOSfOd!jOe!iOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(VTO(YUO(aVO(o[O~Op#mO![#iO!|]O#i#lO#j#iO(T<[O!k(sP~P.iO!l#oO(T#nO~O!x#sO!|]O%h#tO~O#k#uO~O!g#vO#k#uO~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!]$_O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa(fX'z(fX'w(fX!k(fX!Y(fX!_(fX%i(fX!g(fX~P1qO#S$dO#`$eO$Q$eOP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX!_(gX%i(gX~Oa(gX'z(gX'w(gX!Y(gX!k(gXv(gX!g(gX~P4UO#`$eO~O$]$hO$_$gO$f$mO~OSfO!_$nO$i$oO$k$qO~Oh%VOj%dOk%dOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T$sO(VTO(YUO(a$uO(y$}O(z%POg(^P~Ol%[O~P7eO!l%eO~O!S%hO!_%iO(T%gO~O!g%mO~Oa%nO'z%nO~O!Q%rO~P%[O(U!lO~P%[O%n%vO~P%[Oh%VO!l%eO(T%gO(U!lO~Oe%}O!l%eO(T%gO~Oj$RO~O!_&PO(T%gO(U!lO(VTO(YUO`)WP~O!Q&SO!l&RO%j&VO&T&WO~P;SO!x#sO~O%s&YO!S)SX!_)SX(T)SX~O(T&ZO~Ol!PO!u&`O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO~Od&eOe&dO!x&bO%h&cO%{&aO~P<bOd&hOeyOl!PO!_&gO!u&`O!xxO!|]O%h}O%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO~Ob&kO#`&nO%j&iO(U!lO~P=gO!l&oO!u&sO~O!l#oO~O!_XO~Oa%nO'x&{O'z%nO~Oa%nO'x'OO'z%nO~Oa%nO'x'QO'z%nO~O'w]X!Y]Xv]X!k]X&[]X!_]X%i]X!g]X~P(qO!b'_O!c'WO!d'WO(U!lO(VTO(YUO~Os'UO!S'TO!['XO(e'SO!^(iP!^(xP~P@nOn'bO!_'`O(T%gO~Oe'gO!l%eO(T%gO~O!Q&SO!l&RO~Os!nO!S!oO!|<VO#T!pO#U!pO#W!pO#X!pO(U!lO(VTO(YUO(e!mO(o!sO~O!b'mO!c'lO!d'lO#V!pO#['nO#]'nO~PBYOa%nOh%VO!g#vO!l%eO'z%nO(r'pO~O!p'tO#`'rO~PChOs!nO!S!oO(VTO(YUO(e!mO(o!sO~O!_XOs(mX!S(mX!b(mX!c(mX!d(mX!|(mX#T(mX#U(mX#V(mX#W(mX#X(mX#[(mX#](mX(U(mX(V(mX(Y(mX(e(mX(o(mX~O!c'lO!d'lO(U!lO~PDWO(P'xO(Q'xO(R'zO~O_!}O(V'|O(W!}O(X'|O~O_#QO(X'|O(Y'|O(Z#QO~Ov(OO~P%[Ox#SO!U#TO(b#TO(c(RO~O![(TO!Y'WX!Y'^X!]'WX!]'^X~P+}O!](VO!Y(hX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!](VO!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~O!Y(hX~PHRO!Y([O~O!Y(uX!](uX!g(uX!k(uX(r(uX~O#`(uX#k#dX!^(uX~PJUO#`(]O!Y(wX!](wX~O!](^O!Y(vX~O!Y(aO~O#`$eO~PJUO!^(bO~P`OR#zO!Q#yO!S#{O!l#xO(aVOP!na[!naj!nar!na!]!na!p!na#R!na#n!na#o!na#p!na#q!na#r!na#s!na#t!na#u!na#v!na#x!na#z!na#{!na(r!na(y!na(z!na~Oa!na'z!na'w!na!Y!na!k!nav!na!_!na%i!na!g!na~PKlO!k(cO~O!g#vO#`(dO(r'pO!](tXa(tX'z(tX~O!k(tX~PNXO!S%hO!_%iO!|]O#i(iO#j(hO(T%gO~O!](jO!k(sX~O!k(lO~O!S%hO!_%iO#j(hO(T%gO~OP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~O!g#vO!k(gX~P! uOR(nO!Q(mO!l#xO#S$dO!|!{a!S!{a~O!x!{a%h!{a!_!{a#i!{a#j!{a(T!{a~P!#vO!x(rO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~O#k(xO~O![(zO!k(kP~P%[O(e(|O(o[O~O!S)OO!l#xO(e(|O(o[O~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]$_Oa$qa'z$qa'w$qa!k$qa!Y$qa!_$qa%i$qa!g$qa~Ol)dO~P!&zOh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Og(pP~P!,TO!Q)iO!g)hO!_$^X$Z$^X$]$^X$_$^X$f$^X~O!g)hO!_({X$Z({X$]({X$_({X$f({X~O!Q)iO~P!.^O!Q)iO!_({X$Z({X$]({X$_({X$f({X~O!_)kO$Z)oO$])jO$_)jO$f)pO~O![)sO~P!)[O$]$hO$_$gO$f)wO~On$zX!Q$zX#S$zX'y$zX(y$zX(z$zX~OgmXg$zXnmX!]mX#`mX~P!0SOx)yO(b)zO(c)|O~On*VO!Q*OO'y*PO(y$}O(z%PO~Og)}O~P!1WOg*WO~Oh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S*YO!_*ZO!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op*`O![*^O(T*XO!k)OP~P!1uO#k*aO~O!l*bO~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T*dO(VTO(YUO(a$uO(y$}O(z%PO~O![*gO!Y)PP~P!3tOr*sOs!nO!S*iO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO(e!mO~O!^*pO~P!5iO#S$dOn(`X!Q(`X'y(`X(y(`X(z(`X!](`X#`(`X~Og(`X$O(`X~P!6kOn*xO#`*wOg(_X!](_X~O!]*yOg(^X~Oj%dOk%dOl%dO(T&ZOg(^P~Os*|O~Og)}O(T&ZO~O!l+SO~O(T(vO~Op+WO!S%hO![#iO!_%iO!|]O#i#lO#j#iO(T%gO!k(sP~O!g#vO#k+XO~O!S%hO![+ZO!](^O!_%iO(T%gO!Y(vP~Os'[O!S+]O![+[O(VTO(YUO(e(|O~O!^(xP~P!9|O!]+^Oa)TX'z)TX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa!ja!]!ja'z!ja'w!ja!Y!ja!k!jav!ja!_!ja%i!ja!g!ja~P!:tOR#zO!Q#yO!S#{O!l#xO(aVOP!ra[!raj!rar!ra!]!ra!p!ra#R!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#v!ra#x!ra#z!ra#{!ra(r!ra(y!ra(z!ra~Oa!ra'z!ra'w!ra!Y!ra!k!rav!ra!_!ra%i!ra!g!ra~P!=[OR#zO!Q#yO!S#{O!l#xO(aVOP!ta[!taj!tar!ta!]!ta!p!ta#R!ta#n!ta#o!ta#p!ta#q!ta#r!ta#s!ta#t!ta#u!ta#v!ta#x!ta#z!ta#{!ta(r!ta(y!ta(z!ta~Oa!ta'z!ta'w!ta!Y!ta!k!tav!ta!_!ta%i!ta!g!ta~P!?rOh%VOn+gO!_'`O%i+fO~O!g+iOa(]X!_(]X'z(]X!](]X~Oa%nO!_XO'z%nO~Oh%VO!l%eO~Oh%VO!l%eO(T%gO~O!g#vO#k(xO~Ob+tO%j+uO(T+qO(VTO(YUO!^)XP~O!]+vO`)WX~O[+zO~O`+{O~O!_&PO(T%gO(U!lO`)WP~O%j,OO~P;SOh%VO#`,SO~Oh%VOn,VO!_$|O~O!_,XO~O!Q,ZO!_XO~O%n%vO~O!x,`O~Oe,eO~Ob,fO(T#nO(VTO(YUO!^)VP~Oe%}O~O%j!QO(T&ZO~P=gO[,kO`,jO~OPYOQYOSfOdzOeyOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!iuO!lZO!oYO!pYO!qYO!svO!xxO!|]O$niO%h}O(VTO(YUO(aVO(o[O~O!_!eO!u!gO$W!kO(T!dO~P!FyO`,jOa%nO'z%nO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa,pOl!OO!uwO%l!OO%m!OO%n!OO~P!IcO!l&oO~O&^,vO~O!_,xO~O&o,zO&q,{OP&laQ&laS&laY&laa&lad&lae&lal&lap&lar&las&lat&laz&la|&la!O&la!S&la!W&la!X&la!_&la!i&la!l&la!o&la!p&la!q&la!s&la!u&la!x&la!|&la$W&la$n&la%h&la%j&la%l&la%m&la%n&la%q&la%s&la%v&la%w&la%y&la&W&la&^&la&`&la&b&la&d&la&g&la&m&la&s&la&u&la&w&la&y&la&{&la'w&la(T&la(V&la(Y&la(a&la(o&la!^&la&e&lab&la&j&la~O(T-QO~Oh!eX!]!RX!^!RX!g!RX!g!eX!l!eX#`!RX~O!]!eX!^!eX~P#!iO!g-VO#`-UOh(jX!]#hX!^#hX!g(jX!l(jX~O!](jX!^(jX~P##[Oh%VO!g-XO!l%eO!]!aX!^!aX~Os!nO!S!oO(VTO(YUO(e!mO~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(VTO(YUO(aVO(o[O~O(T=QO~P#$qO!]-]O!^(iX~O!^-_O~O!g-VO#`-UO!]#hX!^#hX~O!]-`O!^(xX~O!^-bO~O!c-cO!d-cO(U!lO~P#$`O!^-fO~P'_On-iO!_'`O~O!Y-nO~Os!{a!b!{a!c!{a!d!{a#T!{a#U!{a#V!{a#W!{a#X!{a#[!{a#]!{a(U!{a(V!{a(Y!{a(e!{a(o!{a~P!#vO!p-sO#`-qO~PChO!c-uO!d-uO(U!lO~PDWOa%nO#`-qO'z%nO~Oa%nO!g#vO#`-qO'z%nO~Oa%nO!g#vO!p-sO#`-qO'z%nO(r'pO~O(P'xO(Q'xO(R-zO~Ov-{O~O!Y'Wa!]'Wa~P!:tO![.PO!Y'WX!]'WX~P%[O!](VO!Y(ha~O!Y(ha~PHRO!](^O!Y(va~O!S%hO![.TO!_%iO(T%gO!Y'^X!]'^X~O#`.VO!](ta!k(taa(ta'z(ta~O!g#vO~P#,wO!](jO!k(sa~O!S%hO!_%iO#j.ZO(T%gO~Op.`O!S%hO![.]O!_%iO!|]O#i._O#j.]O(T%gO!]'aX!k'aX~OR.dO!l#xO~Oh%VOn.gO!_'`O%i.fO~Oa#ci!]#ci'z#ci'w#ci!Y#ci!k#civ#ci!_#ci%i#ci!g#ci~P!:tOn>]O!Q*OO'y*PO(y$}O(z%PO~O#k#_aa#_a#`#_a'z#_a!]#_a!k#_a!_#_a!Y#_a~P#/sO#k(`XP(`XR(`X[(`Xa(`Xj(`Xr(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X'z(`X(a(`X(r(`X!k(`X!Y(`X'w(`Xv(`X!_(`X%i(`X!g(`X~P!6kO!].tO!k(kX~P!:tO!k.wO~O!Y.yO~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mia#mij#mir#mi!]#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#n#mi~P#3cO#n$OO~P#3cOP$[OR#zOr$aO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO[#mia#mij#mi!]#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#r#mi~P#6QO#r$QO~P#6QOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO(aVOa#mi!]#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#v#mi~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO(aVO(z#}Oa#mi!]#mi#z#mi#{#mi'z#mi(r#mi(y#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#x$UO~P#;VO#x#mi~P#;VO#v$SO~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO(aVO(y#|O(z#}Oa#mi!]#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#z#mi~P#={O#z$WO~P#={OP]XR]X[]Xj]Xr]X!Q]X!S]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X!]]X!^]X~O$O]X~P#@jOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO#z<gO#{<hO(aVO(r$YO(y#|O(z#}O~O$O.{O~P#BwO#S$dO#`<nO$Q<nO$O(gX!^(gX~P! uOa'da!]'da'z'da'w'da!k'da!Y'dav'da!_'da%i'da!g'da~P!:tO[#mia#mij#mir#mi!]#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO(y#mi(z#mi~P#EyOn>]O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P#EyO!]/POg(pX~P!1WOg/RO~Oa$Pi!]$Pi'z$Pi'w$Pi!Y$Pi!k$Piv$Pi!_$Pi%i$Pi!g$Pi~P!:tO$]/SO$_/SO~O$]/TO$_/TO~O!g)hO#`/UO!_$cX$Z$cX$]$cX$_$cX$f$cX~O![/VO~O!_)kO$Z/XO$])jO$_)jO$f/YO~O!]<iO!^(fX~P#BwO!^/ZO~O!g)hO$f({X~O$f/]O~Ov/^O~P!&zOx)yO(b)zO(c/aO~O!S/dO~O(y$}On%aa!Q%aa'y%aa(z%aa!]%aa#`%aa~Og%aa$O%aa~P#L{O(z%POn%ca!Q%ca'y%ca(y%ca!]%ca#`%ca~Og%ca$O%ca~P#MnO!]fX!gfX!kfX!k$zX(rfX~P!0SOp%WO![/mO!](^O(T/lO!Y(vP!Y)PP~P!1uOr*sO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO~Os<}O!S/nO![+[O!^*pO(e<|O!^(xP~P$ [O!k/oO~P#/sO!]/pO!g#vO(r'pO!k)OX~O!k/uO~OnoX!QoX'yoX(yoX(zoX~O!g#vO!koX~P$#OOp/wO!S%hO![*^O!_%iO(T%gO!k)OP~O#k/xO~O!Y$zX!]$zX!g%RX~P!0SO!]/yO!Y)PX~P#/sO!g/{O~O!Y/}O~OpkO(T0OO~P.iOh%VOr0TO!g#vO!l%eO(r'pO~O!g+iO~Oa%nO!]0XO'z%nO~O!^0ZO~P!5iO!c0[O!d0[O(U!lO~P#$`Os!nO!S0]O(VTO(YUO(e!mO~O#[0_O~Og%aa!]%aa#`%aa$O%aa~P!1WOg%ca!]%ca#`%ca$O%ca~P!1WOj%dOk%dOl%dO(T&ZOg'mX!]'mX~O!]*yOg(^a~Og0hO~On0jO#`0iOg(_a!](_a~OR0kO!Q0kO!S0lO#S$dOn}a'y}a(y}a(z}a!]}a#`}a~Og}a$O}a~P$(cO!Q*OO'y*POn$sa(y$sa(z$sa!]$sa#`$sa~Og$sa$O$sa~P$)_O!Q*OO'y*POn$ua(y$ua(z$ua!]$ua#`$ua~Og$ua$O$ua~P$*QO#k0oO~Og%Ta!]%Ta#`%Ta$O%Ta~P!1WO!g#vO~O#k0rO~O!]+^Oa)Ta'z)Ta~OR#zO!Q#yO!S#{O!l#xO(aVOP!ri[!rij!rir!ri!]!ri!p!ri#R!ri#n!ri#o!ri#p!ri#q!ri#r!ri#s!ri#t!ri#u!ri#v!ri#x!ri#z!ri#{!ri(r!ri(y!ri(z!ri~Oa!ri'z!ri'w!ri!Y!ri!k!riv!ri!_!ri%i!ri!g!ri~P$+oOh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op0{O%]0|O(T0zO~P$.VO!g+iOa(]a!_(]a'z(]a!](]a~O#k1SO~O[]X!]fX!^fX~O!]1TO!^)XX~O!^1VO~O[1WO~Ob1YO(T+qO(VTO(YUO~O!_&PO(T%gO`'uX!]'uX~O!]+vO`)Wa~O!k1]O~P!:tO[1`O~O`1aO~O#`1fO~On1iO!_$|O~O(e(|O!^)UP~Oh%VOn1rO!_1oO%i1qO~O[1|O!]1zO!^)VX~O!^1}O~O`2POa%nO'z%nO~O(T#nO(VTO(YUO~O#S$dO#`$eO$Q$eOP(gXR(gX[(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~Oj2SO&[2TOa(gX~P$3pOj2SO#`$eO&[2TO~Oa2VO~P%[Oa2XO~O&e2[OP&ciQ&ciS&ciY&cia&cid&cie&cil&cip&cir&cis&cit&ciz&ci|&ci!O&ci!S&ci!W&ci!X&ci!_&ci!i&ci!l&ci!o&ci!p&ci!q&ci!s&ci!u&ci!x&ci!|&ci$W&ci$n&ci%h&ci%j&ci%l&ci%m&ci%n&ci%q&ci%s&ci%v&ci%w&ci%y&ci&W&ci&^&ci&`&ci&b&ci&d&ci&g&ci&m&ci&s&ci&u&ci&w&ci&y&ci&{&ci'w&ci(T&ci(V&ci(Y&ci(a&ci(o&ci!^&cib&ci&j&ci~Ob2bO!^2`O&j2aO~P`O!_XO!l2dO~O&q,{OP&liQ&liS&liY&lia&lid&lie&lil&lip&lir&lis&lit&liz&li|&li!O&li!S&li!W&li!X&li!_&li!i&li!l&li!o&li!p&li!q&li!s&li!u&li!x&li!|&li$W&li$n&li%h&li%j&li%l&li%m&li%n&li%q&li%s&li%v&li%w&li%y&li&W&li&^&li&`&li&b&li&d&li&g&li&m&li&s&li&u&li&w&li&y&li&{&li'w&li(T&li(V&li(Y&li(a&li(o&li!^&li&e&lib&li&j&li~O!Y2jO~O!]!aa!^!aa~P#BwOs!nO!S!oO![2pO(e!mO!]'XX!^'XX~P@nO!]-]O!^(ia~O!]'_X!^'_X~P!9|O!]-`O!^(xa~O!^2wO~P'_Oa%nO#`3QO'z%nO~Oa%nO!g#vO#`3QO'z%nO~Oa%nO!g#vO!p3UO#`3QO'z%nO(r'pO~Oa%nO'z%nO~P!:tO!]$_Ov$qa~O!Y'Wi!]'Wi~P!:tO!](VO!Y(hi~O!](^O!Y(vi~O!Y(wi!](wi~P!:tO!](ti!k(tia(ti'z(ti~P!:tO#`3WO!](ti!k(tia(ti'z(ti~O!](jO!k(si~O!S%hO!_%iO!|]O#i3]O#j3[O(T%gO~O!S%hO!_%iO#j3[O(T%gO~On3dO!_'`O%i3cO~Oh%VOn3dO!_'`O%i3cO~O#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aav%aa!_%aa%i%aa!g%aa~P#L{O#k%caP%caR%ca[%caa%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%cav%ca!_%ca%i%ca!g%ca~P#MnO#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!]%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aa#`%aav%aa!_%aa%i%aa!g%aa~P#/sO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!]%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%ca#`%cav%ca!_%ca%i%ca!g%ca~P#/sO#k}aP}a[}aa}aj}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a'z}a(a}a(r}a!k}a!Y}a'w}av}a!_}a%i}a!g}a~P$(cO#k$saP$saR$sa[$saa$saj$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa'z$sa(a$sa(r$sa!k$sa!Y$sa'w$sav$sa!_$sa%i$sa!g$sa~P$)_O#k$uaP$uaR$ua[$uaa$uaj$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua'z$ua(a$ua(r$ua!k$ua!Y$ua'w$uav$ua!_$ua%i$ua!g$ua~P$*QO#k%TaP%TaR%Ta[%Taa%Taj%Tar%Ta!S%Ta!]%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta'z%Ta(a%Ta(r%Ta!k%Ta!Y%Ta'w%Ta#`%Tav%Ta!_%Ta%i%Ta!g%Ta~P#/sOa#cq!]#cq'z#cq'w#cq!Y#cq!k#cqv#cq!_#cq%i#cq!g#cq~P!:tO![3lO!]'YX!k'YX~P%[O!].tO!k(ka~O!].tO!k(ka~P!:tO!Y3oO~O$O!na!^!na~PKlO$O!ja!]!ja!^!ja~P#BwO$O!ra!^!ra~P!=[O$O!ta!^!ta~P!?rOg']X!]']X~P!,TO!]/POg(pa~OSfO!_4TO$d4UO~O!^4YO~Ov4ZO~P#/sOa$mq!]$mq'z$mq'w$mq!Y$mq!k$mqv$mq!_$mq%i$mq!g$mq~P!:tO!Y4]O~P!&zO!S4^O~O!Q*OO'y*PO(z%POn'ia(y'ia!]'ia#`'ia~Og'ia$O'ia~P%-fO!Q*OO'y*POn'ka(y'ka(z'ka!]'ka#`'ka~Og'ka$O'ka~P%.XO(r$YO~P#/sO!YfX!Y$zX!]fX!]$zX!g%RX#`fX~P!0SOp%WO(T=WO~P!1uOp4bO!S%hO![4aO!_%iO(T%gO!]'eX!k'eX~O!]/pO!k)Oa~O!]/pO!g#vO!k)Oa~O!]/pO!g#vO(r'pO!k)Oa~Og$|i!]$|i#`$|i$O$|i~P!1WO![4jO!Y'gX!]'gX~P!3tO!]/yO!Y)Pa~O!]/yO!Y)Pa~P#/sOP]XR]X[]Xj]Xr]X!Q]X!S]X!Y]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~Oj%YX!g%YX~P%2OOj4oO!g#vO~Oh%VO!g#vO!l%eO~Oh%VOr4tO!l%eO(r'pO~Or4yO!g#vO(r'pO~Os!nO!S4zO(VTO(YUO(e!mO~O(y$}On%ai!Q%ai'y%ai(z%ai!]%ai#`%ai~Og%ai$O%ai~P%5oO(z%POn%ci!Q%ci'y%ci(y%ci!]%ci#`%ci~Og%ci$O%ci~P%6bOg(_i!](_i~P!1WO#`5QOg(_i!](_i~P!1WO!k5VO~Oa$oq!]$oq'z$oq'w$oq!Y$oq!k$oqv$oq!_$oq%i$oq!g$oq~P!:tO!Y5ZO~O!]5[O!_)QX~P#/sOa$zX!_$zX%^]X'z$zX!]$zX~P!0SO%^5_OaoX!_oX'zoX!]oX~P$#OOp5`O(T#nO~O%^5_O~Ob5fO%j5gO(T+qO(VTO(YUO!]'tX!^'tX~O!]1TO!^)Xa~O[5kO~O`5lO~O[5pO~Oa%nO'z%nO~P#/sO!]5uO#`5wO!^)UX~O!^5xO~Or6OOs!nO!S*iO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!pO#W!pO#X!pO#[5}O#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O!^5|O~P%;eOn6TO!_1oO%i6SO~Oh%VOn6TO!_1oO%i6SO~Ob6[O(T#nO(VTO(YUO!]'sX!^'sX~O!]1zO!^)Va~O(VTO(YUO(e6^O~O`6bO~Oj6eO&[6fO~PNXO!k6gO~P%[Oa6iO~Oa6iO~P%[Ob2bO!^6nO&j2aO~P`O!g6pO~O!g6rOh(ji!](ji!^(ji!g(ji!l(jir(ji(r(ji~O!]#hi!^#hi~P#BwO#`6sO!]#hi!^#hi~O!]!ai!^!ai~P#BwOa%nO#`6|O'z%nO~Oa%nO!g#vO#`6|O'z%nO~O!](tq!k(tqa(tq'z(tq~P!:tO!](jO!k(sq~O!S%hO!_%iO#j7TO(T%gO~O!_'`O%i7WO~On7[O!_'`O%i7WO~O#k'iaP'iaR'ia['iaa'iaj'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia'z'ia(a'ia(r'ia!k'ia!Y'ia'w'iav'ia!_'ia%i'ia!g'ia~P%-fO#k'kaP'kaR'ka['kaa'kaj'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka'z'ka(a'ka(r'ka!k'ka!Y'ka'w'kav'ka!_'ka%i'ka!g'ka~P%.XO#k$|iP$|iR$|i[$|ia$|ij$|ir$|i!S$|i!]$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i'z$|i(a$|i(r$|i!k$|i!Y$|i'w$|i#`$|iv$|i!_$|i%i$|i!g$|i~P#/sO#k%aiP%aiR%ai[%aia%aij%air%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai'z%ai(a%ai(r%ai!k%ai!Y%ai'w%aiv%ai!_%ai%i%ai!g%ai~P%5oO#k%ciP%ciR%ci[%cia%cij%cir%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci'z%ci(a%ci(r%ci!k%ci!Y%ci'w%civ%ci!_%ci%i%ci!g%ci~P%6bO!]'Ya!k'Ya~P!:tO!].tO!k(ki~O$O#ci!]#ci!^#ci~P#BwOP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mij#mir#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#n#mi~P%NdO#n<_O~P%NdOP$[OR#zOr<kO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO[#mij#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#r#mi~P&!lO#r<aO~P&!lOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO(aVO#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#v#mi~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO(aVO(z#}O#z#mi#{#mi$O#mi(r#mi(y#mi!]#mi!^#mi~O#x<eO~P&&uO#x#mi~P&&uO#v<cO~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO(aVO(y#|O(z#}O#{#mi$O#mi(r#mi!]#mi!^#mi~O#z#mi~P&)UO#z<gO~P&)UOa#|y!]#|y'z#|y'w#|y!Y#|y!k#|yv#|y!_#|y%i#|y!g#|y~P!:tO[#mij#mir#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi!]#mi!^#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO(y#mi(z#mi~P&,QOn>^O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P&,QO#S$dOP(`XR(`X[(`Xj(`Xn(`Xr(`X!Q(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X$O(`X'y(`X(a(`X(r(`X(y(`X(z(`X!](`X!^(`X~O$O$Pi!]$Pi!^$Pi~P#BwO$O!ri!^!ri~P$+oOg']a!]']a~P!1WO!^7nO~O!]'da!^'da~P#BwO!Y7oO~P#/sO!g#vO(r'pO!]'ea!k'ea~O!]/pO!k)Oi~O!]/pO!g#vO!k)Oi~Og$|q!]$|q#`$|q$O$|q~P!1WO!Y'ga!]'ga~P#/sO!g7vO~O!]/yO!Y)Pi~P#/sO!]/yO!Y)Pi~O!Y7yO~Oh%VOr8OO!l%eO(r'pO~Oj8QO!g#vO~Or8TO!g#vO(r'pO~O!Q*OO'y*PO(z%POn'ja(y'ja!]'ja#`'ja~Og'ja$O'ja~P&5RO!Q*OO'y*POn'la(y'la(z'la!]'la#`'la~Og'la$O'la~P&5tOg(_q!](_q~P!1WO#`8VOg(_q!](_q~P!1WO!Y8WO~Og%Oq!]%Oq#`%Oq$O%Oq~P!1WOa$oy!]$oy'z$oy'w$oy!Y$oy!k$oyv$oy!_$oy%i$oy!g$oy~P!:tO!g6rO~O!]5[O!_)Qa~O!_'`OP$TaR$Ta[$Taj$Tar$Ta!Q$Ta!S$Ta!]$Ta!l$Ta!p$Ta#R$Ta#n$Ta#o$Ta#p$Ta#q$Ta#r$Ta#s$Ta#t$Ta#u$Ta#v$Ta#x$Ta#z$Ta#{$Ta(a$Ta(r$Ta(y$Ta(z$Ta~O%i7WO~P&8fO%^8[Oa%[i!_%[i'z%[i!]%[i~Oa#cy!]#cy'z#cy'w#cy!Y#cy!k#cyv#cy!_#cy%i#cy!g#cy~P!:tO[8^O~Ob8`O(T+qO(VTO(YUO~O!]1TO!^)Xi~O`8dO~O(e(|O!]'pX!^'pX~O!]5uO!^)Ua~O!^8nO~P%;eO(o!sO~P$&YO#[8oO~O!_1oO~O!_1oO%i8qO~On8tO!_1oO%i8qO~O[8yO!]'sa!^'sa~O!]1zO!^)Vi~O!k8}O~O!k9OO~O!k9RO~O!k9RO~P%[Oa9TO~O!g9UO~O!k9VO~O!](wi!^(wi~P#BwOa%nO#`9_O'z%nO~O!](ty!k(tya(ty'z(ty~P!:tO!](jO!k(sy~O%i9bO~P&8fO!_'`O%i9bO~O#k$|qP$|qR$|q[$|qa$|qj$|qr$|q!S$|q!]$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q'z$|q(a$|q(r$|q!k$|q!Y$|q'w$|q#`$|qv$|q!_$|q%i$|q!g$|q~P#/sO#k'jaP'jaR'ja['jaa'jaj'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja'z'ja(a'ja(r'ja!k'ja!Y'ja'w'jav'ja!_'ja%i'ja!g'ja~P&5RO#k'laP'laR'la['laa'laj'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la'z'la(a'la(r'la!k'la!Y'la'w'lav'la!_'la%i'la!g'la~P&5tO#k%OqP%OqR%Oq[%Oqa%Oqj%Oqr%Oq!S%Oq!]%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq'z%Oq(a%Oq(r%Oq!k%Oq!Y%Oq'w%Oq#`%Oqv%Oq!_%Oq%i%Oq!g%Oq~P#/sO!]'Yi!k'Yi~P!:tO$O#cq!]#cq!^#cq~P#BwO(y$}OP%aaR%aa[%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa$O%aa(a%aa(r%aa!]%aa!^%aa~On%aa!Q%aa'y%aa(z%aa~P&IyO(z%POP%caR%ca[%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca$O%ca(a%ca(r%ca!]%ca!^%ca~On%ca!Q%ca'y%ca(y%ca~P&LQOn>^O!Q*OO'y*PO(z%PO~P&IyOn>^O!Q*OO'y*PO(y$}O~P&LQOR0kO!Q0kO!S0lO#S$dOP}a[}aj}an}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a$O}a'y}a(a}a(r}a(y}a(z}a!]}a!^}a~O!Q*OO'y*POP$saR$sa[$saj$san$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa$O$sa(a$sa(r$sa(y$sa(z$sa!]$sa!^$sa~O!Q*OO'y*POP$uaR$ua[$uaj$uan$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua$O$ua(a$ua(r$ua(y$ua(z$ua!]$ua!^$ua~On>^O!Q*OO'y*PO(y$}O(z%PO~OP%TaR%Ta[%Taj%Tar%Ta!S%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta$O%Ta(a%Ta(r%Ta!]%Ta!^%Ta~P''VO$O$mq!]$mq!^$mq~P#BwO$O$oq!]$oq!^$oq~P#BwO!^9oO~O$O9pO~P!1WO!g#vO!]'ei!k'ei~O!g#vO(r'pO!]'ei!k'ei~O!]/pO!k)Oq~O!Y'gi!]'gi~P#/sO!]/yO!Y)Pq~Or9wO!g#vO(r'pO~O[9yO!Y9xO~P#/sO!Y9xO~Oj:PO!g#vO~Og(_y!](_y~P!1WO!]'na!_'na~P#/sOa%[q!_%[q'z%[q!]%[q~P#/sO[:UO~O!]1TO!^)Xq~O`:YO~O#`:ZO!]'pa!^'pa~O!]5uO!^)Ui~P#BwO!S:]O~O!_1oO%i:`O~O(VTO(YUO(e:eO~O!]1zO!^)Vq~O!k:hO~O!k:iO~O!k:jO~O!k:jO~P%[O#`:mO!]#hy!^#hy~O!]#hy!^#hy~P#BwO%i:rO~P&8fO!_'`O%i:rO~O$O#|y!]#|y!^#|y~P#BwOP$|iR$|i[$|ij$|ir$|i!S$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i$O$|i(a$|i(r$|i!]$|i!^$|i~P''VO!Q*OO'y*PO(z%POP'iaR'ia['iaj'ian'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia$O'ia(a'ia(r'ia(y'ia!]'ia!^'ia~O!Q*OO'y*POP'kaR'ka['kaj'kan'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka$O'ka(a'ka(r'ka(y'ka(z'ka!]'ka!^'ka~O(y$}OP%aiR%ai[%aij%ain%air%ai!Q%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai$O%ai'y%ai(a%ai(r%ai(z%ai!]%ai!^%ai~O(z%POP%ciR%ci[%cij%cin%cir%ci!Q%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci$O%ci'y%ci(a%ci(r%ci(y%ci!]%ci!^%ci~O$O$oy!]$oy!^$oy~P#BwO$O#cy!]#cy!^#cy~P#BwO!g#vO!]'eq!k'eq~O!]/pO!k)Oy~O!Y'gq!]'gq~P#/sOr:|O!g#vO(r'pO~O[;QO!Y;PO~P#/sO!Y;PO~Og(_!R!](_!R~P!1WOa%[y!_%[y'z%[y!]%[y~P#/sO!]1TO!^)Xy~O!]5uO!^)Uq~O(T;XO~O!_1oO%i;[O~O!k;_O~O%i;dO~P&8fOP$|qR$|q[$|qj$|qr$|q!S$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q$O$|q(a$|q(r$|q!]$|q!^$|q~P''VO!Q*OO'y*PO(z%POP'jaR'ja['jaj'jan'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja$O'ja(a'ja(r'ja(y'ja!]'ja!^'ja~O!Q*OO'y*POP'laR'la['laj'lan'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la$O'la(a'la(r'la(y'la(z'la!]'la!^'la~OP%OqR%Oq[%Oqj%Oqr%Oq!S%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq$O%Oq(a%Oq(r%Oq!]%Oq!^%Oq~P''VOg%e!Z!]%e!Z#`%e!Z$O%e!Z~P!1WO!Y;hO~P#/sOr;iO!g#vO(r'pO~O[;kO!Y;hO~P#/sO!]'pq!^'pq~P#BwO!]#h!Z!^#h!Z~P#BwO#k%e!ZP%e!ZR%e!Z[%e!Za%e!Zj%e!Zr%e!Z!S%e!Z!]%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z'z%e!Z(a%e!Z(r%e!Z!k%e!Z!Y%e!Z'w%e!Z#`%e!Zv%e!Z!_%e!Z%i%e!Z!g%e!Z~P#/sOr;tO!g#vO(r'pO~O!Y;uO~P#/sOr;|O!g#vO(r'pO~O!Y;}O~P#/sOP%e!ZR%e!Z[%e!Zj%e!Zr%e!Z!S%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z$O%e!Z(a%e!Z(r%e!Z!]%e!Z!^%e!Z~P''VOr<QO!g#vO(r'pO~Ov(fX~P1qO!Q%rO~P!)[O(U!lO~P!)[O!YfX!]fX#`fX~P%2OOP]XR]X[]Xj]Xr]X!Q]X!S]X!]]X!]fX!l]X!p]X#R]X#S]X#`]X#`fX#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~O!gfX!k]X!kfX(rfX~P'LTOP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_XO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]<iO!^$qa~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<tO!S${O!_$|O!i>WO!l$xO#j<zO$W%`O$t<vO$v<xO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Ol)dO~P(!yOr!eX(r!eX~P#!iOr(jX(r(jX~P##[O!^]X!^fX~P'LTO!YfX!Y$zX!]fX!]$zX#`fX~P!0SO#k<^O~O!g#vO#k<^O~O#`<nO~Oj<bO~O#`=OO!](wX!^(wX~O#`<nO!](uX!^(uX~O#k=PO~Og=RO~P!1WO#k=XO~O#k=YO~Og=RO(T&ZO~O!g#vO#k=ZO~O!g#vO#k=PO~O$O=[O~P#BwO#k=]O~O#k=^O~O#k=cO~O#k=dO~O#k=eO~O#k=fO~O$O=gO~P!1WO$O=hO~P!1WOl=sO~P7eOk#S#T#U#W#X#[#i#j#u$n$t$v$y%]%^%h%i%j%q%s%v%w%y%{~(OT#o!X'|(U#ps#n#qr!Q'}$]'}(T$_(e~\",goto:\"$9Y)]PPPPPP)^PP)aP)rP+W/]PPPP6mPP7TPP=QPPP@tPA^PA^PPPA^PCfPA^PA^PA^PCjPCoPD^PIWPPPI[PPPPI[L_PPPLeMVPI[PI[PP! eI[PPPI[PI[P!#lI[P!'S!(X!(bP!)U!)Y!)U!,gPPPPPPP!-W!(XPP!-h!/YP!2iI[I[!2n!5z!:h!:h!>gPPP!>oI[PPPPPPPPP!BOP!C]PPI[!DnPI[PI[I[I[I[I[PI[!FQP!I[P!LbP!Lf!Lp!Lt!LtP!IXP!Lx!LxP#!OP#!SI[PI[#!Y#%_CjA^PA^PA^A^P#&lA^A^#)OA^#+vA^#.SA^A^#.r#1W#1W#1]#1f#1W#1qPP#1WPA^#2ZA^#6YA^A^6mPPP#:_PPP#:x#:xP#:xP#;`#:xPP#;fP#;]P#;]#;y#;]#<e#<k#<n)aP#<q)aP#<z#<z#<zP)aP)aP)aP)aPP)aP#=Q#=TP#=T)aP#=XP#=[P)aP)aP)aP)aP)aP)a)aPP#=b#=h#=s#=y#>P#>V#>]#>k#>q#>{#?R#?]#?c#?s#?y#@k#@}#AT#AZ#Ai#BO#Cs#DR#DY#Et#FS#Gt#HS#HY#H`#Hf#Hp#Hv#H|#IW#Ij#IpPPPPPPPPPPP#IvPPPPPPP#Jk#Mx$ b$ i$ qPPP$']P$'f$*_$0x$0{$1O$1}$2Q$2X$2aP$2g$2jP$3W$3[$4S$5b$5g$5}PP$6S$6Y$6^$6a$6e$6i$7e$7|$8e$8i$8l$8o$8y$8|$9Q$9UR!|RoqOXst!Z#d%m&r&t&u&w,s,x2[2_Y!vQ'`-e1o5{Q%tvQ%|yQ&T|Q&j!VS'W!e-]Q'f!iS'l!r!yU*k$|*Z*oQ+o%}S+|&V&WQ,d&dQ-c'_Q-m'gQ-u'mQ0[*qQ1b,OQ1y,eR<{<Y%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_S#q]<V!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU+P%]<s<tQ+t&PQ,f&gQ,m&oQ0x+gQ0}+iQ1Y+uQ2R,kQ3`.gQ5`0|Q5f1TQ6[1zQ7Y3dQ8`5gR9e7['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S!S!nQ!r!v!y!z$|'W'_'`'l'm'n*k*o*q*r-]-c-e-u0[0_1o5{5}%[$ti#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q&X|Q'U!eS'[%i-`Q+t&PQ,P&WQ,f&gQ0n+SQ1Y+uQ1_+{Q2Q,jQ2R,kQ5f1TQ5o1aQ6[1zQ6_1|Q6`2PQ8`5gQ8c5lQ8|6bQ:X8dQ:f8yQ;V:YR<}*ZrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R,h&k&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'b'r(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>R>S[#]WZ#W#Z'X(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ%wxQ%{yW&Q|&V&W,OQ&_!TQ'c!hQ'e!iQ(q#sS+n%|%}Q+r&PQ,_&bQ,c&dS-l'f'gQ.i(rQ1R+oQ1X+uQ1Z+vQ1^+zQ1t,`S1x,d,eQ2|-mQ5e1TQ5i1WQ5n1`Q6Z1yQ8_5gQ8b5kQ8f5pQ:T8^R;T:U!U$zi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y!^%yy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{Q+h%wQ,T&[Q,W&]Q,b&dQ.h(qQ1s,_U1w,c,d,eQ3e.iQ6U1tS6Y1x1yQ8x6Z#f>T#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o>U<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hW%Ti%V*y>PS&[!Q&iQ&]!RQ&^!SU*}%[%d=sR,R&Y%]%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^T)z$u){V+P%]<s<tW'[!e%i*Z-`S(}#y#zQ+c%rQ+y&SS.b(m(nQ1j,XQ5T0kR8i5u'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S$i$^c#Y#e%q%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.|.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ'Y!eR2q-]!W!nQ!e!r!v!y!z$|'W'_'`'l'm'n*Z*k*o*q*r-]-c-e-u0[0_1o5{5}R1l,ZnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&y!^Q'v!xS(s#u<^Q+l%zQ,]&_Q,^&aQ-j'dQ-w'oS.r(x=PS0q+X=ZQ1P+mQ1n,[Q2c,zQ2e,{Q2m-WQ2z-kQ2}-oS5Y0r=eQ5a1QS5d1S=fQ6t2oQ6x2{Q6}3SQ8]5bQ9Y6vQ9Z6yQ9^7OR:l9V$d$]c#Y#e%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vS(o#p'iQ)P#zS+b%q.|S.c(n(pR3^.d'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS#q]<VQ&t!XQ&u!YQ&w![Q&x!]R2Z,vQ'a!hQ+e%wQ-h'cS.e(q+hQ2x-gW3b.h.i0w0yQ6w2yW7U3_3a3e5^U9a7V7X7ZU:q9c9d9fS;b:p:sQ;p;cR;x;qU!wQ'`-eT5y1o5{!Q_OXZ`st!V!Z#d#h%e%m&i&k&r&t&u&w(j,s,x.[2[2_]!pQ!r'`-e1o5{T#q]<V%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S(}#y#zS.b(m(n!s=l$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU$fd)_,mS(p#p'iU*v%R(w4OU0m+O.n7gQ5^0xQ7V3`Q9d7YR:s9em!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}Q't!uS(f#g2US-s'k'wQ/s*]Q0R*jQ3U-vQ4f/tQ4r0TQ4s0UQ4x0^Q7r4`S7}4t4vS8R4y4{Q9r7sQ9v7yQ9{8OQ:Q8TS:{9w9xS;g:|;PS;s;h;iS;{;t;uS<P;|;}R<S<QQ#wbQ's!uS(e#g2US(g#m+WQ+Y%fQ+j%xQ+p&OU-r'k't'wQ.W(fU/r*]*`/wQ0S*jQ0V*lQ1O+kQ1u,aS3R-s-vQ3Z.`S4e/s/tQ4n0PS4q0R0^Q4u0WQ6W1vQ7P3US7q4`4bQ7u4fU7|4r4x4{Q8P4wQ8v6XS9q7r7sQ9u7yQ9}8RQ:O8SQ:c8wQ:y9rS:z9v9xQ;S:QQ;^:dS;f:{;PS;r;g;hS;z;s;uS<O;{;}Q<R<PQ<T<SQ=o=jQ={=tR=|=uV!wQ'`-e%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S#wz!j!r=i$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=o>R%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Q%fj!^%xy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{S&Oz!jQ+k%yQ,a&dW1v,b,c,d,eU6X1w1x1yS8w6Y6ZQ:d8x!r=j$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ=t>QR=u>R%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Y#bWZ#W#Z(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ,n&o!p=k$Z$n)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=n'XU']!e%i*ZR2s-`%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ,m&oQ0x+gQ3`.gQ7Y3dR9e7[!b$Tc#Y%q(S(Y(t(y)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!P<d)^)q-Z.|2k2n3p3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!f$Vc#Y%q(S(Y(t(y)W)X)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!T<f)^)q-Z.|2k2n3p3v3w3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!^$Zc#Y%q(S(Y(t(y)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<WQ4_/kz>S)^)q-Z.|2k2n3p4P4X6u7b7k7l8k9X9g9m9n;W;`=vQ>X>ZR>Y>['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS$oh$pR4U/U'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$kf$qQ$ifS)j$l)nR)v$qT$jf$qT)l$l)n'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$oh$pQ$rhR)u$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_!s>Q$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S#glOPXZst!Z!`!o#S#d#o#{$n%m&k&n&o&r&t&u&w&{'T'b)O)s*i+]+g,p,s,x-i.g/V/n0]0l1r2S2T2V2X2[2_2a3d4T4z6T6e6f6i7[8t9T!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^Q+T%aQ/c*Oo4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!U$yi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>YQ*c$zU*l$|*Z*oQ+U%bQ0W*m#f=q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n=r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hQ=w>TQ=x>UQ=y>VR=z>W!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hnoOXst!Z#d%m&r&t&u&w,s,x2[2_S*f${*YQ-R'OQ-S'QR4i/y%[%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q,U&]Q1h,WQ5s1gR8h5tV*n$|*Z*oU*n$|*Z*oT5z1o5{S0P*i/nQ4w0]T8S4z:]Q+j%xQ0V*lQ1O+kQ1u,aQ6W1vQ8v6XQ:c8wR;^:d!U%Oi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Yx*R$v)e*S*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>OS0`*t0a#f<o#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<p<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!d=S(u)c*[*e.j.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[`=T3}7c7f7j9h:t:w;yS=_.l3iT=`7e9k!U%Qi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y|*T$v)e*U*t+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>OS0b*u0c#f<q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!h=U(u)c*[*e.k.l.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[d=V3}7d7e7j9h9i:t:u:w;yS=a.m3jT=b7f9lrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q&f!UR,p&ornOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R&f!UQ,Y&^R1d,RsnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q1p,_S6R1s1tU8p6P6Q6US:_8r8sS;Y:^:aQ;m;ZR;w;nQ&m!VR,i&iR6_1|R:f8yW&Q|&V&W,OR1Z+vQ&r!WR,s&sR,y&xT2],x2_R,}&yQ,|&yR2f,}Q'y!{R-y'ySsOtQ#dXT%ps#dQ#OTR'{#OQ#RUR'}#RQ){$uR/`){Q#UVR(Q#UQ#XWU(W#X(X.QQ(X#YR.Q(YQ-^'YR2r-^Q.u(yS3m.u3nR3n.vQ-e'`R2v-eY!rQ'`-e1o5{R'j!rQ/Q)eR4S/QU#_W%h*YU(_#_(`.RQ(`#`R.R(ZQ-a']R2t-at`OXst!V!Z#d%m&i&k&r&t&u&w,s,x2[2_S#hZ%eU#r`#h.[R.[(jQ(k#jQ.X(gW.a(k.X3X7RQ3X.YR7R3YQ)n$lR/W)nQ$phR)t$pQ$`cU)a$`-|<jQ-|<WR<j)qQ/q*]W4c/q4d7t9sU4d/r/s/tS7t4e4fR9s7u$e*Q$v(u)c)e*[*e*t*u+Q+R+V.l.m.o.p.q/_/g/i/k/v/|0d0e0v1e3f3g3h3}4R4[4g4h4l4|5O5R5S5W5r7]7^7_7`7e7f7h7i7j7p7w7z8U8X8Z9h9i9j9t9|:R:S:t:u:v:w:x:};R;e;j;v;y=p=}>O>Z>[Q/z*eU4k/z4m7xQ4m/|R7x4lS*o$|*ZR0Y*ox*S$v)e*t*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>O!d.j(u)c*[*e.l.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/h*S.j7ca7c3}7e7f7j9h:t:w;yQ0a*tQ3i.lU4}0a3i9kR9k7e|*U$v)e*t*u+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>O!h.k(u)c*[*e.l.m.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/j*U.k7de7d3}7e7f7j9h9i:t:u:w;yQ0c*uQ3j.mU5P0c3j9lR9l7fQ*z%UR0g*zQ5]0vR8Y5]Q+_%kR0u+_Q5v1jS8j5v:[R:[8kQ,[&_R1m,[Q5{1oR8m5{Q1{,fS6]1{8zR8z6_Q1U+rW5h1U5j8a:VQ5j1XQ8a5iR:V8bQ+w&QR1[+wQ2_,xR6m2_YrOXst#dQ&v!ZQ+a%mQ,r&rQ,t&tQ,u&uQ,w&wQ2Y,sS2],x2_R6l2[Q%opQ&z!_Q&}!aQ'P!bQ'R!cQ'q!uQ+`%lQ+l%zQ,Q&XQ,h&mQ-P&|W-p'k's't'wQ-w'oQ0X*nQ1P+mQ1c,PS2O,i,lQ2g-OQ2h-RQ2i-SQ2}-oW3P-r-s-v-xQ5a1QQ5m1_Q5q1eQ6V1uQ6a2QQ6k2ZU6z3O3R3UQ6}3SQ8]5bQ8e5oQ8g5rQ8l5zQ8u6WQ8{6`S9[6{7PQ9^7OQ:W8cQ:b8vQ:g8|Q:n9]Q;U:XQ;]:cQ;a:oQ;l;VR;o;^Q%zyQ'd!iQ'o!uU+m%{%|%}Q-W'VU-k'e'f'gS-o'k'uQ0Q*jS1Q+n+oQ2o-YS2{-l-mQ3S-tS4p0R0UQ5b1RQ6v2uQ6y2|Q7O3TU7{4r4s4vQ9z7}R;O9{S$wi>PR*{%VU%Ui%V>PR0f*yQ$viS(u#v+iS)c$b$cQ)e$dQ*[$xS*e${*YQ*t%OQ*u%QQ+Q%^Q+R%_Q+V%cQ.l<oQ.m<qQ.o<uQ.p<wQ.q<yQ/_)yQ/g*RQ/i*TQ/k*VQ/v*aS/|*g/mQ0d*wQ0e*xl0v+f,V.f1i1q3c6S7W8q9b:`:r;[;dQ1e,SQ3f=SQ3g=UQ3h=XS3}<l<mQ4R/PS4[/d4^Q4g/xQ4h/yQ4l/{Q4|0`Q5O0bQ5R0iQ5S0jQ5W0oQ5r1fQ7]=]Q7^=_Q7_=aQ7`=cQ7e<pQ7f<rQ7h<vQ7i<xQ7j<zQ7p4_Q7w4jQ7z4oQ8U5QQ8X5[Q8Z5_Q9h=YQ9i=TQ9j=VQ9t7vQ9|8QQ:R8VQ:S8[Q:t=^Q:u=`Q:v=bQ:w=dQ:x9pQ:}9yQ;R:PQ;e=gQ;j;QQ;v;kQ;y=hQ=p>PQ=}>XQ>O>YQ>Z>]R>[>^Q+O%]Q.n<sR7g<tnpOXst!Z#d%m&r&t&u&w,s,x2[2_Q!fPS#fZ#oQ&|!`W'h!o*i0]4zQ(P#SQ)Q#{Q)r$nS,l&k&nQ,q&oQ-O&{S-T'T/nQ-g'bQ.x)OQ/[)sQ0s+]Q0y+gQ2W,pQ2y-iQ3a.gQ4W/VQ5U0lQ6Q1rQ6c2SQ6d2TQ6h2VQ6j2XQ6o2aQ7Z3dQ7m4TQ8s6TQ9P6eQ9Q6fQ9S6iQ9f7[Q:a8tR:k9T#[cOPXZst!Z!`!o#d#o#{%m&k&n&o&r&t&u&w&{'T'b)O*i+]+g,p,s,x-i.g/n0]0l1r2S2T2V2X2[2_2a3d4z6T6e6f6i7[8t9TQ#YWQ#eYQ%quQ%svS%uw!gS(S#W(VQ(Y#ZQ(t#uQ(y#xQ)R$OQ)S$PQ)T$QQ)U$RQ)V$SQ)W$TQ)X$UQ)Y$VQ)Z$WQ)[$XQ)^$ZQ)`$_Q)b$aQ)g$eW)q$n)s/V4TQ+d%tQ+x&RS-Z'X2pQ-x'rS-}(T.PQ.S(]Q.U(dQ.s(xQ.v(zQ.z<UQ.|<XQ.}<YQ/O<]Q/b)}Q0p+XQ2k-UQ2n-XQ3O-qQ3V.VQ3k.tQ3p<^Q3q<_Q3r<`Q3s<aQ3t<bQ3u<cQ3v<dQ3w<eQ3x<fQ3y<gQ3z<hQ3{.{Q3|<kQ4P<nQ4Q<{Q4X<iQ5X0rQ5c1SQ6u=OQ6{3QQ7Q3WQ7a3lQ7b=PQ7k=RQ7l=ZQ8k5wQ9X6sQ9]6|Q9g=[Q9m=eQ9n=fQ:o9_Q;W:ZQ;`:mQ<W#SR=v>SR#[WR'Z!el!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}S'V!e-]U*j$|*Z*oS-Y'W'_S0U*k*qQ0^*rQ2u-cQ4v0[R4{0_R({#xQ!fQT-d'`-e]!qQ!r'`-e1o5{Q#p]R'i<VR)f$dY!uQ'`-e1o5{Q'k!rS'u!v!yS'w!z5}S-t'l'mQ-v'nR3T-uT#kZ%eS#jZ%eS%km,oU(g#h#i#lS.Y(h(iQ.^(jQ0t+^Q3Y.ZU3Z.[.]._S7S3[3]R9`7Td#^W#W#Z%h(T(^*Y+Z.T/mr#gZm#h#i#l%e(h(i(j+^.Z.[.]._3[3]7TS*]$x*bQ/t*^Q2U,oQ2l-VQ4`/pQ6q2dQ7s4aQ9W6rT=m'X+[V#aW%h*YU#`W%h*YS(U#W(^U(Z#Z+Z/mS-['X+[T.O(T.TV'^!e%i*ZQ$lfR)x$qT)m$l)nR4V/UT*_$x*bT*h${*YQ0w+fQ1g,VQ3_.fQ5t1iQ6P1qQ7X3cQ8r6SQ9c7WQ:^8qQ:p9bQ;Z:`Q;c:rQ;n;[R;q;dnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&l!VR,h&itmOXst!U!V!Z#d%m&i&r&t&u&w,s,x2[2_R,o&oT%lm,oR1k,XR,g&gQ&U|S+}&V&WR1^,OR+s&PT&p!W&sT&q!W&sT2^,x2_\",nodeNames:\"\\u26A0 ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList in out const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration defer ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem\",maxTerm:380,context:f,nodeProps:[[\"isolate\",-8,5,6,14,37,39,51,53,55,\"\"],[\"group\",-26,9,17,19,68,207,211,215,216,218,221,224,234,237,243,245,247,249,252,258,264,266,268,270,272,274,275,\"Statement\",-34,13,14,32,35,36,42,51,54,55,57,62,70,72,76,80,82,84,85,110,111,120,121,136,139,141,142,143,144,145,147,148,167,169,171,\"Expression\",-23,31,33,37,41,43,45,173,175,177,178,180,181,182,184,185,186,188,189,190,201,203,205,206,\"Type\",-3,88,103,109,\"ClassItem\"],[\"openedBy\",23,\"<\",38,\"InterpolationStart\",56,\"[\",60,\"{\",73,\"(\",160,\"JSXStartCloseTag\"],[\"closedBy\",-2,24,168,\">\",40,\"InterpolationEnd\",50,\"]\",61,\"}\",74,\")\",165,\"JSXEndTag\"]],propSources:[L],skippedNodes:[0,5,6,278],repeatNodeCount:37,tokenData:\"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$i&j(Wp(Z!b'|0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(X#S$i&j'}0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$i&j(Wp(Z!b'}0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$i&j!p),Q(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(V':f$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$i&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$d`$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$d``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$d`$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(Z!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$d`(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$i&j(Wp(Z!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$i&j(Wp(Z!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$i&j(Z!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$i&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(Z!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$i&j(WpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(WpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Wp(Z!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$i&j(o%1l(Wp(Z!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$i&j(Wp(Z!b$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$i&j(Wp(Z!b$]#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$i&j(Wp(Z!b#p(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$i&j$Q(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(z+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$i&j#z(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(Y';W$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$i&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$d`$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(WpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$d`(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!l/.^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!k!Lf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$i&j(Wp(Z!b(U%&f#q(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$i&j(Wp(Z!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$i&j(Wp(Z!br+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!]+Jf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$i&j(Wp(Z!b!Q.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_![!L^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$i&j(Wp(Z!b#o(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$i&j(Z!b!X7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$i&j!X7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$i&j!X7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!X7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!X7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$i&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$i&j(Z!b!X7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(Z!b!X7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(Z!b!X7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(Z!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$i&j(Z!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$i&j(Wp!X7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$i&j(Wp!X7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Wp!X7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Wp!X7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(WpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$i&j(WpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$i&j(Wp(Z!b!X7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Wp(Z!b!X7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Wp(Z!b!X7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Wp(Z!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$i&j(Wp(Z!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$i&j(Wp(Z!b(O0/l!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$i&j(Wp(Z!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$i&j(Z!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$i&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(Z!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$i&j(WpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(WpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Wp(Z!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$i&j$Q(Ch(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Z#t$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!g$b$i&j$O)Lv(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#R-<U(Wp(Z!b$n7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$k&j(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#r(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$Q(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#s(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#`*!Y$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#k(Cl$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#s(Ch$f#|$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#s(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(r(Ct$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$i&j#{(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!|$Ip$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!S0,v$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$i&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$i&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$i&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$i&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$i&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!Y#)l$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#x(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$i&j(Wp(Z!b(a+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$i&j(Wp(Z!b(T,2j$_#t(e$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$i&j(Wp(Z!b$_#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!_#Hb(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(y+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_!^(CdvBr$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!q7`$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$i&j(Wp(Z!b'|0/l$]#t(T,2j(e$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$i&j(Wp(Z!b'}0/l$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr\",tokenizers:[G,v,V,U,2,3,4,5,6,7,8,9,10,11,12,13,14,h,new l(\"$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOx~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!U~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(c~~\",141,340),new l(\"j~RQYZXz{^~^O(Q~~aP!P!Qd~iO(R~~\",25,323)],topRules:{Script:[0,7],SingleExpression:[1,276],SingleClassItem:[2,277]},dialects:{jsx:0,ts:15175},dynamicPrecedences:{80:1,82:1,94:1,169:1,199:1},specialized:[{term:327,get:Q=>M[Q]||-1},{term:343,get:Q=>E[Q]||-1},{term:95,get:Q=>A[Q]||-1}],tokenPrec:15201});export{C as parser};\n",mimeType:"application/javascript"},"/@lezer/common@1.4.0/es2022/common.mjs":{content:`var It=1024,Bt=0,P=class{constructor(e,t){this.from=e,this.to=t}},b=class{constructor(e={}){this.id=Bt++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=D.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}};b.closedBy=new b({deserialize:e=>e.split(" ")}),b.openedBy=new b({deserialize:e=>e.split(" ")}),b.group=new b({deserialize:e=>e.split(" ")}),b.isolate=new b({deserialize:e=>{if(e&&e!="rtl"&&e!="ltr"&&e!="auto")throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}}),b.contextHash=new b({perNode:!0}),b.lookAhead=new b({perNode:!0}),b.mounted=new b({perNode:!0});var G=class{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}static get(e){return e&&e.props&&e.props[b.mounted.id]}},Tt=Object.create(null),D=class Ct{constructor(t,r,n,i=0){this.name=t,this.props=r,this.id=n,this.flags=i}static define(t){let r=t.props&&t.props.length?Object.create(null):Tt,n=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(t.name==null?8:0),i=new Ct(t.name||"",r,t.id,n);if(t.props){for(let s of t.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");r[s[0].id]=s[1]}}return i}prop(t){return this.props[t.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(t){if(typeof t=="string"){if(this.name==t)return!0;let r=this.prop(b.group);return r?r.indexOf(t)>-1:!1}return this.id==t}static match(t){let r=Object.create(null);for(let n in t)for(let i of n.split(" "))r[i]=t[n];return n=>{for(let i=n.prop(b.group),s=-1;s<(i?i.length:0);s++){let o=r[s<0?n.name:i[s]];if(o)return o}}}};D.none=new D("",Object.create(null),0,8);var Mt=class _t{constructor(t){this.types=t;for(let r=0;r<t.length;r++)if(t[r].id!=r)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...t){let r=[];for(let n of this.types){let i=null;for(let s of t){let o=s(n);if(o){i||(i=Object.assign({},n.props));let h=o[1],l=o[0];l.combine&&l.id in i&&(h=l.combine(i[l.id],h)),i[l.id]=h}}r.push(i?new D(n.name,i,n.id,n.flags):n)}return new _t(r)}},tt=new WeakMap,pt=new WeakMap,k;(function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"})(k||(k={}));var F=class lt{constructor(t,r,n,i,s){if(this.type=t,this.children=r,this.positions=n,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,h]of s)this.props[typeof o=="number"?o:o.id]=h}}toString(){let t=G.get(this);if(t&&!t.overlay)return t.tree.toString();let r="";for(let n of this.children){let i=n.toString();i&&(r&&(r+=","),r+=i)}return this.type.name?(/\\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(r.length?"("+r+")":""):r}cursor(t=0){return new Q(this.topNode,t)}cursorAt(t,r=0,n=0){let i=tt.get(this)||this.topNode,s=new Q(i);return s.moveTo(t,r),tt.set(this,s._tree),s}get topNode(){return new z(this,0,0,null)}resolve(t,r=0){let n=$(tt.get(this)||this.topNode,t,r,!1);return tt.set(this,n),n}resolveInner(t,r=0){let n=$(pt.get(this)||this.topNode,t,r,!0);return pt.set(this,n),n}resolveStack(t,r=0){return Ot(this,t,r)}iterate(t){let{enter:r,leave:n,from:i=0,to:s=this.length}=t,o=t.mode||0,h=(o&k.IncludeAnonymous)>0;for(let l=this.cursor(o|k.IncludeAnonymous);;){let f=!1;if(l.from<=s&&l.to>=i&&(!h&&l.type.isAnonymous||r(l)!==!1)){if(l.firstChild())continue;f=!0}for(;f&&n&&(h||!l.type.isAnonymous)&&n(l),!l.nextSibling();){if(!l.parent())return;f=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let r in this.props)t.push([+r,this.props[r]]);return t}balance(t={}){return this.children.length<=8?this:st(D.none,this.children,this.positions,0,this.children.length,0,this.length,(r,n,i)=>new lt(this.type,r,n,i,this.propValues),t.makeTree||((r,n,i)=>new lt(D.none,r,n,i)))}static build(t){return Ft(t)}};F.empty=new F(D.none,[],[],0);var Pt=class St{constructor(t,r){this.buffer=t,this.index=r}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new St(this.buffer,this.index)}},V=class Nt{constructor(t,r,n){this.buffer=t,this.length=r,this.set=n}get type(){return D.none}toString(){let t=[];for(let r=0;r<this.buffer.length;)t.push(this.childString(r)),r=this.buffer[r+3];return t.join(",")}childString(t){let r=this.buffer[t],n=this.buffer[t+3],i=this.set.types[r],s=i.name;if(/\\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),t+=4,n==t)return s;let o=[];for(;t<n;)o.push(this.childString(t)),t=this.buffer[t+3];return s+"("+o.join(",")+")"}findChild(t,r,n,i,s){let{buffer:o}=this,h=-1;for(let l=t;l!=r&&!(dt(s,i,o[l+1],o[l+2])&&(h=l,n>0));l=o[l+3]);return h}slice(t,r,n){let i=this.buffer,s=new Uint16Array(r-t),o=0;for(let h=t,l=0;h<r;){s[l++]=i[h++],s[l++]=i[h++]-n;let f=s[l++]=i[h++]-n;s[l++]=i[h++]-t,o=Math.max(o,f)}return new Nt(s,o,this.set)}};function dt(e,t,r,n){switch(e){case-2:return r<t;case-1:return n>=t&&r<t;case 0:return r<t&&n>t;case 1:return r<=t&&n>t;case 2:return n>t;case 4:return!0}}function $(e,t,r,n){for(var i;e.from==e.to||(r<1?e.from>=t:e.from>t)||(r>-1?e.to<=t:e.to<t);){let o=!n&&e instanceof z&&e.index<0?null:e.parent;if(!o)return e;e=o}let s=n?0:k.IgnoreOverlays;if(n)for(let o=e,h=o.parent;h;o=h,h=o.parent)o instanceof z&&o.index<0&&((i=h.enter(t,r,s))===null||i===void 0?void 0:i.from)!=o.from&&(e=h);for(;;){let o=e.enter(t,r,s);if(!o)return e;e=o}}var ct=class{cursor(e=0){return new Q(this,e)}getChild(e,t=null,r=null){let n=gt(this,e,t,r);return n.length?n[0]:null}getChildren(e,t=null,r=null){return gt(this,e,t,r)}resolve(e,t=0){return $(this,e,t,!1)}resolveInner(e,t=0){return $(this,e,t,!0)}matchContext(e){return nt(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let n=t.lastChild;if(!n||n.to!=t.to)break;n.type.isError&&n.from==n.to?(r=t,t=n.prevSibling):t=n}return r}get node(){return this}get next(){return this.parent}},z=class rt extends ct{constructor(t,r,n,i){super(),this._tree=t,this.from=r,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,r,n,i,s=0){for(let o=this;;){for(let{children:h,positions:l}=o._tree,f=r>0?h.length:-1;t!=f;t+=r){let a=h[t],c=l[t]+o.from;if(dt(i,n,c,c+a.length)){if(a instanceof V){if(s&k.ExcludeBuffers)continue;let d=a.findChild(0,a.buffer.length,r,n-c,i);if(d>-1)return new q(new zt(o,a,t,c),null,d)}else if(s&k.IncludeAnonymous||!a.type.isAnonymous||it(a)){let d;if(!(s&k.IgnoreMounts)&&(d=G.get(a))&&!d.overlay)return new rt(d.tree,c,t,o);let w=new rt(a,c,t,o);return s&k.IncludeAnonymous||!w.type.isAnonymous?w:w.nextChild(r<0?a.children.length-1:0,r,n,i)}}}if(s&k.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?t=o.index+r:t=r<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}prop(t){return this._tree.prop(t)}enter(t,r,n=0){let i;if(!(n&k.IgnoreOverlays)&&(i=G.get(this._tree))&&i.overlay){let s=t-this.from;for(let{from:o,to:h}of i.overlay)if((r>0?o<=s:o<s)&&(r<0?h>=s:h>s))return new rt(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,r,n)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}};function gt(e,t,r,n){let i=e.cursor(),s=[];if(!i.firstChild())return s;if(r!=null){for(let o=!1;!o;)if(o=i.type.is(r),!i.nextSibling())return s}for(;;){if(n!=null&&i.type.is(n))return s;if(i.type.is(t)&&s.push(i.node),!i.nextSibling())return n==null?s:[]}}function nt(e,t,r=t.length-1){for(let n=e;r>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(t[r]&&t[r]!=n.name)return!1;r--}}return!0}var zt=class{constructor(e,t,r,n){this.parent=e,this.buffer=t,this.index=r,this.start=n}},q=class X extends ct{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(t,r,n){super(),this.context=t,this._parent=r,this.index=n,this.type=t.buffer.set.types[t.buffer.buffer[n]]}child(t,r,n){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],t,r-this.context.start,n);return s<0?null:new X(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}prop(t){return this.type.prop(t)}enter(t,r,n=0){if(n&k.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],r>0?1:-1,t-this.context.start,r);return s<0?null:new X(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,r=t.buffer[this.index+3];return r<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new X(this.context,this._parent,r):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,r=this._parent?this._parent.index+4:0;return this.index==r?this.externalSibling(-1):new X(this.context,this._parent,t.findChild(r,this.index,-1,0,4))}get tree(){return null}toTree(){let t=[],r=[],{buffer:n}=this.context,i=this.index+4,s=n.buffer[this.index+3];if(s>i){let o=n.buffer[this.index+1];t.push(n.slice(i,s,o)),r.push(0)}return new F(this.type,t,r,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}};function mt(e){if(!e.length)return null;let t=0,r=e[0];for(let s=1;s<e.length;s++){let o=e[s];(o.from>r.from||o.to<r.to)&&(r=o,t=s)}let n=r instanceof z&&r.index<0?null:r.parent,i=e.slice();return n?i[t]=n:i.splice(t,1),new Et(i,r)}var Et=class{constructor(e,t){this.heads=e,this.node=t}get next(){return mt(this.heads)}};function Ot(e,t,r){let n=e.resolveInner(t,r),i=null;for(let s=n instanceof z?n:n.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(i||(i=[n])).push(o.resolve(t,r)),s=o}else{let o=G.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=t&&o.overlay[o.overlay.length-1].to>=t){let h=new z(o.tree,o.overlay[0].from+s.from,-1,s);(i||(i=[n])).push($(h,t,r,!1))}}return i?mt(i):n}var Q=class{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof z)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=r+n.buffer[e+1],this.to=r+n.buffer[e+2],!0}yield(e){return e?e instanceof z?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:n}=this.buffer,i=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,r);return i<0?!1:(this.stack.push(this.index),this.yieldBuf(i))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&k.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&k.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&k.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let n=r<0?0:this.stack[r]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,0,4))}else{let n=t.buffer[this.index+3];if(n<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(n)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let i=0;i<this.index;i++)if(n.buffer.buffer[i+3]<this.index)return!1;({index:t,parent:r}=n)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let i=t+e,s=e<0?-1:r._tree.children.length;i!=s;i+=e){let o=r._tree.children[i];if(this.mode&k.IncludeAnonymous||o instanceof V||!o.type.isAnonymous||it(o))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)t:for(let n=this.index,i=this.stack.length;i>=0;){for(let s=e;s;s=s._parent)if(s.index==n){if(n==this.index)return s;t=s,r=i+1;break t}n=this.stack[--i]}for(let n=r;n<this.stack.length;n++)t=new q(this.buffer,t,this.stack[n]);return this.bufferNode=new q(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(n=!0)}for(;;){if(n&&t&&t(this),n=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,n=!0}}}matchContext(e){if(!this.buffer)return nt(this.node.parent,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let n=e.length-1,i=this.stack.length-1;n>=0;i--){if(i<0)return nt(this._tree,e,n);let s=r[t.buffer[this.stack[i]]];if(!s.isAnonymous){if(e[n]&&e[n]!=s.name)return!1;n--}}return!0}};function it(e){return e.children.some(t=>t instanceof V||!t.type.isAnonymous||it(t))}function Ft(e){var t;let{buffer:r,nodeSet:n,maxBufferLength:i=1024,reused:s=[],minRepeatType:o=n.types.length}=e,h=Array.isArray(r)?new Pt(r,r.length):r,l=n.types,f=0,a=0;function c(m,v,u,C,x,_){let{id:g,start:p,end:y,size:A}=h,I=a,L=f;if(A<0)if(h.next(),A==-1){let W=s[g];u.push(W),C.push(p-m);return}else if(A==-3){f=g;return}else if(A==-4){a=g;return}else throw new RangeError(\`Unrecognized record size: \${A}\`);let K=l[g],Y,U,ut=p-m;if(y-p<=i&&(U=E(h.pos-v,x))){let W=new Uint16Array(U.size-U.skip),M=h.pos-U.size,j=W.length;for(;h.pos>M;)j=O(U.start,W,j);Y=new V(W,y-U.start,n),ut=U.start-m}else{let W=h.pos-A;h.next();let M=[],j=[],J=g>=o?g:-1,H=0,Z=y;for(;h.pos>W;)J>=0&&h.id==J&&h.size>=0?(h.end<=Z-i&&(S(M,j,p,H,h.end,Z,J,I,L),H=M.length,Z=h.end),h.next()):_>2500?d(p,W,M,j):c(p,W,M,j,J,_+1);if(J>=0&&H>0&&H<M.length&&S(M,j,p,H,p,Z,J,I,L),M.reverse(),j.reverse(),J>-1&&H>0){let at=w(K,L);Y=st(K,M,j,0,M.length,0,y-p,at,at)}else Y=B(K,M,j,y-p,I-y,L)}u.push(Y),C.push(ut)}function d(m,v,u,C){let x=[],_=0,g=-1;for(;h.pos>v;){let{id:p,start:y,end:A,size:I}=h;if(I>4)h.next();else{if(g>-1&&y<g)break;g<0&&(g=A-i),x.push(p,y,A),_++,h.next()}}if(_){let p=new Uint16Array(_*4),y=x[x.length-2];for(let A=x.length-3,I=0;A>=0;A-=3)p[I++]=x[A],p[I++]=x[A+1]-y,p[I++]=x[A+2]-y,p[I++]=I;u.push(new V(p,x[2]-y,n)),C.push(y-m)}}function w(m,v){return(u,C,x)=>{let _=0,g=u.length-1,p,y;if(g>=0&&(p=u[g])instanceof F){if(!g&&p.type==m&&p.length==x)return p;(y=p.prop(b.lookAhead))&&(_=C[g]+p.length+y)}return B(m,u,C,x,_,v)}}function S(m,v,u,C,x,_,g,p,y){let A=[],I=[];for(;m.length>C;)A.push(m.pop()),I.push(v.pop()+u-x);m.push(B(n.types[g],A,I,_-x,p-_,y)),v.push(x-u)}function B(m,v,u,C,x,_,g){if(_){let p=[b.contextHash,_];g=g?[p].concat(g):[p]}if(x>25){let p=[b.lookAhead,x];g=g?[p].concat(g):[p]}return new F(m,v,u,C,g)}function E(m,v){let u=h.fork(),C=0,x=0,_=0,g=u.end-i,p={size:0,start:0,skip:0};t:for(let y=u.pos-m;u.pos>y;){let A=u.size;if(u.id==v&&A>=0){p.size=C,p.start=x,p.skip=_,_+=4,C+=4,u.next();continue}let I=u.pos-A;if(A<0||I<y||u.start<g)break;let L=u.id>=o?4:0,K=u.start;for(u.next();u.pos>I;){if(u.size<0)if(u.size==-3||u.size==-4)L+=4;else break t;else u.id>=o&&(L+=4);u.next()}x=K,C+=A,_+=L}return(v<0||C==m)&&(p.size=C,p.start=x,p.skip=_),p.size>4?p:void 0}function O(m,v,u){let{id:C,start:x,end:_,size:g}=h;if(h.next(),g>=0&&C<o){let p=u;if(g>4){let y=h.pos-(g-4);for(;h.pos>y;)u=O(m,v,u)}v[--u]=p,v[--u]=_-m,v[--u]=x-m,v[--u]=C}else g==-3?f=C:g==-4&&(a=C);return u}let T=[],N=[];for(;h.pos>0;)c(e.start||0,e.bufferStart||0,T,N,-1,0);let R=(t=e.length)!==null&&t!==void 0?t:T.length?N[0]+T[0].length:0;return new F(l[e.topID],T.reverse(),N.reverse(),R)}var xt=new WeakMap;function et(e,t){if(!e.isAnonymous||t instanceof V||t.type!=e)return 1;let r=xt.get(t);if(r==null){r=1;for(let n of t.children){if(n.type!=e||!(n instanceof F)){r=1;break}r+=et(e,n)}xt.set(t,r)}return r}function st(e,t,r,n,i,s,o,h,l){let f=0;for(let S=n;S<i;S++)f+=et(e,t[S]);let a=Math.ceil(f*1.5/8),c=[],d=[];function w(S,B,E,O,T){for(let N=E;N<O;){let R=N,m=B[N],v=et(e,S[N]);for(N++;N<O;N++){let u=et(e,S[N]);if(v+u>=a)break;v+=u}if(N==R+1){if(v>a){let u=S[R];w(u.children,u.positions,0,u.children.length,B[R]+T);continue}c.push(S[R])}else{let u=B[N-1]+S[N-1].length-m;c.push(st(e,S,B,R,N,m,u,null,l))}d.push(m+T-s)}}return w(t,r,n,i,0),(h||l)(c,d,o)}var jt=class{constructor(){this.map=new WeakMap}setBuffer(e,t,r){let n=this.map.get(e);n||this.map.set(e,n=new Map),n.set(t,r)}getBuffer(e,t){let r=this.map.get(e);return r&&r.get(t)}set(e,t){e instanceof q?this.setBuffer(e.context.buffer,e.index,t):e instanceof z&&this.map.set(e.tree,t)}get(e){return e instanceof q?this.getBuffer(e.context.buffer,e.index):e instanceof z?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}},ot=class ft{constructor(t,r,n,i,s=!1,o=!1){this.from=t,this.to=r,this.tree=n,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(t,r=[],n=!1){let i=[new ft(0,t.length,t,0,!1,n)];for(let s of r)s.to>t.length&&i.push(s);return i}static applyChanges(t,r,n=128){if(!r.length)return t;let i=[],s=1,o=t.length?t[0]:null;for(let h=0,l=0,f=0;;h++){let a=h<r.length?r[h]:null,c=a?a.fromA:1e9;if(c-l>=n)for(;o&&o.from<c;){let d=o;if(l>=d.from||c<=d.to||f){let w=Math.max(d.from,l)-f,S=Math.min(d.to,c)-f;d=w>=S?null:new ft(w,S,d.tree,d.offset+f,h>0,!!a)}if(d&&i.push(d),o.to>c)break;o=s<t.length?t[s++]:null}if(!a)break;l=a.toA,f=a.toA-a.toB}return i}},Dt=class{startParse(e,t,r){return typeof e=="string"&&(e=new Rt(e)),r=r?r.length?r.map(n=>new P(n.from,n.to)):[new P(0,0)]:[new P(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let n=this.startParse(e,t,r);for(;;){let i=n.advance();if(i)return i}}},Rt=class{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}};function Wt(e){return(t,r,n,i)=>new Ut(t,e,r,n,i)}var yt=class{constructor(e,t,r,n,i){this.parser=e,this.parse=t,this.overlay=r,this.target=n,this.from=i}};function bt(e){if(!e.length||e.some(t=>t.from>=t.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(e))}var Lt=class{constructor(e,t,r,n,i,s,o){this.parser=e,this.predicate=t,this.mounts=r,this.index=n,this.start=i,this.target=s,this.prev=o,this.depth=0,this.ranges=[]}},ht=new b({perNode:!0}),Ut=class{constructor(e,t,r,n,i){this.nest=t,this.input=r,this.fragments=n,this.ranges=i,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let r=this.baseParse.advance();if(!r)return null;if(this.baseParse=null,this.baseTree=r,this.startInner(),this.stoppedAt!=null)for(let n of this.inner)n.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let r=this.baseTree;return this.stoppedAt!=null&&(r=new F(r.type,r.children,r.positions,r.length,r.propValues.concat([[ht,this.stoppedAt]]))),r}let e=this.inner[this.innerDone],t=e.parse.advance();if(t){this.innerDone++;let r=Object.assign(Object.create(null),e.target.props);r[b.mounted.id]=new G(t,e.overlay,e.parser),e.target.props=r}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)}startInner(){let e=new Ht(this.fragments),t=null,r=null,n=new Q(new z(this.baseTree,this.ranges[0].from,0,null),k.IncludeAnonymous|k.IgnoreMounts);t:for(let i,s;;){let o=!0,h;if(this.stoppedAt!=null&&n.from>=this.stoppedAt)o=!1;else if(e.hasNode(n)){if(t){let l=t.mounts.find(f=>f.frag.from<=n.from&&f.frag.to>=n.to&&f.mount.overlay);if(l)for(let f of l.mount.overlay){let a=f.from+l.pos,c=f.to+l.pos;a>=n.from&&c<=n.to&&!t.ranges.some(d=>d.from<c&&d.to>a)&&t.ranges.push({from:a,to:c})}}o=!1}else if(r&&(s=Jt(r.ranges,n.from,n.to)))o=s!=2;else if(!n.type.isAnonymous&&(i=this.nest(n,this.input))&&(n.from<n.to||!i.overlay)){n.tree||(Vt(n),t&&t.depth++,r&&r.depth++);let l=e.findMounts(n.from,i.parser);if(typeof i.overlay=="function")t=new Lt(i.parser,i.overlay,l,this.inner.length,n.from,n.tree,t);else{let f=At(this.ranges,i.overlay||(n.from<n.to?[new P(n.from,n.to)]:[]));f.length&&bt(f),(f.length||!i.overlay)&&this.inner.push(new yt(i.parser,f.length?i.parser.startParse(this.input,kt(l,f),f):i.parser.startParse(""),i.overlay?i.overlay.map(a=>new P(a.from-n.from,a.to-n.from)):null,n.tree,f.length?f[0].from:n.from)),i.overlay?f.length&&(r={ranges:f,depth:0,prev:r}):o=!1}}else if(t&&(h=t.predicate(n))&&(h===!0&&(h=new P(n.from,n.to)),h.from<h.to)){let l=t.ranges.length-1;l>=0&&t.ranges[l].to==h.from?t.ranges[l]={from:t.ranges[l].from,to:h.to}:t.ranges.push(h)}if(o&&n.firstChild())t&&t.depth++,r&&r.depth++;else for(;!n.nextSibling();){if(!n.parent())break t;if(t&&!--t.depth){let l=At(this.ranges,t.ranges);l.length&&(bt(l),this.inner.splice(t.index,0,new yt(t.parser,t.parser.startParse(this.input,kt(t.mounts,l),l),t.ranges.map(f=>new P(f.from-t.start,f.to-t.start)),t.target,l[0].from))),t=t.prev}r&&!--r.depth&&(r=r.prev)}}}};function Jt(e,t,r){for(let n of e){if(n.from>=r)break;if(n.to>t)return n.from<=t&&n.to>=r?2:1}return 0}function wt(e,t,r,n,i,s){if(t<r){let o=e.buffer[t+1];n.push(e.slice(t,r,o)),i.push(o-s)}}function Vt(e){let{node:t}=e,r=[],n=t.context.buffer;do r.push(e.index),e.parent();while(!e.tree);let i=e.tree,s=i.children.indexOf(n),o=i.children[s],h=o.buffer,l=[s];function f(a,c,d,w,S,B){let E=r[B],O=[],T=[];wt(o,a,E,O,T,w);let N=h[E+1],R=h[E+2];l.push(O.length);let m=B?f(E+4,h[E+3],o.set.types[h[E]],N,R-N,B-1):t.toTree();return O.push(m),T.push(N-w),wt(o,h[E+3],c,O,T,w),new F(d,O,T,S)}i.children[s]=f(0,h.length,D.none,0,o.length,r.length-1);for(let a of l){let c=e.tree.children[a],d=e.tree.positions[a];e.yield(new z(c,d+e.from,a,e._tree))}}var vt=class{constructor(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor(k.IncludeAnonymous|k.IgnoreMounts)}moveTo(e){let{cursor:t}=this,r=e-this.offset;for(;!this.done&&t.from<r;)t.to>=e&&t.enter(r,1,k.IgnoreOverlays|k.ExcludeBuffers)||t.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let t=this.cursor.tree;;){if(t==e.tree)return!0;if(t.children.length&&t.positions[0]==0&&t.children[0]instanceof F)t=t.children[0];else break}return!1}},Ht=class{constructor(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let r=this.curFrag=e[0];this.curTo=(t=r.tree.prop(ht))!==null&&t!==void 0?t:r.to,this.inner=new vt(r.tree,-r.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let t=this.curFrag=this.fragments[this.fragI];this.curTo=(e=t.tree.prop(ht))!==null&&e!==void 0?e:t.to,this.inner=new vt(t.tree,-t.offset)}}findMounts(e,t){var r;let n=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let i=this.inner.cursor.node;i;i=i.parent){let s=(r=i.tree)===null||r===void 0?void 0:r.prop(b.mounted);if(s&&s.parser==t)for(let o=this.fragI;o<this.fragments.length;o++){let h=this.fragments[o];if(h.from>=i.to)break;h.tree==this.curFrag.tree&&n.push({frag:h,pos:i.from-h.offset,mount:s})}}}return n}};function At(e,t){let r=null,n=t;for(let i=1,s=0;i<e.length;i++){let o=e[i-1].to,h=e[i].from;for(;s<n.length;s++){let l=n[s];if(l.from>=h)break;l.to<=o||(r||(n=r=t.slice()),l.from<o?(r[s]=new P(l.from,o),l.to>h&&r.splice(s+1,0,new P(h,l.to))):l.to>h?r[s--]=new P(h,l.to):r.splice(s--,1))}}return n}function Gt(e,t,r,n){let i=0,s=0,o=!1,h=!1,l=-1e9,f=[];for(;;){let a=i==e.length?1e9:o?e[i].to:e[i].from,c=s==t.length?1e9:h?t[s].to:t[s].from;if(o!=h){let d=Math.max(l,r),w=Math.min(a,c,n);d<w&&f.push(new P(d,w))}if(l=Math.min(a,c),l==1e9)break;a==l&&(o?(o=!1,i++):o=!0),c==l&&(h?(h=!1,s++):h=!0)}return f}function kt(e,t){let r=[];for(let{pos:n,mount:i,frag:s}of e){let o=n+(i.overlay?i.overlay[0].from:0),h=o+i.tree.length,l=Math.max(s.from,o),f=Math.min(s.to,h);if(i.overlay){let a=i.overlay.map(d=>new P(d.from+n,d.to+n)),c=Gt(t,a,l,f);for(let d=0,w=l;;d++){let S=d==c.length,B=S?f:c[d].from;if(B>w&&r.push(new ot(w,B,i.tree,-o,s.from>=w||s.openStart,s.to<=B||s.openEnd)),S)break;w=c[d].to}}else r.push(new ot(l,f,i.tree,-o,s.from>=o||s.openStart,s.to<=h||s.openEnd))}return r}export{It as DefaultBufferLength,k as IterMode,G as MountedTree,b as NodeProp,Mt as NodeSet,D as NodeType,jt as NodeWeakMap,Dt as Parser,F as Tree,V as TreeBuffer,Q as TreeCursor,ot as TreeFragment,Wt as parseMixed};
`,mimeType:"application/javascript"},"/@marijn/find-cluster-break@1.0.2/es2022/find-cluster-break.mjs":{content:`var u=[],c=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(r=>r?parseInt(r,36):1);for(let r=0,t=0;r<n.length;r++)(r%2?c:u).push(t=t+n[r])})();function o(n){if(n<768)return!1;for(let r=0,t=u.length;;){let e=r+t>>1;if(n<u[e])t=e;else if(n>=c[e])r=e+1;else return!0;if(r==t)return!1}}function b(n){return n>=127462&&n<=127487}var g=8205;function k(n,r,t=!0,e=!0){return(t?h:x)(n,r,e)}function h(n,r,t){if(r==n.length)return r;r&&s(n.charCodeAt(r))&&d(n.charCodeAt(r-1))&&r--;let e=l(n,r);for(r+=m(e);r<n.length;){let f=l(n,r);if(e==g||f==g||t&&o(f))r+=m(f),e=f;else if(b(f)){let i=0,a=r-2;for(;a>=0&&b(l(n,a));)i++,a-=2;if(i%2==0)break;r+=2}else break}return r}function x(n,r,t){for(;r>0;){let e=h(n,r-2,t);if(e<r)return e;r--}return 0}function l(n,r){let t=n.charCodeAt(r);if(!d(t)||r+1==n.length)return t;let e=n.charCodeAt(r+1);return s(e)?(t-55296<<10)+(e-56320)+65536:t}function s(n){return n>=56320&&n<57344}function d(n){return n>=55296&&n<56320}function m(n){return n<65536?1:2}export{k as findClusterBreak,o as isExtendingChar};
`,mimeType:"application/javascript"},"/@lezer/common@%5E1.0.2?target=es2022":{content:`export*from"/@lezer/common@1.4.0/es2022/common.mjs";
`,mimeType:"application/javascript"},"/@lezer/css@%5E1.1.7?target=es2022":{content:`import"/@lezer/highlight@^1.0.0?target=es2022";import"/@lezer/lr@^1.3.0?target=es2022";export*from"/@lezer/css@1.3.0/es2022/css.mjs";
`,mimeType:"application/javascript"},"/@codemirror/language@%5E6.0.0?target=es2022":{content:`import"/@codemirror/state@^6.0.0?target=es2022";import"/@codemirror/view@^6.23.0?target=es2022";import"/@lezer/common@^1.1.0?target=es2022";import"/@lezer/highlight@^1.0.0?target=es2022";import"/style-mod@^4.0.0?target=es2022";export*from"/@codemirror/language@6.11.3/es2022/language.mjs";
`,mimeType:"application/javascript"},"/@codemirror/view@%5E6.0.0?target=es2022":{content:`import"/@codemirror/state@^6.5.0?target=es2022";import"/crelt@^1.0.6?target=es2022";import"/style-mod@^4.1.0?target=es2022";import"/w3c-keyname@^2.2.4?target=es2022";export*from"/@codemirror/view@6.39.4/es2022/view.mjs";
`,mimeType:"application/javascript"},"/@lezer/highlight@%5E1.0.0?target=es2022":{content:`import"/@lezer/common@^1.3.0?target=es2022";export*from"/@lezer/highlight@1.2.3/es2022/highlight.mjs";
`,mimeType:"application/javascript"},"/@lezer/highlight@1.2.3/es2022/highlight.mjs":{content:'import{NodeProp as $}from"/@lezer/common@^1.3.0?target=es2022";var Q=0,m=class B{constructor(t,i,o,r){this.name=t,this.set=i,this.base=o,this.modified=r,this.id=Q++}toString(){let{name:t}=this;for(let i of this.modified)i.name&&(t=`${i.name}(${t})`);return t}static define(t,i){let o=typeof t=="string"?t:"?";if(t instanceof B&&(i=t),i?.base)throw new Error("Can not derive from a modified tag");let r=new B(o,[],null,[]);if(r.set.push(r),i)for(let s of i.set)r.set.push(s);return r}static defineModifier(t){let i=new J(t);return o=>o.modified.indexOf(i)>-1?o:J.get(o.base||o,o.modified.concat(i).sort((r,s)=>r.id-s.id))}},U=0,J=class L{constructor(t){this.name=t,this.instances=[],this.id=U++}static get(t,i){if(!i.length)return t;let o=i[0].instances.find(c=>c.base==t&&W(i,c.modified));if(o)return o;let r=[],s=new m(t.name,r,t,i);for(let c of i)c.instances.push(s);let l=X(i);for(let c of t.set)if(!c.modified.length)for(let g of l)r.push(L.get(c,g));return s}};function W(a,t){return a.length==t.length&&a.every((i,o)=>i==t[o])}function X(a){let t=[[]];for(let i=0;i<a.length;i++)for(let o=0,r=t.length;o<r;o++)t.push(t[o].concat(a[i]));return t.sort((i,o)=>o.length-i.length)}function Y(a){let t=Object.create(null);for(let i in a){let o=a[i];Array.isArray(o)||(o=[o]);for(let r of i.split(" "))if(r){let s=[],l=2,c=r;for(let h=0;;){if(c=="..."&&h>0&&h+3==r.length){l=1;break}let d=/^"(?:[^"\\\\]|\\\\.)*?"|[^\\/!]+/.exec(c);if(!d)throw new RangeError("Invalid path: "+r);if(s.push(d[0]=="*"?"":d[0][0]==\'"\'?JSON.parse(d[0]):d[0]),h+=d[0].length,h==r.length)break;let y=r[h++];if(h==r.length&&y=="!"){l=0;break}if(y!="/")throw new RangeError("Invalid path: "+r);c=r.slice(h)}let g=s.length-1,f=s[g];if(!f)throw new RangeError("Invalid path: "+r);let b=new R(o,l,g>0?s.slice(0,g):null);t[f]=b.sort(t[f])}}return P.add(t)}var P=new $({combine(a,t){let i,o,r;for(;a||t;){if(!a||t&&a.depth>=t.depth?(r=t,t=t.next):(r=a,a=a.next),i&&i.mode==r.mode&&!r.context&&!i.context)continue;let s=new R(r.tags,r.mode,r.context);i?i.next=s:o=s,i=s}return o}}),R=class{constructor(a,t,i,o){this.tags=a,this.mode=t,this.context=i,this.next=o}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(a){return!a||a.depth<this.depth?(this.next=a,this):(a.next=this.sort(a.next),a)}get depth(){return this.context?this.context.length:0}};R.empty=new R([],2,null);function V(a,t){let i=Object.create(null);for(let s of a)if(!Array.isArray(s.tag))i[s.tag.id]=s.class;else for(let l of s.tag)i[l.id]=s.class;let{scope:o,all:r=null}=t||{};return{style:s=>{let l=r;for(let c of s)for(let g of c.set){let f=i[g.id];if(f){l=l?l+" "+f:f;break}}return l},scope:o}}function Z(a,t){let i=null;for(let o of a){let r=o.style(t);r&&(i=i?i+" "+r:r)}return i}function z(a,t,i,o=0,r=a.length){let s=new ee(o,Array.isArray(t)?t:[t],i);s.highlightRange(a.cursor(),o,r,"",s.highlighters),s.flush(r)}function _(a,t,i,o,r,s=0,l=a.length){let c=s;function g(f,b){if(!(f<=c)){for(let h=a.slice(c,f),d=0;;){let y=h.indexOf(`\n`,d),M=y<0?h.length:y;if(M>d&&o(h.slice(d,M),b),y<0)break;r(),d=y+1}c=f}}z(t,i,(f,b,h)=>{g(f,""),g(b,h)},s,l),g(l,"")}var ee=class{constructor(a,t,i){this.at=a,this.highlighters=t,this.span=i,this.class=""}startSpan(a,t){t!=this.class&&(this.flush(a),a>this.at&&(this.at=a),this.class=t)}flush(a){a>this.at&&this.class&&this.span(this.at,a,this.class)}highlightRange(a,t,i,o,r){let{type:s,from:l,to:c}=a;if(l>=i||c<=t)return;s.isTop&&(r=this.highlighters.filter(d=>!d.scope||d.scope(s)));let g=o,f=D(a)||R.empty,b=Z(r,f.tags);if(b&&(g&&(g+=" "),g+=b,f.mode==1&&(o+=(o?" ":"")+b)),this.startSpan(Math.max(t,l),g),f.opaque)return;let h=a.tree&&a.tree.prop($.mounted);if(h&&h.overlay){let d=a.node.enter(h.overlay[0].from+l,1),y=this.highlighters.filter(w=>!w.scope||w.scope(h.tree.type)),M=a.firstChild();for(let w=0,O=l;;w++){let S=w<h.overlay.length?h.overlay[w]:null,I=S?S.from+l:c,H=Math.max(t,O),A=Math.min(i,I);if(H<A&&M)for(;a.from<A&&(this.highlightRange(a,H,A,o,r),this.startSpan(Math.min(A,a.to),g),!(a.to>=I||!a.nextSibling())););if(!S||I>i)break;O=S.to+l,O>t&&(this.highlightRange(d.cursor(),Math.max(t,S.from+l),Math.min(i,O),"",y),this.startSpan(Math.min(i,O),g))}M&&a.parent()}else if(a.firstChild()){h&&(o="");do if(!(a.to<=t)){if(a.from>=i)break;this.highlightRange(a,t,i,o,r),this.startSpan(Math.min(i,a.to),g)}while(a.nextSibling());a.parent()}}};function D(a){let t=a.type.prop(P);for(;t&&t.context&&!a.matchContext(t.context);)t=t.next;return t||null}var e=m.define,T=e(),N=e(),F=e(N),G=e(N),x=e(),q=e(x),K=e(x),p=e(),v=e(p),u=e(),k=e(),j=e(),C=e(j),E=e(),n={comment:T,lineComment:e(T),blockComment:e(T),docComment:e(T),name:N,variableName:e(N),typeName:F,tagName:e(F),propertyName:G,attributeName:e(G),className:e(N),labelName:e(N),namespace:e(N),macroName:e(N),literal:x,string:q,docString:e(q),character:e(q),attributeValue:e(q),number:K,integer:e(K),float:e(K),bool:e(x),regexp:e(x),escape:e(x),color:e(x),url:e(x),keyword:u,self:e(u),null:e(u),atom:e(u),unit:e(u),modifier:e(u),operatorKeyword:e(u),controlKeyword:e(u),definitionKeyword:e(u),moduleKeyword:e(u),operator:k,derefOperator:e(k),arithmeticOperator:e(k),logicOperator:e(k),bitwiseOperator:e(k),compareOperator:e(k),updateOperator:e(k),definitionOperator:e(k),typeOperator:e(k),controlOperator:e(k),punctuation:j,separator:e(j),bracket:C,angleBracket:e(C),squareBracket:e(C),paren:e(C),brace:e(C),content:p,heading:v,heading1:e(v),heading2:e(v),heading3:e(v),heading4:e(v),heading5:e(v),heading6:e(v),contentSeparator:e(p),list:e(p),quote:e(p),emphasis:e(p),strong:e(p),link:e(p),monospace:e(p),strikethrough:e(p),inserted:e(),deleted:e(),changed:e(),invalid:e(),meta:E,documentMeta:e(E),annotation:e(E),processingInstruction:e(E),definition:m.defineModifier("definition"),constant:m.defineModifier("constant"),function:m.defineModifier("function"),standard:m.defineModifier("standard"),local:m.defineModifier("local"),special:m.defineModifier("special")};for(let a in n){let t=n[a];t instanceof m&&(t.name=a)}var te=V([{tag:n.link,class:"tok-link"},{tag:n.heading,class:"tok-heading"},{tag:n.emphasis,class:"tok-emphasis"},{tag:n.strong,class:"tok-strong"},{tag:n.keyword,class:"tok-keyword"},{tag:n.atom,class:"tok-atom"},{tag:n.bool,class:"tok-bool"},{tag:n.url,class:"tok-url"},{tag:n.labelName,class:"tok-labelName"},{tag:n.inserted,class:"tok-inserted"},{tag:n.deleted,class:"tok-deleted"},{tag:n.literal,class:"tok-literal"},{tag:n.string,class:"tok-string"},{tag:n.number,class:"tok-number"},{tag:[n.regexp,n.escape,n.special(n.string)],class:"tok-string2"},{tag:n.variableName,class:"tok-variableName"},{tag:n.local(n.variableName),class:"tok-variableName tok-local"},{tag:n.definition(n.variableName),class:"tok-variableName tok-definition"},{tag:n.special(n.variableName),class:"tok-variableName2"},{tag:n.definition(n.propertyName),class:"tok-propertyName tok-definition"},{tag:n.typeName,class:"tok-typeName"},{tag:n.namespace,class:"tok-namespace"},{tag:n.className,class:"tok-className"},{tag:n.macroName,class:"tok-macroName"},{tag:n.propertyName,class:"tok-propertyName"},{tag:n.operator,class:"tok-operator"},{tag:n.comment,class:"tok-comment"},{tag:n.meta,class:"tok-meta"},{tag:n.invalid,class:"tok-invalid"},{tag:n.punctuation,class:"tok-punctuation"}]);export{m as Tag,te as classHighlighter,D as getStyleTags,_ as highlightCode,z as highlightTree,Y as styleTags,V as tagHighlighter,n as tags};\n',mimeType:"application/javascript"},"/@lezer/css@1.3.0/es2022/css.mjs":{content:"import{ExternalTokenizer as l,LRParser as y,LocalTokenGroup as Y}from\"/@lezer/lr@^1.3.0?target=es2022\";import{styleTags as u,tags as Q}from\"/@lezer/highlight@^1.0.0?target=es2022\";var g=122,i=1,h=123,j=124,P=2,k=125,G=3,R=4,X=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],q=58,E=40,s=95,f=91,d=45,T=46,b=35,x=37,U=38,v=92,V=10,W=42;function S(O){return O>=65&&O<=90||O>=97&&O<=122||O>=161}function $(O){return O>=48&&O<=57}function m(O){return $(O)||O>=97&&O<=102||O>=65&&O<=70}var p=(O,e,n)=>(a,z)=>{for(let r=!1,c=0,o=0;;o++){let{next:t}=a;if(S(t)||t==d||t==s||r&&$(t))!r&&(t!=d||o>0)&&(r=!0),c===o&&t==d&&c++,a.advance();else if(t==v&&a.peek(1)!=V){if(a.advance(),m(a.next)){do a.advance();while(m(a.next));a.next==32&&a.advance()}else a.next>-1&&a.advance();r=!0}else{r&&a.acceptToken(c==2&&z.canShift(P)?e:t==E?n:O);break}}},Z=new l(p(h,P,j)),_=new l(p(k,G,R)),C=new l(O=>{if(X.includes(O.peek(-1))){let{next:e}=O;(S(e)||e==s||e==b||e==T||e==W||e==f||e==q&&S(O.peek(1))||e==d||e==U)&&O.acceptToken(g)}}),w=new l(O=>{if(!X.includes(O.peek(-1))){let{next:e}=O;if(e==x&&(O.advance(),O.acceptToken(i)),S(e)){do O.advance();while(S(O.next)||$(O.next));O.acceptToken(i)}}}),N=u({\"AtKeyword import charset namespace keyframes media supports\":Q.definitionKeyword,\"from to selector\":Q.keyword,NamespaceName:Q.namespace,KeyframeName:Q.labelName,KeyframeRangeName:Q.operatorKeyword,TagName:Q.tagName,ClassName:Q.className,PseudoClassName:Q.constant(Q.className),IdName:Q.labelName,\"FeatureName PropertyName\":Q.propertyName,AttributeName:Q.attributeName,NumberLiteral:Q.number,KeywordQuery:Q.keyword,UnaryQueryOp:Q.operatorKeyword,\"CallTag ValueName\":Q.atom,VariableName:Q.variableName,Callee:Q.operatorKeyword,Unit:Q.unit,\"UniversalSelector NestingSelector\":Q.definitionOperator,\"MatchOp CompareOp\":Q.compareOperator,\"ChildOp SiblingOp, LogicOp\":Q.logicOperator,BinOp:Q.arithmeticOperator,Important:Q.modifier,Comment:Q.blockComment,ColorLiteral:Q.color,\"ParenthesizedContent StringLiteral\":Q.string,\":\":Q.punctuation,\"PseudoOp #\":Q.derefOperator,\"; ,\":Q.separator,\"( )\":Q.paren,\"[ ]\":Q.squareBracket,\"{ }\":Q.brace}),I={__proto__:null,lang:38,\"nth-child\":38,\"nth-last-child\":38,\"nth-of-type\":38,\"nth-last-of-type\":38,dir:38,\"host-context\":38,if:84,url:124,\"url-prefix\":124,domain:124,regexp:124},F={__proto__:null,or:98,and:98,not:106,only:106,layer:170},D={__proto__:null,selector:112,layer:166},B={__proto__:null,\"@import\":162,\"@media\":174,\"@charset\":178,\"@namespace\":182,\"@keyframes\":188,\"@supports\":200,\"@scope\":204},K={__proto__:null,to:207},J=y.deserialize({version:14,states:\"EbQYQdOOO#qQdOOP#xO`OOOOQP'#Cf'#CfOOQP'#Ce'#CeO#}QdO'#ChO$nQaO'#CcO$xQdO'#CkO%TQdO'#DpO%YQdO'#DrO%_QdO'#DuO%_QdO'#DxOOQP'#FV'#FVO&eQhO'#EhOOQS'#FU'#FUOOQS'#Ek'#EkQYQdOOO&lQdO'#EOO&PQhO'#EUO&lQdO'#EWO'aQdO'#EYO'lQdO'#E]O'tQhO'#EcO(VQdO'#EeO(bQaO'#CfO)VQ`O'#D{O)[Q`O'#F`O)gQdO'#F`QOQ`OOP)qO&jO'#CaPOOO)C@t)C@tOOQP'#Cj'#CjOOQP,59S,59SO#}QdO,59SO)|QdO,59VO%TQdO,5:[O%YQdO,5:^O%_QdO,5:aO%_QdO,5:cO%_QdO,5:dO%_QdO'#ErO*XQ`O,58}O*aQdO'#DzOOQS,58},58}OOQP'#Cn'#CnOOQO'#Dn'#DnOOQP,59V,59VO*hQ`O,59VO*mQ`O,59VOOQP'#Dq'#DqOOQP,5:[,5:[OOQO'#Ds'#DsO*rQpO,5:^O+]QaO,5:aO+sQaO,5:dOOQW'#DZ'#DZO,ZQhO'#DdO,xQhO'#FaO'tQhO'#DbO-WQ`O'#DhOOQW'#F['#F[O-]Q`O,5;SO-eQ`O'#DeOOQS-E8i-E8iOOQ['#Cs'#CsO-jQdO'#CtO.QQdO'#CzO.hQdO'#C}O/OQ!pO'#DPO1RQ!jO,5:jOOQO'#DU'#DUO*mQ`O'#DTO1cQ!nO'#FXO3`Q`O'#DVO3eQ`O'#DkOOQ['#FX'#FXO-`Q`O,5:pO3jQ!bO,5:rOOQS'#E['#E[O3rQ`O,5:tO3wQdO,5:tOOQO'#E_'#E_O4PQ`O,5:wO4UQhO,5:}O%_QdO'#DgOOQS,5;P,5;PO-eQ`O,5;PO4^QdO,5;PO4fQdO,5:gO4vQdO'#EtO5TQ`O,5;zO5TQ`O,5;zPOOO'#Ej'#EjP5`O&jO,58{POOO,58{,58{OOQP1G.n1G.nOOQP1G.q1G.qO*hQ`O1G.qO*mQ`O1G.qOOQP1G/v1G/vO5kQpO1G/xO5sQaO1G/{O6ZQaO1G/}O6qQaO1G0OO7XQaO,5;^OOQO-E8p-E8pOOQS1G.i1G.iO7cQ`O,5:fO7hQdO'#DoO7oQdO'#CrOOQP1G/x1G/xO&lQdO1G/xO7vQ!jO'#DZO8UQ!bO,59vO8^QhO,5:OOOQO'#F]'#F]O8XQ!bO,59zO'tQhO,59xO8fQhO'#EvO8sQ`O,5;{O9OQhO,59|O9uQhO'#DiOOQW,5:S,5:SOOQS1G0n1G0nOOQW,5:P,5:PO9|Q!fO'#FYOOQS'#FY'#FYOOQS'#Em'#EmO;^QdO,59`OOQ[,59`,59`O;tQdO,59fOOQ[,59f,59fO<[QdO,59iOOQ[,59i,59iOOQ[,59k,59kO&lQdO,59mO<rQhO'#EQOOQW'#EQ'#EQO=WQ`O1G0UO1[QhO1G0UOOQ[,59o,59oO'tQhO'#DXOOQ[,59q,59qO=]Q#tO,5:VOOQS1G0[1G0[OOQS1G0^1G0^OOQS1G0`1G0`O=hQ`O1G0`O=mQdO'#E`OOQS1G0c1G0cOOQS1G0i1G0iO=xQaO,5:RO-`Q`O1G0kOOQS1G0k1G0kO-eQ`O1G0kO>PQ!fO1G0ROOQO1G0R1G0ROOQO,5;`,5;`O>gQdO,5;`OOQO-E8r-E8rO>tQ`O1G1fPOOO-E8h-E8hPOOO1G.g1G.gOOQP7+$]7+$]OOQP7+%d7+%dO&lQdO7+%dOOQS1G0Q1G0QO?PQaO'#F_O?ZQ`O,5:ZO?`Q!fO'#ElO@^QdO'#FWO@hQ`O,59^O@mQ!bO7+%dO&lQdO1G/bO@uQhO1G/fOOQW1G/j1G/jOOQW1G/d1G/dOAWQhO,5;bOOQO-E8t-E8tOAfQhO'#DZOAtQhO'#F^OBPQ`O'#F^OBUQ`O,5:TOOQS-E8k-E8kOOQ[1G.z1G.zOOQ[1G/Q1G/QOOQ[1G/T1G/TOOQ[1G/X1G/XOBZQdO,5:lOOQS7+%p7+%pOB`Q`O7+%pOBeQhO'#DYOBmQ`O,59sO'tQhO,59sOOQ[1G/q1G/qOBuQ`O1G/qOOQS7+%z7+%zOBzQbO'#DPOOQO'#Eb'#EbOCYQ`O'#EaOOQO'#Ea'#EaOCeQ`O'#EwOCmQdO,5:zOOQS,5:z,5:zOOQ[1G/m1G/mOOQS7+&V7+&VO-`Q`O7+&VOCxQ!fO'#EsO&lQdO'#EsOEPQdO7+%mOOQO7+%m7+%mOOQO1G0z1G0zOEdQ!bO<<IOOElQdO'#EqOEvQ`O,5;yOOQP1G/u1G/uOOQS-E8j-E8jOFOQdO'#EpOFYQ`O,5;rOOQ]1G.x1G.xOOQP<<IO<<IOOFbQdO7+$|OOQO'#D]'#D]OFiQ!bO7+%QOFqQhO'#EoOF{Q`O,5;xO&lQdO,5;xOOQW1G/o1G/oOOQO'#ES'#ESOGTQ`O1G0WOOQS<<I[<<I[O&lQdO,59tOGnQhO1G/_OOQ[1G/_1G/_OGuQ`O1G/_OOQW-E8l-E8lOOQ[7+%]7+%]OOQO,5:{,5:{O=pQdO'#ExOCeQ`O,5;cOOQS,5;c,5;cOOQS-E8u-E8uOOQS1G0f1G0fOOQS<<Iq<<IqOG}Q!fO,5;_OOQS-E8q-E8qOOQO<<IX<<IXOOQPAN>jAN>jOIUQaO,5;]OOQO-E8o-E8oOI`QdO,5;[OOQO-E8n-E8nOOQW<<Hh<<HhOOQW<<Hl<<HlOIjQhO<<HlOI{QhO,5;ZOJWQ`O,5;ZOOQO-E8m-E8mOJ]QdO1G1dOBZQdO'#EuOJgQ`O7+%rOOQW7+%r7+%rOJoQ!bO1G/`OOQ[7+$y7+$yOJzQhO7+$yPKRQ`O'#EnOOQO,5;d,5;dOOQO-E8v-E8vOOQS1G0}1G0}OKWQ`OAN>WO&lQdO1G0uOK]Q`O7+'OOOQO,5;a,5;aOOQO-E8s-E8sOOQW<<I^<<I^OOQ[<<He<<HePOQW,5;Y,5;YOOQWG23rG23rOKeQdO7+&a\",stateData:\"Kx~O#sOS#tQQ~OW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#oRO~OQiOW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#ohO~O#m$SP~P!dO#tmO~O#ooO~O]qO`rOarOjsOmtO!juO!mwO#nvO~OpzO!^xO~P$SOc!QO#o|O#p}O~O#o!RO~O#o!TO~OW[OZ[O]TO`VOaVOjWOmXO!jYO!mZO#oRO~OS!]Oe!YO!V![O!Y!`O#q!XOp$TP~Ok$TP~P&POQ!jOe!cOm!dOp!eOr!mOt!mOz!kO!`!lO#o!bO#p!hO#}!fO~Ot!qO!`!lO#o!pO~Ot!sO#o!sO~OS!]Oe!YO!V![O!Y!`O#q!XO~Oe!vOpzO#Z!xO~O]YX`YX`!pXaYXjYXmYXpYX!^YX!jYX!mYX#nYX~O`!zO~Ok!{O#m$SXo$SX~O#m$SXo$SX~P!dO#u#OO#v#OO#w#QO~Oc#UO#o|O#p}O~OpzO!^xO~Oo$SP~P!dOe#`O~Oe#aO~Ol#bO!h#cO~O]qO`rOarOjsOmtO~Op!ia!^!ia!j!ia!m!ia#n!iad!ia~P*zOp!la!^!la!j!la!m!la#n!lad!la~P*zOR#gOS!]Oe!YOr#gOt#gO!V![O!Y!`O#q#dO#}!fO~O!R#iO!^#jOk$TXp$TX~Oe#mO~Ok#oOpzO~Oe!vO~O]#rO`#rOd#uOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl#wO~P&lO]#rO`#rOi#rOj#rOk#rOo#yO~P&lOP#zOSsXesXksXvsX!VsX!YsX!usX!wsX#qsX!TsXQsX]sX`sXdsXisXjsXmsXpsXrsXtsXzsX!`sX#osX#psX#}sXlsXosX!^sX!qsX#msX~Ov#{O!u#|O!w#}Ok$TP~P'tOe#aOS#{Xk#{Xv#{X!V#{X!Y#{X!u#{X!w#{X#q#{XQ#{X]#{X`#{Xd#{Xi#{Xj#{Xm#{Xp#{Xr#{Xt#{Xz#{X!`#{X#o#{X#p#{X#}#{Xl#{Xo#{X!^#{X!q#{X#m#{X~Oe$RO~Oe$TO~Ok$VOv#{O~Ok$WO~Ot$XO!`!lO~Op$YO~OpzO!R#iO~OpzO#Z$`O~O!q$bOk!oa#m!oao!oa~P&lOk#hX#m#hXo#hX~P!dOk!{O#m$Sao$Sa~O#u#OO#v#OO#w$hO~Ol$jO!h$kO~Op!ii!^!ii!j!ii!m!ii#n!iid!ii~P*zOp!ki!^!ki!j!ki!m!ki#n!kid!ki~P*zOp!li!^!li!j!li!m!li#n!lid!li~P*zOp#fa!^#fa~P$SOo$lO~Od$RP~P%_Od#zP~P&lO`!PXd}X!R}X!T!PX~O`$sO!T$tO~Od$uO!R#iO~Ok#jXp#jX!^#jX~P'tO!^#jOk$Tap$Ta~O!R#iOk!Uap!Ua!^!Uad!Ua`!Ua~OS!]Oe!YO!V![O!Y!`O#q$yO~Od$QP~P9dOv#{OQ#|X]#|X`#|Xd#|Xe#|Xi#|Xj#|Xk#|Xm#|Xp#|Xr#|Xt#|Xz#|X!`#|X#o#|X#p#|X#}#|Xl#|Xo#|X~O]#rO`#rOd%OOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl%PO~P&lO]#rO`#rOi#rOj#rOk#rOo%QO~P&lOe%SOS!tXk!tX!V!tX!Y!tX#q!tX~Ok%TO~Od%YOt%ZO!a%ZO~Ok%[O~Oo%cO#o%^O#}%]O~Od%dO~P$SOv#{O!^%hO!q%jOk!oi#m!oio!oi~P&lOk#ha#m#hao#ha~P!dOk!{O#m$Sio$Si~O!^%mOd$RX~P$SOd%oO~Ov#{OQ#`Xd#`Xe#`Xm#`Xp#`Xr#`Xt#`Xz#`X!^#`X!`#`X#o#`X#p#`X#}#`X~O!^%qOd#zX~P&lOd%sO~Ol%tOv#{O~OR#gOr#gOt#gO#q%vO#}!fO~O!R#iOk#jap#ja!^#ja~O`!PXd}X!R}X!^}X~O!R#iO!^%xOd$QX~O`%zO~Od%{O~O#o%|O~Ok&OO~O`&PO!R#iO~Od&ROk&QO~Od&UO~OP#zOpsX!^sXdsX~O#}%]Op#TX!^#TX~OpzO!^&WO~Oo&[O#o%^O#}%]O~Ov#{OQ#gXe#gXk#gXm#gXp#gXr#gXt#gXz#gX!^#gX!`#gX!q#gX#m#gX#o#gX#p#gX#}#gXo#gX~O!^%hO!q&`Ok!oq#m!oqo!oq~P&lOl&aOv#{O~Od#eX!^#eX~P%_O!^%mOd$Ra~Od#dX!^#dX~P&lO!^%qOd#za~Od&fO~P&lOd&gO!T&hO~Od#cX!^#cX~P9dO!^%xOd$Qa~O]&mOd&oO~OS#bae#ba!V#ba!Y#ba#q#ba~Od&qO~PG]Od&qOk&rO~Ov#{OQ#gae#gak#gam#gap#gar#gat#gaz#ga!^#ga!`#ga!q#ga#m#ga#o#ga#p#ga#}#gao#ga~Od#ea!^#ea~P$SOd#da!^#da~P&lOR#gOr#gOt#gO#q%vO#}%]O~O!R#iOd#ca!^#ca~O`&xO~O!^%xOd$Qi~P&lO]&mOd&|O~Ov#{Od|ik|i~Od&}O~PG]Ok'OO~Od'PO~O!^%xOd$Qq~Od#cq!^#cq~P&lO#s!a#t#}]#}v!m~\",goto:\"2h$UPPPPP$VP$YP$c$uP$cP%X$cPP%_PPP%e%o%oPPPPP%oPP%oP&]P%oP%o'W%oP't'w'}'}(^'}P'}P'}P'}'}P(m'}(yP(|PP)p)v$c)|$c*SP$cP$c$cP*Y*{+YP$YP+aP+dP$YP$YP$YP+j$YP+m+p+s+z$YP$YPP$YP,P,V,f,|-[-b-l-r-x.O.U.`.f.l.rPPPPPPPPPPP.x/R/w/z0|P1U1u2O2R2U2[RnQ_^OP`kz!{$dq[OPYZ`kuvwxz!v!{#`$d%mqSOPYZ`kuvwxz!v!{#`$d%mQpTR#RqQ!OVR#SrQ#S!QS$Q!i!jR$i#U!V!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'Q!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QU#g!Y$t&hU%`$Y%b&WR&V%_!V!iac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QR$S!kQ%W$RR&S%Xk!^]bf!Y![!g#i#j#m$P$R%X%xQ#e!YQ${#mQ%w$tQ&j%xR&w&hQ!ygQ#p!`Q$^!xR%f$`R#n!]!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QQ!qdR$X!rQ!PVR#TrQ#S!PR$i#TQ!SWR#VsQ!UXR#WtQ{UQ!wgQ#^yQ#o!_Q$U!nQ$[!uQ$_!yQ%e$^Q&Y%aQ&]%fR&v&XSjPzQ!}kQ$c!{R%k$dZiPkz!{$dR$P!gQ%}%SR&z&mR!rdR!teR$Z!tS%a$Y%bR&t&WV%_$Y%b&WQ#PmR$g#PQ`OSkPzU!a`k$dR$d!{Q$p#aY%p$p%u&d&l'QQ%u$sQ&d%qQ&l%zR'Q&xQ#t!cQ#v!dQ#x!eV$}#t#v#xQ%X$RR&T%XQ%y$zS&k%y&yR&y&lQ%r$pR&e%rQ%n$mR&c%nQyUR#]yQ%i$aR&_%iQ!|jS$e!|$fR$f!}Q&n%}R&{&nQ#k!ZR$x#kQ%b$YR&Z%bQ&X%aR&u&X__OP`kz!{$d^UOP`kz!{$dQ!VYQ!WZQ#XuQ#YvQ#ZwQ#[xQ$]!vQ$m#`R&b%mR$q#aQ!gaQ!oc[#q!c!d!e#t#v#xQ$a!zd$o#a$p$s%q%u%z&d&l&x'QQ$r#cQ%R#{S%g$a%iQ%l$kQ&^%hR&p&P]#s!c!d!e#t#v#xW!Z]b!g$PQ!ufQ#f!YQ#l![Q$v#iQ$w#jQ$z#mS%V$R%XR&i%xQ#h!YQ%w$tR&w&hR$|#mR$n#`QlPR#_zQ!_]Q!nbQ$O!gR%U$P\",nodeNames:\"\\u26A0 Unit VariableName VariableName QueryCallee Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector . ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue AtKeyword # ; ] [ BracketedValue } { BracedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee IfExpression if ArgList IfBranch KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp ComparisonQuery CompareOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector ParenthesizedSelector CallQuery ArgList , CallLiteral CallTag ParenthesizedContent PseudoClassName ArgList IdSelector IdName AttributeSelector AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp Block Declaration PropertyName Important ImportStatement import Layer layer LayerName layer MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList KeyframeSelector KeyframeRangeName SupportsStatement supports ScopeStatement scope to AtRule Styles\",maxTerm:143,nodeProps:[[\"isolate\",-2,5,36,\"\"],[\"openedBy\",20,\"(\",28,\"[\",31,\"{\"],[\"closedBy\",21,\")\",29,\"]\",32,\"}\"]],propSources:[N],skippedNodes:[0,5,106],repeatNodeCount:15,tokenData:\"JQ~R!YOX$qX^%i^p$qpq%iqr({rs-ust/itu6Wuv$qvw7Qwx7cxy9Qyz9cz{9h{|:R|}>t}!O?V!O!P?t!P!Q@]!Q![AU![!]BP!]!^B{!^!_C^!_!`DY!`!aDm!a!b$q!b!cEn!c!}$q!}#OG{#O#P$q#P#QH^#Q#R6W#R#o$q#o#pHo#p#q6W#q#rIQ#r#sIc#s#y$q#y#z%i#z$f$q$f$g%i$g#BY$q#BY#BZ%i#BZ$IS$q$IS$I_%i$I_$I|$q$I|$JO%i$JO$JT$q$JT$JU%i$JU$KV$q$KV$KW%i$KW&FU$q&FU&FV%i&FV;'S$q;'S;=`Iz<%lO$q`$tSOy%Qz;'S%Q;'S;=`%c<%lO%Q`%VS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q`%fP;=`<%l%Q~%nh#s~OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Q~'ah#s~!a`OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Qj)OUOy%Qz#]%Q#]#^)b#^;'S%Q;'S;=`%c<%lO%Qj)gU!a`Oy%Qz#a%Q#a#b)y#b;'S%Q;'S;=`%c<%lO%Qj*OU!a`Oy%Qz#d%Q#d#e*b#e;'S%Q;'S;=`%c<%lO%Qj*gU!a`Oy%Qz#c%Q#c#d*y#d;'S%Q;'S;=`%c<%lO%Qj+OU!a`Oy%Qz#f%Q#f#g+b#g;'S%Q;'S;=`%c<%lO%Qj+gU!a`Oy%Qz#h%Q#h#i+y#i;'S%Q;'S;=`%c<%lO%Qj,OU!a`Oy%Qz#T%Q#T#U,b#U;'S%Q;'S;=`%c<%lO%Qj,gU!a`Oy%Qz#b%Q#b#c,y#c;'S%Q;'S;=`%c<%lO%Qj-OU!a`Oy%Qz#h%Q#h#i-b#i;'S%Q;'S;=`%c<%lO%Qj-iS!qY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q~-xWOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c<%lO-u~.gOt~~.jRO;'S-u;'S;=`.s;=`O-u~.vXOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c;=`<%l-u<%lO-u~/fP;=`<%l-uj/nYjYOy%Qz!Q%Q!Q![0^![!c%Q!c!i0^!i#T%Q#T#Z0^#Z;'S%Q;'S;=`%c<%lO%Qj0cY!a`Oy%Qz!Q%Q!Q![1R![!c%Q!c!i1R!i#T%Q#T#Z1R#Z;'S%Q;'S;=`%c<%lO%Qj1WY!a`Oy%Qz!Q%Q!Q![1v![!c%Q!c!i1v!i#T%Q#T#Z1v#Z;'S%Q;'S;=`%c<%lO%Qj1}YrY!a`Oy%Qz!Q%Q!Q![2m![!c%Q!c!i2m!i#T%Q#T#Z2m#Z;'S%Q;'S;=`%c<%lO%Qj2tYrY!a`Oy%Qz!Q%Q!Q![3d![!c%Q!c!i3d!i#T%Q#T#Z3d#Z;'S%Q;'S;=`%c<%lO%Qj3iY!a`Oy%Qz!Q%Q!Q![4X![!c%Q!c!i4X!i#T%Q#T#Z4X#Z;'S%Q;'S;=`%c<%lO%Qj4`YrY!a`Oy%Qz!Q%Q!Q![5O![!c%Q!c!i5O!i#T%Q#T#Z5O#Z;'S%Q;'S;=`%c<%lO%Qj5TY!a`Oy%Qz!Q%Q!Q![5s![!c%Q!c!i5s!i#T%Q#T#Z5s#Z;'S%Q;'S;=`%c<%lO%Qj5zSrY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qd6ZUOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qd6tS!hS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qb7VSZQOy%Qz;'S%Q;'S;=`%c<%lO%Q~7fWOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z<%lO7c~8RRO;'S7c;'S;=`8[;=`O7c~8_XOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z;=`<%l7c<%lO7c~8}P;=`<%l7cj9VSeYOy%Qz;'S%Q;'S;=`%c<%lO%Q~9hOd~n9oUWQvWOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qj:YWvW!mQOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj:wU!a`Oy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Qj;bY!a`#}YOy%Qz!Q%Q!Q![;Z![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj<VY!a`Oy%Qz{%Q{|<u|}%Q}!O<u!O!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj<zU!a`Oy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj=eU!a`#}YOy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj>O[!a`#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj>yS!^YOy%Qz;'S%Q;'S;=`%c<%lO%Qj?[WvWOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj?yU]YOy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Q~@bTvWOy%Qz{@q{;'S%Q;'S;=`%c<%lO%Q~@xS!a`#t~Oy%Qz;'S%Q;'S;=`%c<%lO%QjAZ[#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%QjBUU`YOy%Qz![%Q![!]Bh!];'S%Q;'S;=`%c<%lO%QbBoSaQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjCQSkYOy%Qz;'S%Q;'S;=`%c<%lO%QhCcU!TWOy%Qz!_%Q!_!`Cu!`;'S%Q;'S;=`%c<%lO%QhC|S!TW!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QlDaS!TW!hSOy%Qz;'S%Q;'S;=`%c<%lO%QjDtV!jQ!TWOy%Qz!_%Q!_!`Cu!`!aEZ!a;'S%Q;'S;=`%c<%lO%QbEbS!jQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjEqYOy%Qz}%Q}!OFa!O!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjFfW!a`Oy%Qz!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjGV[iY!a`Oy%Qz}%Q}!OGO!O!Q%Q!Q![GO![!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjHQSmYOy%Qz;'S%Q;'S;=`%c<%lO%QnHcSl^Oy%Qz;'S%Q;'S;=`%c<%lO%QjHtSpYOy%Qz;'S%Q;'S;=`%c<%lO%QjIVSoYOy%Qz;'S%Q;'S;=`%c<%lO%QfIhU!mQOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Q`I}P;=`<%l$q\",tokenizers:[C,w,Z,_,1,2,3,4,new Y(\"m~RRYZ[z{a~~g~aO#v~~dP!P!Qg~lO#w~~\",28,129)],topRules:{StyleSheet:[0,6],Styles:[1,105]},specialized:[{term:124,get:O=>I[O]||-1},{term:125,get:O=>F[O]||-1},{term:4,get:O=>D[O]||-1},{term:25,get:O=>B[O]||-1},{term:123,get:O=>K[O]||-1}],tokenPrec:1963});export{J as parser};\n",mimeType:"application/javascript"},"/@codemirror/view@%5E6.23.0?target=es2022":{content:`import"/@codemirror/state@^6.5.0?target=es2022";import"/crelt@^1.0.6?target=es2022";import"/style-mod@^4.1.0?target=es2022";import"/w3c-keyname@^2.2.4?target=es2022";export*from"/@codemirror/view@6.39.4/es2022/view.mjs";
`,mimeType:"application/javascript"},"/style-mod@%5E4.0.0?target=es2022":{content:`export*from"/style-mod@4.1.3/es2022/style-mod.mjs";
`,mimeType:"application/javascript"},"/@lezer/common@%5E1.1.0?target=es2022":{content:`export*from"/@lezer/common@1.4.0/es2022/common.mjs";
`,mimeType:"application/javascript"},"/@codemirror/search":{content:`import"/@codemirror/state@^6.0.0?target=es2022";import"/@codemirror/view@^6.0.0?target=es2022";import"/crelt@^1.0.5?target=es2022";export*from"/@codemirror/search@6.5.11/es2022/search.mjs";
`,mimeType:"application/javascript"},"/style-mod@4.1.3/es2022/style-mod.mjs":{content:'var g=typeof Symbol>"u"?"__\\u037C":Symbol.for("\\u037C"),d=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),m=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{},b=class{constructor(e,l){this.rules=[];let{finish:o}=l||{};function n(t){return/^@/.test(t)?[t]:t.split(/,\\s*/)}function s(t,i,r,a){let c=[],f=/^@(\\w+)\\b/.exec(t[0]),S=f&&f[1]=="keyframes";if(f&&i==null)return r.push(t[0]+";");for(let h in i){let u=i[h];if(/&/.test(h))s(h.split(/,\\s*/).map(y=>t.map(p=>y.replace(/&/,p))).reduce((y,p)=>y.concat(p)),u,r);else if(u&&typeof u=="object"){if(!f)throw new RangeError("The value of a property ("+h+") should be a primitive value.");s(n(h),u,c,S)}else u!=null&&c.push(h.replace(/_.*/,"").replace(/[A-Z]/g,y=>"-"+y.toLowerCase())+": "+u+";")}(c.length||S)&&r.push((o&&!f&&!a?t.map(o):t).join(", ")+" {"+c.join(" ")+"}")}for(let t in e)s(n(t),e[t],this.rules)}getRules(){return this.rules.join(`\n`)}static newName(){let e=m[g]||1;return m[g]=e+1,"\\u037C"+e.toString(36)}static mount(e,l,o){let n=e[d],s=o&&o.nonce;n?s&&n.setNonce(s):n=new T(e,s),n.mount(Array.isArray(l)?l:[l],e)}},w=new Map,T=class{constructor(e,l){let o=e.ownerDocument||e,n=o.defaultView;if(!e.head&&e.adoptedStyleSheets&&n.CSSStyleSheet){let s=w.get(o);if(s)return e[d]=s;this.sheet=new n.CSSStyleSheet,w.set(o,this)}else this.styleTag=o.createElement("style"),l&&this.styleTag.setAttribute("nonce",l);this.modules=[],e[d]=this}mount(e,l){let o=this.sheet,n=0,s=0;for(let t=0;t<e.length;t++){let i=e[t],r=this.modules.indexOf(i);if(r<s&&r>-1&&(this.modules.splice(r,1),s--,r=-1),r==-1){if(this.modules.splice(s++,0,i),o)for(let a=0;a<i.rules.length;a++)o.insertRule(i.rules[a],n++)}else{for(;s<r;)n+=this.modules[s++].rules.length;n+=i.rules.length,s++}}if(o)l.adoptedStyleSheets.indexOf(this.sheet)<0&&(l.adoptedStyleSheets=[this.sheet,...l.adoptedStyleSheets]);else{let t="";for(let r=0;r<this.modules.length;r++)t+=this.modules[r].getRules()+`\n`;this.styleTag.textContent=t;let i=l.head||l;this.styleTag.parentNode!=i&&i.insertBefore(this.styleTag,i.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}};export{b as StyleModule};\n',mimeType:"application/javascript"},"/@codemirror/search@6.5.11/es2022/search.mjs":{content:'import{showPanel as te,EditorView as x,getPanel as F,Decoration as f,ViewPlugin as re,runScopeHandlers as Se}from"/@codemirror/view@^6.0.0?target=es2022";import{codePointAt as Me,fromCodePoint as ke,codePointSize as Ce,StateEffect as C,StateField as ie,EditorSelection as g,Facet as se,combineConfig as ne,CharCategory as p,RangeSetBuilder as qe,Prec as Le,EditorState as We,findClusterBreak as oe}from"/@codemirror/state@^6.0.0?target=es2022";import h from"/crelt@^1.0.5?target=es2022";var ae=typeof String.prototype.normalize=="function"?e=>e.normalize("NFKD"):e=>e,b=class{constructor(e,t,r=0,i=e.length,s,n){this.test=n,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?o=>s(ae(o)):ae,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Me(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=ke(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=Ce(e);let i=this.normalize(t);if(i.length)for(let s=0,n=r;;s++){let o=i.charCodeAt(s),a=this.match(o,n,this.bufferPos+this.bufferStart);if(s==i.length-1){if(a)return this.value=a,this;break}n==r&&s<t.length&&t.charCodeAt(s)==o&&n++}}}match(e,t,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let n=this.matches[s],o=!1;this.query.charCodeAt(n)==e&&(n==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,o=!0)),o||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:r}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}};typeof Symbol<"u"&&(b.prototype[Symbol.iterator]=function(){return this});var le={from:-1,to:-1,match:/.*/.exec("")},V="gm"+(/x/.unicode==null?"":"u"),N=class{constructor(e,t,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=le,/\\\\[sWDnr]|\\n|\\r|\\[\\^/.test(t))return new he(e,t,r,i,s);this.re=new RegExp(t,V+(r?.ignoreCase?"i":"")),this.test=r?.test,this.iter=e.iter();let n=e.lineAt(i);this.curLineStart=n.from,this.matchPos=P(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let r=this.curLineStart+t.index,i=r+t[0].length;if(this.matchPos=P(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}},Q=new WeakMap,ce=class O{constructor(t,r){this.from=t,this.text=r}get to(){return this.from+this.text.length}static get(t,r,i){let s=Q.get(t);if(!s||s.from>=i||s.to<=r){let a=new O(r,t.sliceString(r,i));return Q.set(t,a),a}if(s.from==r&&s.to==i)return s;let{text:n,from:o}=s;return o>r&&(n=t.sliceString(r,o)+n,o=r),s.to<i&&(n+=t.sliceString(s.to,i)),Q.set(t,new O(o,n)),new O(r,n.slice(r-o,i-o))}},he=class{constructor(e,t,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=le,this.matchPos=P(e,i),this.re=new RegExp(t,V+(r?.ignoreCase?"i":"")),this.test=r?.test,this.flat=ce.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let r=this.flat.from+t.index,i=r+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this.matchPos=P(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=ce.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}};typeof Symbol<"u"&&(N.prototype[Symbol.iterator]=he.prototype[Symbol.iterator]=function(){return this});function De(e){try{return new RegExp(e,V),!0}catch{return!1}}function P(e,t){if(t>=e.length)return t;let r=e.lineAt(t),i;for(;t<r.to&&(i=r.text.charCodeAt(t-r.from))>=56320&&i<57344;)t++;return t}function B(e){let t=String(e.state.doc.lineAt(e.state.selection.main.head).number),r=h("input",{class:"cm-textfield",name:"line",value:t}),i=h("form",{class:"cm-gotoLine",onkeydown:n=>{n.keyCode==27?(n.preventDefault(),e.dispatch({effects:q.of(!1)}),e.focus()):n.keyCode==13&&(n.preventDefault(),s())},onsubmit:n=>{n.preventDefault(),s()}},h("label",e.state.phrase("Go to line"),": ",r)," ",h("button",{class:"cm-button",type:"submit"},e.state.phrase("go")),h("button",{name:"close",onclick:()=>{e.dispatch({effects:q.of(!1)}),e.focus()},"aria-label":e.state.phrase("close"),type:"button"},["\\xD7"]));function s(){let n=/^([+-])?(\\d+)?(:\\d+)?(%)?$/.exec(r.value);if(!n)return;let{state:o}=e,a=o.doc.lineAt(o.selection.main.head),[,l,c,u,m]=n,A=u?+u.slice(1):0,k=c?+c:a.number;if(c&&m){let T=k/100;l&&(T=T*(l=="-"?-1:1)+a.number/o.doc.lines),k=Math.round(o.doc.lines*T)}else c&&l&&(k=k*(l=="-"?-1:1)+a.number);let _=o.doc.line(Math.max(1,Math.min(o.doc.lines,k))),ee=g.cursor(_.from+Math.max(0,Math.min(A,_.length)));e.dispatch({effects:[q.of(!1),x.scrollIntoView(ee.from,{y:"center"})],selection:ee}),e.focus()}return{dom:i}}var q=C.define(),ue=ie.define({create(){return!0},update(e,t){for(let r of t.effects)r.is(q)&&(e=r.value);return e},provide:e=>te.from(e,t=>t?B:null)}),fe=e=>{let t=F(e,B);if(!t){let r=[q.of(!0)];e.state.field(ue,!1)==null&&r.push(C.appendConfig.of([ue,Ae])),e.dispatch({effects:r}),t=F(e,B)}return t&&t.dom.querySelector("input").select(),!0},Ae=x.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),Fe={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},de=se.define({combine(e){return ne(e,Fe,{highlightWordAroundCursor:(t,r)=>t||r,minSelectionLength:Math.min,maxMatches:Math.min})}});function Pe(e){let t=[$e,ze];return e&&t.push(de.of(e)),t}var Re=f.mark({class:"cm-selectionMatch"}),Ee=f.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function me(e,t,r,i){return(r==0||e(t.sliceDoc(r-1,r))!=p.Word)&&(i==t.doc.length||e(t.sliceDoc(i,i+1))!=p.Word)}function Ie(e,t,r,i){return e(t.sliceDoc(r,r+1))==p.Word&&e(t.sliceDoc(i-1,i))==p.Word}var ze=re.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(de),{state:r}=e,i=r.selection;if(i.ranges.length>1)return f.none;let s=i.main,n,o=null;if(s.empty){if(!t.highlightWordAroundCursor)return f.none;let l=r.wordAt(s.head);if(!l)return f.none;o=r.charCategorizer(s.head),n=r.sliceDoc(l.from,l.to)}else{let l=s.to-s.from;if(l<t.minSelectionLength||l>200)return f.none;if(t.wholeWords){if(n=r.sliceDoc(s.from,s.to),o=r.charCategorizer(s.head),!(me(o,r,s.from,s.to)&&Ie(o,r,s.from,s.to)))return f.none}else if(n=r.sliceDoc(s.from,s.to),!n)return f.none}let a=[];for(let l of e.visibleRanges){let c=new b(r.doc,n,l.from,l.to);for(;!c.next().done;){let{from:u,to:m}=c.value;if((!o||me(o,r,u,m))&&(s.empty&&u<=s.from&&m>=s.to?a.push(Ee.range(u,m)):(u>=s.to||m<=s.from)&&a.push(Re.range(u,m)),a.length>t.maxMatches))return f.none}}return f.set(a)}},{decorations:e=>e.decorations}),$e=x.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Oe=({state:e,dispatch:t})=>{let{selection:r}=e,i=g.create(r.ranges.map(s=>e.wordAt(s.head)||g.cursor(s.head)),r.mainIndex);return i.eq(r)?!1:(t(e.update({selection:i})),!0)};function Te(e,t){let{main:r,ranges:i}=e.selection,s=e.wordAt(r.head),n=s&&s.from==r.from&&s.to==r.to;for(let o=!1,a=new b(e.doc,t,i[i.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new b(e.doc,t,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(l=>l.from==a.value.from))continue;if(n){let l=e.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}var pe=({state:e,dispatch:t})=>{let{ranges:r}=e.selection;if(r.some(n=>n.from===n.to))return Oe({state:e,dispatch:t});let i=e.sliceDoc(r[0].from,r[0].to);if(e.selection.ranges.some(n=>e.sliceDoc(n.from,n.to)!=i))return!1;let s=Te(e,i);return s?(t(e.update({selection:e.selection.addRange(g.range(s.from,s.to),!1),effects:x.scrollIntoView(s.to)})),!0):!1},y=se.define({combine(e){return ne(e,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:t=>new je(t),scrollToMatch:t=>x.scrollIntoView(t)})}});function Ve(e){return e?[y.of(e),J]:J}var K=class{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||De(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\\\([nrt\\\\])/g,(t,r)=>r=="n"?`\n`:r=="r"?"\\r":r=="t"?"	":"\\\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Ke(this):new Qe(this)}getCursor(e,t=0,r){let i=e.doc?e:We.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?S(this,i,t,r):w(this,i,t,r)}},ge=class{constructor(e){this.spec=e}};function w(e,t,r,i){return new b(t.doc,e.unquoted,r,i,e.caseSensitive?void 0:s=>s.toLowerCase(),e.wholeWord?Ne(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}function Ne(e,t){return(r,i,s,n)=>((n>r||n+s.length<i)&&(n=Math.max(0,r-2),s=e.sliceString(n,Math.min(e.length,i+2))),(t(R(s,r-n))!=p.Word||t(E(s,r-n))!=p.Word)&&(t(E(s,i-n))!=p.Word||t(R(s,i-n))!=p.Word))}var Qe=class extends ge{constructor(e){super(e)}nextMatch(e,t,r){let i=w(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,t+this.spec.unquoted.length);i=w(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==t&&i.value.to==r?null:i.value}prevMatchInRange(e,t,r){for(let i=r;;){let s=Math.max(t,i-1e4-this.spec.unquoted.length),n=w(this.spec,e,s,i),o=null;for(;!n.nextOverlapping().done;)o=n.value;if(o)return o;if(s==t)return null;i-=1e4}}prevMatch(e,t,r){let i=this.prevMatchInRange(e,0,t);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=t||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let r=w(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let s=w(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}};function S(e,t,r,i){return new N(t.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?Be(t.charCategorizer(t.selection.main.head)):void 0},r,i)}function R(e,t){return e.slice(oe(e,t,!1),t)}function E(e,t){return e.slice(t,oe(e,t))}function Be(e){return(t,r,i)=>!i[0].length||(e(R(i.input,i.index))!=p.Word||e(E(i.input,i.index))!=p.Word)&&(e(E(i.input,i.index+i[0].length))!=p.Word||e(R(i.input,i.index+i[0].length))!=p.Word)}var Ke=class extends ge{nextMatch(e,t,r){let i=S(this.spec,e,r,e.doc.length).next();return i.done&&(i=S(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=1;;i++){let s=Math.max(t,r-i*1e4),n=S(this.spec,e,s,r),o=null;for(;!n.next().done;)o=n.value;if(o&&(s==t||o.from>s+10))return o;if(s==t)return null}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\\$([$&]|\\d+)/g,(t,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let s=+r.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+r.slice(i)}return t})}matchAll(e,t){let r=S(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let s=S(this.spec,e,Math.max(0,t-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}},M=C.define(),G=C.define(),v=ie.define({create(e){return new H(I(e).create(),null)},update(e,t){for(let r of t.effects)r.is(M)?e=new H(r.value.create(),e.panel):r.is(G)&&(e=new H(e.query,r.value?X:null));return e},provide:e=>te.from(e,t=>t.panel)});function Ge(e){let t=e.field(v,!1);return t?t.query.spec:I(e)}function He(e){var t;return((t=e.field(v,!1))===null||t===void 0?void 0:t.panel)!=null}var H=class{constructor(e,t){this.query=e,this.panel=t}},Ue=f.mark({class:"cm-searchMatch"}),Xe=f.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Ye=re.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(v))}update(e){let t=e.state.field(v);(t!=e.startState.field(v)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:e,panel:t}){if(!t||!e.spec.valid)return f.none;let{view:r}=this,i=new qe;for(let s=0,n=r.visibleRanges,o=n.length;s<o;s++){let{from:a,to:l}=n[s];for(;s<o-1&&l>n[s+1].from-500;)l=n[++s].to;e.highlight(r.state,a,l,(c,u)=>{let m=r.state.selection.ranges.some(A=>A.from==c&&A.to==u);i.add(c,u,m?Xe:Ue)})}return i.finish()}},{decorations:e=>e.decorations});function L(e){return t=>{let r=t.state.field(v,!1);return r&&r.query.spec.valid?e(t,r):Y(t)}}var W=L((e,{query:t})=>{let{to:r}=e.state.selection.main,i=t.nextMatch(e.state,r,r);if(!i)return!1;let s=g.single(i.from,i.to),n=e.state.facet(y);return e.dispatch({selection:s,effects:[j(e,i),n.scrollToMatch(s.main,e)],userEvent:"select.search"}),we(e),!0}),D=L((e,{query:t})=>{let{state:r}=e,{from:i}=r.selection.main,s=t.prevMatch(r,i,i);if(!s)return!1;let n=g.single(s.from,s.to),o=e.state.facet(y);return e.dispatch({selection:n,effects:[j(e,s),o.scrollToMatch(n.main,e)],userEvent:"select.search"}),we(e),!0}),ve=L((e,{query:t})=>{let r=t.matchAll(e.state,1e3);return!r||!r.length?!1:(e.dispatch({selection:g.create(r.map(i=>g.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),xe=({state:e,dispatch:t})=>{let r=e.selection;if(r.ranges.length>1||r.main.empty)return!1;let{from:i,to:s}=r.main,n=[],o=0;for(let a=new b(e.doc,e.sliceDoc(i,s));!a.next().done;){if(n.length>1e3)return!1;a.value.from==i&&(o=n.length),n.push(g.range(a.value.from,a.value.to))}return t(e.update({selection:g.create(n,o),userEvent:"select.search.matches"})),!0},U=L((e,{query:t})=>{let{state:r}=e,{from:i,to:s}=r.selection.main;if(r.readOnly)return!1;let n=t.nextMatch(r,i,i);if(!n)return!1;let o=n,a=[],l,c,u=[];o.from==i&&o.to==s&&(c=r.toText(t.getReplacement(o)),a.push({from:o.from,to:o.to,insert:c}),o=t.nextMatch(r,o.from,o.to),u.push(x.announce.of(r.phrase("replaced match on line $",r.doc.lineAt(i).number)+".")));let m=e.state.changes(a);return o&&(l=g.single(o.from,o.to).map(m),u.push(j(e,o)),u.push(r.facet(y).scrollToMatch(l.main,e))),e.dispatch({changes:m,selection:l,effects:u,userEvent:"input.replace"}),!0}),be=L((e,{query:t})=>{if(e.state.readOnly)return!1;let r=t.matchAll(e.state,1e9).map(s=>{let{from:n,to:o}=s;return{from:n,to:o,insert:t.getReplacement(s)}});if(!r.length)return!1;let i=e.state.phrase("replaced $ matches",r.length)+".";return e.dispatch({changes:r,effects:x.announce.of(i),userEvent:"input.replace.all"}),!0});function X(e){return e.state.facet(y).createPanel(e)}function I(e,t){var r,i,s,n,o;let a=e.selection.main,l=a.empty||a.to>a.from+100?"":e.sliceDoc(a.from,a.to);if(t&&!l)return t;let c=e.facet(y);return new K({search:((r=t?.literal)!==null&&r!==void 0?r:c.literal)?l:l.replace(/\\n/g,"\\\\n"),caseSensitive:(i=t?.caseSensitive)!==null&&i!==void 0?i:c.caseSensitive,literal:(s=t?.literal)!==null&&s!==void 0?s:c.literal,regexp:(n=t?.regexp)!==null&&n!==void 0?n:c.regexp,wholeWord:(o=t?.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function ye(e){let t=F(e,X);return t&&t.dom.querySelector("[main-field]")}function we(e){let t=ye(e);t&&t==e.root.activeElement&&t.select()}var Y=e=>{let t=e.state.field(v,!1);if(t&&t.panel){let r=ye(e);if(r&&r!=e.root.activeElement){let i=I(e.state,t.query.spec);i.valid&&e.dispatch({effects:M.of(i)}),r.focus(),r.select()}}else e.dispatch({effects:[G.of(!0),t?M.of(I(e.state,t.query.spec)):C.appendConfig.of(J)]});return!0},Z=e=>{let t=e.state.field(v,!1);if(!t||!t.panel)return!1;let r=F(e,X);return r&&r.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:G.of(!1)}),!0},Ze=[{key:"Mod-f",run:Y,scope:"editor search-panel"},{key:"F3",run:W,shift:D,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:W,shift:D,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Z,scope:"editor search-panel"},{key:"Mod-Shift-l",run:xe},{key:"Mod-Alt-g",run:fe},{key:"Mod-d",run:pe,preventDefault:!0}],je=class{constructor(e){this.view=e;let t=this.query=e.state.field(v).query.spec;this.commit=this.commit.bind(this),this.searchField=h("input",{value:t.search,placeholder:d(e,"Find"),"aria-label":d(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=h("input",{value:t.replace,placeholder:d(e,"Replace"),"aria-label":d(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=h("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=h("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=h("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function r(i,s,n){return h("button",{class:"cm-button",name:i,onclick:s,type:"button"},n)}this.dom=h("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>W(e),[d(e,"next")]),r("prev",()=>D(e),[d(e,"previous")]),r("select",()=>ve(e),[d(e,"all")]),h("label",null,[this.caseField,d(e,"match case")]),h("label",null,[this.reField,d(e,"regexp")]),h("label",null,[this.wordField,d(e,"by word")]),...e.state.readOnly?[]:[h("br"),this.replaceField,r("replace",()=>U(e),[d(e,"replace")]),r("replaceAll",()=>be(e),[d(e,"replace all")])],h("button",{name:"close",onclick:()=>Z(e),"aria-label":d(e,"close"),type:"button"},["\\xD7"])])}commit(){let e=new K({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:M.of(e)}))}keydown(e){Se(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?D:W)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),U(this.view))}update(e){for(let t of e.transactions)for(let r of t.effects)r.is(M)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(y).top}};function d(e,t){return e.state.phrase(t)}var z=30,$=/[\\s\\.,:;?!]/;function j(e,{from:t,to:r}){let i=e.state.doc.lineAt(t),s=e.state.doc.lineAt(r).to,n=Math.max(i.from,t-z),o=Math.min(s,r+z),a=e.state.sliceDoc(n,o);if(n!=i.from){for(let l=0;l<z;l++)if(!$.test(a[l+1])&&$.test(a[l])){a=a.slice(l);break}}if(o!=s){for(let l=a.length-1;l>a.length-z;l--)if(!$.test(a[l-1])&&$.test(a[l])){a=a.slice(0,l);break}}return x.announce.of(`${e.state.phrase("current match")}. ${a} ${e.state.phrase("on line")} ${i.number}.`)}var Je=x.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),J=[v,Le.low(Ye),Je];export{N as RegExpCursor,b as SearchCursor,K as SearchQuery,Z as closeSearchPanel,W as findNext,D as findPrevious,Ge as getSearchQuery,fe as gotoLine,Pe as highlightSelectionMatches,Y as openSearchPanel,be as replaceAll,U as replaceNext,Ve as search,Ze as searchKeymap,He as searchPanelOpen,ve as selectMatches,pe as selectNextOccurrence,xe as selectSelectionMatches,M as setSearchQuery};\n',mimeType:"application/javascript"},"/@codemirror/view":{content:`import"/@codemirror/state@^6.5.0?target=es2022";import"/crelt@^1.0.6?target=es2022";import"/style-mod@^4.1.0?target=es2022";import"/w3c-keyname@^2.2.4?target=es2022";export*from"/@codemirror/view@6.39.4/es2022/view.mjs";
`,mimeType:"application/javascript"},"/@lezer/common@%5E1.2.0?target=es2022":{content:`export*from"/@lezer/common@1.4.0/es2022/common.mjs";
`,mimeType:"application/javascript"},"/@lezer/lr@%5E1.3.0?target=es2022":{content:`import"/@lezer/common@^1.0.0?target=es2022";import"/node/process.mjs";export*from"/@lezer/lr@1.4.5/es2022/lr.mjs";
`,mimeType:"application/javascript"},"/@lezer/lr@%5E1.0.0?target=es2022":{content:`import"/@lezer/common@^1.0.0?target=es2022";import"/node/process.mjs";export*from"/@lezer/lr@1.4.5/es2022/lr.mjs";
`,mimeType:"application/javascript"},"/@codemirror/state@%5E6.5.0?target=es2022":{content:`import"/@marijn/find-cluster-break@^1.0.0?target=es2022";export*from"/@codemirror/state@6.5.2/es2022/state.mjs";
`,mimeType:"application/javascript"},"/style-mod@%5E4.1.0?target=es2022":{content:`export*from"/style-mod@4.1.3/es2022/style-mod.mjs";
`,mimeType:"application/javascript"},"/w3c-keyname@%5E2.2.4?target=es2022":{content:`export*from"/w3c-keyname@2.2.8/es2022/w3c-keyname.mjs";
`,mimeType:"application/javascript"},"/@lezer/highlight@%5E1.1.3?target=es2022":{content:`import"/@lezer/common@^1.3.0?target=es2022";export*from"/@lezer/highlight@1.2.3/es2022/highlight.mjs";
`,mimeType:"application/javascript"},"/crelt@%5E1.0.6?target=es2022":{content:`export*from"/crelt@1.0.6/es2022/crelt.mjs";export{default}from"/crelt@1.0.6/es2022/crelt.mjs";
`,mimeType:"application/javascript"},"/@codemirror/commands":{content:`import"/@codemirror/language@^6.0.0?target=es2022";import"/@codemirror/state@^6.4.0?target=es2022";import"/@codemirror/view@^6.27.0?target=es2022";import"/@lezer/common@^1.1.0?target=es2022";export*from"/@codemirror/commands@6.10.0/es2022/commands.mjs";
`,mimeType:"application/javascript"},"/node/process.mjs":{content:'function r(t){return new Error(`[unenv] ${t} is not implemented yet!`)}function a(t){return Object.assign(()=>{throw r(t)},{__unenv__:!0})}import{EventEmitter as g}from"/node/events.mjs";import{ReadStream as _,WriteStream as p}from"/node/tty.mjs";var v="22.14.0",f=class m extends g{env;hrtime;nextTick;constructor(e){super(),this.env=e.env,this.hrtime=e.hrtime,this.nextTick=e.nextTick;for(let s of[...Object.getOwnPropertyNames(m.prototype),...Object.getOwnPropertyNames(g.prototype)]){let i=this[s];typeof i=="function"&&(this[s]=i.bind(this))}}emitWarning(e,s,i){console.warn(`${i?`[${i}] `:""}${s?`${s}: `:""}${e}`)}emit(...e){return super.emit(...e)}listeners(e){return super.listeners(e)}#t;#s;#r;get stdin(){return this.#t??=new _(0)}get stdout(){return this.#s??=new p(1)}get stderr(){return this.#r??=new p(2)}#e="/";chdir(e){this.#e=e}cwd(){return this.#e}arch="";platform="";argv=[];argv0="";execArgv=[];execPath="";title="";pid=200;ppid=100;get version(){return`v${v}`}get versions(){return{node:v}}get allowedNodeEnvironmentFlags(){return new Set}get sourceMapsEnabled(){return!1}get debugPort(){return 0}get throwDeprecation(){return!1}get traceDeprecation(){return!1}get features(){return{}}get release(){return{}}get connected(){return!1}get config(){return{}}get moduleLoadList(){return[]}constrainedMemory(){return 0}availableMemory(){return 0}uptime(){return 0}resourceUsage(){return{}}ref(){}unref(){}umask(){throw r("process.umask")}getBuiltinModule(){}getActiveResourcesInfo(){throw r("process.getActiveResourcesInfo")}exit(){throw r("process.exit")}reallyExit(){throw r("process.reallyExit")}kill(){throw r("process.kill")}abort(){throw r("process.abort")}dlopen(){throw r("process.dlopen")}setSourceMapsEnabled(){throw r("process.setSourceMapsEnabled")}loadEnvFile(){throw r("process.loadEnvFile")}disconnect(){throw r("process.disconnect")}cpuUsage(){throw r("process.cpuUsage")}setUncaughtExceptionCaptureCallback(){throw r("process.setUncaughtExceptionCaptureCallback")}hasUncaughtExceptionCaptureCallback(){throw r("process.hasUncaughtExceptionCaptureCallback")}initgroups(){throw r("process.initgroups")}openStdin(){throw r("process.openStdin")}assert(){throw r("process.assert")}binding(){throw r("process.binding")}permission={has:a("process.permission.has")};report={directory:"",filename:"",signal:"SIGUSR2",compact:!1,reportOnFatalError:!1,reportOnSignal:!1,reportOnUncaughtException:!1,getReport:a("process.report.getReport"),writeReport:a("process.report.writeReport")};finalization={register:a("process.finalization.register"),unregister:a("process.finalization.unregister"),registerBeforeExit:a("process.finalization.registerBeforeExit")};memoryUsage=Object.assign(()=>({arrayBuffers:0,rss:0,external:0,heapTotal:0,heapUsed:0}),{rss:()=>0});mainModule=void 0;domain=void 0;send=void 0;exitCode=void 0;channel=void 0;getegid=void 0;geteuid=void 0;getgid=void 0;getgroups=void 0;getuid=void 0;setegid=void 0;seteuid=void 0;setgid=void 0;setgroups=void 0;setuid=void 0;_events=void 0;_eventsCount=void 0;_exiting=void 0;_maxListeners=void 0;_debugEnd=void 0;_debugProcess=void 0;_fatalException=void 0;_getActiveHandles=void 0;_getActiveRequests=void 0;_kill=void 0;_preload_modules=void 0;_rawDebug=void 0;_startProfilerIdleNotifier=void 0;_stopProfilerIdleNotifier=void 0;_tickCallback=void 0;_disconnect=void 0;_handleQueue=void 0;_pendingMessage=void 0;_channel=void 0;_send=void 0;_linkedBinding=void 0},u=Object.create(null),b=globalThis.process,o=t=>globalThis.__env__||b?.env||(t?u:globalThis),x=new Proxy(u,{get(t,e){return o()[e]??u[e]},has(t,e){let s=o();return e in s||e in u},set(t,e,s){let i=o(!0);return i[e]=s,!0},deleteProperty(t,e){let s=o(!0);return delete s[e],!0},ownKeys(){let t=o();return Object.keys(t)},getOwnPropertyDescriptor(t,e){let s=o();if(e in s)return{value:s[e],writable:!0,enumerable:!0,configurable:!0}}}),w=Object.assign(function(t){let e=Date.now(),s=Math.trunc(e/1e3),i=e%1e3*1e6;if(t){let d=s-t[0],n=i-t[0];return n<0&&(d=d-1,n=1e9+n),[d,n]}return[s,i]},{bigint:function(){return BigInt(Date.now()*1e6)}}),E=globalThis.queueMicrotask?(t,...e)=>{globalThis.queueMicrotask(t.bind(void 0,...e))}:k();function k(){let t=[],e=!1,s,i=-1;function d(){!e||!s||(e=!1,s.length>0?t=[...s,...t]:i=-1,t.length>0&&n())}function n(){if(e)return;let c=setTimeout(d);e=!0;let l=t.length;for(;l;){for(s=t,t=[];++i<l;)s&&s[i]();i=-1,l=t.length}s=void 0,e=!1,clearTimeout(c)}return(c,...l)=>{t.push(c.bind(void 0,...l)),t.length===1&&!e&&setTimeout(n)}}var h=new f({env:x,hrtime:w,nextTick:E}),M=h,{abort:C,addListener:y,allowedNodeEnvironmentFlags:L,hasUncaughtExceptionCaptureCallback:U,setUncaughtExceptionCaptureCallback:P,loadEnvFile:A,sourceMapsEnabled:O,arch:T,argv:S,argv0:N,chdir:R,config:I,connected:B,constrainedMemory:D,availableMemory:F,cpuUsage:j,cwd:$,debugPort:z,dlopen:q,disconnect:W,emit:H,emitWarning:Q,env:G,eventNames:K,execArgv:J,execPath:V,exit:X,finalization:Y,features:Z,getBuiltinModule:ee,getActiveResourcesInfo:te,getMaxListeners:se,hrtime:re,kill:ie,listeners:ne,listenerCount:ae,memoryUsage:oe,nextTick:de,on:le,off:ue,once:ce,pid:ge,platform:pe,ppid:ve,prependListener:he,prependOnceListener:me,rawListeners:_e,release:fe,removeAllListeners:be,removeListener:xe,report:we,resourceUsage:Ee,setMaxListeners:ke,setSourceMapsEnabled:Me,stderr:Ce,stdin:ye,stdout:Le,title:Ue,umask:Pe,uptime:Ae,version:Oe,versions:Te,domain:Se,initgroups:Ne,moduleLoadList:Re,reallyExit:Ie,openStdin:Be,assert:De,binding:Fe,send:je,exitCode:$e,channel:ze,getegid:qe,geteuid:We,getgid:He,getgroups:Qe,getuid:Ge,setegid:Ke,seteuid:Je,setgid:Ve,setgroups:Xe,setuid:Ye,permission:Ze,mainModule:et,ref:tt,unref:st,_events:rt,_eventsCount:it,_exiting:nt,_maxListeners:at,_debugEnd:ot,_debugProcess:dt,_fatalException:lt,_getActiveHandles:ut,_getActiveRequests:ct,_kill:gt,_preload_modules:pt,_rawDebug:vt,_startProfilerIdleNotifier:ht,_stopProfilerIdleNotifier:mt,_tickCallback:_t,_disconnect:ft,_handleQueue:bt,_pendingMessage:xt,_channel:wt,_send:Et,_linkedBinding:kt}=h;export{wt as _channel,ot as _debugEnd,dt as _debugProcess,ft as _disconnect,rt as _events,it as _eventsCount,nt as _exiting,lt as _fatalException,ut as _getActiveHandles,ct as _getActiveRequests,bt as _handleQueue,gt as _kill,kt as _linkedBinding,at as _maxListeners,xt as _pendingMessage,pt as _preload_modules,vt as _rawDebug,Et as _send,ht as _startProfilerIdleNotifier,mt as _stopProfilerIdleNotifier,_t as _tickCallback,C as abort,y as addListener,L as allowedNodeEnvironmentFlags,T as arch,S as argv,N as argv0,De as assert,F as availableMemory,Fe as binding,ze as channel,R as chdir,I as config,B as connected,D as constrainedMemory,j as cpuUsage,$ as cwd,z as debugPort,M as default,W as disconnect,q as dlopen,Se as domain,H as emit,Q as emitWarning,G as env,K as eventNames,J as execArgv,V as execPath,X as exit,$e as exitCode,Z as features,Y as finalization,te as getActiveResourcesInfo,ee as getBuiltinModule,se as getMaxListeners,qe as getegid,We as geteuid,He as getgid,Qe as getgroups,Ge as getuid,U as hasUncaughtExceptionCaptureCallback,re as hrtime,Ne as initgroups,ie as kill,ae as listenerCount,ne as listeners,A as loadEnvFile,et as mainModule,oe as memoryUsage,Re as moduleLoadList,de as nextTick,ue as off,le as on,ce as once,Be as openStdin,Ze as permission,ge as pid,pe as platform,ve as ppid,he as prependListener,me as prependOnceListener,_e as rawListeners,Ie as reallyExit,tt as ref,fe as release,be as removeAllListeners,xe as removeListener,we as report,Ee as resourceUsage,je as send,ke as setMaxListeners,Me as setSourceMapsEnabled,P as setUncaughtExceptionCaptureCallback,Ke as setegid,Je as seteuid,Ve as setgid,Xe as setgroups,Ye as setuid,O as sourceMapsEnabled,Ce as stderr,ye as stdin,Le as stdout,Ue as title,Pe as umask,st as unref,Ae as uptime,Oe as version,Te as versions};\n',mimeType:"application/javascript"},"/w3c-keyname@2.2.8/es2022/w3c-keyname.mjs":{content:`var a={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"\`",219:"[",220:"\\\\",221:"]",222:"'"},n={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},f=typeof navigator<"u"&&/Mac/.test(navigator.platform),s=typeof navigator<"u"&&/MSIE \\d|Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(navigator.userAgent);for(e=0;e<10;e++)a[48+e]=a[96+e]=String(e);var e;for(e=1;e<=24;e++)a[e+111]="F"+e;var e;for(e=65;e<=90;e++)a[e]=String.fromCharCode(e+32),n[e]=String.fromCharCode(e);var e;for(o in a)n.hasOwnProperty(o)||(n[o]=a[o]);var o;function y(t){var i=f&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||s&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",r=!i&&t.key||(t.shiftKey?n:a)[t.keyCode]||t.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}export{a as base,y as keyName,n as shift};
`,mimeType:"application/javascript"},"/@lezer/lr@1.4.5/es2022/lr.mjs":{content:'import v from"/node/process.mjs";import{Parser as G,NodeProp as P,NodeSet as j,NodeType as U,DefaultBufferLength as W,Tree as b,IterMode as H}from"/@lezer/common@^1.0.0?target=es2022";var N=class T{constructor(t,e,i,n,r,h,o,a,c,l=0,p){this.p=t,this.stack=e,this.state=i,this.reducePos=n,this.pos=r,this.score=h,this.buffer=o,this.bufferBase=a,this.curContext=c,this.lookAhead=l,this.parent=p}toString(){return`[${this.stack.filter((t,e)=>e%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(t,e,i=0){let n=t.parser.context;return new T(t,[],e,i,i,0,[],0,n?new R(n,n.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(t,e){this.stack.push(this.state,e,this.bufferBase+this.buffer.length),this.state=t}reduce(t){var e;let i=t>>19,n=t&65535,{parser:r}=this.p,h=this.reducePos<this.pos-25&&this.setLookAhead(this.pos),o=r.dynamicPrecedence(n);if(o&&(this.score+=o),i==0){this.pushState(r.getGoto(this.state,n,!0),this.reducePos),n<r.minRepeatTerm&&this.storeNode(n,this.reducePos,this.reducePos,h?8:4,!0),this.reduceContext(n,this.reducePos);return}let a=this.stack.length-(i-1)*3-(t&262144?6:0),c=a?this.stack[a-2]:this.p.ranges[0].from,l=this.reducePos-c;l>=2e3&&!(!((e=this.p.parser.nodeSet.types[n])===null||e===void 0)&&e.isAnonymous)&&(c==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=l):this.p.lastBigReductionSize<l&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=c,this.p.lastBigReductionSize=l));let p=a?this.stack[a-1]:0,u=this.bufferBase+this.buffer.length-p;if(n<r.minRepeatTerm||t&131072){let f=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(n,c,f,u+4,!0)}if(t&262144)this.state=this.stack[a];else{let f=this.stack[a-3];this.state=r.getGoto(f,n,!0)}for(;this.stack.length>a;)this.stack.pop();this.reduceContext(n,c)}storeNode(t,e,i,n=4,r=!1){if(t==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let h=this,o=this.buffer.length;if(o==0&&h.parent&&(o=h.bufferBase-h.parent.bufferBase,h=h.parent),o>0&&h.buffer[o-4]==0&&h.buffer[o-1]>-1){if(e==i)return;if(h.buffer[o-2]>=e){h.buffer[o-2]=i;return}}}if(!r||this.pos==i)this.buffer.push(t,e,i,n);else{let h=this.buffer.length;if(h>0&&(this.buffer[h-4]!=0||this.buffer[h-1]<0)){let o=!1;for(let a=h;a>0&&this.buffer[a-2]>i;a-=4)if(this.buffer[a-1]>=0){o=!0;break}if(o)for(;h>0&&this.buffer[h-2]>i;)this.buffer[h]=this.buffer[h-4],this.buffer[h+1]=this.buffer[h-3],this.buffer[h+2]=this.buffer[h-2],this.buffer[h+3]=this.buffer[h-1],h-=4,n>4&&(n-=4)}this.buffer[h]=t,this.buffer[h+1]=e,this.buffer[h+2]=i,this.buffer[h+3]=n}}shift(t,e,i,n){if(t&131072)this.pushState(t&65535,this.pos);else if(t&262144)this.pos=n,this.shiftContext(e,i),e<=this.p.parser.maxNode&&this.buffer.push(e,i,n,4);else{let r=t,{parser:h}=this.p;(n>this.pos||e<=h.maxNode)&&(this.pos=n,h.stateFlag(r,1)||(this.reducePos=n)),this.pushState(r,i),this.shiftContext(e,i),e<=h.maxNode&&this.buffer.push(e,i,n,4)}}apply(t,e,i,n){t&65536?this.reduce(t):this.shift(t,e,i,n)}useNode(t,e){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=t)&&(this.p.reused.push(t),i++);let n=this.pos;this.reducePos=this.pos=n+t.length,this.pushState(e,n),this.buffer.push(i,n,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,t,this,this.p.stream.reset(this.pos-t.length)))}split(){let t=this,e=t.buffer.length;for(;e>0&&t.buffer[e-2]>t.reducePos;)e-=4;let i=t.buffer.slice(e),n=t.bufferBase+e;for(;t&&n==t.bufferBase;)t=t.parent;return new T(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,n,this.curContext,this.lookAhead,t)}recoverByDelete(t,e){let i=t<=this.p.parser.maxNode;i&&this.storeNode(t,this.pos,e,4),this.storeNode(0,this.pos,e,i?8:4),this.pos=this.reducePos=e,this.score-=190}canShift(t){for(let e=new q(this);;){let i=this.p.parser.stateSlot(e.state,4)||this.p.parser.hasAction(e.state,t);if(i==0)return!1;if(!(i&65536))return!0;e.reduce(i)}}recoverByInsert(t){if(this.stack.length>=300)return[];let e=this.p.parser.nextStates(this.state);if(e.length>8||this.stack.length>=120){let n=[];for(let r=0,h;r<e.length;r+=2)(h=e[r+1])!=this.state&&this.p.parser.hasAction(h,t)&&n.push(e[r],h);if(this.stack.length<120)for(let r=0;n.length<8&&r<e.length;r+=2){let h=e[r+1];n.some((o,a)=>a&1&&o==h)||n.push(e[r],h)}e=n}let i=[];for(let n=0;n<e.length&&i.length<4;n+=2){let r=e[n+1];if(r==this.state)continue;let h=this.split();h.pushState(r,this.pos),h.storeNode(0,h.pos,h.pos,4,!0),h.shiftContext(e[n],this.pos),h.reducePos=this.pos,h.score-=200,i.push(h)}return i}forceReduce(){let{parser:t}=this.p,e=t.stateSlot(this.state,5);if(!(e&65536))return!1;if(!t.validAction(this.state,e)){let i=e>>19,n=e&65535,r=this.stack.length-i*3;if(r<0||t.getGoto(this.stack[r],n,!1)<0){let h=this.findForcedReduction();if(h==null)return!1;e=h}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}findForcedReduction(){let{parser:t}=this.p,e=[],i=(n,r)=>{if(!e.includes(n))return e.push(n),t.allActions(n,h=>{if(!(h&393216))if(h&65536){let o=(h>>19)-r;if(o>1){let a=h&65535,c=this.stack.length-o*3;if(c>=0&&t.getGoto(this.stack[c],a,!1)>=0)return o<<19|65536|a}}else{let o=i(h,r+1);if(o!=null)return o}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:t}=this.p;return t.data[t.stateSlot(this.state,1)]==65535&&!t.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(t){if(this.state!=t.state||this.stack.length!=t.stack.length)return!1;for(let e=0;e<this.stack.length;e+=3)if(this.stack[e]!=t.stack[e])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(t){return this.p.parser.dialect.flags[t]}shiftContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,t,this,this.p.stream.reset(e)))}reduceContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,t,this,this.p.stream.reset(e)))}emitContext(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(t){if(t!=this.curContext.context){let e=new R(this.curContext.tracker,t);e.hash!=this.curContext.hash&&this.emitContext(),this.curContext=e}}setLookAhead(t){return t<=this.lookAhead?!1:(this.emitLookAhead(),this.lookAhead=t,!0)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}},R=class{constructor(s,t){this.tracker=s,this.context=t,this.hash=s.strict?s.hash(t):0}},q=class{constructor(s){this.start=s,this.state=s.state,this.stack=s.stack,this.base=this.stack.length}reduce(s){let t=s&65535,e=s>>19;e==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(e-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=i}},J=class y{constructor(t,e,i){this.stack=t,this.pos=e,this.index=i,this.buffer=t.buffer,this.index==0&&this.maybeNext()}static create(t,e=t.bufferBase+t.buffer.length){return new y(t,e,e-t.bufferBase)}maybeNext(){let t=this.stack.parent;t!=null&&(this.index=this.stack.bufferBase-t.bufferBase,this.stack=t,this.buffer=t.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new y(this.stack,this.pos,this.index)}};function x(s,t=Uint16Array){if(typeof s!="string")return s;let e=null;for(let i=0,n=0;i<s.length;){let r=0;for(;;){let h=s.charCodeAt(i++),o=!1;if(h==126){r=65535;break}h>=92&&h--,h>=34&&h--;let a=h-32;if(a>=46&&(a-=46,o=!0),r+=a,o)break;r*=46}e?e[n++]=r:e=new t(r)}return e}var S=class{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}},z=new S,I=class{constructor(s,t){this.input=s,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=z,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(s,t){let e=this.range,i=this.rangeIndex,n=this.pos+s;for(;n<e.from;){if(!i)return null;let r=this.ranges[--i];n-=e.from-r.to,e=r}for(;t<0?n>e.to:n>=e.to;){if(i==this.ranges.length-1)return null;let r=this.ranges[++i];n+=r.from-e.to,e=r}return n}clipPos(s){if(s>=this.range.from&&s<this.range.to)return s;for(let t of this.ranges)if(t.to>s)return Math.max(s,t.from);return this.end}peek(s){let t=this.chunkOff+s,e,i;if(t>=0&&t<this.chunk.length)e=this.pos+s,i=this.chunk.charCodeAt(t);else{let n=this.resolveOffset(s,1);if(n==null)return-1;if(e=n,e>=this.chunk2Pos&&e<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(e-this.chunk2Pos);else{let r=this.rangeIndex,h=this.range;for(;h.to<=e;)h=this.ranges[++r];this.chunk2=this.input.chunk(this.chunk2Pos=e),e+this.chunk2.length>h.to&&(this.chunk2=this.chunk2.slice(0,h.to-e)),i=this.chunk2.charCodeAt(0)}}return e>=this.token.lookAhead&&(this.token.lookAhead=e+1),i}acceptToken(s,t=0){let e=t?this.resolveOffset(t,-1):this.pos;if(e==null||e<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=s,this.token.end=e}acceptTokenTo(s,t){this.token.value=s,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:s,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=s,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let s=this.input.chunk(this.pos),t=this.pos+s.length;this.chunk=t>this.range.to?s.slice(0,this.range.to-this.pos):s,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(s=1){for(this.chunkOff+=s;this.pos+s>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();s-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=s,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(s,t){if(t?(this.token=t,t.start=s,t.lookAhead=s+1,t.value=t.extended=-1):this.token=z,this.pos!=s){if(this.pos=s,s==this.end)return this.setDone(),this;for(;s<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;s>=this.range.to;)this.range=this.ranges[++this.rangeIndex];s>=this.chunkPos&&s<this.chunkPos+this.chunk.length?this.chunkOff=s-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(s,t){if(s>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(s-this.chunkPos,t-this.chunkPos);if(s>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(s-this.chunk2Pos,t-this.chunk2Pos);if(s>=this.range.from&&t<=this.range.to)return this.input.read(s,t);let e="";for(let i of this.ranges){if(i.from>=t)break;i.to>s&&(e+=this.input.read(Math.max(i.from,s),Math.min(i.to,t)))}return e}},m=class{constructor(s,t){this.data=s,this.id=t}token(s,t){let{parser:e}=t.p;D(this.data,s,t,this.id,e.data,e.tokenPrecTable)}};m.prototype.contextual=m.prototype.fallback=m.prototype.extend=!1;var B=class{constructor(s,t,e){this.precTable=t,this.elseToken=e,this.data=typeof s=="string"?x(s):s}token(s,t){let e=s.pos,i=0;for(;;){let n=s.next<0,r=s.resolveOffset(1,1);if(D(this.data,s,t,0,this.data,this.precTable),s.token.value>-1)break;if(this.elseToken==null)return;if(n||i++,r==null)break;s.reset(r,s.token)}i&&(s.reset(e,s.token),s.acceptToken(this.elseToken,i))}};B.prototype.contextual=m.prototype.fallback=m.prototype.extend=!1;var K=class{constructor(s,t={}){this.token=s,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}};function D(s,t,e,i,n,r){let h=0,o=1<<i,{dialect:a}=e.p.parser;t:for(;o&s[h];){let c=s[h+1];for(let f=h+3;f<c;f+=2)if((s[f+1]&o)>0){let k=s[f];if(a.allows(k)&&(t.token.value==-1||t.token.value==k||Q(k,t.token.value,n,r))){t.acceptToken(k);break}}let l=t.next,p=0,u=s[h+2];if(t.next<0&&u>p&&s[c+u*3-3]==65535){h=s[c+u*3-1];continue t}for(;p<u;){let f=p+u>>1,k=c+f+(f<<1),$=s[k],E=s[k+1]||65536;if(l<$)u=f;else if(l>=E)p=f+1;else{h=s[k+2],t.advance();continue t}}break}}function O(s,t,e){for(let i=t,n;(n=s[i])!=65535;i++)if(n==e)return i-t;return-1}function Q(s,t,e,i){let n=O(e,i,t);return n<0||O(e,i,s)<n}var d=typeof v<"u"&&v.env&&/\\bparse\\b/.test(v.env.LOG),A=null;function F(s,t,e){let i=s.cursor(H.IncludeAnonymous);for(i.moveTo(t);;)if(!(e<0?i.childBefore(t):i.childAfter(t)))for(;;){if((e<0?i.to<t:i.from>t)&&!i.type.isError)return e<0?Math.max(0,Math.min(i.to-1,t-25)):Math.min(s.length,Math.max(i.from+1,t+25));if(e<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return e<0?0:s.length}}var V=class{constructor(s,t){this.fragments=s,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let s=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(s){for(this.safeFrom=s.openStart?F(s.tree,s.from+s.offset,1)-s.offset:s.from,this.safeTo=s.openEnd?F(s.tree,s.to+s.offset,-1)-s.offset:s.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(s.tree),this.start.push(-s.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(s){if(s<this.nextStart)return null;for(;this.fragment&&this.safeTo<=s;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let e=this.trees[t],i=this.index[t];if(i==e.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let n=e.children[i],r=this.start[t]+e.positions[i];if(r>s)return this.nextStart=r,null;if(n instanceof b){if(r==s){if(r<this.safeFrom)return null;let h=r+n.length;if(h<=this.safeTo){let o=n.prop(P.lookAhead);if(!o||h+o<this.fragment.to)return n}}this.index[t]++,r+n.length>=Math.max(this.safeFrom,s)&&(this.trees.push(n),this.start.push(r),this.index.push(0))}else this.index[t]++,this.nextStart=r+n.length}}},X=class{constructor(s,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=s.tokenizers.map(e=>new S)}getActions(s){let t=0,e=null,{parser:i}=s.p,{tokenizers:n}=i,r=i.stateSlot(s.state,3),h=s.curContext?s.curContext.hash:0,o=0;for(let a=0;a<n.length;a++){if(!(1<<a&r))continue;let c=n[a],l=this.tokens[a];if(!(e&&!c.fallback)&&((c.contextual||l.start!=s.pos||l.mask!=r||l.context!=h)&&(this.updateCachedToken(l,c,s),l.mask=r,l.context=h),l.lookAhead>l.end+25&&(o=Math.max(l.lookAhead,o)),l.value!=0)){let p=t;if(l.extended>-1&&(t=this.addActions(s,l.extended,l.end,t)),t=this.addActions(s,l.value,l.end,t),!c.extend&&(e=l,t>p))break}}for(;this.actions.length>t;)this.actions.pop();return o&&s.setLookAhead(o),!e&&s.pos==this.stream.end&&(e=new S,e.value=s.p.parser.eofTerm,e.start=e.end=s.pos,t=this.addActions(s,e.value,e.end,t)),this.mainToken=e,this.actions}getMainToken(s){if(this.mainToken)return this.mainToken;let t=new S,{pos:e,p:i}=s;return t.start=e,t.end=Math.min(e+1,i.stream.end),t.value=e==i.stream.end?i.parser.eofTerm:0,t}updateCachedToken(s,t,e){let i=this.stream.clipPos(e.pos);if(t.token(this.stream.reset(i,s),e),s.value>-1){let{parser:n}=e.p;for(let r=0;r<n.specialized.length;r++)if(n.specialized[r]==s.value){let h=n.specializers[r](this.stream.read(s.start,s.end),e);if(h>=0&&e.p.parser.dialect.allows(h>>1)){h&1?s.extended=h>>1:s.value=h>>1;break}}}else s.value=0,s.end=this.stream.clipPos(i+1)}putAction(s,t,e,i){for(let n=0;n<i;n+=3)if(this.actions[n]==s)return i;return this.actions[i++]=s,this.actions[i++]=t,this.actions[i++]=e,i}addActions(s,t,e,i){let{state:n}=s,{parser:r}=s.p,{data:h}=r;for(let o=0;o<2;o++)for(let a=r.stateSlot(n,o?2:1);;a+=3){if(h[a]==65535)if(h[a+1]==1)a=g(h,a+2);else{i==0&&h[a+1]==2&&(i=this.putAction(g(h,a+2),t,e,i));break}h[a]==t&&(i=this.putAction(g(h,a+1),t,e,i))}return i}},Y=class{constructor(s,t,e,i){this.parser=s,this.input=t,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new I(t,i),this.tokens=new X(s,this.stream),this.topTerm=s.top[1];let{from:n}=i[0];this.stacks=[N.start(this,s.top[0],n)],this.fragments=e.length&&this.stream.end-n>s.bufferLength*4?new V(e,s.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let s=this.stacks,t=this.minStackPos,e=this.stacks=[],i,n;if(this.bigReductionCount>300&&s.length==1){let[r]=s;for(;r.forceReduce()&&r.stack.length&&r.stack[r.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let r=0;r<s.length;r++){let h=s[r];for(;;){if(this.tokens.mainToken=null,h.pos>t)e.push(h);else{if(this.advanceStack(h,e,s))continue;{i||(i=[],n=[]),i.push(h);let o=this.tokens.getMainToken(h);n.push(o.value,o.end)}}break}}if(!e.length){let r=i&&et(i);if(r)return d&&console.log("Finish with "+this.stackID(r)),this.stackToTree(r);if(this.parser.strict)throw d&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&i){let r=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,n,e);if(r)return d&&console.log("Force-finish "+this.stackID(r)),this.stackToTree(r.forceAll())}if(this.recovering){let r=this.recovering==1?1:this.recovering*3;if(e.length>r)for(e.sort((h,o)=>o.score-h.score);e.length>r;)e.pop();e.some(h=>h.reducePos>t)&&this.recovering--}else if(e.length>1){t:for(let r=0;r<e.length-1;r++){let h=e[r];for(let o=r+1;o<e.length;o++){let a=e[o];if(h.sameState(a)||h.buffer.length>500&&a.buffer.length>500)if((h.score-a.score||h.buffer.length-a.buffer.length)>0)e.splice(o--,1);else{e.splice(r--,1);continue t}}}e.length>12&&(e.sort((r,h)=>h.score-r.score),e.splice(12,e.length-12))}this.minStackPos=e[0].pos;for(let r=1;r<e.length;r++)e[r].pos<this.minStackPos&&(this.minStackPos=e[r].pos);return null}stopAt(s){if(this.stoppedAt!=null&&this.stoppedAt<s)throw new RangeError("Can\'t move stoppedAt forward");this.stoppedAt=s}advanceStack(s,t,e){let i=s.pos,{parser:n}=this,r=d?this.stackID(s)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return s.forceReduce()?s:null;if(this.fragments){let a=s.curContext&&s.curContext.tracker.strict,c=a?s.curContext.hash:0;for(let l=this.fragments.nodeAt(i);l;){let p=this.parser.nodeSet.types[l.type.id]==l.type?n.getGoto(s.state,l.type.id):-1;if(p>-1&&l.length&&(!a||(l.prop(P.contextHash)||0)==c))return s.useNode(l,p),d&&console.log(r+this.stackID(s)+` (via reuse of ${n.getName(l.type.id)})`),!0;if(!(l instanceof b)||l.children.length==0||l.positions[0]>0)break;let u=l.children[0];if(u instanceof b&&l.positions[0]==0)l=u;else break}}let h=n.stateSlot(s.state,4);if(h>0)return s.reduce(h),d&&console.log(r+this.stackID(s)+` (via always-reduce ${n.getName(h&65535)})`),!0;if(s.stack.length>=8400)for(;s.stack.length>6e3&&s.forceReduce(););let o=this.tokens.getActions(s);for(let a=0;a<o.length;){let c=o[a++],l=o[a++],p=o[a++],u=a==o.length||!e,f=u?s:s.split(),k=this.tokens.mainToken;if(f.apply(c,l,k?k.start:f.pos,p),d&&console.log(r+this.stackID(f)+` (via ${c&65536?`reduce of ${n.getName(c&65535)}`:"shift"} for ${n.getName(l)} @ ${i}${f==s?"":", split"})`),u)return!0;f.pos>i?t.push(f):e.push(f)}return!1}advanceFully(s,t){let e=s.pos;for(;;){if(!this.advanceStack(s,null,null))return!1;if(s.pos>e)return L(s,t),!0}}runRecovery(s,t,e){let i=null,n=!1;for(let r=0;r<s.length;r++){let h=s[r],o=t[r<<1],a=t[(r<<1)+1],c=d?this.stackID(h)+" -> ":"";if(h.deadEnd&&(n||(n=!0,h.restart(),d&&console.log(c+this.stackID(h)+" (restarted)"),this.advanceFully(h,e))))continue;let l=h.split(),p=c;for(let u=0;u<10&&l.forceReduce()&&(d&&console.log(p+this.stackID(l)+" (via force-reduce)"),!this.advanceFully(l,e));u++)d&&(p=this.stackID(l)+" -> ");for(let u of h.recoverByInsert(o))d&&console.log(c+this.stackID(u)+" (via recover-insert)"),this.advanceFully(u,e);this.stream.end>h.pos?(a==h.pos&&(a++,o=0),h.recoverByDelete(o,a),d&&console.log(c+this.stackID(h)+` (via recover-delete ${this.parser.getName(o)})`),L(h,e)):(!i||i.score<h.score)&&(i=h)}return i}stackToTree(s){return s.close(),b.build({buffer:J.create(s),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:s.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(s){let t=(A||(A=new WeakMap)).get(s);return t||A.set(s,t=String.fromCodePoint(this.nextStackID++)),t+s}};function L(s,t){for(let e=0;e<t.length;e++){let i=t[e];if(i.pos==s.pos&&i.sameState(s)){t[e].score<s.score&&(t[e]=s);return}}t.push(s)}var Z=class{constructor(s,t,e){this.source=s,this.flags=t,this.disabled=e}allows(s){return!this.disabled||this.disabled[s]==0}},C=s=>s,_=class{constructor(s){this.start=s.start,this.shift=s.shift||C,this.reduce=s.reduce||C,this.reuse=s.reuse||C,this.hash=s.hash||(()=>0),this.strict=s.strict!==!1}},tt=class w extends G{constructor(t){if(super(),this.wrappers=[],t.version!=14)throw new RangeError(`Parser version (${t.version}) doesn\'t match runtime version (14)`);let e=t.nodeNames.split(" ");this.minRepeatTerm=e.length;for(let o=0;o<t.repeatNodeCount;o++)e.push("");let i=Object.keys(t.topRules).map(o=>t.topRules[o][1]),n=[];for(let o=0;o<e.length;o++)n.push([]);function r(o,a,c){n[o].push([a,a.deserialize(String(c))])}if(t.nodeProps)for(let o of t.nodeProps){let a=o[0];typeof a=="string"&&(a=P[a]);for(let c=1;c<o.length;){let l=o[c++];if(l>=0)r(l,a,o[c++]);else{let p=o[c+-l];for(let u=-l;u>0;u--)r(o[c++],a,p);c++}}}this.nodeSet=new j(e.map((o,a)=>U.define({name:a>=this.minRepeatTerm?void 0:o,id:a,props:n[a],top:i.indexOf(a)>-1,error:a==0,skipped:t.skippedNodes&&t.skippedNodes.indexOf(a)>-1}))),t.propSources&&(this.nodeSet=this.nodeSet.extend(...t.propSources)),this.strict=!1,this.bufferLength=W;let h=x(t.tokenData);this.context=t.context,this.specializerSpecs=t.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let o=0;o<this.specializerSpecs.length;o++)this.specialized[o]=this.specializerSpecs[o].term;this.specializers=this.specializerSpecs.map(M),this.states=x(t.states,Uint32Array),this.data=x(t.stateData),this.goto=x(t.goto),this.maxTerm=t.maxTerm,this.tokenizers=t.tokenizers.map(o=>typeof o=="number"?new m(h,o):o),this.topRules=t.topRules,this.dialects=t.dialects||{},this.dynamicPrecedences=t.dynamicPrecedences||null,this.tokenPrecTable=t.tokenPrec,this.termNames=t.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(t,e,i){let n=new Y(this,t,e,i);for(let r of this.wrappers)n=r(n,t,e,i);return n}getGoto(t,e,i=!1){let n=this.goto;if(e>=n[0])return-1;for(let r=n[e+1];;){let h=n[r++],o=h&1,a=n[r++];if(o&&i)return a;for(let c=r+(h>>1);r<c;r++)if(n[r]==t)return a;if(o)return-1}}hasAction(t,e){let i=this.data;for(let n=0;n<2;n++)for(let r=this.stateSlot(t,n?2:1),h;;r+=3){if((h=i[r])==65535)if(i[r+1]==1)h=i[r=g(i,r+2)];else{if(i[r+1]==2)return g(i,r+2);break}if(h==e||h==0)return g(i,r+1)}return 0}stateSlot(t,e){return this.states[t*6+e]}stateFlag(t,e){return(this.stateSlot(t,0)&e)>0}validAction(t,e){return!!this.allActions(t,i=>i==e?!0:null)}allActions(t,e){let i=this.stateSlot(t,4),n=i?e(i):void 0;for(let r=this.stateSlot(t,1);n==null;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=g(this.data,r+2);else break;n=e(g(this.data,r+1))}return n}nextStates(t){let e=[];for(let i=this.stateSlot(t,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=g(this.data,i+2);else break;if(!(this.data[i+2]&1)){let n=this.data[i+1];e.some((r,h)=>h&1&&r==n)||e.push(this.data[i],n)}}return e}configure(t){let e=Object.assign(Object.create(w.prototype),this);if(t.props&&(e.nodeSet=this.nodeSet.extend(...t.props)),t.top){let i=this.topRules[t.top];if(!i)throw new RangeError(`Invalid top rule name ${t.top}`);e.top=i}return t.tokenizers&&(e.tokenizers=this.tokenizers.map(i=>{let n=t.tokenizers.find(r=>r.from==i);return n?n.to:i})),t.specializers&&(e.specializers=this.specializers.slice(),e.specializerSpecs=this.specializerSpecs.map((i,n)=>{let r=t.specializers.find(o=>o.from==i.external);if(!r)return i;let h=Object.assign(Object.assign({},i),{external:r.to});return e.specializers[n]=M(h),h})),t.contextTracker&&(e.context=t.contextTracker),t.dialect&&(e.dialect=this.parseDialect(t.dialect)),t.strict!=null&&(e.strict=t.strict),t.wrap&&(e.wrappers=e.wrappers.concat(t.wrap)),t.bufferLength!=null&&(e.bufferLength=t.bufferLength),e}hasWrappers(){return this.wrappers.length>0}getName(t){return this.termNames?this.termNames[t]:String(t<=this.maxNode&&this.nodeSet.types[t].name||t)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(t){let e=this.dynamicPrecedences;return e==null?0:e[t]||0}parseDialect(t){let e=Object.keys(this.dialects),i=e.map(()=>!1);if(t)for(let r of t.split(" ")){let h=e.indexOf(r);h>=0&&(i[h]=!0)}let n=null;for(let r=0;r<e.length;r++)if(!i[r])for(let h=this.dialects[e[r]],o;(o=this.data[h++])!=65535;)(n||(n=new Uint8Array(this.maxTerm+1)))[o]=1;return new Z(t,i,n)}static deserialize(t){return new w(t)}};function g(s,t){return s[t]|s[t+1]<<16}function et(s){let t=null;for(let e of s){let i=e.p.stoppedAt;(e.pos==e.p.stream.end||i!=null&&e.pos>i)&&e.p.parser.stateFlag(e.state,2)&&(!t||t.score<e.score)&&(t=e)}return t}function M(s){if(s.external){let t=s.extend?1:0;return(e,i)=>s.external(e,i)<<1|t}return s.get}export{_ as ContextTracker,K as ExternalTokenizer,I as InputStream,tt as LRParser,B as LocalTokenGroup,N as Stack};\n',mimeType:"application/javascript"},"/crelt@1.0.6/es2022/crelt.mjs":{content:`function o(){var r=arguments[0];typeof r=="string"&&(r=document.createElement(r));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var a=t[n];typeof a=="string"?r.setAttribute(n,a):a!=null&&(r[n]=a)}e++}for(;e<arguments.length;e++)l(r,arguments[e]);return r}function l(r,e){if(typeof e=="string")r.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)r.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)l(r,e[t]);else throw new RangeError("Unsupported child node: "+e)}export{o as default};
`,mimeType:"application/javascript"},"/@lezer/common@%5E1.3.0?target=es2022":{content:`export*from"/@lezer/common@1.4.0/es2022/common.mjs";
`,mimeType:"application/javascript"},"/node/tty.mjs":{content:`var s=class{fd;isRaw=!1;isTTY=!1;constructor(r){this.fd=r}setRawMode(r){return this.isRaw=r,this}},o=class{fd;columns=80;rows=24;isTTY=!1;constructor(r){this.fd=r}clearLine(r,e){return e&&e(),!1}clearScreenDown(r){return r&&r(),!1}cursorTo(r,e,t){return t&&typeof t=="function"&&t(),!1}moveCursor(r,e,t){return t&&t(),!1}getColorDepth(r){return 1}hasColors(r,e){return!1}getWindowSize(){return[this.columns,this.rows]}write(r,e,t){r instanceof Uint8Array&&(r=new TextDecoder().decode(r));try{console.log(r)}catch{}return t&&typeof t=="function"&&t(),!1}},n=function(){return!1},a={ReadStream:s,WriteStream:o,isatty:n};export{s as ReadStream,o as WriteStream,a as default,n as isatty};
`,mimeType:"application/javascript"},"/node/events.mjs":{content:'function oe(e){return new Error(`[unenv] ${e} is not implemented yet!`)}function A(e){return Object.assign(()=>{throw oe(e)},{__unenv__:!0})}import{AsyncResource as le}from"/node/async_hooks.mjs";var d=10,ue=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype),N=(e,t)=>e,y=Error,ae=Error,f=Error,w=Error,ce=Error,M=Symbol.for("nodejs.rejection"),h=Symbol.for("kCapture"),S=Symbol.for("events.errorMonitor"),E=Symbol.for("shapeMode"),b=Symbol.for("events.maxEventTargetListeners"),he=Symbol.for("kEnhanceStackBeforeInspector"),fe=Symbol.for("nodejs.watermarkData"),j=Symbol.for("kEventEmitter"),v=Symbol.for("kAsyncResource"),ve=Symbol.for("kFirstEventParam"),k=Symbol.for("kResistStopPropagation"),K=Symbol.for("events.maxEventTargetListenersWarned"),C=class _{_events=void 0;_eventsCount=0;_maxListeners=d;[h]=!1;[E]=!1;static captureRejectionSymbol=M;static errorMonitor=S;static kMaxEventTargetListeners=b;static kMaxEventTargetListenersWarned=K;static usingDomains=!1;static get on(){return z}static get once(){return B}static get getEventListeners(){return G}static get getMaxListeners(){return U}static get addAbortListener(){return P}static get EventEmitterAsyncResource(){return q}static get EventEmitter(){return _}static setMaxListeners(t=d,...n){if(n.length===0)d=t;else for(let r of n)if(Q(r))r[b]=t,r[K]=!1;else if(typeof r.setMaxListeners=="function")r.setMaxListeners(t);else throw new f("eventTargets",["EventEmitter","EventTarget"],r)}static listenerCount(t,n){if(typeof t.listenerCount=="function")return t.listenerCount(n);_.prototype.listenerCount.call(t,n)}static init(){throw new Error("EventEmitter.init() is not implemented.")}static get captureRejections(){return this[h]}static set captureRejections(t){this[h]=t}static get defaultMaxListeners(){return d}static set defaultMaxListeners(t){d=t}constructor(t){this._events===void 0||this._events===Object.getPrototypeOf(this)._events?(this._events={__proto__:null},this._eventsCount=0,this[E]=!1):this[E]=!0,this._maxListeners=this._maxListeners||void 0,t?.captureRejections?this[h]=!!t.captureRejections:this[h]=_.prototype[h]}setMaxListeners(t){return this._maxListeners=t,this}getMaxListeners(){return T(this)}emit(t,...n){let r=t==="error",i=this._events;if(i!==void 0)r&&i[S]!==void 0&&this.emit(S,...n),r=r&&i.error===void 0;else if(!r)return!1;if(r){let s;if(n.length>0&&(s=n[0]),s instanceof Error){try{let c={};Error.captureStackTrace?.(c,_.prototype.emit),Object.defineProperty(s,he,{__proto__:null,value:Function.prototype.bind(de,this,s,c),configurable:!0})}catch{}throw s}let u;try{u=N(s)}catch{u=s}let a=new ae(u);throw a.context=s,a}let o=i[t];if(o===void 0)return!1;if(typeof o=="function"){let s=o.apply(this,n);s!=null&&V(this,s,t,n)}else{let s=o.length,u=I(o);for(let a=0;a<s;++a){let c=u[a].apply(this,n);c!=null&&V(this,c,t,n)}}return!0}addListener(t,n){return Y(this,t,n,!1),this}on(t,n){return this.addListener(t,n)}prependListener(t,n){return Y(this,t,n,!0),this}once(t,n){return this.on(t,Z(this,t,n)),this}prependOnceListener(t,n){return this.prependListener(t,Z(this,t,n)),this}removeListener(t,n){let r=this._events;if(r===void 0)return this;let i=r[t];if(i===void 0)return this;if(i===n||i.listener===n)this._eventsCount-=1,this[E]?r[t]=void 0:this._eventsCount===0?this._events={__proto__:null}:(delete r[t],r.removeListener&&this.emit("removeListener",t,i.listener||n));else if(typeof i!="function"){let o=-1;for(let s=i.length-1;s>=0;s--)if(i[s]===n||i[s].listener===n){o=s;break}if(o<0)return this;o===0?i.shift():_e(i,o),i.length===1&&(r[t]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",t,n)}return this}off(t,n){return this.removeListener(t,n)}removeAllListeners(t){let n=this._events;if(n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events={__proto__:null},this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events={__proto__:null}:delete n[t]),this[E]=!1,this;if(arguments.length===0){for(let i of Reflect.ownKeys(n))i!=="removeListener"&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events={__proto__:null},this._eventsCount=0,this[E]=!1,this}let r=n[t];if(typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(let i=r.length-1;i>=0;i--)this.removeListener(t,r[i]);return this}listeners(t){return ee(this,t,!0)}rawListeners(t){return ee(this,t,!1)}eventNames(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}listenerCount(t,n){let r=this._events;if(r!==void 0){let i=r[t];if(typeof i=="function")return n!=null?n===i||n===i.listener?1:0:1;if(i!==void 0){if(n!=null){let o=0;for(let s=0,u=i.length;s<u;s++)(i[s]===n||i[s].listener===n)&&o++;return o}return i.length}}return 0}},q=class extends C{constructor(e){let t;typeof e=="string"?(t=e,e=void 0):t=e?.name||new.target.name,super(e),this[v]=new me(this,t,e)}emit(e,...t){if(this[v]===void 0)throw new y("EventEmitterAsyncResource");let{asyncResource:n}=this;return Array.prototype.unshift(t,super.emit,this,e),Reflect.apply(n.runInAsyncScope,n,t)}emitDestroy(){if(this[v]===void 0)throw new y("EventEmitterAsyncResource");this.asyncResource.emitDestroy()}get asyncId(){if(this[v]===void 0)throw new y("EventEmitterAsyncResource");return this.asyncResource.asyncId()}get triggerAsyncId(){if(this[v]===void 0)throw new y("EventEmitterAsyncResource");return this.asyncResource.triggerAsyncId()}get asyncResource(){if(this[v]===void 0)throw new y("EventEmitterAsyncResource");return this[v]}},me=class extends le{constructor(e,t,n){super(t,n),this[j]=e}get eventEmitter(){if(this[j]===void 0)throw new y("EventEmitterReferencingAsyncResource");return this[j]}},z=function(e,t,n={}){let r=n.signal;if(r?.aborted)throw new w(void 0,{cause:r?.reason});let i=n.highWaterMark??n.highWatermark??Number.MAX_SAFE_INTEGER,o=n.lowWaterMark??n.lowWatermark??1,s=new J,u=new J,a=!1,c=null,m=!1,p=0,te=Object.setPrototypeOf({next(){if(p){let l=s.shift();return p--,a&&p<o&&(e.resume?.(),a=!1),Promise.resolve(F(l,!1))}if(c){let l=Promise.reject(c);return c=null,l}return m?L():new Promise(function(l,se){u.push({resolve:l,reject:se})})},return(){return L()},throw(l){if(!l||!(l instanceof Error))throw new f("EventEmitter.AsyncIterator","Error",l);R(l)},[Symbol.asyncIterator](){return this},[fe]:{get size(){return p},get low(){return o},get high(){return i},get isPaused(){return a}}},ue),{addEventListener:x,removeAll:ne}=ge();x(e,t,n[ve]?D:function(...l){return D(l)}),t!=="error"&&typeof e.on=="function"&&x(e,"error",R);let $=n?.close;if($?.length)for(let l of $)x(e,l,L);let re=r?P(r,ie):null;return te;function ie(){R(new w(void 0,{cause:r?.reason}))}function D(l){u.isEmpty()?(p++,!a&&p>i&&(a=!0,e.pause?.()),s.push(l)):u.shift().resolve(F(l,!1))}function R(l){u.isEmpty()?c=l:u.shift().reject(l),L()}function L(){re?.[Symbol.dispose](),ne(),m=!0;let l=F(void 0,!0);for(;!u.isEmpty();)u.shift().resolve(l);return Promise.resolve(l)}},B=async function(e,t,n={}){let r=n?.signal;if(r?.aborted)throw new w(void 0,{cause:r?.reason});return new Promise((i,o)=>{let s=m=>{typeof e.removeListener=="function"&&e.removeListener(t,u),r!=null&&g(r,"abort",c),o(m)},u=(...m)=>{typeof e.removeListener=="function"&&e.removeListener("error",s),r!=null&&g(r,"abort",c),i(m)},a={__proto__:null,once:!0,[k]:!0};W(e,t,u,a),t!=="error"&&typeof e.once=="function"&&e.once("error",s);function c(){g(e,t,u),g(e,"error",s),o(new w(void 0,{cause:r?.reason}))}r!=null&&W(r,"abort",c,{__proto__:null,once:!0,[k]:!0})})},P=function(e,t){if(e===void 0)throw new f("signal","AbortSignal",e);let n;return e.aborted?queueMicrotask(()=>t()):(e.addEventListener("abort",t,{__proto__:null,once:!0,[k]:!0}),n=()=>{e.removeEventListener("abort",t)}),{__proto__:null,[Symbol.dispose](){n?.()}}},G=function(e,t){if(typeof e.listeners=="function")return e.listeners(t);if(Q(e)){let n=e[kEvents].get(t),r=[],i=n?.next;for(;i?.listener!==void 0;){let o=i.listener?.deref?i.listener.deref():i.listener;r.push(o),i=i.next}return r}throw new f("emitter",["EventEmitter","EventTarget"],e)},U=function(e){if(typeof e?.getMaxListeners=="function")return T(e);if(e?.[b])return e[b];throw new f("emitter",["EventEmitter","EventTarget"],e)},X=2048,O=X-1,H=class{bottom;top;list;next;constructor(){this.bottom=0,this.top=0,this.list=new Array(X),this.next=null}isEmpty(){return this.top===this.bottom}isFull(){return(this.top+1&O)===this.bottom}push(e){this.list[this.top]=e,this.top=this.top+1&O}shift(){let e=this.list[this.bottom];return e===void 0?null:(this.list[this.bottom]=void 0,this.bottom=this.bottom+1&O,e)}},J=class{head;tail;constructor(){this.head=this.tail=new H}isEmpty(){return this.head.isEmpty()}push(e){this.head.isFull()&&(this.head=this.head.next=new H),this.head.push(e)}shift(){let e=this.tail,t=e.shift();return e.isEmpty()&&e.next!==null&&(this.tail=e.next,e.next=null),t}};function Q(e){return typeof e?.addEventListener=="function"}function V(e,t,n,r){if(e[h])try{let i=t.then;typeof i=="function"&&i.call(t,void 0,function(o){setTimeout(pe,0,e,o,n,r)})}catch(i){e.emit("error",i)}}function pe(e,t,n,r){if(typeof e[M]=="function")e[M](t,n,...r);else{let i=e[h];try{e[h]=!1,e.emit("error",t)}finally{e[h]=i}}}function T(e){return e._maxListeners===void 0?d:e._maxListeners}function de(e,t){let n="";try{let{name:o}=this.constructor;o!=="EventEmitter"&&(n=` on ${o} instance`)}catch{}let r=`\nEmitted \'error\' event${n} at:\n`,i=(t.stack||"").split(`\n`).slice(1);return e.stack+r+i.join(`\n`)}function Y(e,t,n,r){let i,o,s;if(o=e._events,o===void 0?(o=e._events={__proto__:null},e._eventsCount=0):(o.newListener!==void 0&&(e.emit("newListener",t,n.listener??n),o=e._events),s=o[t]),s===void 0)o[t]=n,++e._eventsCount;else if(typeof s=="function"?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),i=T(e),i>0&&s.length>i&&!s.warned){s.warned=!0;let u=new ce(`Possible EventEmitter memory leak detected. ${s.length} ${String(t)} listeners added to ${N(e,{depth:-1})}. MaxListeners is ${i}. Use emitter.setMaxListeners() to increase limit`,{name:"MaxListenersExceededWarning",emitter:e,type:t,count:s.length});console.warn(u)}return e}function ye(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Z(e,t,n){let r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=ye.bind(r);return i.listener=n,r.wrapFn=i,i}function ee(e,t,n){let r=e._events;if(r===void 0)return[];let i=r[t];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?Ee(i):I(i)}function I(e){switch(e.length){case 2:return[e[0],e[1]];case 3:return[e[0],e[1],e[2]];case 4:return[e[0],e[1],e[2],e[3]];case 5:return[e[0],e[1],e[2],e[3],e[4]];case 6:return[e[0],e[1],e[2],e[3],e[4],e[5]]}return Array.prototype.slice.call(e)}function Ee(e){let t=I(e);for(let n=0;n<t.length;++n){let r=t[n].listener;typeof r=="function"&&(t[n]=r)}return t}function F(e,t){return{value:e,done:t}}function g(e,t,n,r){if(typeof e.removeListener=="function")e.removeListener(t,n);else if(typeof e.removeEventListener=="function")e.removeEventListener(t,n,r);else throw new f("emitter","EventEmitter",e)}function W(e,t,n,r){if(typeof e.on=="function")r?.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,n,r);else throw new f("emitter","EventEmitter",e)}function ge(){let e=[];return{addEventListener(t,n,r,i){W(t,n,r,i),Array.prototype.push(e,[t,n,r,i])},removeAll(){for(;e.length>0;)Reflect.apply(g,void 0,e.pop())}}}function _e(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}var Le=!1,we=Symbol.for("nodejs.rejection"),be=!1,xe=Symbol.for("events.errorMonitor"),Re=10,Ae=A("node:events.setMaxListeners"),Me=A("node:events.listenerCount"),Se=A("node:events.init"),je=C;export{C as EventEmitter,q as EventEmitterAsyncResource,P as addAbortListener,we as captureRejectionSymbol,be as captureRejections,je as default,Re as defaultMaxListeners,xe as errorMonitor,G as getEventListeners,U as getMaxListeners,Se as init,Me as listenerCount,z as on,B as once,Ae as setMaxListeners,Le as usingDomains};\n',mimeType:"application/javascript"},"/@codemirror/commands@6.10.0/es2022/commands.mjs":{content:`import{Annotation as Te,Facet as Oe,combineConfig as en,StateField as tn,Transaction as Z,ChangeSet as nn,ChangeDesc as rn,EditorSelection as h,StateEffect as Ie,Text as Re,findClusterBreak as M,countColumn as _,CharCategory as S}from"/@codemirror/state@^6.4.0?target=es2022";import{EditorView as L,Direction as on}from"/@codemirror/view@^6.27.0?target=es2022";import{IndentContext as Fe,getIndentation as Ve,indentString as V,matchBrackets as b,syntaxTree as ee,getIndentUnit as te,indentUnit as an}from"/@codemirror/language@^6.0.0?target=es2022";import{NodeProp as ne}from"/@lezer/common@^1.1.0?target=es2022";var Ue=e=>{let{state:t}=e,n=t.doc.lineAt(t.selection.main.from),r=re(e.state,n.from);return r.line?Ne(e):r.block?Je(e):!1};function D(e,t){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let a=e(t,n);return a?(r(n.update(a)),!0):!1}}var Ne=D(oe,0),sn=D(oe,1),ln=D(oe,2),Ge=D(U,0),cn=D(U,1),un=D(U,2),Je=D((e,t)=>U(e,t,hn(t)),0);function re(e,t){let n=e.languageDataAt("commentTokens",t,1);return n.length?n[0]:{}}var T=50;function fn(e,{open:t,close:n},r,a){let o=e.sliceDoc(r-T,r),s=e.sliceDoc(a,a+T),l=/\\s*$/.exec(o)[0].length,i=/^\\s*/.exec(s)[0].length,u=o.length-l;if(o.slice(u-t.length,u)==t&&s.slice(i,i+n.length)==n)return{open:{pos:r-l,margin:l&&1},close:{pos:a+i,margin:i&&1}};let c,f;a-r<=2*T?c=f=e.sliceDoc(r,a):(c=e.sliceDoc(r,r+T),f=e.sliceDoc(a-T,a));let d=/^\\s*/.exec(c)[0].length,w=/\\s*$/.exec(f)[0].length,y=f.length-w-n.length;return c.slice(d,d+t.length)==t&&f.slice(y,y+n.length)==n?{open:{pos:r+d+t.length,margin:/\\s/.test(c.charAt(d+t.length))?1:0},close:{pos:a-w-n.length,margin:/\\s/.test(f.charAt(y-1))?1:0}}:null}function hn(e){let t=[];for(let n of e.selection.ranges){let r=e.doc.lineAt(n.from),a=n.to<=r.to?r:e.doc.lineAt(n.to);a.from>r.from&&a.from==n.to&&(a=n.to==r.to+1?r:e.doc.lineAt(n.to-1));let o=t.length-1;o>=0&&t[o].to>r.from?t[o].to=a.to:t.push({from:r.from+/^\\s*/.exec(r.text)[0].length,to:a.to})}return t}function U(e,t,n=t.selection.ranges){let r=n.map(o=>re(t,o.from).block);if(!r.every(o=>o))return null;let a=n.map((o,s)=>fn(t,r[s],o.from,o.to));if(e!=2&&!a.every(o=>o))return{changes:t.changes(n.map((o,s)=>a[s]?[]:[{from:o.from,insert:r[s].open+" "},{from:o.to,insert:" "+r[s].close}]))};if(e!=1&&a.some(o=>o)){let o=[];for(let s=0,l;s<a.length;s++)if(l=a[s]){let i=r[s],{open:u,close:c}=l;o.push({from:u.pos-i.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+i.close.length})}return{changes:o}}return null}function oe(e,t,n=t.selection.ranges){let r=[],a=-1;for(let{from:o,to:s}of n){let l=r.length,i=1e9,u=re(t,o).line;if(u){for(let c=o;c<=s;){let f=t.doc.lineAt(c);if(f.from>a&&(o==s||s>f.from)){a=f.from;let d=/^\\s*/.exec(f.text)[0].length,w=d==f.length,y=f.text.slice(d,d+u.length)==u?d:-1;d<f.text.length&&d<i&&(i=d),r.push({line:f,comment:y,token:u,indent:d,empty:w,single:!1})}c=f.to+1}if(i<1e9)for(let c=l;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=i);r.length==l+1&&(r[l].single=!0)}}if(e!=2&&r.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:l,token:i,indent:u,empty:c,single:f}of r)(f||!c)&&o.push({from:l.from+u,insert:i+" "});let s=t.changes(o);return{changes:s,selection:t.selection.map(s,1)}}else if(e!=1&&r.some(o=>o.comment>=0)){let o=[];for(let{line:s,comment:l,token:i}of r)if(l>=0){let u=s.from+l,c=u+i.length;s.text[c-s.from]==" "&&c++,o.push({from:u,to:c})}return{changes:o}}return null}var ae=Te.define(),Pe=Te.define(),He=Oe.define(),We=Oe.define({combine(e){return en(e,{minDepth:100,newGroupDelay:500,joinToEvent:(t,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(t,n)=>(r,a)=>t(r,a)||n(r,a)})}}),N=tn.define({create(){return O.empty},update(e,t){let n=t.state.facet(We),r=t.annotation(ae);if(r){let i=A.fromTransaction(t,r.selection),u=r.side,c=u==0?e.undone:e.done;return i?c=P(c,c.length,n.minDepth,i):c=je(c,t.startState.selection),new O(u==0?r.rest:c,u==0?c:r.rest)}let a=t.annotation(Pe);if((a=="full"||a=="before")&&(e=e.isolate()),t.annotation(Z.addToHistory)===!1)return t.changes.empty?e:e.addMapping(t.changes.desc);let o=A.fromTransaction(t),s=t.annotation(Z.time),l=t.annotation(Z.userEvent);return o?e=e.addChanges(o,s,l,n,t):t.selection&&(e=e.addSelection(t.startState.selection,s,l,n.newGroupDelay)),(a=="full"||a=="after")&&(e=e.isolate()),e},toJSON(e){return{done:e.done.map(t=>t.toJSON()),undone:e.undone.map(t=>t.toJSON())}},fromJSON(e){return new O(e.done.map(A.fromJSON),e.undone.map(A.fromJSON))}});function dn(e={}){return[N,We.of(e),L.domEventHandlers({beforeinput(t,n){let r=t.inputType=="historyUndo"?se:t.inputType=="historyRedo"?J:null;return r?(t.preventDefault(),r(n)):!1}})]}var mn=N;function G(e,t){return function({state:n,dispatch:r}){if(!t&&n.readOnly)return!1;let a=n.field(N,!1);if(!a)return!1;let o=a.pop(e,n,t);return o?(r(o),!0):!1}}var se=G(0,!1),J=G(1,!1),ze=G(0,!0),qe=G(1,!0);function Ke(e){return function(t){let n=t.field(N,!1);if(!n)return 0;let r=e==0?n.done:n.undone;return r.length-(r.length&&!r[0].changes?1:0)}}var pn=Ke(0),gn=Ke(1),A=class I{constructor(t,n,r,a,o){this.changes=t,this.effects=n,this.mapped=r,this.startSelection=a,this.selectionsAfter=o}setSelAfter(t){return new I(this.changes,this.effects,this.mapped,this.startSelection,t)}toJSON(){var t,n,r;return{changes:(t=this.changes)===null||t===void 0?void 0:t.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(a=>a.toJSON())}}static fromJSON(t){return new I(t.changes&&nn.fromJSON(t.changes),[],t.mapped&&rn.fromJSON(t.mapped),t.startSelection&&h.fromJSON(t.startSelection),t.selectionsAfter.map(h.fromJSON))}static fromTransaction(t,n){let r=v;for(let a of t.startState.facet(He)){let o=a(t);o.length&&(r=r.concat(o))}return!r.length&&t.changes.empty?null:new I(t.changes.invert(t.startState.doc),r,void 0,n||t.startState.selection,v)}static selection(t){return new I(void 0,v,void 0,void 0,t)}};function P(e,t,n,r){let a=t+1>n+20?t-n-1:0,o=e.slice(a,t);return o.push(r),o}function yn(e,t){let n=[],r=!1;return e.iterChangedRanges((a,o)=>n.push(a,o)),t.iterChangedRanges((a,o,s,l)=>{for(let i=0;i<n.length;){let u=n[i++],c=n[i++];l>=u&&s<=c&&(r=!0)}}),r}function vn(e,t){return e.ranges.length==t.ranges.length&&e.ranges.filter((n,r)=>n.empty!=t.ranges[r].empty).length===0}function $e(e,t){return e.length?t.length?e.concat(t):e:t}var v=[],wn=200;function je(e,t){if(e.length){let n=e[e.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-wn));return r.length&&r[r.length-1].eq(t)?e:(r.push(t),P(e,e.length-1,1e9,n.setSelAfter(r)))}else return[A.selection([t])]}function kn(e){let t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function le(e,t){if(!e.length)return e;let n=e.length,r=v;for(;n;){let a=An(e[n-1],t,r);if(a.changes&&!a.changes.empty||a.effects.length){let o=e.slice(0,n);return o[n-1]=a,o}else t=a.mapped,n--,r=a.selectionsAfter}return r.length?[A.selection(r)]:v}function An(e,t,n){let r=$e(e.selectionsAfter.length?e.selectionsAfter.map(l=>l.map(t)):v,n);if(!e.changes)return A.selection(r);let a=e.changes.map(t),o=t.mapDesc(e.changes,!0),s=e.mapped?e.mapped.composeDesc(o):o;return new A(a,Ie.mapEffects(e.effects,t),s,e.startSelection.map(o),r)}var Sn=/^(input\\.type|delete)($|\\.)/,O=class R{constructor(t,n,r=0,a=void 0){this.done=t,this.undone=n,this.prevTime=r,this.prevUserEvent=a}isolate(){return this.prevTime?new R(this.done,this.undone):this}addChanges(t,n,r,a,o){let s=this.done,l=s[s.length-1];return l&&l.changes&&!l.changes.empty&&t.changes&&(!r||Sn.test(r))&&(!l.selectionsAfter.length&&n-this.prevTime<a.newGroupDelay&&a.joinToEvent(o,yn(l.changes,t.changes))||r=="input.type.compose")?s=P(s,s.length-1,a.minDepth,new A(t.changes.compose(l.changes),$e(Ie.mapEffects(t.effects,l.changes),l.effects),l.mapped,l.startSelection,v)):s=P(s,s.length,a.minDepth,t),new R(s,v,n,r)}addSelection(t,n,r,a){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:v;return o.length>0&&n-this.prevTime<a&&r==this.prevUserEvent&&r&&/^select($|\\.)/.test(r)&&vn(o[o.length-1],t)?this:new R(je(this.done,t),this.undone,n,r)}addMapping(t){return new R(le(this.done,t),le(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,n,r){let a=t==0?this.done:this.undone;if(a.length==0)return null;let o=a[a.length-1],s=o.selectionsAfter[0]||n.selection;if(r&&o.selectionsAfter.length)return n.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:ae.of({side:t,rest:kn(a),selection:s}),userEvent:t==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let l=a.length==1?v:a.slice(0,a.length-1);return o.mapped&&(l=le(l,o.mapped)),n.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:ae.of({side:t,rest:l,selection:s}),filter:!1,userEvent:t==0?"undo":"redo",scrollIntoView:!0})}else return null}};O.empty=new O(v,v);var Bn=[{key:"Mod-z",run:se,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:J,preventDefault:!0},{linux:"Ctrl-Shift-z",run:J,preventDefault:!0},{key:"Mod-u",run:ze,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:qe,preventDefault:!0}];function E(e,t){return h.create(e.ranges.map(t),e.mainIndex)}function k(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function g({state:e,dispatch:t},n){let r=E(e.selection,n);return r.eq(e.selection,!0)?!1:(t(k(e,r)),!0)}function C(e,t){return h.cursor(t?e.to:e.from)}function H(e,t){return g(e,n=>n.empty?e.moveByChar(n,t):C(n,t))}function m(e){return e.textDirectionAt(e.state.selection.main.head)==on.LTR}var ie=e=>H(e,!m(e)),ce=e=>H(e,m(e)),Dn=e=>H(e,!0),Cn=e=>H(e,!1);function ue(e,t,n){let r=t.head,a=e.doc.lineAt(r);return r==(n?a.to:a.from)?r=n?Math.min(e.doc.length,a.to+1):Math.max(0,a.from-1):r=a.from+M(a.text,r-a.from,n),h.cursor(r,n?-1:1)}function Qe(e,t){return g(e,n=>n.empty?ue(e.state,n,t):C(n,t))}var xn=e=>Qe(e,!0),Mn=e=>Qe(e,!1);function W(e,t){return g(e,n=>n.empty?e.moveByGroup(n,t):C(n,t))}var Xe=e=>W(e,!m(e)),Ye=e=>W(e,m(e)),Ln=e=>W(e,!0),bn=e=>W(e,!1);function fe(e,t,n){let r=e.state.charCategorizer(t),a=r(n),o=a!=S.Space;return s=>{let l=r(s);return l!=S.Space?o&&l==a:(o=!1,!0)}}var En=e=>g(e,t=>t.empty?e.moveByChar(t,!0,n=>fe(e,t.head,n)):C(t,!0)),Ze=typeof Intl<"u"&&Intl.Segmenter?new Intl.Segmenter(void 0,{granularity:"word"}):null;function _e(e,t,n){let r=e.state.charCategorizer(t.from),a=S.Space,o=t.from,s=0,l=!1,i=!1,u=!1,c=d=>{if(l)return!1;o+=n?d.length:-d.length;let w=r(d),y;if(w==S.Word&&d.charCodeAt(0)<128&&/[\\W_]/.test(d)&&(w=-1),a==S.Space&&(a=w),a!=w)return!1;if(a==S.Word)if(d.toLowerCase()==d){if(!n&&i)return!1;u=!0}else if(u){if(n)return!1;l=!0}else{if(i&&n&&r(y=e.state.sliceDoc(o,o+1))==S.Word&&y.toLowerCase()==y)return!1;i=!0}return s++,!0},f=e.moveByChar(t,n,d=>(c(d),c));if(Ze&&a==S.Word&&f.from==t.from+s*(n?1:-1)){let d=Math.min(t.head,f.head),w=Math.max(t.head,f.head),y=e.state.sliceDoc(d,w);if(y.length>1&&/[\\u4E00-\\uffff]/.test(y)){let F=Array.from(Ze.segment(y));if(F.length>1)return n?h.cursor(t.head+F[1].index,-1):h.cursor(f.head+F[F.length-1].index,1)}}return f}function et(e,t){return g(e,n=>n.empty?_e(e,n,t):C(n,t))}var Tn=e=>et(e,!0),On=e=>et(e,!1);function In(e,t,n){if(t.type.prop(n))return!0;let r=t.to-t.from;return r&&(r>2||/[^\\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function z(e,t,n){let r=ee(e).resolveInner(t.head),a=n?ne.closedBy:ne.openedBy;for(let i=t.head;;){let u=n?r.childAfter(i):r.childBefore(i);if(!u)break;In(e,u,a)?r=u:i=n?u.to:u.from}let o=r.type.prop(a),s,l;return o&&(s=n?b(e,r.from,1):b(e,r.to,-1))&&s.matched?l=n?s.end.to:s.end.from:l=n?r.to:r.from,h.cursor(l,n?-1:1)}var tt=e=>g(e,t=>z(e.state,t,!m(e))),nt=e=>g(e,t=>z(e.state,t,m(e)));function rt(e,t){return g(e,n=>{if(!n.empty)return C(n,t);let r=e.moveVertically(n,t);return r.head!=n.head?r:e.moveToLineBoundary(n,t)})}var he=e=>rt(e,!1),de=e=>rt(e,!0);function ot(e){let t=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,n=0,r=0,a;if(t){for(let o of e.state.facet(L.scrollMargins)){let s=o(e);s?.top&&(n=Math.max(s?.top,n)),s?.bottom&&(r=Math.max(s?.bottom,r))}a=e.scrollDOM.clientHeight-n-r}else a=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:t,height:Math.max(e.defaultLineHeight,a-5)}}function at(e,t){let n=ot(e),{state:r}=e,a=E(r.selection,s=>s.empty?e.moveVertically(s,t,n.height):C(s,t));if(a.eq(r.selection))return!1;let o;if(n.selfScroll){let s=e.coordsAtPos(r.selection.main.head),l=e.scrollDOM.getBoundingClientRect(),i=l.top+n.marginTop,u=l.bottom-n.marginBottom;s&&s.top>i&&s.bottom<u&&(o=L.scrollIntoView(a.main.head,{y:"start",yMargin:s.top-i}))}return e.dispatch(k(r,a),{effects:o}),!0}var me=e=>at(e,!1),q=e=>at(e,!0);function B(e,t,n){let r=e.lineBlockAt(t.head),a=e.moveToLineBoundary(t,n);if(a.head==t.head&&a.head!=(n?r.to:r.from)&&(a=e.moveToLineBoundary(t,n,!1)),!n&&a.head==r.from&&r.length){let o=/^\\s*/.exec(e.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;o&&t.head!=r.from+o&&(a=h.cursor(r.from+o))}return a}var st=e=>g(e,t=>B(e,t,!0)),lt=e=>g(e,t=>B(e,t,!1)),it=e=>g(e,t=>B(e,t,!m(e))),ct=e=>g(e,t=>B(e,t,m(e))),ut=e=>g(e,t=>h.cursor(e.lineBlockAt(t.head).from,1)),ft=e=>g(e,t=>h.cursor(e.lineBlockAt(t.head).to,-1));function ht(e,t,n){let r=!1,a=E(e.selection,o=>{let s=b(e,o.head,-1)||b(e,o.head,1)||o.head>0&&b(e,o.head-1,1)||o.head<e.doc.length&&b(e,o.head+1,-1);if(!s||!s.end)return o;r=!0;let l=s.start.from==o.head?s.end.to:s.end.from;return n?h.range(o.anchor,l):h.cursor(l)});return r?(t(k(e,a)),!0):!1}var dt=({state:e,dispatch:t})=>ht(e,t,!1),Rn=({state:e,dispatch:t})=>ht(e,t,!0);function p(e,t){let n=E(e.state.selection,r=>{let a=t(r);return h.range(r.anchor,a.head,a.goalColumn,a.bidiLevel||void 0)});return n.eq(e.state.selection)?!1:(e.dispatch(k(e.state,n)),!0)}function K(e,t){return p(e,n=>e.moveByChar(n,t))}var pe=e=>K(e,!m(e)),ge=e=>K(e,m(e)),Fn=e=>K(e,!0),Vn=e=>K(e,!1),Un=e=>p(e,t=>ue(e.state,t,!0)),Nn=e=>p(e,t=>ue(e.state,t,!1));function $(e,t){return p(e,n=>e.moveByGroup(n,t))}var mt=e=>$(e,!m(e)),pt=e=>$(e,m(e)),Gn=e=>$(e,!0),Jn=e=>$(e,!1),Pn=e=>p(e,t=>e.moveByChar(t,!0,n=>fe(e,t.head,n)));function gt(e,t){return p(e,n=>_e(e,n,t))}var Hn=e=>gt(e,!0),Wn=e=>gt(e,!1),yt=e=>p(e,t=>z(e.state,t,!m(e))),vt=e=>p(e,t=>z(e.state,t,m(e)));function wt(e,t){return p(e,n=>e.moveVertically(n,t))}var ye=e=>wt(e,!1),ve=e=>wt(e,!0);function kt(e,t){return p(e,n=>e.moveVertically(n,t,ot(e).height))}var we=e=>kt(e,!1),ke=e=>kt(e,!0),At=e=>p(e,t=>B(e,t,!0)),St=e=>p(e,t=>B(e,t,!1)),Bt=e=>p(e,t=>B(e,t,!m(e))),Dt=e=>p(e,t=>B(e,t,m(e))),Ct=e=>p(e,t=>h.cursor(e.lineBlockAt(t.head).from)),xt=e=>p(e,t=>h.cursor(e.lineBlockAt(t.head).to)),Ae=({state:e,dispatch:t})=>(t(k(e,{anchor:0})),!0),Se=({state:e,dispatch:t})=>(t(k(e,{anchor:e.doc.length})),!0),Be=({state:e,dispatch:t})=>(t(k(e,{anchor:e.selection.main.anchor,head:0})),!0),De=({state:e,dispatch:t})=>(t(k(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0),Mt=({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0),Lt=({state:e,dispatch:t})=>{let n=X(e).map(({from:r,to:a})=>h.range(r,Math.min(a+1,e.doc.length)));return t(e.update({selection:h.create(n),userEvent:"select"})),!0},bt=({state:e,dispatch:t})=>{let n=E(e.selection,r=>{let a=ee(e),o=a.resolveStack(r.from,1);if(r.empty){let s=a.resolveStack(r.from,-1);s.node.from>=o.node.from&&s.node.to<=o.node.to&&(o=s)}for(let s=o;s;s=s.next){let{node:l}=s;if((l.from<r.from&&l.to>=r.to||l.to>r.to&&l.from<=r.from)&&s.next)return h.range(l.to,l.from)}return r});return n.eq(e.selection)?!1:(t(k(e,n)),!0)};function Et(e,t){let{state:n}=e,r=n.selection,a=n.selection.ranges.slice();for(let o of n.selection.ranges){let s=n.doc.lineAt(o.head);if(t?s.to<e.state.doc.length:s.from>0)for(let l=o;;){let i=e.moveVertically(l,t);if(i.head<s.from||i.head>s.to){a.some(u=>u.head==i.head)||a.push(i);break}else{if(i.head==l.head)break;l=i}}}return a.length==r.ranges.length?!1:(e.dispatch(k(n,h.create(a,a.length-1))),!0)}var Tt=e=>Et(e,!1),Ot=e=>Et(e,!0),It=({state:e,dispatch:t})=>{let n=e.selection,r=null;return n.ranges.length>1?r=h.create([n.main]):n.main.empty||(r=h.create([h.cursor(n.main.head)])),r?(t(k(e,r)),!0):!1};function x(e,t){if(e.state.readOnly)return!1;let n="delete.selection",{state:r}=e,a=r.changeByRange(o=>{let{from:s,to:l}=o;if(s==l){let i=t(o);i<s?(n="delete.backward",i=j(e,i,!1)):i>s&&(n="delete.forward",i=j(e,i,!0)),s=Math.min(s,i),l=Math.max(l,i)}else s=j(e,s,!1),l=j(e,l,!0);return s==l?{range:o}:{changes:{from:s,to:l},range:h.cursor(s,s<o.head?-1:1)}});return a.changes.empty?!1:(e.dispatch(r.update(a,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?L.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function j(e,t,n){if(e instanceof L)for(let r of e.state.facet(L.atomicRanges).map(a=>a(e)))r.between(t,t,(a,o)=>{a<t&&o>t&&(t=n?o:a)});return t}var Ce=(e,t,n)=>x(e,r=>{let a=r.from,{state:o}=e,s=o.doc.lineAt(a),l,i;if(n&&!t&&a>s.from&&a<s.from+200&&!/[^ \\t]/.test(l=s.text.slice(0,a-s.from))){if(l[l.length-1]=="	")return a-1;let u=_(l,o.tabSize),c=u%te(o)||te(o);for(let f=0;f<c&&l[l.length-1-f]==" ";f++)a--;i=a}else i=M(s.text,a-s.from,t,t)+s.from,i==a&&s.number!=(t?o.doc.lines:1)?i+=t?1:-1:!t&&/[\\ufe00-\\ufe0f]/.test(s.text.slice(i-s.from,a-s.from))&&(i=M(s.text,i-s.from,!1,!1)+s.from);return i}),Q=e=>Ce(e,!1,!0),zn=e=>Ce(e,!1,!1),xe=e=>Ce(e,!0,!1),Rt=(e,t)=>x(e,n=>{let r=n.head,{state:a}=e,o=a.doc.lineAt(r),s=a.charCategorizer(r);for(let l=null;;){if(r==(t?o.to:o.from)){r==n.head&&o.number!=(t?a.doc.lines:1)&&(r+=t?1:-1);break}let i=M(o.text,r-o.from,t)+o.from,u=o.text.slice(Math.min(r,i)-o.from,Math.max(r,i)-o.from),c=s(u);if(l!=null&&c!=l)break;(u!=" "||r!=n.head)&&(l=c),r=i}return r}),Me=e=>Rt(e,!1),Ft=e=>Rt(e,!0),qn=e=>x(e,t=>e.moveByChar(t,!0,n=>fe(e,t.head,n)).head),Vt=e=>x(e,t=>{let n=e.lineBlockAt(t.head).to;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)}),Kn=e=>x(e,t=>{let n=e.lineBlockAt(t.head).from;return t.head>n?n:Math.max(0,t.head-1)}),Ut=e=>x(e,t=>{let n=e.moveToLineBoundary(t,!1).head;return t.head>n?n:Math.max(0,t.head-1)}),Nt=e=>x(e,t=>{let n=e.moveToLineBoundary(t,!0).head;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)}),$n=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=[];for(let r=0,a="",o=e.doc.iter();;){if(o.next(),o.lineBreak||o.done){let s=a.search(/\\s+$/);if(s>-1&&n.push({from:r-(a.length-s),to:r}),o.done)break;a=""}else a=o.value;r+=o.value.length}return n.length?(t(e.update({changes:n,userEvent:"delete"})),!0):!1},Gt=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Re.of(["",""])},range:h.cursor(r.from)}));return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},Jt=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(r=>{if(!r.empty||r.from==0||r.from==e.doc.length)return{range:r};let a=r.from,o=e.doc.lineAt(a),s=a==o.from?a-1:M(o.text,a-o.from,!1)+o.from,l=a==o.to?a+1:M(o.text,a-o.from,!0)+o.from;return{changes:{from:s,to:l,insert:e.doc.slice(a,l).append(e.doc.slice(s,a))},range:h.cursor(l)}});return n.changes.empty?!1:(t(e.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function X(e){let t=[],n=-1;for(let r of e.selection.ranges){let a=e.doc.lineAt(r.from),o=e.doc.lineAt(r.to);if(!r.empty&&r.to==o.from&&(o=e.doc.lineAt(r.to-1)),n>=a.number){let s=t[t.length-1];s.to=o.to,s.ranges.push(r)}else t.push({from:a.from,to:o.to,ranges:[r]});n=o.number+1}return t}function Pt(e,t,n){if(e.readOnly)return!1;let r=[],a=[];for(let o of X(e)){if(n?o.to==e.doc.length:o.from==0)continue;let s=e.doc.lineAt(n?o.to+1:o.from-1),l=s.length+1;if(n){r.push({from:o.to,to:s.to},{from:o.from,insert:s.text+e.lineBreak});for(let i of o.ranges)a.push(h.range(Math.min(e.doc.length,i.anchor+l),Math.min(e.doc.length,i.head+l)))}else{r.push({from:s.from,to:o.from},{from:o.to,insert:e.lineBreak+s.text});for(let i of o.ranges)a.push(h.range(i.anchor-l,i.head-l))}}return r.length?(t(e.update({changes:r,scrollIntoView:!0,selection:h.create(a,e.selection.mainIndex),userEvent:"move.line"})),!0):!1}var Ht=({state:e,dispatch:t})=>Pt(e,t,!1),Wt=({state:e,dispatch:t})=>Pt(e,t,!0);function zt(e,t,n){if(e.readOnly)return!1;let r=[];for(let a of X(e))n?r.push({from:a.from,insert:e.doc.slice(a.from,a.to)+e.lineBreak}):r.push({from:a.to,insert:e.lineBreak+e.doc.slice(a.from,a.to)});return t(e.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}var qt=({state:e,dispatch:t})=>zt(e,t,!1),Kt=({state:e,dispatch:t})=>zt(e,t,!0),$t=e=>{if(e.state.readOnly)return!1;let{state:t}=e,n=t.changes(X(t).map(({from:a,to:o})=>(a>0?a--:o<t.doc.length&&o++,{from:a,to:o}))),r=E(t.selection,a=>{let o;if(e.lineWrapping){let s=e.lineBlockAt(a.head),l=e.coordsAtPos(a.head,a.assoc||1);l&&(o=s.bottom+e.documentTop-l.bottom+e.defaultLineHeight/2)}return e.moveVertically(a,!0,o)}).map(n);return e.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0},jn=({state:e,dispatch:t})=>(t(e.update(e.replaceSelection(e.lineBreak),{scrollIntoView:!0,userEvent:"input"})),!0),Qn=({state:e,dispatch:t})=>(t(e.update(e.changeByRange(n=>{let r=/^\\s*/.exec(e.doc.lineAt(n.from).text)[0];return{changes:{from:n.from,to:n.to,insert:e.lineBreak+r},range:h.cursor(n.from+r.length+1)}}),{scrollIntoView:!0,userEvent:"input"})),!0);function Xn(e,t){if(/\\(\\)|\\[\\]|\\{\\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let n=ee(e).resolveInner(t),r=n.childBefore(t),a=n.childAfter(t),o;return r&&a&&r.to<=t&&a.from>=t&&(o=r.type.prop(ne.closedBy))&&o.indexOf(a.name)>-1&&e.doc.lineAt(r.to).from==e.doc.lineAt(a.from).from&&!/\\S/.test(e.sliceDoc(r.to,a.from))?{from:r.to,to:a.from}:null}var Le=Qt(!1),jt=Qt(!0);function Qt(e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let r=t.changeByRange(a=>{let{from:o,to:s}=a,l=t.doc.lineAt(o),i=!e&&o==s&&Xn(t,o);e&&(o=s=(s<=l.to?l:t.doc.lineAt(s)).to);let u=new Fe(t,{simulateBreak:o,simulateDoubleBreak:!!i}),c=Ve(u,o);for(c==null&&(c=_(/^\\s*/.exec(t.doc.lineAt(o).text)[0],t.tabSize));s<l.to&&/\\s/.test(l.text[s-l.from]);)s++;i?{from:o,to:s}=i:o>l.from&&o<l.from+100&&!/\\S/.test(l.text.slice(0,o))&&(o=l.from);let f=["",V(t,c)];return i&&f.push(V(t,u.lineIndent(l.from,-1))),{changes:{from:o,to:s,insert:Re.of(f)},range:h.cursor(o+1+f[1].length)}});return n(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function be(e,t){let n=-1;return e.changeByRange(r=>{let a=[];for(let s=r.from;s<=r.to;){let l=e.doc.lineAt(s);l.number>n&&(r.empty||r.to>l.from)&&(t(l,a,r),n=l.number),s=l.to+1}let o=e.changes(a);return{changes:a,range:h.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}})}var Xt=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=Object.create(null),r=new Fe(e,{overrideIndentation:o=>n[o]??-1}),a=be(e,(o,s,l)=>{let i=Ve(r,o.from);if(i==null)return;/\\S/.test(o.text)||(i=0);let u=/^\\s*/.exec(o.text)[0],c=V(e,i);(u!=c||l.from<o.from+u.length)&&(n[o.from]=i,s.push({from:o.from,to:o.from+u.length,insert:c}))});return a.changes.empty||t(e.update(a,{userEvent:"indent"})),!0},Y=({state:e,dispatch:t})=>e.readOnly?!1:(t(e.update(be(e,(n,r)=>{r.push({from:n.from,insert:e.facet(an)})}),{userEvent:"input.indent"})),!0),Ee=({state:e,dispatch:t})=>e.readOnly?!1:(t(e.update(be(e,(n,r)=>{let a=/^\\s*/.exec(n.text)[0];if(!a)return;let o=_(a,e.tabSize),s=0,l=V(e,Math.max(0,o-te(e)));for(;s<a.length&&s<l.length&&a.charCodeAt(s)==l.charCodeAt(s);)s++;r.push({from:n.from+s,to:n.from+a.length,insert:l.slice(s)})}),{userEvent:"delete.dedent"})),!0),Yt=e=>(e.setTabFocusMode(),!0),Yn=e=>(e.setTabFocusMode(2e3),!0),Zn=({state:e,dispatch:t})=>e.selection.ranges.some(n=>!n.empty)?Y({state:e,dispatch:t}):(t(e.update(e.replaceSelection("	"),{scrollIntoView:!0,userEvent:"input"})),!0),Zt=[{key:"Ctrl-b",run:ie,shift:pe,preventDefault:!0},{key:"Ctrl-f",run:ce,shift:ge},{key:"Ctrl-p",run:he,shift:ye},{key:"Ctrl-n",run:de,shift:ve},{key:"Ctrl-a",run:ut,shift:Ct},{key:"Ctrl-e",run:ft,shift:xt},{key:"Ctrl-d",run:xe},{key:"Ctrl-h",run:Q},{key:"Ctrl-k",run:Vt},{key:"Ctrl-Alt-h",run:Me},{key:"Ctrl-o",run:Gt},{key:"Ctrl-t",run:Jt},{key:"Ctrl-v",run:q}],_t=[{key:"ArrowLeft",run:ie,shift:pe,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Xe,shift:mt,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:it,shift:Bt,preventDefault:!0},{key:"ArrowRight",run:ce,shift:ge,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Ye,shift:pt,preventDefault:!0},{mac:"Cmd-ArrowRight",run:ct,shift:Dt,preventDefault:!0},{key:"ArrowUp",run:he,shift:ye,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Ae,shift:Be},{mac:"Ctrl-ArrowUp",run:me,shift:we},{key:"ArrowDown",run:de,shift:ve,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Se,shift:De},{mac:"Ctrl-ArrowDown",run:q,shift:ke},{key:"PageUp",run:me,shift:we},{key:"PageDown",run:q,shift:ke},{key:"Home",run:lt,shift:St,preventDefault:!0},{key:"Mod-Home",run:Ae,shift:Be},{key:"End",run:st,shift:At,preventDefault:!0},{key:"Mod-End",run:Se,shift:De},{key:"Enter",run:Le,shift:Le},{key:"Mod-a",run:Mt},{key:"Backspace",run:Q,shift:Q,preventDefault:!0},{key:"Delete",run:xe,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Me,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:Ft,preventDefault:!0},{mac:"Mod-Backspace",run:Ut,preventDefault:!0},{mac:"Mod-Delete",run:Nt,preventDefault:!0}].concat(Zt.map(e=>({mac:e.key,run:e.run,shift:e.shift}))),_n=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:tt,shift:yt},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:nt,shift:vt},{key:"Alt-ArrowUp",run:Ht},{key:"Shift-Alt-ArrowUp",run:qt},{key:"Alt-ArrowDown",run:Wt},{key:"Shift-Alt-ArrowDown",run:Kt},{key:"Mod-Alt-ArrowUp",run:Tt},{key:"Mod-Alt-ArrowDown",run:Ot},{key:"Escape",run:It},{key:"Mod-Enter",run:jt},{key:"Alt-l",mac:"Ctrl-l",run:Lt},{key:"Mod-i",run:bt,preventDefault:!0},{key:"Mod-[",run:Ee},{key:"Mod-]",run:Y},{key:"Mod-Alt-\\\\",run:Xt},{key:"Shift-Mod-k",run:$t},{key:"Shift-Mod-\\\\",run:dt},{key:"Mod-/",run:Ue},{key:"Alt-A",run:Ge},{key:"Ctrl-m",mac:"Shift-Alt-m",run:Yt}].concat(_t),er={key:"Tab",run:Y,shift:Ee};export{Tt as addCursorAbove,Ot as addCursorBelow,cn as blockComment,un as blockUncomment,Kt as copyLineDown,qt as copyLineUp,Cn as cursorCharBackward,Mn as cursorCharBackwardLogical,Dn as cursorCharForward,xn as cursorCharForwardLogical,ie as cursorCharLeft,ce as cursorCharRight,Se as cursorDocEnd,Ae as cursorDocStart,bn as cursorGroupBackward,Ln as cursorGroupForward,En as cursorGroupForwardWin,Xe as cursorGroupLeft,Ye as cursorGroupRight,lt as cursorLineBoundaryBackward,st as cursorLineBoundaryForward,it as cursorLineBoundaryLeft,ct as cursorLineBoundaryRight,de as cursorLineDown,ft as cursorLineEnd,ut as cursorLineStart,he as cursorLineUp,dt as cursorMatchingBracket,q as cursorPageDown,me as cursorPageUp,On as cursorSubwordBackward,Tn as cursorSubwordForward,tt as cursorSyntaxLeft,nt as cursorSyntaxRight,_n as defaultKeymap,Q as deleteCharBackward,zn as deleteCharBackwardStrict,xe as deleteCharForward,Me as deleteGroupBackward,Ft as deleteGroupForward,qn as deleteGroupForwardWin,$t as deleteLine,Ut as deleteLineBoundaryBackward,Nt as deleteLineBoundaryForward,Vt as deleteToLineEnd,Kn as deleteToLineStart,$n as deleteTrailingWhitespace,Zt as emacsStyleKeymap,dn as history,mn as historyField,Bn as historyKeymap,Ee as indentLess,Y as indentMore,Xt as indentSelection,er as indentWithTab,jt as insertBlankLine,jn as insertNewline,Le as insertNewlineAndIndent,Qn as insertNewlineKeepIndent,Zn as insertTab,He as invertedEffects,Pe as isolateHistory,sn as lineComment,ln as lineUncomment,Wt as moveLineDown,Ht as moveLineUp,J as redo,gn as redoDepth,qe as redoSelection,Mt as selectAll,Vn as selectCharBackward,Nn as selectCharBackwardLogical,Fn as selectCharForward,Un as selectCharForwardLogical,pe as selectCharLeft,ge as selectCharRight,De as selectDocEnd,Be as selectDocStart,Jn as selectGroupBackward,Gn as selectGroupForward,Pn as selectGroupForwardWin,mt as selectGroupLeft,pt as selectGroupRight,Lt as selectLine,St as selectLineBoundaryBackward,At as selectLineBoundaryForward,Bt as selectLineBoundaryLeft,Dt as selectLineBoundaryRight,ve as selectLineDown,xt as selectLineEnd,Ct as selectLineStart,ye as selectLineUp,Rn as selectMatchingBracket,ke as selectPageDown,we as selectPageUp,bt as selectParentSyntax,Wn as selectSubwordBackward,Hn as selectSubwordForward,yt as selectSyntaxLeft,vt as selectSyntaxRight,It as simplifySelection,Gt as splitLine,_t as standardKeymap,Yn as temporarilySetTabFocusMode,Ge as toggleBlockComment,Je as toggleBlockCommentByLine,Ue as toggleComment,Ne as toggleLineComment,Yt as toggleTabFocusMode,Jt as transposeChars,se as undo,pn as undoDepth,ze as undoSelection};
`,mimeType:"application/javascript"},"/node/async_hooks.mjs":{content:'var A=class{__unenv__=!0;_currentStore;_enterStore;_enabled=!0;getStore(){return this._currentStore??this._enterStore}disable(){this._enabled=!1}enable(){this._enabled=!0}enterWith(e){this._enterStore=e}run(e,t,...r){this._currentStore=e;let n=t(...r);return this._currentStore=void 0,n}exit(e,...t){let r=this._currentStore;this._currentStore=void 0;let n=e(...t);return this._currentStore=r,n}static snapshot(){throw new Error("[unenv] `AsyncLocalStorage.snapshot` is not implemented!")}},c=globalThis.AsyncLocalStorage||A,i=Symbol("init"),T=Symbol("before"),P=Symbol("after"),u=Symbol("destroy"),I=Symbol("promiseResolve"),l=class{__unenv__=!0;_enabled=!1;_callbacks={};constructor(e={}){this._callbacks=e}enable(){return this._enabled=!0,this}disable(){return this._enabled=!1,this}get[i](){return this._callbacks.init}get[T](){return this._callbacks.before}get[P](){return this._callbacks.after}get[u](){return this._callbacks.destroy}get[I](){return this._callbacks.promiseResolve}},S=function(e){return new l(e)},s=function(){return 0},R=function(){return Object.create(null)},o=function(){return 0},a=Object.assign(Object.create(null),{NONE:0,DIRHANDLE:1,DNSCHANNEL:2,ELDHISTOGRAM:3,FILEHANDLE:4,FILEHANDLECLOSEREQ:5,BLOBREADER:6,FSEVENTWRAP:7,FSREQCALLBACK:8,FSREQPROMISE:9,GETADDRINFOREQWRAP:10,GETNAMEINFOREQWRAP:11,HEAPSNAPSHOT:12,HTTP2SESSION:13,HTTP2STREAM:14,HTTP2PING:15,HTTP2SETTINGS:16,HTTPINCOMINGMESSAGE:17,HTTPCLIENTREQUEST:18,JSSTREAM:19,JSUDPWRAP:20,MESSAGEPORT:21,PIPECONNECTWRAP:22,PIPESERVERWRAP:23,PIPEWRAP:24,PROCESSWRAP:25,PROMISE:26,QUERYWRAP:27,QUIC_ENDPOINT:28,QUIC_LOGSTREAM:29,QUIC_PACKET:30,QUIC_SESSION:31,QUIC_STREAM:32,QUIC_UDP:33,SHUTDOWNWRAP:34,SIGNALWRAP:35,STATWATCHER:36,STREAMPIPE:37,TCPCONNECTWRAP:38,TCPSERVERWRAP:39,TCPWRAP:40,TTYWRAP:41,UDPSENDWRAP:42,UDPWRAP:43,SIGINTWATCHDOG:44,WORKER:45,WORKERHEAPSNAPSHOT:46,WRITEWRAP:47,ZLIB:48,CHECKPRIMEREQUEST:49,PBKDF2REQUEST:50,KEYPAIRGENREQUEST:51,KEYGENREQUEST:52,KEYEXPORTREQUEST:53,CIPHERREQUEST:54,DERIVEBITSREQUEST:55,HASHREQUEST:56,RANDOMBYTESREQUEST:57,RANDOMPRIMEREQUEST:58,SCRYPTREQUEST:59,SIGNREQUEST:60,TLSWRAP:61,VERIFYREQUEST:62}),_=100,y=class{__unenv__=!0;type;_asyncId;_triggerAsyncId;constructor(e,t=s()){this.type=e,this._asyncId=-1*_++,this._triggerAsyncId=typeof t=="number"?t:t?.triggerAsyncId}static bind(e,t,r){return new E(t??"anonymous").bind(e)}bind(e,t){let r=(...n)=>this.runInAsyncScope(e,t,...n);return r.asyncResource=this,r}runInAsyncScope(e,t,...r){return e.apply(t,r)}emitDestroy(){return this}asyncId(){return this._asyncId}triggerAsyncId(){return this._triggerAsyncId}},E=globalThis.AsyncResource||y,N={asyncWrapProviders:a,AsyncLocalStorage:c,AsyncResource:E,createHook:S,executionAsyncId:s,executionAsyncResource:R,triggerAsyncId:o};export{c as AsyncLocalStorage,E as AsyncResource,a as asyncWrapProviders,S as createHook,N as default,s as executionAsyncId,R as executionAsyncResource,o as triggerAsyncId};\n',mimeType:"application/javascript"},"/crelt@%5E1.0.5?target=es2022":{content:`export*from"/crelt@1.0.6/es2022/crelt.mjs";export{default}from"/crelt@1.0.6/es2022/crelt.mjs";
`,mimeType:"application/javascript"},"/@codemirror/state@%5E6.4.0?target=es2022":{content:`import"/@marijn/find-cluster-break@^1.0.0?target=es2022";export*from"/@codemirror/state@6.5.2/es2022/state.mjs";
`,mimeType:"application/javascript"},"/@codemirror/view@%5E6.27.0?target=es2022":{content:`import"/@codemirror/state@^6.5.0?target=es2022";import"/crelt@^1.0.6?target=es2022";import"/style-mod@^4.1.0?target=es2022";import"/w3c-keyname@^2.2.4?target=es2022";export*from"/@codemirror/view@6.39.4/es2022/view.mjs";
`,mimeType:"application/javascript"},"/style.css":{content:`@supports ((-webkit-hyphens: none) and (not (margin-trim: inline))) or ((-moz-orient: inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--un-bg-opacity:100%;--un-translate-x:initial;--un-translate-y:initial;--un-translate-z:initial}}@property --un-bg-opacity{syntax:"<percentage>";inherits:false;initial-value:100%;}@property --un-translate-x{syntax:"*";inherits:false;initial-value:0;}@property --un-translate-y{syntax:"*";inherits:false;initial-value:0;}@property --un-translate-z{syntax:"*";inherits:false;initial-value:0;}:root,:host{--spacing: .25rem;--font-icon-family: lucide;--font-family: Manrope;--icon-family: lucide;--color-primary: hsl(179 85% 53%);--color-secondary: hsl(6 90% 64%);--color-accent: hsl(6 90% 64%);--color-surface: hsl(100 35% 80%);--color-text: hsl(183 80% 34%);--color-danger: hsl(0 90% 65%);--color-border: #000000;--color-border-subtle: #5c5050;--colors-black: #000;--colors-white: #fff;--colors-slate-50: oklch(98.4% .003 247.858);--colors-slate-100: oklch(96.8% .007 247.896);--colors-slate-200: oklch(92.9% .013 255.508);--colors-slate-300: oklch(86.9% .022 252.894);--colors-slate-400: oklch(70.4% .04 256.788);--colors-slate-500: oklch(55.4% .046 257.417);--colors-slate-600: oklch(44.6% .043 257.281);--colors-slate-700: oklch(37.2% .044 257.287);--colors-slate-800: oklch(27.9% .041 260.031);--colors-slate-900: oklch(20.8% .042 265.755);--colors-slate-950: oklch(12.9% .042 264.695);--colors-slate-DEFAULT: oklch(70.4% .04 256.788);--colors-gray-50: oklch(98.5% .002 247.839);--colors-gray-100: oklch(96.7% .003 264.542);--colors-gray-200: oklch(92.8% .006 264.531);--colors-gray-300: oklch(87.2% .01 258.338);--colors-gray-400: oklch(70.7% .022 261.325);--colors-gray-500: oklch(55.1% .027 264.364);--colors-gray-600: oklch(44.6% .03 256.802);--colors-gray-700: oklch(37.3% .034 259.733);--colors-gray-800: oklch(27.8% .033 256.848);--colors-gray-900: oklch(21% .034 264.665);--colors-gray-950: oklch(13% .028 261.692);--colors-gray-DEFAULT: oklch(70.7% .022 261.325);--colors-zinc-50: oklch(98.5% 0 0);--colors-zinc-100: oklch(96.7% .001 286.375);--colors-zinc-200: oklch(92% .004 286.32);--colors-zinc-300: oklch(87.1% .006 286.286);--colors-zinc-400: oklch(70.5% .015 286.067);--colors-zinc-500: oklch(55.2% .016 285.938);--colors-zinc-600: oklch(44.2% .017 285.786);--colors-zinc-700: oklch(37% .013 285.805);--colors-zinc-800: oklch(27.4% .006 286.033);--colors-zinc-900: oklch(21% .006 285.885);--colors-zinc-950: oklch(14.1% .005 285.823);--colors-zinc-DEFAULT: oklch(70.5% .015 286.067);--colors-neutral-50: oklch(98.5% 0 0);--colors-neutral-100: oklch(97% 0 0);--colors-neutral-200: oklch(92.2% 0 0);--colors-neutral-300: oklch(87% 0 0);--colors-neutral-400: oklch(70.8% 0 0);--colors-neutral-500: oklch(55.6% 0 0);--colors-neutral-600: oklch(43.9% 0 0);--colors-neutral-700: oklch(37.1% 0 0);--colors-neutral-800: oklch(26.9% 0 0);--colors-neutral-900: oklch(20.5% 0 0);--colors-neutral-950: oklch(14.5% 0 0);--colors-neutral-DEFAULT: oklch(70.8% 0 0);--colors-stone-50: oklch(98.5% .001 106.423);--colors-stone-100: oklch(97% .001 106.424);--colors-stone-200: oklch(92.3% .003 48.717);--colors-stone-300: oklch(86.9% .005 56.366);--colors-stone-400: oklch(70.9% .01 56.259);--colors-stone-500: oklch(55.3% .013 58.071);--colors-stone-600: oklch(44.4% .011 73.639);--colors-stone-700: oklch(37.4% .01 67.558);--colors-stone-800: oklch(26.8% .007 34.298);--colors-stone-900: oklch(21.6% .006 56.043);--colors-stone-950: oklch(14.7% .004 49.25);--colors-stone-DEFAULT: oklch(70.9% .01 56.259);--colors-red-50: oklch(97.1% .013 17.38);--colors-red-100: oklch(93.6% .032 17.717);--colors-red-200: oklch(88.5% .062 18.334);--colors-red-300: oklch(80.8% .114 19.571);--colors-red-400: oklch(70.4% .191 22.216);--colors-red-500: oklch(63.7% .237 25.331);--colors-red-600: oklch(57.7% .245 27.325);--colors-red-700: oklch(50.5% .213 27.518);--colors-red-800: oklch(44.4% .177 26.899);--colors-red-900: oklch(39.6% .141 25.723);--colors-red-950: oklch(25.8% .092 26.042);--colors-red-DEFAULT: oklch(70.4% .191 22.216);--colors-orange-50: oklch(98% .016 73.684);--colors-orange-100: oklch(95.4% .038 75.164);--colors-orange-200: oklch(90.1% .076 70.697);--colors-orange-300: oklch(83.7% .128 66.29);--colors-orange-400: oklch(75% .183 55.934);--colors-orange-500: oklch(70.5% .213 47.604);--colors-orange-600: oklch(64.6% .222 41.116);--colors-orange-700: oklch(55.3% .195 38.402);--colors-orange-800: oklch(47% .157 37.304);--colors-orange-900: oklch(40.8% .123 38.172);--colors-orange-950: oklch(26.6% .079 36.259);--colors-orange-DEFAULT: oklch(75% .183 55.934);--colors-amber-50: oklch(98.7% .022 95.277);--colors-amber-100: oklch(96.2% .059 95.617);--colors-amber-200: oklch(92.4% .12 95.746);--colors-amber-300: oklch(87.9% .169 91.605);--colors-amber-400: oklch(82.8% .189 84.429);--colors-amber-500: oklch(76.9% .188 70.08);--colors-amber-600: oklch(66.6% .179 58.318);--colors-amber-700: oklch(55.5% .163 48.998);--colors-amber-800: oklch(47.3% .137 46.201);--colors-amber-900: oklch(41.4% .112 45.904);--colors-amber-950: oklch(27.9% .077 45.635);--colors-amber-DEFAULT: oklch(82.8% .189 84.429);--colors-yellow-50: oklch(98.7% .026 102.212);--colors-yellow-100: oklch(97.3% .071 103.193);--colors-yellow-200: oklch(94.5% .129 101.54);--colors-yellow-300: oklch(90.5% .182 98.111);--colors-yellow-400: oklch(85.2% .199 91.936);--colors-yellow-500: oklch(79.5% .184 86.047);--colors-yellow-600: oklch(68.1% .162 75.834);--colors-yellow-700: oklch(55.4% .135 66.442);--colors-yellow-800: oklch(47.6% .114 61.907);--colors-yellow-900: oklch(42.1% .095 57.708);--colors-yellow-950: oklch(28.6% .066 53.813);--colors-yellow-DEFAULT: oklch(85.2% .199 91.936);--colors-lime-50: oklch(98.6% .031 120.757);--colors-lime-100: oklch(96.7% .067 122.328);--colors-lime-200: oklch(93.8% .127 124.321);--colors-lime-300: oklch(89.7% .196 126.665);--colors-lime-400: oklch(84.1% .238 128.85);--colors-lime-500: oklch(76.8% .233 130.85);--colors-lime-600: oklch(64.8% .2 131.684);--colors-lime-700: oklch(53.2% .157 131.589);--colors-lime-800: oklch(45.3% .124 130.933);--colors-lime-900: oklch(40.5% .101 131.063);--colors-lime-950: oklch(27.4% .072 132.109);--colors-lime-DEFAULT: oklch(84.1% .238 128.85);--colors-green-50: oklch(98.2% .018 155.826);--colors-green-100: oklch(96.2% .044 156.743);--colors-green-200: oklch(92.5% .084 155.995);--colors-green-300: oklch(87.1% .15 154.449);--colors-green-400: oklch(79.2% .209 151.711);--colors-green-500: oklch(72.3% .219 149.579);--colors-green-600: oklch(62.7% .194 149.214);--colors-green-700: oklch(52.7% .154 150.069);--colors-green-800: oklch(44.8% .119 151.328);--colors-green-900: oklch(39.3% .095 152.535);--colors-green-950: oklch(26.6% .065 152.934);--colors-green-DEFAULT: oklch(79.2% .209 151.711);--colors-emerald-50: oklch(97.9% .021 166.113);--colors-emerald-100: oklch(95% .052 163.051);--colors-emerald-200: oklch(90.5% .093 164.15);--colors-emerald-300: oklch(84.5% .143 164.978);--colors-emerald-400: oklch(76.5% .177 163.223);--colors-emerald-500: oklch(69.6% .17 162.48);--colors-emerald-600: oklch(59.6% .145 163.225);--colors-emerald-700: oklch(50.8% .118 165.612);--colors-emerald-800: oklch(43.2% .095 166.913);--colors-emerald-900: oklch(37.8% .077 168.94);--colors-emerald-950: oklch(26.2% .051 172.552);--colors-emerald-DEFAULT: oklch(76.5% .177 163.223);--colors-teal-50: oklch(98.4% .014 180.72);--colors-teal-100: oklch(95.3% .051 180.801);--colors-teal-200: oklch(91% .096 180.426);--colors-teal-300: oklch(85.5% .138 181.071);--colors-teal-400: oklch(77.7% .152 181.912);--colors-teal-500: oklch(70.4% .14 182.503);--colors-teal-600: oklch(60% .118 184.704);--colors-teal-700: oklch(51.1% .096 186.391);--colors-teal-800: oklch(43.7% .078 188.216);--colors-teal-900: oklch(38.6% .063 188.416);--colors-teal-950: oklch(27.7% .046 192.524);--colors-teal-DEFAULT: oklch(77.7% .152 181.912);--colors-cyan-50: oklch(98.4% .019 200.873);--colors-cyan-100: oklch(95.6% .045 203.388);--colors-cyan-200: oklch(91.7% .08 205.041);--colors-cyan-300: oklch(86.5% .127 207.078);--colors-cyan-400: oklch(78.9% .154 211.53);--colors-cyan-500: oklch(71.5% .143 215.221);--colors-cyan-600: oklch(60.9% .126 221.723);--colors-cyan-700: oklch(52% .105 223.128);--colors-cyan-800: oklch(45% .085 224.283);--colors-cyan-900: oklch(39.8% .07 227.392);--colors-cyan-950: oklch(30.2% .056 229.695);--colors-cyan-DEFAULT: oklch(78.9% .154 211.53);--colors-sky-50: oklch(97.7% .013 236.62);--colors-sky-100: oklch(95.1% .026 236.824);--colors-sky-200: oklch(90.1% .058 230.902);--colors-sky-300: oklch(82.8% .111 230.318);--colors-sky-400: oklch(74.6% .16 232.661);--colors-sky-500: oklch(68.5% .169 237.323);--colors-sky-600: oklch(58.8% .158 241.966);--colors-sky-700: oklch(50% .134 242.749);--colors-sky-800: oklch(44.3% .11 240.79);--colors-sky-900: oklch(39.1% .09 240.876);--colors-sky-950: oklch(29.3% .066 243.157);--colors-sky-DEFAULT: oklch(74.6% .16 232.661);--colors-blue-50: oklch(97% .014 254.604);--colors-blue-100: oklch(93.2% .032 255.585);--colors-blue-200: oklch(88.2% .059 254.128);--colors-blue-300: oklch(80.9% .105 251.813);--colors-blue-400: oklch(70.7% .165 254.624);--colors-blue-500: oklch(62.3% .214 259.815);--colors-blue-600: oklch(54.6% .245 262.881);--colors-blue-700: oklch(48.8% .243 264.376);--colors-blue-800: oklch(42.4% .199 265.638);--colors-blue-900: oklch(37.9% .146 265.522);--colors-blue-950: oklch(28.2% .091 267.935);--colors-blue-DEFAULT: oklch(70.7% .165 254.624);--colors-indigo-50: oklch(96.2% .018 272.314);--colors-indigo-100: oklch(93% .034 272.788);--colors-indigo-200: oklch(87% .065 274.039);--colors-indigo-300: oklch(78.5% .115 274.713);--colors-indigo-400: oklch(67.3% .182 276.935);--colors-indigo-500: oklch(58.5% .233 277.117);--colors-indigo-600: oklch(51.1% .262 276.966);--colors-indigo-700: oklch(45.7% .24 277.023);--colors-indigo-800: oklch(39.8% .195 277.366);--colors-indigo-900: oklch(35.9% .144 278.697);--colors-indigo-950: oklch(25.7% .09 281.288);--colors-indigo-DEFAULT: oklch(67.3% .182 276.935);--colors-violet-50: oklch(96.9% .016 293.756);--colors-violet-100: oklch(94.3% .029 294.588);--colors-violet-200: oklch(89.4% .057 293.283);--colors-violet-300: oklch(81.1% .111 293.571);--colors-violet-400: oklch(70.2% .183 293.541);--colors-violet-500: oklch(60.6% .25 292.717);--colors-violet-600: oklch(54.1% .281 293.009);--colors-violet-700: oklch(49.1% .27 292.581);--colors-violet-800: oklch(43.2% .232 292.759);--colors-violet-900: oklch(38% .189 293.745);--colors-violet-950: oklch(28.3% .141 291.089);--colors-violet-DEFAULT: oklch(70.2% .183 293.541);--colors-purple-50: oklch(97.7% .014 308.299);--colors-purple-100: oklch(94.6% .033 307.174);--colors-purple-200: oklch(90.2% .063 306.703);--colors-purple-300: oklch(82.7% .119 306.383);--colors-purple-400: oklch(71.4% .203 305.504);--colors-purple-500: oklch(62.7% .265 303.9);--colors-purple-600: oklch(55.8% .288 302.321);--colors-purple-700: oklch(49.6% .265 301.924);--colors-purple-800: oklch(43.8% .218 303.724);--colors-purple-900: oklch(38.1% .176 304.987);--colors-purple-950: oklch(29.1% .149 302.717);--colors-purple-DEFAULT: oklch(71.4% .203 305.504);--colors-fuchsia-50: oklch(97.7% .017 320.058);--colors-fuchsia-100: oklch(95.2% .037 318.852);--colors-fuchsia-200: oklch(90.3% .076 319.62);--colors-fuchsia-300: oklch(83.3% .145 321.434);--colors-fuchsia-400: oklch(74% .238 322.16);--colors-fuchsia-500: oklch(66.7% .295 322.15);--colors-fuchsia-600: oklch(59.1% .293 322.896);--colors-fuchsia-700: oklch(51.8% .253 323.949);--colors-fuchsia-800: oklch(45.2% .211 324.591);--colors-fuchsia-900: oklch(40.1% .17 325.612);--colors-fuchsia-950: oklch(29.3% .136 325.661);--colors-fuchsia-DEFAULT: oklch(74% .238 322.16);--colors-pink-50: oklch(97.1% .014 343.198);--colors-pink-100: oklch(94.8% .028 342.258);--colors-pink-200: oklch(89.9% .061 343.231);--colors-pink-300: oklch(82.3% .12 346.018);--colors-pink-400: oklch(71.8% .202 349.761);--colors-pink-500: oklch(65.6% .241 354.308);--colors-pink-600: oklch(59.2% .249 .584);--colors-pink-700: oklch(52.5% .223 3.958);--colors-pink-800: oklch(45.9% .187 3.815);--colors-pink-900: oklch(40.8% .153 2.432);--colors-pink-950: oklch(28.4% .109 3.907);--colors-pink-DEFAULT: oklch(71.8% .202 349.761);--colors-rose-50: oklch(96.9% .015 12.422);--colors-rose-100: oklch(94.1% .03 12.58);--colors-rose-200: oklch(89.2% .058 10.001);--colors-rose-300: oklch(81% .117 11.638);--colors-rose-400: oklch(71.2% .194 13.428);--colors-rose-500: oklch(64.5% .246 16.439);--colors-rose-600: oklch(58.6% .253 17.585);--colors-rose-700: oklch(51.4% .222 16.935);--colors-rose-800: oklch(45.5% .188 13.697);--colors-rose-900: oklch(41% .159 10.272);--colors-rose-950: oklch(27.1% .105 12.094);--colors-rose-DEFAULT: oklch(71.2% .194 13.428);--colors-light-50: oklch(99.4% 0 0);--colors-light-100: oklch(99.11% 0 0);--colors-light-200: oklch(98.51% 0 0);--colors-light-300: oklch(98.16% .0017 247.84);--colors-light-400: oklch(97.31% 0 0);--colors-light-500: oklch(96.12% 0 0);--colors-light-600: oklch(96.32% .0034 247.86);--colors-light-700: oklch(94.17% .0052 247.88);--colors-light-800: oklch(91.09% .007 247.9);--colors-light-900: oklch(90.72% .0051 228.82);--colors-light-950: oklch(89.23% .006 239.83);--colors-light-DEFAULT: oklch(97.31% 0 0);--colors-dark-50: oklch(40.91% 0 0);--colors-dark-100: oklch(35.62% 0 0);--colors-dark-200: oklch(31.71% 0 0);--colors-dark-300: oklch(29.72% 0 0);--colors-dark-400: oklch(25.2% 0 0);--colors-dark-500: oklch(23.93% 0 0);--colors-dark-600: oklch(22.73% .0038 286.09);--colors-dark-700: oklch(22.21% 0 0);--colors-dark-800: oklch(20.9% 0 0);--colors-dark-900: oklch(16.84% 0 0);--colors-dark-950: oklch(13.44% 0 0);--colors-dark-DEFAULT: oklch(25.2% 0 0);--colors-default: var(--text-color);--colors-muted: var(--text-muted);--colors-inverted: var(--color-inverse);--colors-surface-DEFAULT: var(--color-surface);--colors-surface-lighter: var(--color-surface-lighter);--colors-surface-light: var(--color-surface-light);--colors-surface-dark: var(--color-surface-dark);--colors-surface-darker: var(--color-surface-darker);--colors-accent-DEFAULT: var(--color-accent);--colors-accent-lighter: var(--color-accent-lighter);--colors-accent-light: var(--color-accent-light);--colors-accent-dark: var(--color-accent-dark);--colors-accent-darker: var(--color-accent-darker);--colors-inverse-DEFAULT: var(--color-inverse);--colors-inverse-lighter: var(--color-inverse-lighter);--colors-inverse-light: var(--color-inverse-light);--colors-inverse-dark: var(--color-inverse-dark);--colors-inverse-darker: var(--color-inverse-darker);--colors-primary-DEFAULT: var(--color-primary);--colors-primary-lighter: var(--color-primary-lighter);--colors-primary-light: var(--color-primary-light);--colors-primary-dark: var(--color-primary-dark);--colors-primary-darker: var(--color-primary-darker);--colors-secondary-DEFAULT: var(--color-secondary);--colors-secondary-lighter: var(--color-secondary-lighter);--colors-secondary-light: var(--color-secondary-light);--colors-secondary-dark: var(--color-secondary-dark);--colors-secondary-darker: var(--color-secondary-darker);--colors-success-DEFAULT: var(--color-success);--colors-success-lighter: var(--color-success-lighter);--colors-success-light: var(--color-success-light);--colors-success-dark: var(--color-success-dark);--colors-success-darker: var(--color-success-darker);--colors-danger-DEFAULT: var(--color-danger);--colors-danger-lighter: var(--color-danger-lighter);--colors-danger-light: var(--color-danger-light);--colors-danger-dark: var(--color-danger-dark);--colors-danger-darker: var(--color-danger-darker);--colors-warning-DEFAULT: var(--color-warning);--colors-warning-lighter: var(--color-warning-lighter);--colors-warning-light: var(--color-warning-light);--colors-warning-dark: var(--color-warning-dark);--colors-warning-darker: var(--color-warning-darker);--colors-info-DEFAULT: var(--color-info);--colors-info-lighter: var(--color-info-lighter);--colors-info-light: var(--color-info-light);--colors-info-dark: var(--color-info-dark);--colors-info-darker: var(--color-info-darker);--colors-hover: var(--color-hover);--colors-focus: var(--color-focus);--text-xs-fontSize: .75rem;--text-xs-lineHeight: 1rem;--text-sm-fontSize: .875rem;--text-sm-lineHeight: 1.25rem;--text-base-fontSize: 1rem;--text-base-lineHeight: 1.5rem;--text-lg-fontSize: 1.125rem;--text-lg-lineHeight: 1.75rem;--text-xl-fontSize: 1.25rem;--text-xl-lineHeight: 1.75rem;--text-2xl-fontSize: 1.5rem;--text-2xl-lineHeight: 2rem;--text-3xl-fontSize: 1.875rem;--text-3xl-lineHeight: 2.25rem;--text-4xl-fontSize: 2.25rem;--text-4xl-lineHeight: 2.5rem;--text-5xl-fontSize: 3rem;--text-5xl-lineHeight: 1;--text-6xl-fontSize: 3.75rem;--text-6xl-lineHeight: 1;--text-7xl-fontSize: 4.5rem;--text-7xl-lineHeight: 1;--text-8xl-fontSize: 6rem;--text-8xl-lineHeight: 1;--text-9xl-fontSize: 8rem;--text-9xl-lineHeight: 1;--fontWeight-thin: 100;--fontWeight-extralight: 200;--fontWeight-light: 300;--fontWeight-normal: 400;--fontWeight-medium: 500;--fontWeight-semibold: 600;--fontWeight-bold: 700;--fontWeight-extrabold: 800;--fontWeight-black: 900;--tracking-tighter: -.05em;--tracking-tight: -.025em;--tracking-normal: 0em;--tracking-wide: .025em;--tracking-wider: .05em;--tracking-widest: .1em;--leading-none: 1;--leading-tight: 1.25;--leading-snug: 1.375;--leading-normal: 1.5;--leading-relaxed: 1.625;--leading-loose: 2;--textStrokeWidth-DEFAULT: 1.5rem;--textStrokeWidth-none: 0;--textStrokeWidth-sm: thin;--textStrokeWidth-md: medium;--textStrokeWidth-lg: thick;--radius-DEFAULT: .25rem;--radius-none: 0;--radius-xs: .125rem;--radius-sm: .25rem;--radius-md: .375rem;--radius-lg: .5rem;--radius-xl: .75rem;--radius-2xl: 1rem;--radius-3xl: 1.5rem;--radius-4xl: 2rem;--ease-linear: linear;--ease-in: cubic-bezier(.4, 0, 1, 1);--ease-out: cubic-bezier(0, 0, .2, 1);--ease-in-out: cubic-bezier(.4, 0, .2, 1);--ease-DEFAULT: cubic-bezier(.4, 0, .2, 1);--blur-DEFAULT: 8px;--blur-xs: 4px;--blur-sm: 8px;--blur-md: 12px;--blur-lg: 16px;--blur-xl: 24px;--blur-2xl: 40px;--blur-3xl: 64px;--perspective-dramatic: 100px;--perspective-near: 300px;--perspective-normal: 500px;--perspective-midrange: 800px;--perspective-distant: 1200px;--default-transition-duration: .15s;--default-transition-timingFunction: cubic-bezier(.4, 0, .2, 1);--default-font-family: var(--font-sans);--default-font-featureSettings: var(--font-sans--font-feature-settings);--default-font-variationSettings: var(--font-sans--font-variation-settings);--default-monoFont-family: var(--font-mono);--default-monoFont-featureSettings: var(--font-mono--font-feature-settings);--default-monoFont-variationSettings: var(--font-mono--font-variation-settings);--container-3xs: 16rem;--container-2xs: 18rem;--container-xs: 20rem;--container-sm: 24rem;--container-md: 28rem;--container-lg: 32rem;--container-xl: 36rem;--container-2xl: 42rem;--container-3xl: 48rem;--container-4xl: 56rem;--container-5xl: 64rem;--container-6xl: 72rem;--container-7xl: 80rem;--container-prose: 65ch;--textColor-DEFAULT: var(--text-color);--backgroundColor-DEFAULT: var(--background-color)}*,:after,:before,::backdrop,::file-selector-button{box-sizing:border-box;margin:0;padding:0;border:0 solid}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;tab-size:4;font-family:var( --default-font-family, ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji" );font-feature-settings:var(--default-font-featureSettings, normal);font-variation-settings:var(--default-font-variationSettings, normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var( --default-monoFont-family, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace );font-feature-settings:var(--default-monoFont-featureSettings, normal);font-variation-settings:var(--default-monoFont-variationSettings, normal);font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea,::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;border-radius:0;background-color:transparent;opacity:1}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not (-webkit-appearance: -apple-pay-button)) or (contain-intrinsic-size: 1px){::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit,::-webkit-datetime-edit-year-field,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute-field,::-webkit-datetime-edit-second-field,::-webkit-datetime-edit-millisecond-field,::-webkit-datetime-edit-meridiem-field{padding-block:0}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]),::file-selector-button{appearance:button}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}.container{width:100%}@media (min-width: 40rem){.container{max-width:40rem}}@media (min-width: 48rem){.container{max-width:48rem}}@media (min-width: 64rem){.container{max-width:64rem}}@media (min-width: 80rem){.container{max-width:80rem}}@media (min-width: 96rem){.container{max-width:96rem}}.text-sm{font-size:var(--text-sm-fontSize);line-height:var(--un-leading, var(--text-sm-lineHeight))}.tab{-moz-tab-size:4;-o-tab-size:4;tab-size:4}.m15{margin:calc(var(--spacing) * 15)}.m15\\.5{margin:calc(var(--spacing) * 15.5)}.m3\\.3{margin:calc(var(--spacing) * 3.3)}.m6{margin:calc(var(--spacing) * 6)}.m7\\.5{margin:calc(var(--spacing) * 7.5)}.m9{margin:calc(var(--spacing) * 9)}.ml-auto{margin-left:auto}.mr-3{margin-right:calc(var(--spacing) * 3)}.p-1{padding:calc(var(--spacing) * 1)}.p-2{padding:calc(var(--spacing) * 2)}.text-left{text-align:left}.rounded{border-radius:var(--radius-DEFAULT)}.rounded-full{border-radius:calc(infinity * 1px)}.rounded-md{border-radius:var(--radius-md)}.bg-red-700{background-color:color-mix(in srgb,var(--colors-red-700) var(--un-bg-opacity),transparent)}.bg-white{background-color:color-mix(in srgb,var(--colors-white) var(--un-bg-opacity),transparent)}.bg-yellow-50{background-color:color-mix(in srgb,var(--colors-yellow-50) var(--un-bg-opacity),transparent)}.hover\\:bg-surface-lighter:hover{background-color:color-mix(in srgb,var(--colors-surface-lighter) var(--un-bg-opacity),transparent)}.flex{display:flex}.shrink-0{flex-shrink:0}.flex-grow{flex-grow:1}.gap-2{gap:calc(var(--spacing) * 2)}.h-4{height:calc(var(--spacing) * 4)}.h-5{height:calc(var(--spacing) * 5)}.min-h-screen{min-height:100vh}.w-10{width:calc(var(--spacing) * 10)}.w-4{width:calc(var(--spacing) * 4)}.w-5{width:calc(var(--spacing) * 5)}.w-full{width:100%}.inline{display:inline}.cursor-pointer{cursor:pointer}.translate-x-4{--un-translate-x:calc(var(--spacing) * 4);translate:var(--un-translate-x) var(--un-translate-y)}.transform{transform:var(--un-rotate-x) var(--un-rotate-y) var(--un-rotate-z) var(--un-skew-x) var(--un-skew-y)}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,--un-gradient-from,--un-gradient-via,--un-gradient-to;transition-timing-function:var(--un-ease, var(--default-transition-timingFunction));transition-duration:var(--un-duration, var(--default-transition-duration))}.transition-transform{transition-property:transform,translate,scale,rotate;transition-timing-function:var(--un-ease, var(--default-transition-timingFunction));transition-duration:var(--un-duration, var(--default-transition-duration))}.items-center{align-items:center}.columns-3{columns:3}@supports (color: color-mix(in lab,red,red)){.bg-red-700{background-color:color-mix(in oklab,var(--colors-red-700) var(--un-bg-opacity),transparent)}.bg-white{background-color:color-mix(in oklab,var(--colors-white) var(--un-bg-opacity),transparent)}.bg-yellow-50{background-color:color-mix(in oklab,var(--colors-yellow-50) var(--un-bg-opacity),transparent)}.hover\\:bg-surface-lighter:hover{background-color:color-mix(in oklab,var(--colors-surface-lighter) var(--un-bg-opacity),transparent)}}admin-layout{display:block;width:100%;height:100vh;overflow:hidden}.admin-wrapper{display:flex;width:100%;height:100%}.admin-main{flex:1;display:flex;flex-direction:column;min-width:0;background:var(--color-background, #f9fafb)}.admin-content{flex:1;overflow-y:auto;padding:1.5rem}.topbar-right{display:flex;align-items:center;gap:.5rem}.sidebar-brand{display:flex;align-items:center;gap:.75rem}.sidebar-title{font-size:1.25rem;font-weight:700;text-transform:uppercase;letter-spacing:.05em}uix-sidebar[collapsed] .sidebar-title{display:none}@media (max-width: 768px){.admin-content{padding:1rem}}:where(.uix-menu,uix-menu){display:flex;flex-direction:column;list-style:none;margin:0;padding:.25rem 0;box-shadow:var(--menu-shadow, 0 2px 8px rgba(0, 0, 0, .1));&[size=sm]{--menu-item-font-size: var(--text-sm, .875rem);--menu-item-padding: .375rem .75rem;--menu-item-gap: .5rem}&[size=md]{--menu-item-font-size: var(--text-sm, .875rem);--menu-item-padding: .5rem .75rem;--menu-item-gap: .75rem}&[size=lg]{--menu-item-font-size: var(--text-base, 1rem);--menu-item-padding: .625rem 1rem;--menu-item-gap: 1rem}>li[role=menuitem]{list-style:none;margin:0;padding:0;>a,>button{display:block;width:100%;padding:var(--menu-item-padding, .5rem .75rem);font-size:var(--menu-item-font-size, var(--text-sm, .875rem));color:var(--dropdown-color, var(--text-color, default));text-decoration:none;background-color:transparent;border:none;cursor:pointer;transition:background-color .15s ease,color .15s ease;text-align:left;white-space:nowrap;&:hover{background-color:var(--color-primary, #fabd2f);color:var(--color-inverse, #282828)}&:active{background-color:var(--color-primary, #fabd2f);color:var(--color-inverse, #282828)}}}>li[role=separator]{height:1px;background-color:var(--panel-border, var(--dropdown-separator, #504945));margin:.25rem 0;padding:0}&[variant=bordered]::part(container){border-width:2px}&[variant=compact]{--menu-item-padding: .375rem .5rem}&:not([rounded])::part(container){border-radius:0}&:not([bordered])::part(container){border:none}&[variant=sidebar]{box-shadow:none;background:transparent;padding:var(--sidebar-nav-padding, 0);gap:var(--sidebar-nav-gap, .25rem);>li{list-style:none;margin:0;padding:0;>a,>uix-link,>button{display:flex;align-items:center;gap:var(--sidebar-item-gap, .75rem);width:100%;padding:var(--sidebar-item-padding, .75rem 1rem);border-radius:var(--sidebar-item-border-radius, .5rem);color:var(--sidebar-item-color, var(--text-muted, #6b7280));font-weight:var(--sidebar-item-font-weight, 500);font-size:var(--menu-item-font-size, inherit);text-decoration:none;background:transparent;border:none;cursor:pointer;text-align:left;transition:background-color .2s ease,color .2s ease;&:hover{background-color:var(--sidebar-item-hover-background, #f5f5f5);color:var(--sidebar-item-hover-color, var(--text-color, #1a1a1a))}&.active,&[aria-current=page]{background-color:var(--sidebar-item-active-background, #000000);color:var(--sidebar-item-active-color, #ffffff);font-weight:var(--sidebar-item-active-font-weight, 600)}}}>li.divider,>li[role=separator]{height:0;padding-top:var(--sidebar-section-padding, 1rem);margin-top:var(--sidebar-section-margin, .5rem);border-top:1px solid var(--sidebar-border-color, var(--color-border, #e5e7eb));background:none}details{summary{display:flex;align-items:center;gap:var(--sidebar-item-gap, .75rem);padding:var(--sidebar-item-padding, .75rem 1rem);border-radius:var(--sidebar-item-border-radius, .5rem);color:var(--sidebar-item-color, var(--text-muted, #6b7280));font-weight:var(--sidebar-item-font-weight, 500);cursor:pointer;list-style:none;transition:background-color .2s ease,color .2s ease;&::-webkit-details-marker{display:none}&:hover{background-color:var(--sidebar-item-hover-background, #f5f5f5);color:var(--sidebar-item-hover-color, var(--text-color, #1a1a1a))}uix-icon:last-child{margin-left:auto;transition:transform .2s ease}}&[open] summary uix-icon:last-child{transform:rotate(90deg)}>ul{list-style:none;margin:0;padding:0;padding-inline:var(--sidebar-item-padding, .25rem);display:flex;flex-direction:column;gap:var(--sidebar-item-gap, .75rem);>li{>a,>uix-link{display:flex;align-items:center;gap:var(--sidebar-item-gap, .75rem);padding:var(--sidebar-nested-item-padding, .5rem 1rem);border-radius:var(--sidebar-item-border-radius, .5rem);color:var(--sidebar-item-color, var(--text-muted, #6b7280));font-size:var(--sidebar-nested-item-font-size, .875rem);text-decoration:none;transition:background-color .2s ease,color .2s ease;&:hover{background-color:var(--sidebar-item-hover-background, #f5f5f5);color:var(--sidebar-item-hover-color, var(--text-color, #1a1a1a))}&.active,&[aria-current=page]{background-color:var(--sidebar-item-hover-background, #e5e5e5);color:var(--sidebar-item-hover-color, #000000);font-weight:600}}}}}}}uix-sidebar{display:flex;flex-direction:column;width:var(--sidebar-width, 256px);height:100%;background-color:var(--sidebar-background, var(--color-surface, #ffffff));border-right-width:var(--sidebar-border-width, 1px);border-right-style:solid;border-right-color:var(--sidebar-border-color, var(--color-border, #e5e7eb));box-shadow:var(--sidebar-shadow, none);overflow:hidden;transition:width .3s ease;&[position=right]{border-right:none;border-left-width:var(--sidebar-border-width, 1px);border-left-style:solid;border-left-color:var(--sidebar-border-color, var(--color-border, #e5e7eb))}&[collapsed]{width:var(--sidebar-collapsed-width, 80px)}@media (max-width: 768px){position:fixed;top:0;bottom:0;z-index:1000;transform:translate(-100%);&[position=left]{left:0}&[position=right]{right:0;transform:translate(100%)}&[open]{transform:translate(0)}}@media (min-width: 769px){position:relative;transform:none}}uix-sidebar::part(header){display:flex;align-items:center;justify-content:space-between;padding:var(--sidebar-header-padding, 1rem);background:var(--sidebar-header-background, transparent);border-bottom-width:var(--sidebar-header-border-width, var(--sidebar-border-width, 1px));border-bottom-style:solid;border-bottom-color:var(--sidebar-border-color, var(--color-border, #e5e7eb));min-height:var(--sidebar-header-min-height, auto);flex-shrink:0}uix-sidebar::part(toggle){display:flex;align-items:center;justify-content:center;width:2rem;height:2rem;padding:0;border:none;background:var(--sidebar-toggle-background, transparent);color:var(--sidebar-toggle-color, var(--text-muted, #6b7280));cursor:pointer;border-radius:var(--sidebar-toggle-border-radius, .5rem);transition:background-color .2s ease,color .2s ease;flex-shrink:0}uix-sidebar::part(toggle):hover{background-color:var(--sidebar-toggle-hover-background, var(--color-hover, #f5f5f5));color:var(--sidebar-toggle-hover-color, var(--text-color, #1a1a1a))}uix-sidebar::part(content){flex:1;overflow-y:auto;overflow-x:hidden;padding:var(--sidebar-content-padding, .5rem 0)}uix-sidebar::part(footer){padding:var(--sidebar-footer-padding, 1rem);background:var(--sidebar-footer-background, transparent);border-top-width:var(--sidebar-footer-border-width, var(--sidebar-border-width, 1px));border-top-style:solid;border-top-color:var(--sidebar-border-color, var(--color-border, #e5e7eb));flex-shrink:0}uix-sidebar::part(footer):empty{display:none}uix-sidebar[collapsed]::part(header){justify-content:center;padding:var(--sidebar-header-padding, 1rem) .5rem}uix-sidebar{&[collapsed]{.sidebar-label,.sidebar-title,.sidebar-text{opacity:0;width:0;overflow:hidden;white-space:nowrap}[slot=header] span:not(.icon),[slot=footer] span:not(.icon){opacity:0;width:0;overflow:hidden}}.sidebar-nav{display:flex;flex-direction:column;gap:var(--sidebar-nav-gap, .25rem);padding:var(--sidebar-nav-padding, 0 .75rem)}.sidebar-nav-item,.sidebar-item{display:flex;align-items:center;gap:var(--sidebar-item-gap, .75rem);padding:var(--sidebar-item-padding, .75rem 1rem);border-radius:var(--sidebar-item-border-radius, .5rem);color:var(--sidebar-item-color, var(--text-muted, #6b7280));font-weight:var(--sidebar-item-font-weight, 500);text-decoration:none;cursor:pointer;background:transparent;border:none;width:100%;text-align:left;font-size:inherit;font-family:inherit;transition:background-color .2s ease,color .2s ease;&:hover{background-color:var(--sidebar-item-hover-background, #f5f5f5);color:var(--sidebar-item-hover-color, var(--text-color, #1a1a1a))}&.active,&[aria-current=page]{background-color:var(--sidebar-item-active-background, #000000);color:var(--sidebar-item-active-color, #ffffff);font-weight:var(--sidebar-item-active-font-weight, 600)}}.sidebar-section{padding-top:var(--sidebar-section-padding, 1rem);margin-top:var(--sidebar-section-margin, .5rem);border-top:1px solid var(--sidebar-border-color, var(--color-border, #e5e7eb))}.sidebar-section-title{padding:var(--sidebar-section-title-padding, .5rem 1rem);font-size:var(--text-xs, .75rem);font-weight:var(--sidebar-section-title-font-weight, 600);text-transform:uppercase;letter-spacing:.05em;color:var(--text-muted, #6b7280)}.sidebar-nested{padding-left:var(--sidebar-nested-indent, 1rem)}.sidebar-nested-item{padding:var(--sidebar-nested-item-padding, .5rem 1rem);font-size:var(--sidebar-nested-item-font-size, .875rem)}}:where(.uix-avatar,uix-avatar){--avatar-size: 2.5rem;--avatar-background: var(--color-surface);--avatar-color: var(--color-inverse);--avatar-border-radius: 50%;--status-size: .75rem;--status-border-width: 2px;width:var(--avatar-size);height:var(--avatar-size);position:relative;display:flex;align-items:center;justify-content:center;overflow:hidden;border-radius:var(--avatar-border-radius);background-color:var(--avatar-background);color:var(--avatar-color);&[size=xs]{--avatar-size: 1.5rem;--status-size: .5rem;--status-border-width: 1px}&[size=sm]{--avatar-size: 2rem;--status-size: .625rem;--status-border-width: 2px}&[size=md]{--avatar-size: 2.5rem;--status-size: .75rem}&[size=lg]{--avatar-size: 3.5rem;--status-size: 1rem}&[size=xl]{--avatar-size: 5rem;--status-size: 1.25rem;--status-border-width: 3px}&[shape=circle]{--avatar-border-radius: 50%}&[shape=square]{--avatar-border-radius: 0}&[shape=rounded]{--avatar-border-radius: var(--radius-md, .375rem)}img{width:100%;height:100%;object-fit:cover;border-radius:var(--avatar-border-radius)}}.uix-avatar__initials{font-size:calc(var(--avatar-size) / 2.5);font-weight:var(--font-semibold, 600);line-height:1;text-transform:uppercase;user-select:none;color:var(--avatar-color)}.uix-avatar__status{position:absolute;bottom:0;right:0;width:var(--status-size);height:var(--status-size);border-radius:50%;border:var(--status-border-width) solid var(--color-primary);box-sizing:border-box}.uix-avatar__status--online{background-color:var(--color-success)}.uix-avatar__status--offline{background-color:var(--color-muted)}.uix-avatar__status--busy{background-color:var(--color-danger)}.uix-avatar__status--away{background-color:var(--color-warning)}:where(.uix-navbar,uix-navbar){display:flex;&::part(container){display:flex;flex-grow:1;background-color:var(--navbar-background, var(--color-surface));border-bottom:1px solid var(--navbar-border-color, var(--color-primary));box-shadow:var(--navbar-shadow, none)}&::part(inner){display:flex;align-items:center;justify-content:space-between;flex:1;padding:var( --navbar-padding, var(--spacing-md, .75rem) var(--spacing-lg, 1rem) );max-width:var(--navbar-max-width, 100%);margin:0 auto}&::part(brand){display:flex;align-items:center;gap:var(--navbar-brand-gap, .75rem);font-size:var(--navbar-brand-font-size, var(--text-xl, 1.25rem));font-weight:var(--navbar-brand-font-weight, var(--font-bold, 700));color:var(--navbar-brand-color, var(--color-primary))}&::part(toggle){display:none;align-items:center;justify-content:center;width:2.5rem;height:2.5rem;padding:0;border:none;background:none;color:var(--navbar-toggle-color, var(--color-primary));cursor:pointer;border-radius:var(--radius-md);transition:background-color .2s ease;&:hover{background-color:var( --navbar-toggle-hover-background, var(--color-hover) )}}&::part(menu){display:flex;align-items:center;flex:1;gap:var(--navbar-menu-gap, 2rem);flex-direction:var(--flex-direction)}&::part(start),&::part(center),&::part(end){display:flex;align-items:center;gap:var(--navbar-items-gap, 1.5rem)}&::part(center){flex:1;justify-content:center}&::part(end){justify-content:flex-end}&[fixed=top]::part(container){position:fixed;top:0;left:0;right:0;z-index:1000}&[fixed=bottom]::part(container){position:fixed;bottom:0;left:0;right:0;z-index:1000}&[variant=bordered]::part(container){border-bottom-width:2px}&[variant=floating]::part(container){margin:var(--spacing-md, .75rem);border-radius:var(--radius-lg);border:1px solid var(--color-primary);box-shadow:0 2px 8px #0000001a}&[transparent]::part(container){background-color:transparent;border-bottom-color:transparent;box-shadow:none}&[direction=horizontal]::part(start){margin-left:var(--navbar-start-margin, 2rem)}&[direction=vertical]::part(inner){flex-direction:column}@media (max-width: 768px){&::part(toggle){display:flex}&::part(menu){position:fixed;top:calc(var(--navbar-height, 4rem));left:0;right:0;flex-direction:var(--flex-direction);align-items:stretch;background-color:var(--navbar-background, var(--color-surface));border-top:1px solid var(--navbar-border-color, var(--color-primary));padding:var(--spacing-md, .75rem);gap:0;max-height:0;overflow:hidden;transition:max-height .3s ease;&.active{max-height:calc(100vh - var(--navbar-height, 4rem))}}&::part(start),&::part(center),&::part(end){flex-direction:var(--flex-direction);align-items:stretch;gap:.5rem;margin:0}&::part(start){padding-bottom:var(--spacing-md, .75rem);border-bottom:1px solid var(--color-primary)}&::part(center){padding:var(--spacing-md, .75rem) 0;border-bottom:1px solid var(--color-primary)}&::part(end){padding-top:var(--spacing-md, .75rem)}}}:where(.uix-breadcrumbs,uix-breadcrumbs){display:block;.breadcrumbs{padding:0}.breadcrumbs-list{display:flex;align-items:center;gap:var(--breadcrumbs-gap, .5rem);list-style:none;margin:0;padding:0;flex-wrap:wrap}.breadcrumbs-item{display:flex;align-items:center;gap:var(--breadcrumbs-gap, .5rem);uix-link{color:var(--breadcrumbs-link-color, var(--text-muted, #6b7280));font-size:var(--breadcrumbs-font-size, var(--text-sm, .875rem));&:hover{color:var(--breadcrumbs-link-hover-color, var(--color-primary))}}.current{color:var(--breadcrumbs-current-color, var(--text-color));font-size:var(--breadcrumbs-font-size, var(--text-sm, .875rem));font-weight:var(--font-semibold, 600)}.separator{color:var(--breadcrumbs-separator-color, var(--text-muted, #9ca3af));font-size:var(--breadcrumbs-font-size, var(--text-sm, .875rem))}}&[size=sm]{--breadcrumbs-font-size: var(--text-xs, .75rem);--breadcrumbs-gap: .375rem}&[size=md]{--breadcrumbs-font-size: var(--text-sm, .875rem);--breadcrumbs-gap: .5rem}&[size=lg]{--breadcrumbs-font-size: var(--text-base, 1rem);--breadcrumbs-gap: .625rem}}.admin-model-list{padding:var(--admin-list-padding, 2rem)}.admin-model-list-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:var(--admin-list-header-margin, 1.5rem)}.admin-model-list-title{font-size:var(--admin-list-title-size, 1.875rem);font-weight:900;text-transform:uppercase;margin:0}.admin-model-list-count{color:var(--admin-list-count-color, #6b7280);margin:0}.admin-model-list-actions{display:flex;align-items:center;gap:var(--admin-list-actions-gap, 1rem)}.admin-view-toggle{display:flex;border:2px solid var(--admin-toggle-border, #000);border-radius:var(--admin-toggle-radius, .5rem);overflow:hidden}.admin-view-toggle uix-button{border-radius:0}.admin-dropdown-content{padding:var(--admin-dropdown-padding, .5rem);max-height:var(--admin-dropdown-max-height, 16rem);overflow-y:auto}.admin-dropdown-item{display:flex;align-items:center;gap:.5rem;width:100%;padding:var(--admin-dropdown-item-padding, .5rem .75rem);border:none;background:none;border-radius:var(--admin-dropdown-item-radius, .5rem);cursor:pointer;text-align:left;font-size:.875rem;transition:background-color .15s ease}.admin-dropdown-item:hover{background:var(--admin-dropdown-item-hover, #f3f4f6)}.admin-dropdown-item.active{background:var(--admin-dropdown-item-active, #f3f4f6);font-weight:700}.admin-model-list-search{margin-bottom:var(--admin-list-search-margin, 1.5rem);max-width:var(--admin-list-search-width, 28rem)}.admin-table-card{overflow:hidden}.admin-table-scroll{overflow-x:auto}.admin-table{width:100%;border-collapse:collapse}.admin-table thead{background:var(--admin-table-header-bg, #f3f4f6);border-bottom:3px solid var(--admin-table-border, #000)}.admin-table th{padding:var(--admin-table-cell-padding, .75rem 1rem);text-align:left;font-size:.875rem;font-weight:900;text-transform:uppercase;letter-spacing:.025em}.admin-table tbody tr{cursor:pointer;transition:background-color .15s ease;border-bottom:1px solid var(--admin-table-row-border, #e5e7eb)}.admin-table tbody tr:hover{background:var(--admin-table-row-hover, #f9fafb)}.admin-table td{padding:var(--admin-table-cell-padding, .75rem 1rem);font-size:.875rem}.admin-table-actions-col{text-align:right;width:1%;white-space:nowrap}.admin-table-empty{padding:var(--admin-table-empty-padding, 3rem);text-align:center;color:var(--admin-table-empty-color, #6b7280)}.admin-table-empty uix-icon{margin:0 auto 1rem;opacity:.5}.admin-table-empty-title{font-size:1.125rem;font-weight:500;margin:0 0 .25rem}.admin-table-empty-text{font-size:.875rem;margin:0}.admin-delete-confirm{display:flex;align-items:center;gap:1rem;margin-bottom:1rem}.admin-delete-icon{padding:.75rem;background:var(--admin-delete-icon-bg, #fee2e2);border-radius:9999px;color:var(--admin-delete-icon-color, #dc2626)}.admin-delete-title{font-weight:900;font-size:1.125rem;margin:0}.admin-delete-text{color:var(--admin-delete-text-color, #6b7280);font-size:.875rem;margin:0}.admin-modal-id{font-weight:400;color:var(--text-muted, #6b7280);font-size:.875em}.admin-modal-footer{display:flex;gap:1rem}.admin-modal-footer uix-button{flex:1}:where(.uix-link,uix-link){display:inline-flex;align-items:center;justify-content:var(--link-justify-content, center);width:var(--link-width, auto);flex-direction:var(--link-direction, row);gap:var(--link-gap, var(--spacing-xs, .25rem));box-sizing:border-box;font-family:inherit;font-size:var(--link-font-size, var(--text-sm, .875rem));font-weight:var(--link-font-weight, 600);line-height:var(--link-line-height, 1.5);text-decoration:var(--link-text-decoration, none);color:var(--link-color, var(--text-color, inherit));cursor:pointer;&[vertical]::part(anchor){display:flex;flex-direction:column}&::part(anchor){display:inline-flex;align-items:center;justify-content:var(--link-justify-content, left);width:100%;height:100%;gap:var(--link-gap, var(--spacing-xs, .25rem));flex-direction:var(--link-direction, row);padding:var(--link-padding-y, var(--spacing-sm, .5rem)) var(--link-padding-x, var(--spacing-md, .75rem));font-family:inherit;font-size:inherit;font-weight:inherit;line-height:inherit;text-decoration:var(--link-text-decoration, none);color:inherit;cursor:pointer;transition:var( --link-transition, color .2s ease, opacity .2s ease, transform .1s ease );&:hover{color:var(--link-hover-color, var(--link-color));text-decoration:var( --link-hover-text-decoration, var(--link-text-decoration, none) );opacity:var(--link-hover-opacity, .9)}&:active{color:var(--link-active-color, var(--link-color));transform:var(--link-active-transform, scale(.98))}&:focus-visible{outline:2px solid var(--color-primary-dark, #d79921);outline-offset:2px}&:visited{color:var(--link-visited-color, var(--link-color))}&[disabled],&[aria-disabled=true]{opacity:var(--link-disabled-opacity, .5);cursor:not-allowed;pointer-events:none}}&::part(icon){display:inline-flex;align-items:center;justify-content:center;width:var(--link-icon-size, 1.25rem);height:var(--link-icon-size, 1.25rem);color:var(--link-icon-color, currentColor);flex-shrink:0}&[underline]{--link-text-decoration: underline}&[underline=hover]{--link-text-decoration: none;--link-hover-text-decoration: underline}&[variant=primary]{--link-color: var(--color-primary);--link-hover-color: var(--color-primary-dark);--link-active-color: var(--color-primary-darker)}&[variant=secondary]{--link-color: var(--color-secondary);--link-hover-color: var(--color-secondary-dark);--link-active-color: var(--color-secondary-darker)}&[variant=muted]{--link-color: var(--text-muted);--link-hover-color: var(--text-color)}&[size=xs]{--link-font-size: var(--text-xs, .75rem);--link-padding-y: .2rem;--link-padding-x: .4rem;--link-gap: .125rem;--link-icon-size: .75em}&[size=sm]{--link-font-size: var(--text-sm, .875rem);--link-padding-y: .25rem;--link-padding-x: .5rem;--link-gap: .25rem;--link-icon-size: .875em}&[size=md]{--link-font-size: var(--text-base, 1rem);--link-padding-y: .5rem;--link-padding-x: .75rem;--link-gap: .375rem;--link-icon-size: 1em}&[size=lg]{--link-font-size: var(--text-lg, 1.125rem);--link-padding-y: .75rem;--link-padding-x: 1rem;--link-gap: .5rem;--link-icon-size: 1.125em}&[size=xl]{--link-font-size: var(--text-xl, 1.25rem);--link-padding-y: 1rem;--link-padding-x: 1.25rem;--link-gap: .625rem;--link-icon-size: 1.25em}&[compact]{--link-padding-x: 0;--link-padding-y: 0}&[w-full],&[wfull]{width:100%;display:flex}}:where(.uix-icon,uix-icon){display:inline-block;vertical-align:middle;--icon-size: calc(var(--spacing, .25rem) * 4);width:var(--icon-size);height:var(--icon-size);svg{height:inherit;width:inherit}&[solid]{stroke:currentColor;fill:currentColor}&[color=primary]{color:var(--color-primary)}&[color=secondary]{color:var(--color-secondary)}&[color=success]{color:var(--color-success)}&[color=danger]{color:var(--color-danger)}&[color=warning]{color:var(--color-warning)}&[color=info]{color:var(--color-info)}&[color=inverse]{color:var(--color-inverse)}&[size=xs]{--icon-size: calc(var(--spacing, .25rem) * 3)}&[size=sm]{--icon-size: calc(var(--spacing, .25rem) * 4)}&[size=md]{--icon-size: calc(var(--spacing, .25rem) * 6)}&[size=lg]{--icon-size: calc(var(--spacing, .25rem) * 10)}&[size=xl]{--icon-size: calc(var(--spacing, .25rem) * 14)}&[size="2xl"]{--icon-size: calc(var(--spacing, .25rem) * 24)}&[size="3xl"]{--icon-size: calc(var(--spacing, .25rem) * 36)}&[size="4xl"]{--icon-size: calc(var(--spacing, .25rem) * 48)}}:where(.uix-button,uix-button){display:inline-flex;align-items:center;justify-content:center;width:var(--button-width, fit-content);white-space:nowrap;box-sizing:border-box;&::part(anchor){border:0;background:transparent;color:var(--button-color, var(--text-color, inherit));text-decoration:none;display:flex;align-items:center;justify-content:center;width:100%;height:100%;font-family:inherit;font-size:inherit;line-height:inherit;padding:var(--button-padding-y, .5rem) var(--button-padding-x, 1rem)}font-family:inherit;font-weight:var(--button-font-weight, 700);font-size:var(--button-font-size, .875rem);line-height:var(--button-line-height, 1.5);text-align:center;gap:var(--button-gap, .5rem);border-radius:var(--button-border-radius, var(--radius-md, .375rem));border:var(--button-border-size, 0) solid var(--button-border-color, transparent);box-shadow:var(--button-shadow, none);text-decoration:none;padding:var(--spacing-sm, .5rem) var(--spacing-md, .75rem);cursor:pointer;text-transform:var(--button-text-transform, none);transition:var( --button-transition, transform .1s ease-in-out, background-color .2s ease-in-out, border-color .2s ease-in-out, box-shadow .15s ease-in-out, color .2s ease-in-out );background:transparent;user-select:none;background-color:var(--button-background, #000);color:var(--button-color, #fff);&:focus-visible{outline:2px solid var(--color-primary-dark);outline-offset:2px}&:not([disabled]):not([aria-disabled=true]):hover{background-color:var(--button-hover-background, var(--color-primary-dark));border-color:var( --button-hover-border-color, var(--button-border-color, transparent) );color:var(--button-hover-color, var(--button-color));box-shadow:var(--button-hover-shadow, var(--button-shadow, none));transform:translate(var(--button-hover-translate-x, 0),var(--button-hover-translate-y, 0))}&:not([disabled]):not([aria-disabled=true]):active{background-color:var( --button-active-background, var(--color-primary-darker) );box-shadow:var(--button-active-shadow, var(--button-shadow, none));transform:translate(var(--button-active-translate-x, 0),var(--button-active-translate-y, 0)) scale(.97)}&:not([variant],[primary],[secondary],[danger],[success],[warning]){--button-color: #fff;--button-background: #000;--button-border-color: #000;--button-hover-background: #222;--button-active-background: #222}&[primary],&[variant=primary]{--button-background: var(--color-primary);--button-border-color: var(--color-primary);--button-hover-background: var(--color-primary-dark);--button-active-background: var(--color-primary-darker)}&[secondary],&[variant=secondary]{--button-background: var(--color-secondary);--button-border-color: var(--color-secondary);--button-hover-background: var(--color-secondary-dark);--button-active-background: var(--color-secondary-darker)}&[danger],&[variant=danger]{--button-background: var(--color-danger);--button-border-color: var(--color-danger);--button-hover-background: var(--color-danger-dark);--button-active-background: var(--color-danger-darker)}&[success],&[variant=success]{--button-background: var(--color-success);--button-border-color: var(--color-success);--button-hover-background: var(--color-success-dark);--button-active-background: var(--color-success-darker)}&[warning],&[variant=warning]{--button-background: var(--color-warning);--button-border-color: var(--color-warning);--button-hover-background: var(--color-warning-dark);--button-active-background: var(--color-warning-darker)}&[bordered]{--button-border-size: 1px}&[outline]{--button-background: transparent;--button-border-size: 1px;--button-color: var(--text-color);--button-hover-color: var(--color-surface-lighter);&[primary]{--button-border-color: var(--color-primary-dark);--button-hover-background: var(--color-primary);--button-hover-border-color: var(--color-primary)}&[secondary]{--button-border-color: var(--color-secondary-dark);--button-hover-background: var(--color-secondary);--button-hover-border-color: var(--color-secondary)}&[danger]{--button-border-color: var(--color-danger-dark);--button-hover-background: var(--color-danger);--button-hover-border-color: var(--color-danger)}&[success]{--button-border-color: var(--color-success-dark);--button-hover-background: var(--color-success);--button-hover-border-color: var(--color-success)}}&[ghost]{--button-background: transparent;--button-border-color: transparent;--button-color: var(--text-color);--button-hover-background: var(--color-surface-light);--button-hover-color: var(--text-color);&[primary]{--button-hover-background: color-mix( in srgb, var(--color-primary), transparent 85% );--button-hover-color: var(--color-primary-darker)}&[secondary]{--button-hover-background: color-mix( in srgb, var(--color-secondary), transparent 85% );--button-hover-color: var(--color-secondary-darker)}&[danger]{--button-hover-background: color-mix( in srgb, var(--color-danger), transparent 85% );--button-hover-color: var(--color-danger-darker)}&[success]{--button-hover-background: color-mix( in srgb, var(--color-success), transparent 85% );--button-hover-color: var(--color-success-darker)}}&[size=xs]{--button-padding-y: .2rem;--button-padding-x: .5rem;--button-font-size: .6rem;--button-line-height: 1rem;--button-gap: .25rem}&[size=sm]{--button-padding-y: .3rem;--button-padding-x: .8rem;--button-font-size: .8rem;--button-line-height: 1.25rem;--button-gap: .375rem}&[size=md]{--button-padding-y: .4rem;--button-padding-x: 1.25rem;--button-font-size: .9rem;--button-line-height: 1.5rem;--button-gap: .5rem}&[size=lg]{--button-padding-y: .5rem;--button-padding-x: 1.5rem;--button-font-size: 1.1rem;--button-line-height: 1.75rem;--button-gap: .625rem}&[size=xl]{--button-padding-y: .625rem;--button-padding-x: 2rem;--button-font-size: 1.25rem;--button-line-height: 2rem;--button-gap: .75rem}&[w-full],&[wfull]{width:100%;display:flex}}:where(.uix-modal,uix-modal){display:inline-block;&::part(dialog){background:var(--modal-background, #ffffff);border:var(--modal-border-width, 1px) solid var(--modal-border-color, #e5e7eb);border-radius:var(--modal-border-radius, .75rem);box-shadow:var(--modal-shadow, 0 25px 50px -12px rgb(0 0 0 / .25));padding:0;width:var(--modal-width, 90vw);max-width:var(--modal-max-width, 600px);color:var(--modal-color, #1a1a1a);&::backdrop{background:var(--modal-overlay, rgba(0, 0, 0, .5));backdrop-filter:blur(2px)}}&[size=sm]{--modal-max-width: 400px}&[size=md]{--modal-max-width: 600px}&[size=lg]{--modal-max-width: 800px}&[size=xl]{--modal-max-width: 1000px}@media (max-width: 639px){&::part(dialog){width:100%;max-width:100%;height:100%;max-height:100%;margin:0;border-radius:0;border:none;box-shadow:none}&::part(body){max-height:none;flex:1;overflow-y:auto}}&::part(header){display:flex;align-items:center;justify-content:space-between;padding:var(--modal-header-padding, 1.25rem 1.5rem);border-bottom:var(--modal-header-border-width, 1px) solid var(--modal-border-color, #e5e7eb);background:var(--modal-header-background, transparent);font-size:var(--modal-header-font-size, 1.125rem);font-weight:var(--modal-header-font-weight, 700);color:var(--modal-header-color, #1a1a1a);&:empty{display:none}}&::part(close-button){display:flex;align-items:center;justify-content:center;width:2rem;height:2rem;padding:0;border:none;background:transparent;color:var(--modal-close-color, #6b7280);cursor:pointer;border-radius:.375rem;transition:background-color .15s,color .15s;flex-shrink:0;&:hover{background:var(--modal-close-hover-bg, #f3f4f6);color:var(--modal-close-hover-color, #1a1a1a)}}&::part(body){padding:var(--modal-body-padding, 1.5rem);color:var(--modal-body-color, #4b5563);font-size:var(--text-base, 1rem);line-height:1.5;overflow-y:auto;max-height:60vh}&::part(footer),[slot=footer]{padding:var(--modal-footer-padding, 1rem 1.5rem);border-top:var(--modal-footer-border-width, 1px) solid var(--modal-border-color, #e5e7eb);background:var(--modal-footer-background, #f9fafb);&:empty{display:none}}[slot=trigger]{cursor:pointer}[slot=footer]{display:flex;gap:.75rem;justify-content:flex-end;align-items:center}}:where(.uix-input,uix-input){display:inline-block;width:var(--input-width, auto);box-sizing:border-box;.input-label{display:block;font-size:var(--input-label-font-size, var(--text-sm, .875rem));font-weight:var(--input-label-font-weight, var(--font-semibold, 600));margin-bottom:var(--input-label-margin, .5rem);color:var(--input-label-color, var(--text-color, #1a1a1a));letter-spacing:var(--input-label-letter-spacing, 0);text-transform:var(--input-label-text-transform, none)}.input-required{color:var(--color-danger, #ef4444);margin-left:.25rem}input{width:100%;height:var(--input-height, 3rem);padding:var(--input-padding-y, .5rem) var(--input-padding-x, .75rem);font-size:var(--input-font-size, var(--text-sm, .9rem));font-weight:var(--input-font-weight, var(--font-normal, 400));line-height:var(--input-line-height, 1.5rem);font-family:inherit;color:var(--input-color, var(--text-color, inherit));box-sizing:border-box;background:var(--input-background, var(--color-surface-light, #ffffff));border:var(--input-border-width, 1px) solid var(--input-border-color, var(--color-surface, #e5e7eb));border-radius:var(--input-border-radius, var(--radius-md, .375rem));box-shadow:var(--input-shadow, none);outline:none;transition:var( --input-transition, border-color .2s ease, background-color .2s ease, box-shadow .15s ease );&::placeholder{color:var(--input-placeholder-color, var(--text-muted, #9ca3af));opacity:1}&:hover:not(:focus):not(:disabled){border-color:var(--input-hover-border-color, var(--color-primary-light))}&:focus{border-color:var(--input-focus-border-color, var(--color-primary));background:var(--input-focus-background, var(--input-background));box-shadow:var(--input-focus-shadow, 0 0 0 3px rgba(250, 189, 47, .1))}&:disabled{opacity:var(--input-disabled-opacity, .6);background:var(--input-disabled-background, var(--color-surface-dark));color:var(--input-disabled-color, var(--text-muted));cursor:not-allowed}&:read-only{background:var(--input-readonly-background, var(--color-surface-dark));cursor:default}}&[size=xs]{--input-height: 1.5rem;--input-padding-y: .2rem;--input-padding-x: .5rem;--input-font-size: var(--text-xs, .75rem);--input-line-height: 1rem;--input-icon-size: .75rem}&[size=sm]{--input-height: 2rem;--input-padding-y: .3rem;--input-padding-x: .6rem;--input-font-size: var(--text-sm, .875rem);--input-line-height: 1.25rem;--input-icon-size: .875rem}&[size=md]{--input-height: 2.5rem;--input-padding-y: .5rem;--input-padding-x: .75rem;--input-font-size: var(--text-base, 1rem);--input-line-height: 1.5rem;--input-icon-size: 1rem}&[size=lg]{--input-height: 3rem;--input-padding-y: .625rem;--input-padding-x: 1rem;--input-font-size: var(--text-lg, 1.125rem);--input-line-height: 1.75rem;--input-icon-size: 1.25rem}&[size=xl]{--input-height: 3.5rem;--input-padding-y: .75rem;--input-padding-x: 1.25rem;--input-font-size: var(--text-xl, 1.25rem);--input-line-height: 2rem;--input-icon-size: 1.5rem}&[required] input{border-left:3px solid var(--input-required-color, var(--color-warning))}&[error]{--input-border-color: var(--color-danger);--input-focus-border-color: var(--color-danger);--input-focus-shadow: 0 0 0 3px rgba(251, 73, 52, .1)}&[success]{--input-border-color: var(--color-success);--input-focus-border-color: var(--color-success);--input-focus-shadow: 0 0 0 3px rgba(34, 197, 94, .1)}&[variant=primary]{--input-border-color: var(--color-primary);--input-focus-border-color: var(--color-primary)}&[variant=secondary]{--input-border-color: var(--color-secondary);--input-focus-border-color: var(--color-secondary)}&[variant=success]{--input-border-color: var(--color-success);--input-focus-border-color: var(--color-success);--input-focus-shadow: 0 0 0 3px rgba(34, 197, 94, .1)}&[variant=warning]{--input-border-color: var(--color-warning);--input-focus-border-color: var(--color-warning);--input-focus-shadow: 0 0 0 3px rgba(249, 115, 22, .1)}&[variant=error]{--input-border-color: var(--color-danger);--input-focus-border-color: var(--color-danger);--input-focus-shadow: 0 0 0 3px rgba(251, 73, 52, .1)}&[w-full],&[wfull]{width:100%;display:block}&:has(.uix-icon){position:relative;.uix-icon{position:absolute;top:50%;transform:translateY(-50%);right:var(--input-icon-offset, .75rem);width:var(--input-icon-size, 1rem);height:var(--input-icon-size, 1rem);color:var(--input-icon-color, var(--text-muted));pointer-events:none}input{padding-right:calc(var(--input-icon-size, 1rem) + var(--input-icon-offset, .75rem) * 2)}}&:has(.uix-icon[left]){.uix-icon{left:var(--input-icon-offset, .75rem);right:auto}input{padding-left:calc(var(--input-icon-size, 1rem) + var(--input-icon-offset, .75rem) * 2);padding-right:var(--input-padding-x, .75rem)}}}:where(.uix-checkbox,uix-checkbox){display:inline-flex;align-items:center;gap:var(--checkbox-gap, .5rem);&:has(.checkbox:disabled){cursor:not-allowed;opacity:.6}.checkbox{appearance:none;width:var(--checkbox-size, 1.5rem);height:var(--checkbox-size, 1.5rem);border:var(--checkbox-border-width, 2px) solid var(--checkbox-border-color, var(--color-primary));border-radius:var(--checkbox-border-radius, var(--radius-md, .375rem));background-color:var(--checkbox-background-color, var(--color-surface));box-shadow:var(--checkbox-shadow, none);cursor:pointer;transition:background-color .2s ease,border-color .2s ease,box-shadow .2s ease,transform .1s ease;position:relative;flex-shrink:0;&:hover:not(:disabled){border-color:var(--checkbox-hover-border-color, var(--color-primary))}&:checked{background-color:var(--checkbox-checked-background-color, var(--color-primary));border-color:var(--checkbox-checked-border-color, var(--color-primary));&:after{content:"";position:absolute;left:30%;top:10%;width:30%;height:60%;border:solid white;border-width:0 2px 2px 0;transform:rotate(45deg)}}&:indeterminate{background-color:var(--checkbox-checked-background-color, var(--color-primary));border-color:var(--checkbox-checked-border-color, var(--color-primary));&:after{content:"";position:absolute;left:20%;top:45%;width:60%;height:2px;background-color:#fff}}&:focus-visible{outline:2px solid var(--checkbox-focus-outline-color, var(--color-primary));outline-offset:2px}&:disabled{cursor:not-allowed;background-color:var(--checkbox-disabled-background-color, var(--color-subtle))}}.checkbox-label{color:var(--checkbox-label-color, var(--text-color));font-size:var(--checkbox-label-font-size, var(--text-base, 1rem));font-weight:var(--checkbox-label-font-weight, var(--font-medium, 500));line-height:var(--leading-normal, 1.5);cursor:pointer;user-select:none}.checkbox-required{color:var(--color-danger, #ef4444);margin-left:.25rem}&[size=xs]{--checkbox-size: 1rem;--checkbox-label-font-size: var(--text-xs, .75rem);--checkbox-gap: .375rem}&[size=sm]{--checkbox-size: 1.25rem;--checkbox-label-font-size: var(--text-sm, .875rem);--checkbox-gap: .5rem}&[size=md]{--checkbox-size: 1.5rem;--checkbox-label-font-size: var(--text-base, 1rem);--checkbox-gap: .5rem}&[size=lg]{--checkbox-size: 1.75rem;--checkbox-label-font-size: var(--text-lg, 1.125rem);--checkbox-gap: .625rem}&[size=xl]{--checkbox-size: 2rem;--checkbox-label-font-size: var(--text-xl, 1.25rem);--checkbox-gap: .75rem}&[variant=primary] .checkbox:checked,&[variant=primary] .checkbox:indeterminate{--checkbox-checked-background-color: var(--color-primary);--checkbox-checked-border-color: var(--color-primary)}&[variant=secondary] .checkbox:checked,&[variant=secondary] .checkbox:indeterminate{--checkbox-checked-background-color: var(--color-secondary);--checkbox-checked-border-color: var(--color-secondary)}&[variant=success] .checkbox:checked,&[variant=success] .checkbox:indeterminate{--checkbox-checked-background-color: var(--color-success);--checkbox-checked-border-color: var(--color-success)}&[variant=warning] .checkbox:checked,&[variant=warning] .checkbox:indeterminate{--checkbox-checked-background-color: var(--color-warning);--checkbox-checked-border-color: var(--color-warning)}&[variant=error] .checkbox:checked,&[variant=error] .checkbox:indeterminate{--checkbox-checked-background-color: var(--color-danger);--checkbox-checked-border-color: var(--color-danger)}}.admin-export-options{padding:var(--admin-export-options-padding, .25rem)}.admin-export-option{display:block;width:100%;padding:var(--admin-export-option-padding, .5rem 1rem);border:none;background:none;text-align:left;cursor:pointer;transition:background-color .15s ease}.admin-export-option:hover{background:var(--admin-export-option-hover, #f3f4f6)}.admin-export-option:first-child{border-radius:.5rem .5rem 0 0}.admin-export-option:last-child{border-radius:0 0 .5rem .5rem}.admin-import-options{padding:var(--admin-import-options-padding, .25rem)}.admin-import-option{display:block;padding:var(--admin-import-option-padding, .5rem 1rem);cursor:pointer;transition:background-color .15s ease}.admin-import-option:hover{background:var(--admin-import-option-hover, #f3f4f6)}.admin-import-option:first-child{border-radius:.5rem .5rem 0 0}.admin-import-option:last-child{border-radius:0 0 .5rem .5rem}.admin-import-file-input{display:none}.admin-import-content{margin-bottom:var(--admin-import-content-margin, 1rem)}.admin-import-mapping{margin-bottom:var(--admin-import-mapping-margin, 1.5rem)}.admin-import-mapping-title{font-weight:700;margin:0 0 1rem}.admin-import-mapping-list{display:flex;flex-direction:column;gap:var(--admin-import-mapping-gap, 1rem)}.admin-import-mapping-row{display:flex;align-items:center;gap:var(--admin-import-mapping-row-gap, 1rem)}.admin-import-field-name{width:var(--admin-import-field-name-width, 8rem);font-weight:500}.admin-import-arrow{color:var(--admin-import-arrow-color, #9ca3af)}.admin-import-mapping-row uix-select{flex:1}.admin-import-preview{margin-bottom:var(--admin-import-preview-margin, 1.5rem)}.admin-import-preview-title{font-weight:700;margin:0 0 .5rem}.admin-import-preview-code{padding:var(--admin-import-preview-code-padding, 1rem);background:var(--admin-import-preview-code-bg, #f3f4f6);border-radius:var(--admin-import-preview-code-radius, .75rem);font-size:.875rem;overflow-x:auto;max-height:var(--admin-import-preview-max-height, 16rem);margin:0}.admin-import-preview-more{font-size:.875rem;color:var(--admin-import-preview-more-color, #6b7280);margin:.5rem 0 0}.admin-import-footer{display:flex;justify-content:flex-end;gap:var(--admin-import-footer-gap, 1rem)}:where(.uix-data-table,uix-data-table){display:block;width:var(--data-table-width, 100%);uix-pagination{margin-top:var(--data-table-pagination-margin, 1rem);justify-content:var(--data-table-pagination-justify, flex-end)}}.uix-data-table__empty{padding:var(--data-table-empty-padding, 2rem);text-align:center;color:var(--data-table-empty-color, #6b7280)}:where(.uix-popover-controller,uix-popover-controller){position:fixed;z-index:10000;display:none;&[data-open]{display:flex;flex-direction:column}}:where(.uix-dropdown,uix-dropdown){&[data-open]{display:flex;flex-direction:column;min-width:var(--dropdown-min-width, 200px);max-width:var(--dropdown-max-width, 400px);background:var(--color-surface-darker, #282828);color:var(--text-color, default);padding:var(--spacing-xs, .25rem);gap:2px}&[variant=elevated][data-open]{background:var(--color-surface-light, #3c3836)}&[variant=primary][data-open]{background:var(--color-primary, #fabd2f);color:var(--color-surface-darker, #282828)}&[variant=card][data-open]{background:var(--color-surface-dark, #32302f)}&[rounded][data-open]{border-radius:var(--radius-md, .375rem)}&[bordered][data-open]{border:1px solid var(--color-surface, #504945)}&[shadow][data-open]{box-shadow:0 8px 16px #0000004d,0 2px 4px #0003}>*{padding:var(--spacing-sm, .5rem) var(--spacing-md, .75rem);color:inherit;text-decoration:none;display:block;border-radius:var(--radius-sm, .25rem);transition:background-color .15s ease,color .15s ease;cursor:pointer;white-space:nowrap;font-size:var(--text-sm, .875rem);line-height:1.5;&:hover{background-color:var( --color-surface-dark, rgba(255, 255, 255, .1) )}&:focus{background-color:var( --color-surface-dark, rgba(255, 255, 255, .1) );outline:2px solid var(--color-primary, #fabd2f);outline-offset:-2px}&:active{background-color:var(--color-primary, #fabd2f);color:var(--color-surface-darker, #282828)}&:disabled,&[disabled]{opacity:.5;cursor:not-allowed;pointer-events:none}uix-icon{margin-right:var(--spacing-xs, .25rem);vertical-align:middle}>*{pointer-events:none}}>hr{border:none;border-top:1px solid var(--color-surface-dark, rgba(80, 73, 69, .5));margin:var(--spacing-xs, .25rem) 0;padding:0}>.dropdown-header,>[role=heading]{padding:var(--spacing-xs, .25rem) var(--spacing-md, .75rem);font-size:var(--text-xs, .75rem);font-weight:600;color:var(--text-muted, #a89984);text-transform:uppercase;letter-spacing:.05em;cursor:default;&:hover{background-color:transparent}}}:where(.uix-table,uix-table){display:block;width:100%;table{width:100%;border-collapse:separate;border-spacing:0;border:var(--table-border-width, 1px) solid var(--table-border-color, #e5e7eb);border-radius:var(--table-border-radius, .5rem);box-shadow:var(--table-shadow, none);overflow:hidden}thead{background-color:var(--table-header-background, #f9fafb)}th{padding:var(--table-cell-padding, 1rem);text-align:left;font-weight:var(--table-header-font-weight, 600);font-size:var(--table-header-font-size, .75rem);text-transform:var(--table-header-text-transform, uppercase);color:var(--table-header-color, #374151);letter-spacing:.05em;border-bottom:var(--table-border-width, 1px) solid var(--table-border-color, #e5e7eb)}tbody tr{background-color:var(--table-row-background, #ffffff);transition:background-color .15s ease}tbody tr:hover{background-color:var(--table-row-hover-background, #f3f4f6)}tbody tr.clickable{cursor:pointer}td{padding:var(--table-cell-padding, 1rem);font-size:var(--table-cell-font-size, .875rem);color:var(--table-cell-color, #4b5563);border-bottom:1px solid var(--table-border-color, #e5e7eb)}tbody tr:last-child td{border-bottom:none}}.bundler-ui{display:flex;flex-direction:column;gap:1.5rem;padding:1.5rem;min-height:100%}.bundler-page-title{font-size:2rem;font-weight:800;color:var(--text-color, #111);margin:0}.bundler-tab-content{display:flex;flex-direction:column;gap:1.5rem}.bundler-deploy-content{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem}@media (max-width: 1024px){.bundler-deploy-content{grid-template-columns:1fr}}.bundler-credentials-content{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem}@media (max-width: 1024px){.bundler-credentials-content{grid-template-columns:1fr}}.bundler-dashboard{display:flex;flex-direction:column;gap:1.5rem}.bundler-stats-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem}@media (max-width: 1024px){.bundler-stats-grid{grid-template-columns:repeat(2,1fr)}}@media (max-width: 640px){.bundler-stats-grid{grid-template-columns:1fr}}.bundler-quick-actions{display:flex;gap:1rem;flex-wrap:wrap}.bundler-form{display:flex;flex-direction:column;gap:1rem}.bundler-form-grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem}@media (max-width: 640px){.bundler-form-grid{grid-template-columns:1fr}}.bundler-full-width{grid-column:span 2}@media (max-width: 640px){.bundler-full-width{grid-column:span 1}}.bundler-deploy-row{display:flex;align-items:flex-end;gap:1rem;margin-top:1rem}.bundler-deploy-row uix-select{flex:1}.bundler-help-text{font-size:.875rem;color:var(--text-muted, #6b7280);margin:.5rem 0 0}.bundler-loading{text-align:center;padding:1rem;color:var(--text-muted, #6b7280)}.bundler-empty{text-align:center;padding:1rem;color:var(--text-muted, #6b7280);margin:0}.bundler-releases{display:flex;flex-direction:column;gap:.75rem}.bundler-release{padding:.75rem;border-radius:var(--radius-md, .375rem)}.bundler-release-success{background:var(--color-success-lighter, #d1fae5)}.bundler-release-failed{background:var(--color-danger-lighter, #fee2e2)}.bundler-release-pending{background:var(--color-warning-lighter, #fef3c7)}.bundler-release-row{display:flex;align-items:center;gap:.75rem;flex-wrap:wrap}.bundler-release-version{font-weight:600;color:var(--text-color, #111)}.bundler-release-status{font-size:.875rem}.bundler-release-type{font-size:.75rem;font-family:monospace;padding:.125rem .5rem;background:var(--color-surface, #fff);border-radius:var(--radius-sm, .25rem);color:var(--text-muted, #6b7280)}.bundler-release-date{font-size:.875rem;color:var(--text-muted, #6b7280);margin-left:auto}.bundler-release-notes{font-size:.875rem;color:var(--text-color, #374151);margin:.5rem 0 0}:where(.uix-tabs,uix-tabs){display:flex;flex-direction:column;width:100%;border:var(--tabs-border-width, 0) solid var(--tabs-border-color, transparent);border-radius:var(--tabs-border-radius, 0);box-shadow:var(--tabs-shadow, none);background:var(--tabs-background, transparent);overflow:hidden;&::part(tab-list){display:flex;flex-direction:row;background:var(--tabs-list-background, transparent);border-bottom:1px solid var(--tabs-list-border-color, var(--color-surface-dark));overflow-x:auto;scrollbar-width:none;flex-shrink:0}[slot=tab]{flex:1;display:flex;align-items:center;justify-content:center;white-space:nowrap;cursor:pointer;position:relative;gap:var(--tabs-tab-gap, var(--spacing-xs, .25rem));padding:var(--tabs-tab-padding, var(--spacing-md, .75rem) var(--spacing-lg, 1rem));font-family:inherit;font-size:var(--tabs-tab-font-size, var(--text-sm, .875rem));font-weight:var(--tabs-tab-font-weight, var(--font-medium, 500));text-transform:var(--tabs-tab-text-transform, none);letter-spacing:var(--tabs-tab-letter-spacing, normal);color:var(--tabs-tab-color, var(--text-muted));background:var(--tabs-tab-background, transparent);border:none;border-bottom:var(--tabs-tab-border-width, 2px) solid transparent;outline:none;transition:color .2s ease,background-color .2s ease,border-color .2s ease;&:hover{color:var(--tabs-tab-color-hover, var(--color-primary-light));background:var(--tabs-tab-background-hover, var(--color-surface-dark))}&:focus-visible{background:var(--tabs-tab-background-hover, var(--color-surface-dark))}&[active]{color:var(--tabs-tab-color-active, var(--text-color));background:var(--tabs-tab-background-active, transparent);border-bottom-color:var(--tabs-tab-border-active, var(--color-primary))}&[disabled]{opacity:.5;cursor:not-allowed;pointer-events:none}}&::part(tab-panel){display:flex;width:100%;min-height:0;overflow-y:auto;background:var(--tabs-panel-background, transparent)}[slot=panel]{min-height:0;overflow-y:auto;padding:var(--tabs-panel-padding, var(--spacing-lg, 1rem));flex-grow:1;animation:fadeIn .2s ease-in-out;&[hide]{display:none}}&[vertical]{flex-direction:row;height:100%;&::part(tab-list){flex-direction:column;border-bottom:none;border-right:1px solid var(--tabs-list-border-color, var(--color-surface-dark));min-width:150px}[slot=tab]{justify-content:flex-start;border-bottom:none;border-right:var(--tabs-tab-border-width, 2px) solid transparent;&[active]{border-color:transparent;border-right-color:var(--tabs-tab-border-active, var(--color-primary))}}}}@keyframes fadeIn{0%{opacity:0;transform:translateY(2px)}to{opacity:1;transform:translateY(0)}}:where(.uix-stat,uix-stat){display:inline-flex;align-items:flex-start;gap:var(--spacing-md, .75rem);padding:var(--spacing-lg, 1rem);position:relative;&::part(figure){display:flex;align-items:center;justify-content:center;flex-shrink:0;order:1;&:empty{display:none}}&::part(body){display:flex;flex-direction:column;gap:var(--spacing-xs, .25rem);flex:1;min-width:0}&::part(title){font-size:var(--text-sm, .875rem);font-weight:var(--font-normal, 400);color:var(--text-color);opacity:.7;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}&::part(value){font-size:var(--text-3xl, 1.875rem);font-weight:var(--font-extrabold, 800);color:var(--text-color);line-height:var(--leading-tight, 1.2);white-space:nowrap}&::part(desc){font-size:var(--text-sm, .875rem);color:var(--text-color);opacity:.6;&:empty{display:none}}&[size=sm]{&::part(value){font-size:var(--text-xl, 1.25rem)}&::part(title),&::part(desc){font-size:var(--text-xs, .75rem)}}&[size=lg]{&::part(value){font-size:var(--text-5xl, 3rem)}&::part(title),&::part(desc){font-size:var(--text-base, 1rem)}}&[variant=primary]::part(value){color:var(--color-primary)}&[variant=secondary]::part(value){color:var(--color-secondary)}&[variant=success]::part(value){color:var(--color-success)}&[variant=danger]::part(value){color:var(--color-danger)}&[variant=warning]::part(value){color:var(--color-warning)}&[variant=info]::part(value){color:var(--color-info)}&[centered]{flex-direction:column;align-items:center;text-align:center;justify-content:center;&::part(figure){order:0;margin-bottom:var(--spacing-sm, .5rem)}&::part(body){align-items:center}::slotted([slot="figure"]){width:2.5rem;height:2.5rem}}}:where(.uix-join){>uix-stat{flex:1;position:relative;border-radius:0}&:not([orientation=vertical])>uix-stat+uix-stat:before{content:"";position:absolute;left:0;top:15%;height:70%;border-left:1px solid var(--color-surface-dark, rgba(255, 255, 255, .1))}&[orientation=vertical]>uix-stat+uix-stat:before{content:"";position:absolute;top:0;left:15%;width:70%;border-top:1px solid var(--color-surface-dark, rgba(255, 255, 255, .1))}>uix-stat+uix-stat{margin-left:0;margin-top:0}}:where(.uix-textarea,uix-textarea){display:inline-block;width:var(--textarea-width, 100%);box-sizing:border-box;.textarea-label{display:block;font-size:var(--input-label-font-size, var(--text-sm, .875rem));font-weight:var(--input-label-font-weight, var(--font-semibold, 600));margin-bottom:var(--input-label-margin, .5rem);color:var(--input-label-color, var(--text-color, #1a1a1a));letter-spacing:var(--input-label-letter-spacing, 0);text-transform:var(--input-label-text-transform, none)}.textarea-required{color:var(--color-danger, #ef4444);margin-left:.25rem}textarea{width:100%;min-height:var(--textarea-min-height, 6rem);padding:var(--input-padding-y, .5rem) var(--input-padding-x, .75rem);box-sizing:border-box;background:var(--input-background, var(--color-surface-light, #ffffff));border:var(--input-border-width, 1px) solid var(--input-border-color, var(--color-surface, #e5e7eb));border-radius:var(--input-border-radius, var(--radius-md, .375rem));box-shadow:var(--input-shadow, none);transition:var( --input-transition, border-color .2s ease, background-color .2s ease, box-shadow .15s ease );font-size:var(--input-font-size, var(--text-sm, .9rem));font-weight:var(--input-font-weight, var(--font-normal, 400));line-height:var(--textarea-line-height, var(--leading-normal, 1.5));font-family:inherit;color:var(--input-text, var(--input-color, var(--text-color, inherit)));outline:none;resize:var(--textarea-resize, vertical);&::placeholder{color:var(--input-placeholder, var(--input-placeholder-color, var(--text-muted, #9ca3af)));opacity:1}&:hover:not(:focus):not(:disabled){border-color:var(--input-hover-border-color, var(--color-primary-light))}&:focus{border-color:var(--input-focus-border-color, var(--color-primary));background:var(--input-focus-background, var(--input-background));box-shadow:var(--input-focus-shadow, 0 0 0 3px rgba(250, 189, 47, .1))}&:disabled{opacity:var(--input-disabled-opacity, .6);background:var(--input-disabled-background, var(--color-surface-dark));color:var(--input-disabled-color, var(--text-muted));cursor:not-allowed}&:read-only{background:var(--input-readonly-background, var(--color-surface-dark));cursor:default}}&[size=xs]{--input-padding-y: .25rem;--input-padding-x: .5rem;--input-font-size: var(--text-xs, .75rem);--textarea-min-height: 3rem}&[size=sm]{--input-padding-y: .375rem;--input-padding-x: .625rem;--input-font-size: var(--text-sm, .875rem);--textarea-min-height: 4.5rem}&[size=md]{--input-padding-y: .5rem;--input-padding-x: .75rem;--input-font-size: var(--text-base, 1rem);--textarea-min-height: 6rem}&[size=lg]{--input-padding-y: .625rem;--input-padding-x: 1rem;--input-font-size: var(--text-lg, 1.125rem);--textarea-min-height: 7.5rem}&[size=xl]{--input-padding-y: .75rem;--input-padding-x: 1.25rem;--input-font-size: var(--text-xl, 1.25rem);--textarea-min-height: 9rem}&[resize=none] textarea{resize:none}&[resize=both] textarea{resize:both}&[resize=horizontal] textarea{resize:horizontal}&[resize=vertical] textarea{resize:vertical}&[required] textarea{border-left:3px solid var(--input-required-color, var(--color-warning))}&[error]{--input-border-color: var(--color-danger);--input-focus-border-color: var(--color-danger);--input-focus-shadow: 0 0 0 3px rgba(251, 73, 52, .1)}&[success]{--input-border-color: var(--color-success);--input-focus-border-color: var(--color-success);--input-focus-shadow: 0 0 0 3px rgba(34, 197, 94, .1)}&[variant=primary]{--input-border-color: var(--color-primary);--input-focus-border-color: var(--color-primary)}&[variant=secondary]{--input-border-color: var(--color-secondary);--input-focus-border-color: var(--color-secondary)}&[variant=success]{--input-border-color: var(--color-success);--input-focus-border-color: var(--color-success);--input-focus-shadow: 0 0 0 3px rgba(34, 197, 94, .1)}&[variant=warning]{--input-border-color: var(--color-warning);--input-focus-border-color: var(--color-warning);--input-focus-shadow: 0 0 0 3px rgba(249, 115, 22, .1)}&[variant=error]{--input-border-color: var(--color-danger);--input-focus-border-color: var(--color-danger);--input-focus-shadow: 0 0 0 3px rgba(251, 73, 52, .1)}&[w-full],&[wfull]{width:100%;display:block}}:where(.uix-select,uix-select){display:inline-block;width:var(--select-width, auto);box-sizing:border-box;.select-label{display:block;font-size:var(--input-label-font-size, var(--text-sm, .875rem));font-weight:var(--input-label-font-weight, var(--font-semibold, 600));margin-bottom:var(--input-label-margin, .5rem);color:var(--input-label-color, var(--text-color, #1a1a1a));letter-spacing:var(--input-label-letter-spacing, 0);text-transform:var(--input-label-text-transform, none)}.select-required{color:var(--color-danger, #ef4444);margin-left:.25rem}.select-wrapper{position:relative;background:var(--select-background, var(--input-background, var(--color-surface-light, #ffffff)));border:var(--select-border-width, var(--input-border-width, 1px)) solid var(--select-border-color, var(--input-border-color, var(--color-surface, #e5e7eb)));border-radius:var(--select-border-radius, var(--input-border-radius, var(--radius-md, .375rem)));box-shadow:var(--select-shadow, var(--input-shadow, none));transition:var( --select-transition, border-color .2s ease, background-color .2s ease, box-shadow .15s ease, transform .15s ease );&:hover:not(:focus-within){border-color:var(--select-hover-border-color, var(--input-hover-border-color, var(--color-primary-light)))}&:focus-within{border-color:var(--select-focus-border-color, var(--input-focus-border-color, var(--color-primary)));box-shadow:var(--select-focus-shadow, var(--input-focus-shadow, 0 0 0 3px rgba(250, 189, 47, .1)))}}select{appearance:none;-webkit-appearance:none;-moz-appearance:none;width:100%;height:var(--select-height, var(--input-height, 3rem));padding:var(--select-padding-y, var(--input-padding-y, .5rem)) var(--select-padding-x, var(--input-padding-x, .75rem));padding-right:calc(var(--select-padding-x, var(--input-padding-x, .75rem)) + var(--select-arrow-size, 1rem) + .5rem);font-size:var(--select-font-size, var(--input-font-size, var(--text-sm, .875rem)));font-weight:var(--select-font-weight, var(--input-font-weight, var(--font-normal, 400)));font-family:inherit;line-height:var(--select-line-height, 1.5);color:var(--select-color, var(--input-text, var(--text-color, inherit)));background:transparent;border:none;outline:none;cursor:pointer;box-sizing:border-box;transition:var(--select-transition, background-color .2s ease);option{background:var(--select-option-background, var(--color-surface-light));color:var(--select-option-color, var(--text-color));padding:var(--spacing-xs, .25rem);&:checked{background:var(--select-option-checked-background, var(--color-primary));color:var(--select-option-checked-color, var(--color-inverse))}}&::placeholder{color:var(--select-placeholder, var(--input-placeholder, var(--text-muted, #9ca3af)));opacity:1}&:focus{outline:none}}.select-wrapper .select-arrow{position:absolute;right:var(--select-padding-x, var(--input-padding-x, .75rem));top:50%;transform:translateY(-50%);width:var(--select-arrow-size, 1rem);height:var(--select-arrow-size, 1rem);color:var(--select-arrow-color, var(--input-icon, var(--text-muted)));pointer-events:none;opacity:.7;transition:opacity .2s ease,transform .2s ease}.select-wrapper:focus-within .select-arrow{opacity:1}&:has(select:disabled){.select-wrapper{opacity:var(--select-disabled-opacity, .6);cursor:not-allowed}select{background:var(--select-disabled-background, var(--input-disabled-background, var(--color-surface-dark)));color:var(--select-disabled-color, var(--text-muted));cursor:not-allowed}.select-wrapper .select-arrow{opacity:.4}}&[size=xs]{--select-height: 1.5rem;--select-padding-y: .2rem;--select-padding-x: .5rem;--select-font-size: var(--text-xs, .75rem);--select-arrow-size: .75rem}&[size=sm]{--select-height: 2rem;--select-padding-y: .3rem;--select-padding-x: .6rem;--select-font-size: var(--text-sm, .875rem);--select-arrow-size: .875rem}&[size=md]{--select-height: 2.5rem;--select-padding-y: .5rem;--select-padding-x: .75rem;--select-font-size: var(--text-base, 1rem);--select-arrow-size: 1rem}&[size=lg]{--select-height: 3rem;--select-padding-y: .625rem;--select-padding-x: 1rem;--select-font-size: var(--text-lg, 1.125rem);--select-arrow-size: 1.25rem}&[size=xl]{--select-height: 3.5rem;--select-padding-y: .75rem;--select-padding-x: 1.25rem;--select-font-size: var(--text-xl, 1.25rem);--select-arrow-size: 1.5rem}&[required] .select-wrapper{border-left:3px solid var(--select-required-color, var(--color-warning))}&[error]{--select-border-color: var(--input-border-error, var(--color-danger));--select-focus-border-color: var(--input-border-error, var(--color-danger));--select-focus-shadow: 0 0 0 3px rgba(251, 73, 52, .1)}&[success]{--select-border-color: var(--color-success);--select-focus-border-color: var(--color-success);--select-focus-shadow: 0 0 0 3px rgba(34, 197, 94, .1)}&[variant=primary]{--select-border-color: var(--color-primary);--select-focus-border-color: var(--color-primary)}&[variant=secondary]{--select-border-color: var(--color-secondary);--select-focus-border-color: var(--color-secondary)}&[variant=success]{--select-border-color: var(--color-success);--select-focus-border-color: var(--color-success);--select-focus-shadow: 0 0 0 3px rgba(34, 197, 94, .1)}&[variant=warning]{--select-border-color: var(--color-warning);--select-focus-border-color: var(--color-warning);--select-focus-shadow: 0 0 0 3px rgba(249, 115, 22, .1)}&[variant=error]{--select-border-color: var(--input-border-error, var(--color-danger));--select-focus-border-color: var(--input-border-error, var(--color-danger));--select-focus-shadow: 0 0 0 3px rgba(251, 73, 52, .1)}&[w-full],&[wfull]{width:100%;display:block}}:where(.uix-label,uix-label){display:block;.label{display:block;font-size:var(--label-font-size, var(--text-sm, .875rem));font-weight:var(--label-font-weight, var(--font-semibold, 600));margin-bottom:var(--label-margin, .5rem);color:var(--label-color, var(--text-color, #1a1a1a));letter-spacing:var(--label-letter-spacing, 0);text-transform:var(--label-text-transform, none);line-height:var(--label-line-height, 1.4);cursor:pointer}.label-required{color:var(--color-danger, #ef4444);margin-left:.25rem}&[inline]{display:inline;.label{display:inline;margin-bottom:0}}&[size=xs]{--label-font-size: var(--text-xs, .75rem)}&[size=sm]{--label-font-size: var(--text-sm, .875rem)}&[size=md]{--label-font-size: var(--text-base, 1rem)}&[size=lg]{--label-font-size: var(--text-lg, 1.125rem)}&[size=xl]{--label-font-size: var(--text-xl, 1.25rem)}}:where(.uix-container,uix-container){display:block;box-sizing:border-box;background:var(--container-background, var(--color-surface-lighter));border:1px solid var(--container-border-color, var(--color-surface-dark));border-radius:var(--container-border-radius, var(--radius-md, .375rem));overflow:var(--container-overflow, visible);&[padding=none]{padding:0}&[padding=sm]{padding:var(--spacing-sm, .5rem)}&[padding=md]{padding:var(--spacing-md, .75rem) var(--spacing-lg, 1rem)}&[padding=lg]{padding:var(--spacing-lg, 1rem) var(--spacing-xl, 1.5rem)}&[overflow=visible]{--container-overflow: visible}&[overflow=hidden]{--container-overflow: hidden}&[overflow=auto]{--container-overflow: auto}&[overflow=scroll]{--container-overflow: scroll}&[variant=default]{--container-background: inherit;--container-border-color: var(--color-surface-dark)}&[variant=filled]{--container-background: var(--color-surface-light);--container-border-color: var(--color-surface)}&[variant=outlined]{--container-background: transparent;--container-border-color: var(--color-surface)}&[variant=elevated]{--container-background: var(--color-surface-lighter);--container-border-color: var(--color-surface-dark);box-shadow:0 1px 3px #0000001f,0 1px 2px #0000003d;&:hover{box-shadow:0 3px 6px #00000029,0 3px 6px #0000003b;transition:box-shadow .3s ease}}}:where(.uix-card,uix-card){display:flex;flex-direction:column;overflow:hidden;&::part(body){display:flex;flex-direction:column;flex:1;background:var(--card-background, inherit)}>[slot=header]{margin:0;display:flex;padding:var( --card-header-padding, var(--spacing-md, .75rem) var(--spacing-lg, 1rem) );border-bottom-width:var(--card-header-border-width, 0);border-bottom-style:solid;border-bottom-color:var( --card-header-border-color, var(--card-border-primary, #504945) );background:var(--card-header-background-color, inherit)}>[slot=footer]{display:flex;padding:var( --card-footer-padding, var(--spacing-md, .75rem) var(--spacing-lg, 1rem) );border-top-width:var(--card-footer-border-width, 0);border-top-style:var(--card-footer-border-style, solid);border-top-color:var( --card-footer-border-color, var(--color-surface, #504945) );background:var(--card-footer-background-color, inherit);flex-direction:row;gap:var(--spacing-sm, .5rem);align-items:center;justify-content:flex-end}&[style*=--card-gradient-from]::part(body){background:linear-gradient(135deg,var(--card-gradient-from),var(--card-gradient-to, var(--card-gradient-from)))}&[padding=none]::part(body){padding:0}&[padding=sm]::part(body){padding:var(--spacing-sm, .5rem)}&[padding=md]::part(body){padding:var(--spacing-md, .75rem) var(--spacing-lg, 1rem)}&[padding=lg]::part(body){padding:var(--spacing-lg, 1rem) var(--spacing-xl, 1.5rem)}&[borderWidth=none]{border-width:0}&[borderWidth="1"]{border-width:1px}&[borderWidth="2"]{border-width:2px}&[borderWidth="3"]{border-width:3px}&[borderStyle=solid]{border-style:solid}&[borderStyle=dashed]{border-style:dashed}&[borderStyle=dotted]{border-style:dotted}&[gap=none]::part(body){gap:0}&[gap=xs]::part(body){gap:var(--spacing-xs, .25rem)}&[gap=sm]::part(body){gap:var(--spacing-sm, .5rem)}&[gap=md]::part(body){gap:var(--spacing-md, .75rem)}&[gap=lg]::part(body){gap:var(--spacing-lg, 1rem)}&[gap=xl]::part(body){gap:var(--spacing-xl, 1.5rem)}&[shadow=sm]{box-shadow:var(--shadow-sm, 0 1px 2px 0 rgba(0, 0, 0, .05))}&[shadow=md]{box-shadow:var( --shadow-md, 0 4px 6px -1px rgba(0, 0, 0, .1), 0 2px 4px -1px rgba(0, 0, 0, .06) )}&[shadow=lg]{box-shadow:var( --shadow-lg, 0 10px 15px -3px rgba(0, 0, 0, .1), 0 4px 6px -2px rgba(0, 0, 0, .05) )}&[hover]{transition:all .2s ease;cursor:pointer;&:hover{border-color:var(--card-border-hover, #83a598)}&[shadow=sm]:hover{box-shadow:var( --shadow-md, 0 4px 6px -1px rgba(0, 0, 0, .1), 0 2px 4px -1px rgba(0, 0, 0, .06) )}&[shadow=md]:hover{box-shadow:var( --shadow-lg, 0 10px 15px -3px rgba(0, 0, 0, .1), 0 4px 6px -2px rgba(0, 0, 0, .05) )}&[shadow=lg]:hover{box-shadow:var( --shadow-xl, 0 20px 25px -5px rgba(0, 0, 0, .1), 0 10px 10px -5px rgba(0, 0, 0, .04) )}}}:root{--font-family: Manrope;--font-icon-family: lucide;--font-normal: 400;--font-medium: 500;--font-semibold: 600;--font-bold: 700;--font-black: 900;--link-color: var(--text-color);--text-color: #1a1a1a;--text-muted: #6b7280;--text-xs: .75rem;--text-sm: .875rem;--text-base: 1rem;--text-lg: 1.125rem;--text-xl: 1.25rem;--text-2xl: 1.5rem;--text-3xl: 1.875rem;--background-color: #faf5f0;--color-primary: #fabd2f;--color-primary-lighter: #fde8a3;--color-primary-light: #fcd875;--color-primary-dark: #d79921;--color-primary-darker: #b57614;--color-secondary: #ec4899;--color-secondary-lighter: #fbcfe8;--color-secondary-light: #f9a8d4;--color-secondary-dark: #db2777;--color-secondary-darker: #be185d;--color-success: #22c55e;--color-success-lighter: #bbf7d0;--color-success-light: #86efac;--color-success-dark: #16a34a;--color-success-darker: #15803d;--color-danger: #ef4444;--color-danger-lighter: #fecaca;--color-danger-light: #fca5a5;--color-danger-dark: #dc2626;--color-danger-darker: #b91c1c;--color-warning: #f97316;--color-warning-lighter: #fed7aa;--color-warning-light: #fdba74;--color-warning-dark: #ea580c;--color-warning-darker: #c2410c;--color-info: #3b82f6;--color-info-lighter: #bfdbfe;--color-info-light: #93c5fd;--color-info-dark: #2563eb;--color-info-darker: #1d4ed8;--color-surface: #ffffff;--color-surface-light: #faf5f0;--color-surface-lighter: #ffffff;--color-surface-dark: #f5f0eb;--color-surface-darker: #ebe5df;--color-hover: #d79921;--color-hover-lighter: hsl(40 73% 69%);--color-hover-light: hsl(40 73% 59%);--color-hover-dark: hsl(40 73% 39%);--color-hover-darker: hsl(40 73% 29%);--color-focus: #fabd2f;--color-focus-lighter: hsl(42 95% 78%);--color-focus-light: hsl(42 95% 68%);--color-focus-dark: hsl(42 95% 48%);--color-focus-darker: hsl(42 95% 38%);--color-inverse: #1a1a1a;--color-inverse-lighter: #525252;--color-inverse-light: #404040;--color-inverse-dark: #0a0a0a;--color-inverse-darker: #000000;--spacing-xs: .25rem;--spacing-sm: .5rem;--spacing-md: .75rem;--spacing-lg: 1rem;--spacing-xl: 1.5rem;--spacing-2xl: 2rem;--spacing-3xl: 3rem;--spacing-4xl: 5rem;--leading-tight: 1.2;--leading-normal: 1.5;--leading-relaxed: 1.75;--radius-none: 0;--radius-sm: .5rem;--radius-md: .75rem;--radius-lg: 1rem;--radius-xl: 1.5rem;--radius-full: 9999px;--shadow-none: none;--shadow-sm: 2px 2px 0px 0px rgba(0,0,0,1);--shadow-md: 4px 4px 0px 0px rgba(0,0,0,1);--shadow-lg: 6px 6px 0px 0px rgba(0,0,0,1);--shadow-xl: 8px 8px 0px 0px rgba(0,0,0,1);--shadow-2xl: 12px 12px 0px 0px rgba(0,0,0,1);--button-border-size: 3px;--button-border-color: black;--button-border-radius: .75rem;--button-shadow: 4px 4px 0px 0px rgba(0,0,0,1);--button-hover-shadow: 2px 2px 0px 0px rgba(0,0,0,1);--button-active-shadow: none;--button-hover-translate-x: -2px;--button-hover-translate-y: -2px;--button-active-translate-x: 2px;--button-active-translate-y: 2px;--button-font-weight: 900;--button-text-transform: uppercase;--input-background: #ffffff;--input-background-focus: #ffffff;--input-background-disabled: #f5f5f5;--input-border-color: #000000;--input-border-width: 3px;--input-border-radius: .75rem;--input-border-focus: #000000;--input-border-error: #ef4444;--input-text: #1a1a1a;--input-placeholder: #9ca3af;--input-icon: #6b7280;--input-shadow: 4px 4px 0px 0px rgba(0,0,0,1);--input-focus-shadow: 6px 6px 0px 0px rgba(0,0,0,1);--checkbox-border-width: 3px;--checkbox-border-color: #000000;--checkbox-border-radius: .375rem;--checkbox-shadow: 3px 3px 0px 0px rgba(0,0,0,1);--checkbox-hover-border-color: #000000;--checkbox-checked-background-color: #fabd2f;--checkbox-checked-border-color: #000000;--checkbox-label-font-weight: 600;--label-font-size: 1rem;--label-font-weight: 700;--label-color: #1a1a1a;--label-letter-spacing: .05em;--label-text-transform: uppercase;--label-margin: .5rem;--tabs-background: #ffffff;--tabs-border-color: #000000;--tabs-border-width: 3px;--tabs-border-radius: .75rem;--tabs-shadow: 4px 4px 0px 0px rgba(0,0,0,1);--tabs-list-background: #f5f5f5;--tabs-list-border-color: #000000;--tabs-tab-padding: 1rem 1.5rem;--tabs-tab-gap: .5rem;--tabs-tab-font-size: .875rem;--tabs-tab-font-weight: 900;--tabs-tab-text-transform: uppercase;--tabs-tab-letter-spacing: .05em;--tabs-tab-color: #6b7280;--tabs-tab-color-hover: #1a1a1a;--tabs-tab-color-active: #1a1a1a;--tabs-tab-background: transparent;--tabs-tab-background-hover: #e5e5e5;--tabs-tab-background-active: #ffffff;--tabs-tab-border-width: 3px;--tabs-tab-border-active: #000000;--card-background: #ffffff;--card-border: #000000;--card-border-width: 3px;--card-border-hover: #000000;--card-text: #1a1a1a;--card-text-muted: #6b7280;--card-header-background: transparent;--card-header-border: #000000;--card-header-padding: .75rem 1rem;--card-footer-background: transparent;--card-footer-border: #000000;--card-footer-border-style: solid;--card-footer-padding: .75rem 1rem;--card-icon-background: #f5f5f5;--card-icon-size: 3rem;--card-icon-border-radius: .75rem;--card-tag-background: #fabd2f;--card-tag-text: #1a1a1a;--card-tag-padding: .25rem .5rem;--card-tag-border-radius: .5rem;--modal-background: #ffffff;--modal-border-width: 3px;--modal-border-color: #000000;--modal-border-radius: 1rem;--modal-shadow: 8px 8px 0px 0px rgba(0,0,0,1);--modal-color: #1a1a1a;--modal-overlay: rgba(0, 0, 0, .5);--modal-header-padding: 1.25rem 1.5rem;--modal-header-border-width: 3px;--modal-header-background: #ffffff;--modal-header-font-size: 1.25rem;--modal-header-font-weight: 900;--modal-header-color: #1a1a1a;--modal-body-padding: 1.5rem;--modal-body-color: #4b5563;--modal-footer-padding: 1rem 1.5rem;--modal-footer-border-width: 3px;--modal-footer-background: #f9fafb;--panel-background: #ffffff;--panel-background-hover: #f5f5f5;--panel-border: #000000;--panel-header-background: transparent;--panel-header-text: #1a1a1a;--panel-header-border: #000000;--dropdown-background: #ffffff;--dropdown-background-hover: #f5f5f5;--dropdown-background-active: #e5e5e5;--dropdown-border: #000000;--dropdown-text: #1a1a1a;--dropdown-text-muted: #6b7280;--dropdown-separator: #e5e5e5;--dropdown-shadow: 4px 4px 0px 0px rgba(0,0,0,1);--badge-default-background: #f5f5f5;--badge-default-text: #1a1a1a;--badge-default-border: #000000;--badge-success-background: #22c55e;--badge-success-text: #ffffff;--badge-success-border: #000000;--badge-danger-background: #ef4444;--badge-danger-text: #ffffff;--badge-danger-border: #000000;--badge-warning-background: #f97316;--badge-warning-text: #ffffff;--badge-warning-border: #000000;--badge-info-background: #3b82f6;--badge-info-text: #ffffff;--badge-info-border: #000000;--list-background: transparent;--list-background-hover: #f5f5f5;--list-background-active: #e5e5e5;--list-background-selected: #fabd2f;--list-border: #000000;--list-border-hover: #000000;--list-text: #1a1a1a;--list-text-muted: #6b7280;--tree-background: transparent;--tree-background-hover: #f5f5f5;--tree-background-selected: #fabd2f;--tree-border: #000000;--tree-indent: 1rem;--tree-icon: #6b7280;--tree-icon-hover: #1a1a1a;--table-border-width: 3px;--table-border-color: #000000;--table-border-radius: 1rem;--table-shadow: 4px 4px 0px 0px rgba(0,0,0,1);--table-header-background: #ffffff;--table-header-color: #1a1a1a;--table-header-font-weight: 900;--table-header-font-size: .75rem;--table-header-text-transform: uppercase;--table-row-background: #ffffff;--table-row-hover-background: #fef3c7;--table-cell-padding: 1rem 1.25rem;--table-cell-font-size: .875rem;--table-cell-color: #4b5563;--pagination-border-width: 3px;--pagination-border-color: #000000;--pagination-border-radius: .75rem;--pagination-background: #ffffff;--pagination-color: #1a1a1a;--pagination-font-weight: 700;--pagination-shadow: 3px 3px 0px 0px rgba(0,0,0,1);--pagination-hover-background: #f5f5f5;--pagination-hover-border-color: #000000;--pagination-hover-shadow: 2px 2px 0px 0px rgba(0,0,0,1);--pagination-hover-transform: translate(-1px, -1px);--pagination-active-background: #fabd2f;--pagination-active-border-color: #000000;--pagination-active-color: #000000;--pagination-active-shadow: 3px 3px 0px 0px rgba(0,0,0,1);--pagination-nav-font-weight: 900;--sidebar-background: #ffffff;--sidebar-border-width: 3px;--sidebar-border-color: #000000;--sidebar-border-radius: 0;--sidebar-shadow: none;--sidebar-width: 256px;--sidebar-collapsed-width: 80px;--sidebar-header-padding: 1rem;--sidebar-header-background: #ffffff;--sidebar-header-border-width: 3px;--sidebar-header-font-weight: 900;--sidebar-content-padding: .75rem;--sidebar-footer-padding: .75rem;--sidebar-footer-background: #ffffff;--sidebar-footer-border-width: 3px;--sidebar-toggle-background: transparent;--sidebar-toggle-hover-background: #f5f5f5;--sidebar-toggle-border-radius: .5rem;--sidebar-item-padding: .75rem 1rem;--sidebar-item-border-radius: .75rem;--sidebar-item-font-weight: 500;--sidebar-item-color: #4b5563;--sidebar-item-hover-background: #f5f5f5;--sidebar-item-hover-color: #1a1a1a;--sidebar-item-active-background: #000000;--sidebar-item-active-color: #ffffff;--sidebar-item-active-font-weight: 600}:root{--font-family-base: "Manrope", sans-serif}body{font-family:var(--font-family-base)}
`,mimeType:"text/css"}};self.addEventListener("install",e=>e.waitUntil(self.skipWaiting())),self.addEventListener("activate",e=>e.waitUntil(self.clients.claim())),self.addEventListener("fetch",e=>{let t=new URL(e.request.url).pathname;t.startsWith("/npm/")&&(t="/"+t.slice(5));const n=FILE_BUNDLE[t];n&&e.respondWith(new Response(n.content,{headers:{"Content-Type":n.mimeType||"application/javascript"}}))});
